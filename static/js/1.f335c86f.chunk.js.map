{"version":3,"sources":["../node_modules/zrender/lib/core/util.js","../node_modules/echarts/lib/echarts.js","../node_modules/echarts/lib/util/graphic.js","../node_modules/echarts/lib/util/number.js","../node_modules/echarts/lib/config.js","../node_modules/echarts/lib/util/layout.js","../node_modules/echarts/lib/util/model.js","../node_modules/echarts/lib/model/Series.js","../node_modules/echarts/lib/util/format.js","../node_modules/zrender/lib/core/BoundingRect.js","../node_modules/echarts/lib/model/Model.js","../node_modules/zrender/lib/core/vector.js","../node_modules/echarts/lib/model/Component.js","../node_modules/echarts/lib/data/List.js","../node_modules/zrender/lib/core/matrix.js","../node_modules/echarts/lib/util/symbol.js","../node_modules/echarts/lib/CoordinateSystem.js","../node_modules/zrender/lib/graphic/Path.js","../node_modules/echarts/lib/view/Chart.js","../node_modules/echarts/lib/chart/helper/createListFromArray.js","../node_modules/zrender/lib/core/env.js","../node_modules/echarts/lib/lang.js","../node_modules/echarts/lib/coord/Axis.js","../node_modules/echarts/lib/component/axis/AxisBuilder.js","../node_modules/echarts/lib/data/DataDiffer.js","../node_modules/echarts/lib/coord/axisHelper.js","../node_modules/zrender/lib/tool/color.js","../node_modules/echarts/lib/util/throttle.js","../node_modules/echarts/lib/component/axis/AxisView.js","../node_modules/zrender/lib/contain/text.js","../node_modules/zrender/lib/core/event.js","../node_modules/echarts/lib/data/helper/dataStackHelper.js","../node_modules/zrender/lib/graphic/Text.js","../node_modules/echarts/lib/coord/axisModelCommonMixin.js","../node_modules/echarts/lib/data/helper/sourceHelper.js","../node_modules/zrender/lib/graphic/Image.js","../node_modules/echarts/lib/model/mixin/makeStyleMapper.js","../node_modules/echarts/lib/chart/helper/createRenderPlanner.js","../node_modules/echarts/lib/data/helper/createDimensions.js","../node_modules/zrender/lib/core/log.js","../node_modules/echarts/lib/layout/barGrid.js","../node_modules/zrender/lib/core/curve.js","../node_modules/zrender/lib/mixin/Eventful.js","../node_modules/zrender/lib/container/Group.js","../node_modules/zrender/lib/core/PathProxy.js","../node_modules/zrender/lib/core/bbox.js","../node_modules/echarts/lib/data/helper/dimensionHelper.js","../node_modules/echarts/lib/component/title.js","../node_modules/zrender/lib/zrender.js","../node_modules/zrender/lib/mixin/Transformable.js","../node_modules/zrender/lib/graphic/helper/text.js","../node_modules/echarts/lib/view/Component.js","../node_modules/zrender/lib/graphic/IncrementalDisplayable.js","../node_modules/echarts/lib/model/mixin/dataFormat.js","../node_modules/echarts/lib/coord/geo/mapDataStorage.js","../node_modules/echarts/lib/util/clazz.js","../node_modules/echarts/lib/data/helper/dataProvider.js","../node_modules/zrender/lib/graphic/Displayable.js","../node_modules/echarts/lib/util/component.js","../node_modules/zrender/lib/graphic/Gradient.js","../node_modules/echarts/lib/scale/Interval.js","../node_modules/echarts-for-react/lib/core.js","../node_modules/zrender/lib/graphic/shape/Rect.js","../node_modules/zrender/lib/graphic/LinearGradient.js","../node_modules/zrender/lib/graphic/mixin/RectText.js","../node_modules/zrender/lib/contain/line.js","../node_modules/zrender/lib/contain/quadratic.js","../node_modules/echarts/lib/component/dataset.js","../node_modules/zrender/lib/tool/parseSVG.js","../node_modules/echarts/lib/export.js","../node_modules/echarts/lib/scale/Log.js","../node_modules/echarts/lib/coord/geo/parseGeoJson.js","../node_modules/echarts/lib/coord/geo/Region.js","../node_modules/zrender/lib/contain/polygon.js","../node_modules/echarts/lib/data/Source.js","../node_modules/echarts/lib/data/helper/sourceType.js","../node_modules/zrender/lib/config.js","../node_modules/zrender/lib/graphic/constant.js","../node_modules/echarts/lib/scale/Scale.js","../node_modules/echarts/lib/component/axisPointer/modelHelper.js","../node_modules/zrender/lib/core/timsort.js","../node_modules/zrender/lib/graphic/Style.js","../node_modules/zrender/lib/graphic/helper/image.js","../node_modules/zrender/lib/graphic/helper/subPixelOptimize.js","../node_modules/echarts/lib/stream/task.js","../node_modules/zrender/lib/core/guid.js","../node_modules/zrender/lib/core/dom.js","../node_modules/zrender/lib/Element.js","../node_modules/zrender/lib/animation/Animator.js","../node_modules/zrender/lib/core/LRU.js","../node_modules/zrender/lib/graphic/helper/fixShadow.js","../node_modules/zrender/lib/graphic/Pattern.js","../node_modules/zrender/lib/animation/requestAnimationFrame.js","../node_modules/zrender/lib/graphic/helper/roundRect.js","../node_modules/echarts/lib/model/Global.js","../node_modules/zrender/lib/tool/path.js","../node_modules/zrender/lib/contain/util.js","../node_modules/zrender/lib/contain/windingLine.js","../node_modules/zrender/lib/graphic/shape/Circle.js","../node_modules/zrender/lib/graphic/helper/fixClipWithShadow.js","../node_modules/zrender/lib/graphic/shape/Polygon.js","../node_modules/zrender/lib/graphic/helper/poly.js","../node_modules/zrender/lib/graphic/shape/Polyline.js","../node_modules/zrender/lib/graphic/shape/Line.js","../node_modules/echarts/lib/model/mixin/colorPalette.js","../node_modules/echarts/lib/ExtensionAPI.js","../node_modules/echarts/lib/data/DataDimensionInfo.js","../node_modules/echarts/lib/data/helper/completeDimensions.js","../node_modules/echarts/lib/data/OrdinalMeta.js","../node_modules/echarts/lib/scale/helper.js","../node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","../node_modules/size-sensor/lib/debounce.js","../node_modules/size-sensor/lib/constant.js","../node_modules/zrender/lib/Handler.js","../node_modules/zrender/lib/mixin/Draggable.js","../node_modules/zrender/lib/core/fourPointsTransform.js","../node_modules/zrender/lib/core/GestureMgr.js","../node_modules/zrender/lib/Storage.js","../node_modules/zrender/lib/mixin/Animatable.js","../node_modules/zrender/lib/animation/Clip.js","../node_modules/zrender/lib/animation/easing.js","../node_modules/zrender/lib/Painter.js","../node_modules/zrender/lib/Layer.js","../node_modules/zrender/lib/animation/Animation.js","../node_modules/zrender/lib/dom/HandlerProxy.js","../node_modules/echarts/lib/model/mixin/lineStyle.js","../node_modules/echarts/lib/model/mixin/areaStyle.js","../node_modules/echarts/lib/model/mixin/textStyle.js","../node_modules/zrender/lib/contain/path.js","../node_modules/zrender/lib/contain/cubic.js","../node_modules/zrender/lib/contain/arc.js","../node_modules/zrender/lib/tool/transformPath.js","../node_modules/zrender/lib/graphic/shape/Sector.js","../node_modules/zrender/lib/graphic/shape/Ring.js","../node_modules/zrender/lib/graphic/helper/smoothSpline.js","../node_modules/zrender/lib/graphic/helper/smoothBezier.js","../node_modules/zrender/lib/graphic/shape/BezierCurve.js","../node_modules/zrender/lib/graphic/shape/Arc.js","../node_modules/zrender/lib/graphic/CompoundPath.js","../node_modules/zrender/lib/graphic/RadialGradient.js","../node_modules/echarts/lib/model/mixin/itemStyle.js","../node_modules/echarts/lib/model/mixin/boxLayout.js","../node_modules/echarts/lib/model/globalDefault.js","../node_modules/echarts/lib/model/OptionManager.js","../node_modules/echarts/lib/preprocessor/backwardCompat.js","../node_modules/echarts/lib/preprocessor/helper/compatStyle.js","../node_modules/echarts/lib/processor/dataStack.js","../node_modules/echarts/lib/visual/seriesColor.js","../node_modules/echarts/lib/visual/aria.js","../node_modules/echarts/lib/loading/default.js","../node_modules/echarts/lib/stream/Scheduler.js","../node_modules/echarts/lib/theme/light.js","../node_modules/echarts/lib/theme/dark.js","../node_modules/zrender/lib/graphic/shape/Ellipse.js","../node_modules/echarts/lib/helper.js","../node_modules/echarts/lib/model/referHelper.js","../node_modules/echarts/lib/scale/Ordinal.js","../node_modules/echarts/lib/scale/Time.js","../node_modules/echarts/lib/coord/axisTickLabelBuilder.js","../node_modules/fast-deep-equal/index.js","../node_modules/size-sensor/lib/index.js","../node_modules/size-sensor/lib/sensorPool.js","../node_modules/size-sensor/lib/id.js","../node_modules/size-sensor/lib/sensors/index.js","../node_modules/size-sensor/lib/sensors/object.js","../node_modules/size-sensor/lib/sensors/resizeObserver.js","../node_modules/echarts-for-react/lib/utils.js"],"names":["BUILTIN_OBJECT","TYPED_ARRAY","objToString","Object","prototype","toString","arrayProto","Array","nativeForEach","forEach","nativeFilter","filter","nativeSlice","slice","nativeMap","map","nativeReduce","reduce","methods","clone","source","result","typeStr","call","isPrimitive","i","len","length","Ctor","constructor","from","isDom","key","hasOwnProperty","merge","target","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","defaults","overlay","_ctx","createCanvas","each","obj","cb","context","bind","func","args","arguments","apply","concat","value","type","nodeType","ownerDocument","document","createElement","HashMap","isArr","this","data","thisMap","visit","set","get","removeKey","exports","$override","name","fn","mergeAll","targetAndSources","extend","getContext","indexOf","array","inherits","clazz","baseClazz","clazzPrototype","F","prop","superClass","mixin","isArrayLike","push","memo","find","curry","isFunction","isString","isTypedArray","eqNaN","retrieve","values","retrieve2","value0","value1","retrieve3","value2","Function","normalizeCssArray","val","assert","condition","message","Error","trim","str","replace","setAsPrimitive","createHashMap","concatArray","a","b","newArray","offset","noop","require","__DEV__","zrender","zrUtil","colorTool","env","timsort","Eventful","GlobalModel","ExtensionAPI","CoordinateSystemManager","OptionManager","backwardCompat","dataStack","ComponentModel","SeriesModel","ComponentView","ChartView","graphic","modelUtil","throttle","seriesColor","aria","loadingDefault","Scheduler","lightTheme","darkTheme","mapDataStorage","parseClassType","PRIORITY","PROCESSOR","FILTER","SERIES_FILTER","STATISTIC","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","IN_MAIN_PROCESS","ACTION_REG","createRegisterEventWithLowercaseName","method","ignoreDisposed","eventName","handler","_disposed","toLowerCase","id","MessageCenter","ECharts","dom","theme","opts","themeStorage","group","_dom","zr","_zr","init","renderer","devicePixelRatio","width","height","_throttledZrFlush","flush","_theme","_chartsViews","_chartsMap","_componentsViews","_componentsMap","_coordSysMgr","api","_api","ecInstance","coordSysMgr","getCoordinateSystems","getComponentByElement","el","modelInfo","__ecComponentInfo","_model","getComponent","mainType","index","parent","createExtensionAPI","prioritySortFunc","__prio","visualFuncs","dataProcessorFuncs","_scheduler","_ecEventProcessor","EventProcessor","_messageCenter","_initEvents","resize","_pendingActions","animation","on","_onframe","ecIns","trigger","isFinished","unfinished","bindRenderedEvent","off","one","echartsProto","doConvertPixel","methodName","finder","ecModel","coordSysList","parseFinder","coordSys","scheduler","silent","prepare","updateMethods","update","flushPendingActions","triggerUpdatedEvent","remainTime","startTime","Date","performSeriesTasks","performDataProcessorTasks","updateStreamModes","performVisualTasks","renderSeries","getDom","getZr","setOption","option","notMerge","lazyUpdate","optionManager","optionPreprocessorFuncs","setTheme","console","error","getModel","getOption","getWidth","getHeight","getDevicePixelRatio","painter","dpr","window","getRenderedCanvas","canvasSupported","pixelRatio","backgroundColor","getSvgDataURL","svgSupported","list","storage","getDisplayList","stopAnimation","toDataURL","getDataURL","excludeComponents","excludesComponentViews","self","componentType","eachComponent","component","view","__viewId","ignore","url","getType","getConnectedDataURL","isSvg","groupId","mathMin","Math","min","mathMax","max","connectedGroups","left","Infinity","top","right","bottom","canvasList","instances","chart","canvas","getSvgDom","innerHTML","boundingRect","getBoundingClientRect","targetCanvas","content","item","x","y","getSvgRoot","connectedBackgroundColor","setBackgroundColor","refreshImmediately","add","Rect","shape","style","fill","img","Image","image","convertToPixel","convertFromPixel","containPixel","models","model","coordinateSystem","containPoint","getVisual","visualType","defaultMainType","seriesModel","getData","dataIndexInside","indexOfRawIndex","dataIndex","getItemVisual","getViewOfComponentModel","componentModel","getViewOfSeriesModel","prepareAndUpdate","payload","restoreData","create","clearColorPalette","render","colorArr","parse","stringify","performPostUpdateFuncs","updateTransform","componentDirtyList","componentView","__alive","seriesDirtyMap","eachSeries","chartView","uid","setDirty","dirtyMap","updateView","markUpdateMethod","updateVisual","updateLayout","restorePipelines","prepareStageTasks","prepareView","plan","updateDirectly","subType","query","excludeSeriesId","normalizeToArray","callView","__model","chartsMap","doDispatchAction","payloadType","escapeConnect","actionWrap","actions","actionInfo","cptType","split","updateMethod","pop","payloads","batched","batch","eventObj","eventObjBatch","isHighDown","batchItem","action","event","main","sub","pendingActions","shift","isComponent","viewList","viewMap","doPrepare","viewId","classType","getClass","__id","componentIndex","renderTask","dispose","remove","splice","dirtyList","updateZ","renderComponents","updatePayload","dirty","perform","getPerformArgs","blendMode","traverse","isGroup","blend","setStyle","eachPendingDisplayable","displayable","updateBlend","elCount","node","preventUsingHoverLayer","useHoverLayer","updateHoverLayerStatus","postUpdateFuncs","_loadingFX","optionChanged","resetOption","showLoading","cfg","hideLoading","loadingEffects","makeActionFromEvent","eventActionMap","dispatchAction","opt","browser","weChat","appendData","params","seriesIndex","getSeriesByIndex","MOUSE_EVENT_NAMES","z","zlevel","eventInfo","eveName","e","dataModel","getDataParams","dataType","eventData","targetEl","packedEvent","zrEventfulCallAtLast","actionType","eventType","isDisposed","clear","series","setAttribute","DOM_ATTRIBUTE_KEY","normalizeQuery","cptQuery","dataQuery","otherQuery","condCptType","suffixes","dataKeys","reserved","propSuffix","suffixPos","lastIndexOf","check","filterForExposedEvent","host","propOnHost","afterTrigger","idBase","groupIdBase","disConnect","disconnect","getInstanceByDom","getAttribute","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerAction","test","registerVisual","visualTask","targetList","defaultPriority","stageHandler","wrapStageHandler","__raw","registerLoading","loadingFx","version","dependencies","existInstance","STATUS_KEY","updateConnectedChartsStatus","charts","status","otherCharts","otherChart","enableConnect","connect","getInstanceById","registerPostUpdate","postUpdateFunc","registerCoordinateSystem","CoordinateSystem","register","getCoordinateSystemDimensions","coordSysCreator","getDimensionsInfo","dimensions","registerLayout","layoutTask","extendComponentModel","extendComponentView","extendSeriesModel","extendChartView","setCanvasCreator","creator","registerMap","mapName","geoJson","specialAreas","getMap","records","retrieveMap","geoJSON","dataTool","___ec_export","pathTool","matrix","vector","Path","Transformable","ZImage","Group","Text","Circle","Sector","Ring","Polygon","Polyline","Line","BezierCurve","Arc","CompoundPath","LinearGradient","RadialGradient","BoundingRect","IncrementalDisplayable","subPixelOptimizeUtil","EMPTY_OBJ","_highlightNextDigit","_highlightKeyMap","_customShapeMap","registerShape","ShapeClass","makePath","pathData","rect","layout","path","createFromString","centerGraphic","getBoundingRect","resizePath","aspect","mergePath","applyTransform","m","calculateTransform","subPixelOptimize","hasFillOrStroke","fillOrStroke","liftedColorMap","liftedColorCount","singleEnterEmphasis","hoverStl","__hoverStl","__highlighted","__zr","elTarget","targetStyle","addHover","rollbackDefaultTextStyle","__hoverStlDirty","hoverStyle","normalStyle","__cachedNormalStl","__cachedNormalZ2","z2","elStyle","stroke","cacheElementStl","extendFrom","setDefaultHoverFillStroke","applyDefaultTextStyle","color","liftedColor","lift","liftColor","singleEnterNormal","highlighted","removeHover","normalStl","normalZ2","traverseUpdate","updater","commonParam","fromState","toState","child","__highDownOnUpdate","setElementHoverStyle","onElementMouseOver","shouldSilent","__highByOuter","onElementMouseOut","onElementEmphasisEvent","highlightDigit","onElementNormalEvent","__highDownSilentOnTouch","zrByTouch","setAsHighDownDispatcher","asDispatcher","disable","highDownSilentOnTouch","highDownOnUpdate","__highDownDispatcher","setTextStyle","textStyle","textStyleModel","specifiedTextStyle","isEmphasis","setTextStyleCommon","isRectText","textPosition","getTextPosition","getShallow","textOffset","labelRotate","PI","textRotation","textDistance","richResult","globalTextStyle","richItemNames","richItemNameMap","rich","parentModel","getRichItemNames","richTextStyle","setTokenTextStyle","forceRich","isBlock","textFill","getAutoColor","textStroke","textBorderColor","textStrokeWidth","textBorderWidth","insideRollbackOpt","autoColor","fontStyle","fontWeight","fontSize","fontFamily","textAlign","textVerticalAlign","textLineHeight","textWidth","textHeight","textTag","disableBox","textBackgroundColor","textPadding","textBorderRadius","textBoxShadowColor","textBoxShadowBlur","textBoxShadowOffsetX","textBoxShadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","insideRollback","useInsideStyle","useInsideStyleCache","useAutoColorCache","animateOrSetProps","isUpdate","props","animatableModel","isAnimationEnabled","postfix","duration","animationEasing","animationDelay","getAnimationDelayParams","animateTo","attr","updateProps","transform","invert","getLocalTransform","lineLineIntersect","a1x","a1y","a2x","a2y","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","crossProduct2d","b1a1x","b1a1y","q","p","x1","y1","x2","y2","Z2_EMPHASIS_LIFT","CACHED_LABEL_STYLE_PROPERTIES","extendShape","extendPath","extendFromString","getShapeClass","makeImage","imageUrl","onload","subPixelOptimizeLine","param","subPixelOptimizeRect","setHoverStyle","isHighDownDispatcher","getHighlightDigit","highlightKey","setLabelStyle","emphasisStyle","normalModel","emphasisModel","normalSpecified","emphasisSpecified","baseText","labelFetcher","labelDataIndex","labelDimIndex","labelProp","showNormal","showEmphasis","getFormattedLabel","defaultText","normalStyleText","emphasisStyleText","text","modifyLabelStyle","normalStyleProps","emphasisStyleProps","setText","labelModel","defaultColor","getFont","gTextStyleModel","join","initProps","getTransform","ancestor","mat","identity","mul","transformDirection","direction","hBase","abs","vBase","vertex","groupTransition","g1","g2","elMap1","g","elMap","anid","getElMap","oldEl","newProp","getAnimatableProps","position","rotation","clipPointsByRect","points","point","clipRectByRect","targetRect","createIcon","iconStr","rectHover","strokeNoScale","linePolygonIntersect","p2","TIME_REG","quantityExponent","exp","floor","log","LN10","pow","linearMap","domain","range","clamp","subDomain","subRange","parsePercent","percent","all","match","parseFloat","NaN","round","precision","returnStr","toFixed","asc","arr","sort","getPrecision","isNaN","count","getPrecisionSafe","eIndex","dotIndex","getPixelPrecision","dataExtent","pixelExtent","dataQuantity","sizeQuantity","isFinite","getPercentWithPrecision","valueList","idx","sum","acc","digits","votesPerQuota","targetSeats","seats","votes","currentSum","remainder","Number","NEGATIVE_INFINITY","maxId","MAX_SAFE_INTEGER","remRadian","radian","pi2","isRadianAroundZero","parseDate","exec","hour","toUpperCase","UTC","quantity","nice","exponent","exp10","f","quantile","ascArr","H","h","v","reformIntervals","littleThan","lg","interval","close","curr","currClose","isNumeric","dev","global","formatUtil","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","gap","maxWidth","maxHeight","currentLineMaxSize","eachChild","nextX","nextY","nextChild","childAt","nextChildRect","moveX","newline","moveY","box","vbox","hbox","getLayoutRect","positionInfo","containerRect","margin","containerWidth","containerHeight","verticalMargin","horizontalMargin","copyLayoutParams","getAvailableSize","positionElement","hv","boundingMode","needLocalTransform","elPos","dx","dy","sizeCalculable","hvIdx","mergeLayoutParam","targetOption","newOption","ignoreSize","hResult","vResult","names","newParams","newValueCount","merged","mergedValueCount","hasProp","hasValue","copy","getLayoutParams","isIdInner","cptOption","innerUniqueIndex","has","defaultEmphasis","subOpts","emphasis","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isDataItemOption","mappingToExists","exists","newCptOptions","exist","makeIdAndName","mapResult","idMap","existCpt","keyInfo","idNum","isNameSpecified","compressBatches","batchA","batchB","mapA","mapB","makeMap","mapToArray","sourceBatch","otherMap","seriesId","dataIndices","otherDataIndices","j","lenj","isData","queryDataIndex","indexOfName","makeInner","random","hostObj","parsedKey","queryType","includeMainTypes","queryParam","queryComponents","getTooltipRenderMode","renderModeOption","domSupported","groupData","getKey","buckets","keys","_format","formatTime","encodeHTML","addCommas","getTooltipMarker","colorPaletteMixin","dataFormatMixin","_layout","createTask","_sourceHelper","prepareSource","getSource","retrieveRawValue","inner","defaultOption","legendVisualProvider","visualColorAccessPath","visualBorderColorAccessPath","layoutMode","extraOpt","dataTask","dataTaskCount","reset","dataTaskReset","mergeDefaultAndTheme","getInitialData","wrapData","dataBeforeProcessed","autoSeriesName","inputPositionParams","themeSubType","hasClass","getTheme","getDefaultOption","fillDataTextStyle","mergeOption","newSeriesOption","label","getRawData","task","getCurrentTask","getLinkedData","setData","modifyOutputEnd","setOutputEnd","outputData","getBaseAxis","formatTooltip","multipleSeries","renderMode","newLine","isRichText","markers","markerId","formatSingleValue","tooltipDims","mapDimension","tooltipDimLen","getRawValue","isValueArr","colorStops","vertially","dimItem","getDimensionInfo","tooltip","displayName","setEachItem","dim","dimInfo","otherDims","dimType","markName","dimHead","dimHeadStr","valStr","formatArrayValue","colorEl","getName","seriesName","colorStr","html","animationEnabled","getColorFromPalette","scope","requestColorNum","coordDimToDataDim","coordDim","getProgressive","getProgressiveThreshold","getAxisTooltipData","getTooltipPosition","pipeTask","preventIncremental","pipelineContext","dataDims","nameArr","dataDim","getSeriesAutoName","cloneShallow","dataTaskProgress","end","CHANGABLE_METHODS","wrapMethod","onDataSelfChange","pipeline","getPipeline","currentTask","agentStubMap","_default","module","textContain","numberUtil","replaceReg","replaceMap","'","c","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","pad","substr","truncateText","toCamelCase","upperCaseFirst","group1","charAt","formatTpl","tpl","paramsList","encode","seriesLen","$vars","alias","k","formatTplSimple","extraCssText","isUTC","date","utc","M","d","s","S","capitalFirst","getTextBoundingRect","font","truncate","getTextRect","windowOpen","link","blank","open","opener","location","vec2","v2ApplyTransform","union","other","lt","rb","lb","rt","maxX","maxY","sx","sy","translate","scale","intersect","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","contain","plain","_clazz","enableClassExtend","enableClassCheck","lineStyleMixin","areaStyleMixin","textStyleMixin","itemStyleMixin","Model","doGet","pathArr","getParent","getParentMethod","ignoreParent","parsePath","thisParentModel","isEmpty","setReadOnly","properties","customizeGetParent","ArrayCtor","Float32Array","sqrt","lenSquare","lengthSquare","distance","v1","v2","dist","distanceSquare","distSquare","out","scaleAndAdd","div","dot","normalize","negate","lerp","t","componentUtil","enableClassManagement","boxLayoutMixin","dependentModels","$constructor","getUID","themeModel","optionUpdated","newCptOption","isInit","fields","optList","Class","getReferringComponents","registerWhenExtend","enableSubTypeDefaulter","enableTopologicalTravel","deps","getClassesByMainType","Clazz","unshift","DataDiffer","Source","_dataProvider","defaultDimValueGetters","DefaultDataProvider","summarizeDimensions","DataDimensionInfo","dataCtors","Float64Array","Int32Array","CtorUint32Array","Uint32Array","CtorInt32Array","CtorUint16Array","Uint16Array","getIndicesCtor","_rawCount","cloneChunk","originalChunk","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","transferProperties","__wrappedMethods","propName","_calculationInfo","List","hostModel","dimensionInfos","dimensionNames","invertedIndicesMap","dimensionInfo","dimensionName","coordDimIndex","createInvertedIndices","_dimensionInfos","_indices","_count","_storage","_nameList","_idList","_optionModels","_visual","_itemVisuals","hasItemVisual","_itemLayouts","_graphicEls","_chunkSize","_chunkCount","_rawData","_rawExtent","_extent","_approximateExtent","_dimensionsSummary","_invertedIndicesMap","userOutput","listProto","prepareChunks","chunkSize","chunkCount","DataCtor","lastChunkIndex","resizeChunkArray","newStore","prepareInvertedIndex","invertedIndices","ordinalMeta","categories","getRawValueFromStore","dimIndex","rawIndex","chunkIndex","chunkOffset","chunk","getRawIndexWithoutIndices","getRawIndexWithIndices","getId","_idDimIdx","normalizeDimensions","cloneListForMapAndSample","original","excludeDimensions","allDimensions","originalStorage","cloneDimStore","getInitialExtent","originalDimStore","newDimStore","hasItemOption","getDimension","getDimensionsOnCoord","dataDimsOnCoord","dimensionsSummary","encodeFirstDimNotExtra","dims","initData","nameList","dimValueGetter","isInstance","_nameRepeatCount","defaultDimValueGetter","sourceFormat","_dimValueGetter","_dimValueGetterArrayRows","arrayRows","_initDataFromProvider","pure","getProvider","rawData","start","persistent","appendValues","dimLen","rawExtent","originalChunkCount","emptyDataItem","sourceIdx","dimRawExtent","nameDimIdx","dimensionInfoMap","idList","nameRepeatCount","itemName","_nameDimIdx","itemId","getItem","dimStorage","nameDim","nameDimChunk","clean","getIndices","indices","thisCount","newIndices","buffer","getRawIndex","getByRawIndex","rawIdx","dimStore","_getFast","getValues","getDataExtent","dimData","initialExtent","dimExtent","currEnd","getApproximateExtent","setApproximateExtent","extent","getCalculationInfo","setCalculationInfo","getSum","getMedian","dimDataArray","sortedDimDataArray","rawIndexOf","rawDataIndex","mid","indicesOfNearest","maxDistance","nearestIndices","minDist","minDiff","nearestIndicesLen","diff","getRawDataItem","contextCompat","dimSize","filterSelf","dim0","keep","selectRange","originalCount","quickFinished","chunkStorage","dimStorage2","min2","max2","chunkStorage2","val2","dimk","mapArray","tmpRetValue","dataCount","retValue","rawExtentOnDim","downSample","dimension","rate","sampleValue","sampleIndex","targetStorage","frameValues","frameSize","dataIdx","originalChunkIndex","originalChunkOffset","sampleFrameIdx","sampleChunkOffset","getItemModel","otherList","thisList","visual","setVisual","setLayout","getLayout","getItemLayout","setItemLayout","clearItemLayouts","itemVisual","setItemVisual","clearAllVisual","setItemDataAndSeriesIndex","setItemGraphicEl","getItemGraphicEl","eachItemGraphicEl","dimensionInfoList","injectFunction","originalMethod","res","TRANSFERABLE_METHODS","m1","m2","out0","out1","out2","out3","out4","out5","rotate","rad","aa","ac","atx","ab","ad","aty","st","sin","ct","cos","vx","vy","det","calculateTextPosition","Triangle","cx","cy","buildPath","moveTo","lineTo","closePath","Diamond","Pin","w","r","angle","asin","tanX","tanY","cpLen","cpLen2","arc","bezierCurveTo","Arrow","ctx","symbolCtors","line","roundRect","square","circle","diamond","pin","arrow","triangle","symbolShapeMakers","size","symbolBuildProxies","SymbolClz","symbolType","inBundle","proxySymbol","symbolPathSetColor","innerColor","symbolStyle","symbolShape","__isEmptyBrush","createSymbol","keepAspect","symbolPath","setColor","coordinateSystemCreators","_coordinateSystems","coordinateSystems","creater","coordinateSystemCreator","Displayable","PathProxy","pathContain","getCanvasPattern","pathProxyForDraw","__dirtyPath","strokeContainThreshold","segmentIgnoreThreshold","brush","prevEl","hasStroke","hasFill","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","setTransform","__dirty","_fillGradient","getGradient","_strokeGradient","fillStyle","strokeStyle","lineDash","lineDashOffset","ctxLineDash","setLineDash","getGlobalScale","setScale","beginPath","setLineDashOffset","rebuildPath","fillOpacity","originalGlobalAlpha","globalAlpha","opacity","strokeOpacity","restoreTransform","drawRectText","shapeCfg","createPathProxy","_rect","needsUpdateRect","rectWithStroke","_rectWithStroke","lineWidth","lineScale","getLineScale","localPos","transformCoordToLocal","containStroke","dirtyPath","__dirtyText","refresh","__clipTarget","animateShape","loop","animate","attrKV","setShape","Sub","defaultShape","thisShape","clazzUtil","graphicUtil","createRenderPlanner","renderPlanner","Chart","renderTaskPlan","renderTaskReset","highlight","toggleHighlight","downplay","removeAll","incrementalPrepareRender","incrementalRender","chartProto","elSetState","state","childCount","progressiveRender","progressMethodMap","progress","forceFirstProgress","createDimensions","SOURCE_FORMAT_ORIGINAL","getDimensionTypeByAxis","getCoordSysInfoBySeries","enableDataStack","makeSeriesEncodeForAxisCoordSys","seriesDataToSource","coordSysDimDefs","coordSysName","registeredCoordSys","coordSysInfo","coordSysDims","axisModel","axisMap","axisType","firstCategoryDimIndex","hasNameEncode","dimInfoList","coordDimensions","generateCoord","encodeDefaulter","useEncodeDefaulter","categoryAxisModel","categoryAxisMap","getOrdinalMeta","stackCalculationInfo","sampleItem","firstDataNotNull","isNeedCompleteOrdinalData","itemOpt","dimName","wx","getSystemInfoSync","os","wxa","touchEventsSupported","worker","navigator","ua","firefox","ie","edge","SVGRect","pointerEventsSupported","detect","userAgent","legend","selector","inverse","toolbox","title","polygon","lineX","lineY","dataView","lang","dataZoom","zoom","back","magicType","bar","stack","tiled","restore","saveAsImage","typeNames","pie","scatter","effectScatter","radar","tree","treemap","boxplot","candlestick","heatmap","parallel","lines","graph","sankey","funnel","gauge","pictorialBar","themeRiver","sunburst","general","withTitle","withoutTitle","single","prefix","withName","withoutName","multiple","separator","middle","allData","partialData","_util","_number","_axisTickLabelBuilder","createAxisTicks","createAxisLabels","calculateCategoryInterval","NORMALIZED_EXTENT","Axis","onBand","fixExtentWithBands","nTick","coord","containData","getExtent","setExtent","dataToCoord","coordToData","pointToData","getTicksCoords","tickModel","getTickModel","ticks","ticksCoords","tickValue","axis","alignWithLabel","ticksLen","last","diffSize","axisExtent","crossLen","ticksItem","fixOnBandTicksCoords","getMinorTicksCoords","splitNumber","minorTicks","getMinorTicks","minorTicksGroup","minorTick","getViewLabels","labels","getLabelModel","getBandWidth","isHorizontal","getRotate","matrixUtil","shouldShowAllLabels","AxisBuilder","labelOffset","nameDirection","tickDirection","labelDirection","dumbGroup","_transform","_dumbGroup","hasBuilder","builders","getGroup","axisLine","pt1","pt2","lineStyle","lineCap","getLineStyle","arrows","arrowSize","arrowOffset","symbolWidth","symbolHeight","symbol","pos","axisTickLabel","ticksEls","axisBuilder","isBlank","lineStyleModel","tickEndCoord","createTicks","buildAxisMajorTicks","labelEls","axisLabelShow","labelMargin","labelRotation","labelLayout","innerTextLayout","rawCategoryData","getCategories","isLabelSilent","triggerEvent","labelItem","formattedLabel","rawLabel","itemLabelModel","textColor","getTextColor","textEl","makeAxisEventDataBase","targetType","decomposeTransform","buildAxisLabel","tickEls","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","fixMinMaxLabelShow","minorTickModel","minorTicksCoords","minorTickLineStyle","minorTicksEls","buildAxisMinorTicks","axisName","axisNameAvailableWidth","nameLocation","gapSignal","isNameLocationCenter","nameRotation","textRotate","rotationDiff","onLeft","endTextLayout","textFont","truncateOpt","ellipsis","nameTruncateMaxWidth","truncatedText","minChar","placeholder","tooltipOpt","formatterParams","__fullText","__truncatedText","show","formatter","axisRotation","current","next","firstRect","nextRect","mRotationBack","tickTransform","tickLineStyle","aniid","tickCoord","tickEl","defaultKeyGetter","oldArr","newArr","oldKeyGetter","newKeyGetter","_old","_new","_oldKeyGetter","_newKeyGetter","initIndexMap","keyArr","keyGetterName","dataDiffer","existence","_add","_update","_remove","execute","newDataIndexMap","oldDataKeyArr","newDataKeyArr","OrdinalScale","IntervalScale","Scale","_barGrid","prepareLayoutBarSeries","makeColumnLayout","retrieveColumnLayout","getScaleExtent","axisDataLen","boundaryGap","span","scaleType","getMin","getMax","originalExtent","fixMin","fixMax","setBlank","getNeedCrossZero","isBaseAxisAndHasBarSeries","barSeriesModels","barWidthAndOffset","adjustedScale","axisLength","barsOnCurrentAxis","undefined","minOverflow","maxOverflow","totalOverFlow","oldRange","overflowBuffer","adjustScaleForOverflow","makeLabelFormatter","labelFormatter","categoryTickStart","getLabel","getAxisRawValue","tick","rotateTextRect","textRect","rotateRadians","boundingBox","beforeWidth","beforeHeight","afterWidth","afterHeight","getOptionCategoryInterval","niceScaleExtent","extentInfo","base","niceExtent","minInterval","maxInterval","setInterval","createScaleByModel","ifAxisCrossZero","estimateLabelUnionRect","realNumberScaleTicks","tickCount","isCategory","categoryScaleExtent","getTicks","axisLabelModel","step","ceil","singleRect","LRU","kCSSColorTable","clampCssByte","clampCssFloat","parseCssInt","parseInt","parseCssFloat","cssHueToRgb","lerpNumber","setRgba","copyRgba","colorCache","lastRemovedArr","putToCache","rgbaArr","put","cached","iv","op","ep","fname","alpha","hsla2rgba","hsla","rgba","l","fastLerp","normalizedValue","colors","leftIndex","rightIndex","leftColor","rightColor","dv","fastMapToColor","fullOutput","mapToColor","arrColor","level","toHex","modifyHSL","R","G","B","vMin","vMax","delta","L","deltaR","deltaG","deltaB","rgba2hsla","modifyAlpha","ORIGIN_METHOD","RATE","delay","debounce","currCall","debounceNextCall","lastCall","lastExec","timer","getTime","thisDelay","thisDebounce","clearTimeout","setTimeout","debounceDelay","createOrUpdate","fnAttr","throttleType","originFn","lastThrottleType","echarts","axisPointerModelHelper","AxisView","_axisPointer","axisPointerClass","fixValue","superApply","updateAxisPointer","force","axisPointer","disposeAxisPointer","axisView","forceRender","getAxisPointerClass","axisPointerModel","getAxisPointerModel","axisPointerClazz","registerAxisPointerClass","imageHelper","textWidthCache","textWidthCacheCounter","STYLE_REG","textLines","measureText","adjustTextX","adjustTextY","halfHeight","options","prepareTruncateOptions","truncateSingleLine","maxIterations","cnCharWidth","ascCharWidth","contentWidth","ellipsisWidth","textLine","subLength","estimateLength","charCode","charCodeAt","getLineHeight","parsePlainText","padding","lineHeight","outerHeight","canCacheByTextString","truncOuterHeight","truncOuterWidth","outerWidth","parseRichText","contentBlock","lastIndex","matchedIndex","pushTokens","substring","contentHeight","pendingList","stlPadding","truncateWidth","truncateHeight","tokens","tokenStyle","token","styleName","tokenHeight","tokenWidth","tokenWidthNotSpecified","percentWidth","bgImg","findExistImage","isImageReady","paddingW","remianTruncWidth","block","isEmptyStr","strs","isLineHolder","tokensLen","DEFAULT_FONT","getRichTextRect","getPlainTextRect","adjustTextPositionOnRect","makeFont","Dispatcher","isCanvasEl","transformCoordWithViewport","isDomLevel2","addEventListener","MOUSE_EVENT_REG","_calcOut","clientToLocal","calculate","calculateZrXY","layerX","offsetX","zrX","zrY","layerY","offsetY","ex","clientX","ey","clientY","getNativeEvent","stop","preventDefault","stopPropagation","cancelBubble","returnValue","normalizeEvent","touch","targetTouches","changedTouches","zrDelta","wheelDelta","detail","button","which","attachEvent","removeEventListener","detachEvent","isMiddleOrRightButtonOnMouseUpDown","notLeftMouse","isDimensionStacked","stackedDim","stackedByDimInfo","stackedDimInfo","stackResultDimension","stackedOverDimension","byIndex","stackedCoordDimension","mayStack","isExtraCoord","stackedDimCoordDim","stackedDimType","stackedDimCoordIndex","isCalculationCoord","stackedDimension","stackedByDimension","isStackedByIndex","getStackedDimension","targetDim","textHelper","ContextCachedBy","normalizeTextStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","needDrawText","renderText","__attrCachedBy","NONE","getStroke","origin","rangeStart","rangeEnd","getCoordSysModel","setRange","resetRange","_sourceType","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_UNKNOWN","SOURCE_FORMAT_TYPED_ARRAY","SERIES_LAYOUT_BY_ROW","BE_ORDINAL","Must","Might","Not","normalizeDimensionsDefine","dimensionsDefine","nameMap","arrayRowsTravelFirst","seriesLayoutBy","maxLoop","getDatasetModel","datasetIndex","doGuessOrdinal","startIndex","dimDefItem","sample","detectValue","row","beStr","detectSourceFormat","datasetModel","resetSourceDefaulter","datasetMap","seriesOption","fromDataset","sourceHeader","datasetOption","completeResult","dimensionsDetectCount","firstIndex","objectRowsCollectDimensions","colArr","completeBySourceData","encodeDefine","baseCategoryDimIndex","categoryWayValueDimStart","encodeItemName","encodeSeriesName","coordDimInfo","coordDimIdx","getDataDimCountOnCoordDim","datasetRecord","categoryWayDim","valueWayDim","pushDim","dimIdxArr","idxFrom","idxCount","dimsDef","coordDimName","makeSeriesEncodeForNameBased","dimCount","potentialNameDimIndex","idxResult","idxRes0","idxRes1","guessRecords","guessResult","isPureNumber","n","fulfilled","nameDimIndex","guessOrdinal","src","_image","createOrUpdateImage","sWidth","sHeight","drawImage","excludes","includes","originalLarge","large","originalProgressive","progressive","completeDimensions","encodeDef","dimensionsCount","generateCoordCount","logError","debugMode","LargeArr","getSeriesStackId","getAxisKey","seriesType","seriesModels","eachSeriesByType","isOnCartesian","isInLargeMode","barSeries","axisMinGaps","axisValues","baseAxis","cnt","valuesInAxis","getValueAxesMinGaps","seriesInfoList","bandWidth","minGap","extentSpan","scaleSpan","barWidth","barMaxWidth","barMinWidth","barGap","barCategoryGap","axisKey","stackId","doCalBarWidthAndOffset","columnsMap","seriesInfo","columnsOnAxis","remainedWidth","autoWidthCount","categoryGap","stacks","minWidth","barGapPercent","autoWidth","column","finalWidth","lastColumn","widthSum","largeLayout","cartesian","coordLayout","grid","getRect","valueAxis","getOtherAxis","valueDim","baseDim","valueAxisHorizontal","valueDimIdx","largePoints","largeBackgroundPoints","largeDataIndices","valuePair","pointsOffset","idxOffset","dataToPoint","valueAxisStart","getValueAxisStart","backgroundStart","stacked","toGlobalCoord","getLayoutOnAxis","widthAndOffsets","offsetCenter","lastStackCoords","lastStackCoordsOrigin","columnLayoutInfo","columnOffset","columnWidth","barMinHeight","isValueAxisH","baseValue","sign","baseCoord","_vector","v2Create","v2DistSquare","mathPow","mathSqrt","THREE_SQRT","_v0","_v1","_v2","isAroundZero","isNotAroundZero","cubicAt","p0","p1","p3","onet","quadraticAt","cubicDerivativeAt","cubicRootAt","roots","A","C","t1","disc","K","t2","discSqrt","Y1","Y2","T","theta","acos","ASqrt","tmp","t3","cubicExtrema","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","x0","y0","x3","y3","prev","d1","d2","_t","quadraticDerivativeAt","quadraticRootAt","quadraticExtremum","divider","quadraticSubdivide","quadraticProjectPoint","arrySlice","eventProcessor","_$handlers","_$eventProcessor","eventful","isOnce","_h","wrap","callAtLast","lastWrap","isSilent","newList","argLen","hItem","triggerWithContext","Element","_children","__storage","children","childOfName","_doAdd","addBefore","nextSibling","addToStorage","addChildrenToStorage","delFromStorage","delChildrenFromStorage","includeChildren","tmpRect","tmpMat","invisible","childRect","curve","bbox","CMD","Q","Z","mathCos","mathSin","mathAbs","hasTypedArray","notSaveData","_saveData","_xi","_yi","_x0","_y0","_ux","_uy","_len","_lineDash","_dashOffset","_dashIdx","_dashSum","addData","exceedUnit","_needsDash","_dashedLineTo","_dashedBezierTo","quadraticCurveTo","_dashedQuadraticTo","startAngle","endAngle","anticlockwise","arcTo","radius","toStatic","lineDashSum","appendPath","appendSize","appendPathData","cmd","_expandData","_prevCmd","newData","dash","dashSum","nDash","bezierLen","tmpLen","MAX_VALUE","xi","yi","fromLine","fromCubic","fromQuadratic","rx","ry","fromArc","ux","uy","dTheta","psi","fs","scaleX","scaleY","PI2","extremity","xDim","yDim","fromPoints","tx","ty","vec2Min","vec2Max","OTHER_DIMENSIONS","getOrCreateEncodeArr","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","defaultTooltip","otherDim","encodeArr","dimArr","encodeLabel","encodeTooltip","subtext","subtarget","borderColor","borderWidth","itemGap","subtextStyle","titleModel","subtextStyleModel","subText","subTextEl","sublink","groupRect","layoutOption","getBoxLayoutParams","layoutRect","alignStyle","getItemStyle","guid","Handler","Storage","Painter","Animation","HandlerProxy","useVML","painterCtors","ZRender","rendererType","vml","handerProxy","getViewportRoot","root","stage","_needsRefresh","oldDelFromStorage","oldAddToStorage","removeSelfFromZr","addSelfToZr","addRoot","delRoot","configLayer","zLevel","config","_needsRefreshHover","triggerRendered","refreshHoverImmediately","elMirror","refreshHover","clearHover","clearAnimation","pathToImage","setCursorStyle","cursorStyle","findHover","eventHandler","getInstance","registerPainter","mIdentity","transformableProto","scaleTmp","parentHasTransform","globalScaleRatio","relX","relY","invTransform","tmpTransform","originTransform","setLocalTransform","atan2","transformCoordToGlobal","roundRectHelper","fixShadow","_constant","WILL_BE_RESTORED","VALID_TEXT_ALIGN","center","VALID_TEXT_VERTICAL_ALIGN","SHADOW_STYLE_COMMON_PROPS","_tmpTextPositionResult","_tmpBoxPositionResult","normalizeStyle","textBaseline","applyTextRotation","textOrigin","placeToken","hostEl","lineTop","needDrawBackground","drawBackground","getTextXForPadding","setCtx","getFill","strokeText","fillText","isPlainBg","onBgImageLoaded","getBoxPosition","baseX","baseY","maxValue","__textCotentBlock","boxPos","boxX","boxY","xLeft","xRight","tokenCount","usedWidth","lineXLeft","lineXRight","drawRichText","renderRichText","prevStyle","needDrawBg","checkCache","cachedByMe","PLAIN_TEXT","styleFont","computedFont","__computedFont","__styleFont","textX","textY","propItem","styleProp","ctxProp","textStrokeWidthPrev","strokeWidthChanged","strokeChanged","renderPlainText","Component","componentProto","Displayble","IncrementalDisplayble","_displayables","_temporaryDisplayables","_cursor","notClear","incremental","clearDisplaybles","addDisplayable","notPersistent","addDisplayables","displayables","beforeBrush","afterBrush","DIMENSION_LABEL_REG","rawValue","tooltipModel","isSeries","componentSubType","marker","itemModel","dimensionIndex","parseXML","rawGeoJson","rawSpecialAreas","svg","features","record","parsers","JSON","svgXML","IS_CONTAINER","ret","classBase","superCall","RootClass","mandatoryMethods","proto","ExtendedClass","Clz","classAttr","entity","registerClass","checkClassType","container","makeContainer","componentMainType","throwWhenNotFound","o","getAllClassMainTypes","types","hasSubTypes","originalExtend","_source","_data","_offset","_dimSize","providerMethods","providerProto","appendDataSimply","countSimply","getItemSimply","col","newCol","oldCol","rawValueGetters","getRawValueSimply","objectRows","keyedColumns","typedArray","getDimValueSimply","converDataValue","parseAndCollect","retrieveRawAttr","Style","RectText","__clipPaths","draggable","dragging","culling","cursor","rectContain","animateStyle","useStyle","subTypeDefaulters","registerSubTypeDefaulter","defaulter","determineSubType","componentTypeMain","dependencyGetter","createDependencyGraphItem","predecessor","successor","topologicalTravel","targetNameList","fullNameList","callback","noEntryList","thisItem","availableDeps","originalDeps","dep","getAvailableDependencies","entryCount","dependentName","thatItem","makeDepndencyGraph","targetNameSet","currComponentType","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","succComponentType","Gradient","addColorStop","helper","roundNumber","_interval","_intervalPrecision","thisExtent","unionExtent","getInterval","_niceExtent","getIntervalPrecision","expandToNicedExtent","niceTickExtent","intervalPrecision","lastNiceTick","minorInterval","niceTicks","reverse","intervalScaleNiceTicks","expandSize","defineProperty","_extends","assign","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","_react2","_interopRequireDefault","_propTypes2","_fastDeepEqual2","_sizeSensor","_utils","__esModule","EchartsReactCore","_Component","instance","TypeError","_classCallCheck","_this","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","getEchartsInstance","echartsLib","echartsElement","warn","rerender","_this$props","onEvents","onChartReady","echartObj","renderEchartDom","bindEvents","events","_bindEvent","loadingOption","subClass","setPrototypeOf","_inherits","prevProps","shouldSetOption","pickKeys","pick","className","_this2","_props","newStyle","ref","propTypes","object","isRequired","bool","string","oneOfType","number","oneOf","defaultProps","subPixelOptimizeOutputShape","globalCoord","save","transformText","_l","_a","SERIES_LAYOUT_BY_COLUMN","Ellipse","DILIMITER_REG","DOMParser","parseFromString","firstChild","nodeName","SVGParser","_defs","_root","_isDefine","_isText","xml","viewBox","parseAttributes","viewBoxRect","viewBoxTransform","_parseNode","viewBoxArr","makeViewBoxTransform","ignoreViewBox","elRoot","ignoreRootClip","setClipPath","xmlNode","parentGroup","parser","defineParsers","def","nodeParsers","_parseText","_textX","_textY","textContent","inheritStyle","ellipse","parsePoints","polyline","gradient","stopColor","_parseGradientColorStops","__inheritedStyle","pointsString","attributesMap","defs","onlyInlineStyle","zrStyle","isTextEl","transformOps","transformRegex","parseTransformAttribute","styleRegResult","styleList","styleRegex","svgAttrName","parseStyleAttribute","attrValue","elFillProp","elStrokeProp","getPaint","elPropName","urlRegex","urlMatch","parseSVG","format","_throttle","ecHelper","parseGeoJSON","_List","_Model","_Axis","_env","parseGeoJson","ecUtil","util","scaleProto","intervalScaleProto","roundingErrorFix","mathFloor","mathCeil","mathLog","LogScale","_originalScale","originalScale","powVal","__fixMin","fixRoundingError","__fixMax","unionExtentFromData","approxTickNum","originalVal","Region","decodePolygon","coordinate","encodeOffsets","encodeScale","prevX","prevY","nameProperty","json","UTF8Encoding","UTF8Scale","geometry","coordinates","c2","decode","featureObj","geo","geometries","exterior","interiors","region","cp","polygonContain","MAX_NUMBER","loopGeo","transformTo","newRegion","windingLine","isAroundEqual","STYLE_BIND","setting","_setting","getSetting","_isBlank","checkPropInLink","linkPropValue","axisPropValue","getAxisInfo","coordSysAxesInfo","axesInfo","makeKey","isHandleTrigger","collect","seriesInvolved","coordSysMap","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","axisPointerEnabled","coordSysKey","axesInfoInCoordSys","baseTooltipModel","getAxes","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","triggerTooltip","axisPointerShow","snap","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","crossStyle","makeAxisPointerModel","involveSeries","axisInfo","useHandle","groupIndex","linkOption","getLinkGroupIndex","linkGroup","mapper","collectAxesInfo","seriesTooltipTrigger","seriesTooltipShow","getAxis","seriesDataCount","collectSeriesInfo","makeAscendingRun","lo","hi","compare","runHi","reverseRun","binaryInsertionSort","pivot","gallopLeft","hint","lastOffset","maxOffset","gallopRight","TimSort","runStart","runLength","minGallop","stackSize","mergeAt","start1","length1","start2","length2","cursor1","cursor2","dest","count1","count2","exit","_minGallop","mergeLow","customCursor","customDest","mergeHigh","mergeRuns","forceMergeRuns","pushRun","_runStart","_runLength","remaining","ts","minRun","minRunLength","STYLE_COMMON_PROPS","createLinearGradient","createRadialGradient","styleProto","notCheckCache","globalCompositeOperation","otherStyle","canvasGradient","globalImageCache","imageOnLoad","cachedImgObj","__cachedImgObj","onerror","pending","pendingWrap","cbPayload","newImageOrSrc","__zrImageSrc","positiveOrNegative","doubledPosition","outputShape","inputShape","originX","originY","originWidth","originHeight","Task","define","_reset","_plan","_onDirty","onDirty","_dirty","taskProto","performArgs","planResult","upTask","_upstream","skip","__pipeline","lastModBy","normalizeModBy","_modBy","lastModDataCount","_modDataCount","modBy","modDataCount","taskIns","_dueIndex","_outputDueEnd","_dueEnd","_settedOutputEnd","_progress","downstream","_downstream","doProgress","outputDueEnd","iterator","winCount","it","sStep","sCount","modNext","sequentialNext","_callingProgress","pipe","downTask","getUpstream","getDownstream","idStart","buildTransformer","inX","inY","saved","transformer","transformerName","oldSrcCoords","srcCoords","oldCoordTheSame","destCoords","ii","offsetLeft","offsetTop","preparePointerTransformer","propLR","propTB","stl","idxLR","idxTB","cssText","appendChild","prepareCoordMarkers","transformLocalCoord","elFrom","Animatable","clipPath","drift","beforeUpdate","afterUpdate","hide","removeClipPath","animators","addAnimator","removeAnimator","Clip","arraySlice","defaultGetter","defaultSetter","interpolateNumber","interpolateString","interpolateArray","arrDim","len2","fillArr","arr0","arr1","arr0Len","arr1Len","isArraySame","catmullRomInterpolateArray","catmullRomInterpolate","v0","cloneValue","rgba2String","createTrackClip","animator","easing","oneTrackDone","keyframes","forceAnimate","getter","_getter","setter","_setter","useSpline","trackLen","trackMaxTime","firstVal","isValueArray","isValueColor","isValueString","lastValue","getArrayDim","time","kfPercents","kfValues","prevValue","isAllValueEqual","colorArray","_target","lastFrame","lastFramePercent","clip","life","_loop","_delay","onframe","frame","ondestroy","Animator","_tracks","_clipCount","_doneList","_onframeList","_clipList","when","tracks","during","pause","_paused","resume","isPaused","_doneCallback","doneList","lastClip","clipCount","addClip","oldOnFrame","forwardToLast","clipList","removeClip","done","getClips","LinkedList","head","tail","linkedListProto","insert","entry","Entry","insertEntry","maxSize","_list","_map","_maxSize","_lastRemovedEntry","LRUProto","removed","leastUsedEntry","SHADOW_PROPS","Pattern","repeat","createPattern","requestAnimationFrame","msRequestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","r1","r2","r3","r4","total","globalDefault","_optionManager","baseOption","mountOption","initBase","timelineOption","getTimelineOption","mediaOptions","getMediaOption","mediaOption","componentsMap","newCptTypes","componentOption","newCptOptionList","existComponent","getComponentsByTypes","resultItem","ComponentModelClass","createSeriesIndices","_seriesIndicesMap","_seriesIndices","cpts","isIdArray","cpt","isNameArray","filterBySubType","findComponents","queryCond","indexAttr","idAttr","nameAttr","getQueryCond","components","queryResult","getSeriesByName","oneSeries","getSeriesByType","getSeries","getSeriesCount","rawSeriesIndex","eachRawSeries","eachRawSeriesByType","isSeriesFiltered","getCurrentSeriesIndices","filterSeries","componentTypes","seiresIndex","isNotTargetSeries","notMergeColorLayer","colorLayer","themeItem","mergeTheme","transformPath","vMag","vRatio","u","vAngle","processArc","fa","psiDeg","xp","yp","lambda","cxp","cyp","commandReg","numberReg","createPathOptions","pathProxy","prevCmd","cpx","cpy","subpathX","subpathY","cmdList","cmdText","cmdStr","pLen","ctlPtx","ctlPty","createPathProxyFromString","pathEls","pathList","pathEl","pathBundle","normalizeRadian","dir","x_","shadowTemp","orignalBrush","modified","clipPaths","polyHelper","smooth","smoothConstraint","smoothSpline","smoothBezier","controlPoints","cp1","cp2","pointAt","colorIdx","colorNameMap","scopeFields","defaultColorPalette","layeredColorPalette","colorPalette","paletteNum","getNearestColorPalette","echartsAPIList","chartInstance","genName","fromZero","sysDims","dataDimNameMap","coordDimNameMap","optDimCount","sysDimItem","sysDimItemDimsDef","getDimCount","userDimName","validDataDims","resultDimIdx","applyDim","availDimIdx","sysDimIndex","sysDimItemOtherDims","sysDimItemDimsDefItem","extra","OrdinalMeta","_needCollect","needCollect","_deduplication","deduplication","createByAxisModel","dedplication","getOrCreateMap","getOrdinal","category","fixExtent","gridModel","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","axisPosition","axisDim","rectBound","onZero","axisOffset","posBound","onZeroCoord","labelInside","_key","SensorTabIndex","SensorClassName","SizeSensorId","Draggable","eventTool","GestureMgr","stopEvent","EmptyProxy","handlerNames","proxy","painterRoot","_hovered","_lastTouchMoment","_lastX","_lastY","_gestureMgr","setHandlerProxy","isHover","isOutsideBoundary","handlerInstance","mousemove","isOutside","lastHovered","lastHoveredTarget","hovered","hoveredTarget","setCursor","dispatchToElement","mouseout","eventControl","zrEventControl","zrIsToLocalDOM","dispatch","eventArgs","targetInfo","eventPacket","eveType","topTarget","gestureEvent","pinchX","pinchY","pinchScale","makeEventPacket","eachOtherLayer","layer","exclude","hoverCheckResult","processGesture","gestureMgr","gestureInfo","recognize","_downEl","_downPoint","_upEl","_dragStart","_drag","_dragEnd","draggingTarget","_draggingTarget","_x","_y","dropTarget","lastDropTarget","_dropTarget","LN2","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","subRowMask","subRowStart","colLocalIdx","colTag","mA","vh","srcPointX","srcPointY","pk","eventUtil","_track","pointPair","_doTrack","_recognize","touches","trackItem","recognizers","pinch","track","pinchEnd","pinchPre","pinchCenter","shapeCompareFunc","_roots","_displayList","_displayListLen","includeIgnore","updateDisplayList","displayList","_updateAndAddDisplayable","userSetClipPath","currentClipPath","parentClipPath","_renderList","displayableSortFunc","animatable","animateToShallow","objShallow","propertyCount","setAttrByPath","animatingShape","pathSplitted","animateFrom","easingFuncs","_life","_initialized","onrestart","_pausedTime","globalTime","deltaTime","_startTime","easingFunc","schedule","fire","restart","_needsRemove","arg","linear","quadraticIn","quadraticOut","quadraticInOut","cubicIn","cubicOut","cubicInOut","quarticIn","quarticOut","quarticInOut","quinticIn","quinticOut","quinticInOut","sinusoidalIn","sinusoidalOut","sinusoidalInOut","exponentialIn","exponentialOut","exponentialInOut","circularIn","circularOut","circularInOut","elasticIn","elasticOut","elasticInOut","backIn","backOut","backInOut","bounceIn","bounceOut","bounceInOut","Layer","parseInt10","viewRect","singleCanvas","_opts","_singleCanvas","rootStyle","zlevelList","_zlevelList","layers","_layers","_layerConfig","_needsManuallyCompositing","_width","_height","mainLayer","__builtin__","initContext","_domRoot","_getSize","domRoot","createRoot","_hoverlayer","_hoverElements","isSingleCanvas","getViewportRootOffset","viewportRoot","paintAll","_redrawId","_paintList","clearColor","_backgroundColor","__hoverMir","__from","hoverElements","hoverLayer","getLayer","originalEl","_doPaintEl","getHoverLayer","redrawId","_updateLayerStatus","finished","_doPaintList","_compositeManually","clearRect","eachBuiltinLayer","virtual","layerList","zi","__startIndex","__drawIndex","useTimer","now","__endIndex","firstEl","prevElClipPaths","draw","currentLayer","forcePaint","isDisplayableCulled","prevClipPaths","isClipPathChanged","doClip","insertLayer","layersMap","prevLayer","isLayerValid","prevDom","insertBefore","eachLayer","getLayers","updatePrevLayer","__used","prevZlevel","incrementalLayerCount","getElementCount","_clearLayer","layerConfig","_zlevel","delLayer","parentNode","removeChild","display","_progressiveLayers","clearLayer","imageLayer","renderToCanvas","whIdx","wh","cwh","plt","prb","defaultView","getComputedStyle","shadowBlurSize","leftMargin","rightMargin","topMargin","bottomMargin","pathTransform","imgShape","returnFalse","createDom","newDom","newDomStyle","domStyle","onselectstart","domBack","ctxBack","motionBlur","lastFrameAlpha","createBackBuffer","clearAll","clearColorGradientOrPattern","haveMotionBLur","__canvasGradient","fillRect","_clips","_running","_time","_pauseStart","clips","deferredEvents","deferredClips","_startLoop","_event","globalEventSupported","localNativeListenerNames","mouseHandlerNames","pointerEventNameMap","pointerdown","pointerup","pointermove","pointerout","mouse","pointer","nm","globalNativeListenerNames","eventNameFix","isPointerFromTouch","pointerType","markTouch","isLocalEl","elTmp","isLocal","domBelongToZr","FakeGlobalEvent","currentTarget","fakeGlobalEventProto","stopImmediatePropagation","localDOMHandlers","mousedown","_mayPointerCapture","downPoint","togglePointerCapture","mouseup","_pointerCapturing","element","toElement","relatedTarget","touchstart","touchmove","touchend","click","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","touching","touchTimer","setTouchTimer","mountGlobalDOMEventListeners","mount","normalizeGlobalEvent","capture","listener","mounted","listenerOpts","domTarget","unmountDOMEventListeners","isPointerCapturing","globalHandlerScope","_globalHandlerScope","DOMHandlerScope","HandlerDomProxy","_localHandlerScope","handlerDomProxyProto","makeStyleMapper","getLineDash","lineType","dotSize","dashSize","getAreaStyle","PATH_COLOR","cubic","quadratic","swapExtrema","windingCubic","nRoots","y0_","y1_","nExtrema","unit","windingQuadratic","y_","windingArc","containPath","isStroke","mathAtan2","nPoint","fixClipWithShadow","r0","clockwise","unitX","unitY","v2Distance","interpolate","isLoop","segs","w2","w3","v2Min","v2Max","v2Scale","v2Add","v2Clone","v2Sub","constraint","prevPoint","nextPoint","cps","d0","cp0","_curve","someVectorAt","isTangent","cpx2","cpy2","cpx1","cpy1","tangentAt","paths","_updatePathDirty","getBorderLineDash","platform","gradientColor","animationDuration","animationDurationUpdate","animationEasingUpdate","animationThreshold","progressiveThreshold","hoverLayerThreshold","useUTC","QUERY_REG","_timelineOptions","_mediaList","_mediaDefault","_currentMediaIndices","_optionBackup","_newBaseOption","parseRawOption","rawOption","isNew","mediaDefault","timelineOptions","mediaList","timelineOpt","timeline","media","singleMedia","preProcess","applyMediaQuery","ecWidth","ecHeight","realMap","aspectratio","applicatable","matched","operator","realAttr","real","expect","oldOption","oldOptionBackup","newParsedOption","newCptOpt","oldCptOpt","isRecreate","optionBackup","timelineModel","getCurrentIndex","indices1","indices2","compatStyle","compatLayoutProperties","LAYOUT_PROPERTIES","COMPATITABLE_COMPONENTS","isTheme","seriesOpt","clipOverflow","clockWise","pointerColor","dataRange","visualMap","componentName","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","itemStyle","normalItemStyleOpt","normal","emphasisItemStyleOpt","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","removeEC3NormalStatus","compatTextStyle","labelOptSingle","compatEC3CommonStyles","toArr","toObj","markPoint","markLine","markArea","nodes","edgeData","links","edges","mpData","mlData","breadcrumb","levels","leaves","processSeries","axes","axisOpt","parallelOpt","parallelAxisDefault","calendar","calendarOpt","radarOpt","geoOpt","regions","regionObj","toolboxOpt","feature","featureOpt","calculateStack","stackInfoList","targetStackInfo","idxInStack","resultVal","resultNaN","targetData","byValue","stackedDataRawIndex","stackedOver","stackInfo","stackInfoMap","createOnAllSeries","performRawSeries","colorAccessPath","colorCallback","borderColorAccessPath","dataEach","ariaModel","seriesCnt","ariaLabel","maxDataCnt","maxSeriesCnt","displaySeriesCnt","getTitle","getConfig","seriesLabels","seriesCount","seriesLabel","seriesTpl","displayCnt","dataLabels","keyValues","RegExp","userConfig","maskColor","showSpinner","spinnerRadius","mask","labelRect","dataProcessorHandlers","visualHandlers","_dataProcessorHandlers","_visualHandlers","_allHandlers","_stageTaskMap","performStageTasks","stageHandlers","needSetDirty","stageHandlerRecord","seriesTaskMap","overallTask","overallNeedDirty","stub","pipelineId","taskRecord","_pipelineMap","pCtx","progressiveEnabled","__idxInPipeline","blockIndex","dataLen","threshold","pipelineMap","stageTaskMap","getTargetSeries","seriesTaskPlan","seriesTaskReset","seriesTaskCount","useClearVisual","isVisual","isLayout","createSeriesStageTask","overallReset","overallTaskReset","overallProgress","createStub","stubReset","stubOnDirty","agent","__block","createOverallStageTask","upstreamContext","stubProgress","resetDefines","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","detectSeriseType","legacyFunc","ecModelMock","apiMock","mockMethods","cond","colorAll","iconStyle","controlStyle","timeAxis","axisTick","axisLabel","splitLine","splitArea","areaStyle","logAxis","categoryAxis","color0","borderColor0","ox","oy","createListFromArray","axisHelper","axisModelCommonMixin","_dataStackHelper","_completeDimensions","_createDimensions","_symbol","createList","createScale","mixinAxisModelCommonMethods","CoordSysInfo","fetchers","cartesian2d","xAxisModel","yAxisModel","singleAxis","singleAxisModel","polar","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","parallelModel","parallelAxisIndex","axisIndex","fetch","_ordinalMeta","scaleHelper","ONE_DAY","ONE_HOUR","TimeScale","stepLvl","_stepLvl","getFullYear","getMonth","getDate","approxInterval","scaleLevelsLen","scaleLevels","bisect","yearSpan","timezoneOffset","getTimezoneOffset","ONE_SECOND","ONE_MINUTE","_axisHelper","makeCategoryLabelsActually","numericLabelInterval","labelsCache","getListCache","optionLabelInterval","listCacheGet","makeLabelsByCustomizedCategoryInterval","autoInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","labelCategoryInterval","cache","categoryInterval","onlyTick","ordinalScale","ordinalExtent","startTick","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tVal","makeCategoryLabels","makeRealNumberLabels","tickCategoryInterval","ticksCache","optionTickInterval","labelsResult","makeCategoryTicks","axisRotate","fetchAutoCategoryIntervalCalculationParams","unitSpan","unitW","unitH","maxW","maxH","dw","dh","lastAutoInterval","lastTickCount","axisExtend0","axisExtend1","keyList","equal","arrA","arrB","dateA","dateB","regexpA","regexpB","ver","_sensorPool","sensor","getSensor","unbind","removeSensor","_id","_sensors","Sensors","sensorId","newId","createSensor","removeAttribute","destroy","_object","_resizeObserver","ResizeObserver","_debounce","listeners","resizeListener","contentDocument","overflow","pointerEvents","zIndex","newSensor","observe"],"mappings":"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","file":"static/js/1.f335c86f.chunk.js","sourcesContent":["/**\n * @module zrender/core/util\n */\n// mergeDate\nvar BUILTIN_OBJECT = {\n  '[object Function]': 1,\n  '[object RegExp]': 1,\n  '[object Date]': 1,\n  '[object Error]': 1,\n  '[object CanvasGradient]': 1,\n  '[object CanvasPattern]': 1,\n  // For node-canvas\n  '[object Image]': 1,\n  '[object Canvas]': 1\n};\nvar TYPED_ARRAY = {\n  '[object Int8Array]': 1,\n  '[object Uint8Array]': 1,\n  '[object Uint8ClampedArray]': 1,\n  '[object Int16Array]': 1,\n  '[object Uint16Array]': 1,\n  '[object Int32Array]': 1,\n  '[object Uint32Array]': 1,\n  '[object Float32Array]': 1,\n  '[object Float64Array]': 1\n};\nvar objToString = Object.prototype.toString;\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar nativeReduce = arrayProto.reduce; // Avoid assign to an exported variable, for transforming to cjs.\n\nvar methods = {};\n\nfunction $override(name, fn) {\n  // Clear ctx instance for different environment\n  if (name === 'createCanvas') {\n    _ctx = null;\n  }\n\n  methods[name] = fn;\n}\n/**\n * Those data types can be cloned:\n *     Plain object, Array, TypedArray, number, string, null, undefined.\n * Those data types will be assgined using the orginal data:\n *     BUILTIN_OBJECT\n * Instance of user defined class will be cloned to a plain object, without\n * properties in prototype.\n * Other data types is not supported (not sure what will happen).\n *\n * Caution: do not support clone Date, for performance consideration.\n * (There might be a large number of date in `series.data`).\n * So date should not be modified in and out of echarts.\n *\n * @param {*} source\n * @return {*} new\n */\n\n\nfunction clone(source) {\n  if (source == null || typeof source !== 'object') {\n    return source;\n  }\n\n  var result = source;\n  var typeStr = objToString.call(source);\n\n  if (typeStr === '[object Array]') {\n    if (!isPrimitive(source)) {\n      result = [];\n\n      for (var i = 0, len = source.length; i < len; i++) {\n        result[i] = clone(source[i]);\n      }\n    }\n  } else if (TYPED_ARRAY[typeStr]) {\n    if (!isPrimitive(source)) {\n      var Ctor = source.constructor;\n\n      if (source.constructor.from) {\n        result = Ctor.from(source);\n      } else {\n        result = new Ctor(source.length);\n\n        for (var i = 0, len = source.length; i < len; i++) {\n          result[i] = clone(source[i]);\n        }\n      }\n    }\n  } else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n    result = {};\n\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) {\n        result[key] = clone(source[key]);\n      }\n    }\n  }\n\n  return result;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overwrite=false]\n */\n\n\nfunction merge(target, source, overwrite) {\n  // We should escapse that source is string\n  // and enter for ... in ...\n  if (!isObject(source) || !isObject(target)) {\n    return overwrite ? clone(source) : target;\n  }\n\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      var targetProp = target[key];\n      var sourceProp = source[key];\n\n      if (isObject(sourceProp) && isObject(targetProp) && !isArray(sourceProp) && !isArray(targetProp) && !isDom(sourceProp) && !isDom(targetProp) && !isBuiltInObject(sourceProp) && !isBuiltInObject(targetProp) && !isPrimitive(sourceProp) && !isPrimitive(targetProp)) {\n        // merge\n        merge(targetProp, sourceProp, overwrite);\n      } else if (overwrite || !(key in target)) {\n        // overwritetrue\n        // NOTE target[key] \n        target[key] = clone(source[key], true);\n      }\n    }\n  }\n\n  return target;\n}\n/**\n * @param {Array} targetAndSources The first item is target, and the rests are source.\n * @param {boolean} [overwrite=false]\n * @return {*} target\n */\n\n\nfunction mergeAll(targetAndSources, overwrite) {\n  var result = targetAndSources[0];\n\n  for (var i = 1, len = targetAndSources.length; i < len; i++) {\n    result = merge(result, targetAndSources[i], overwrite);\n  }\n\n  return result;\n}\n/**\n * @param {*} target\n * @param {*} source\n * @memberOf module:zrender/core/util\n */\n\n\nfunction extend(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n/**\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overlay=false]\n * @memberOf module:zrender/core/util\n */\n\n\nfunction defaults(target, source, overlay) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key) && (overlay ? source[key] != null : target[key] == null)) {\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nvar createCanvas = function () {\n  return methods.createCanvas();\n};\n\nmethods.createCanvas = function () {\n  return document.createElement('canvas');\n}; // FIXME\n\n\nvar _ctx;\n\nfunction getContext() {\n  if (!_ctx) {\n    // Use util.createCanvas instead of createCanvas\n    // because createCanvas may be overwritten in different environment\n    _ctx = createCanvas().getContext('2d');\n  }\n\n  return _ctx;\n}\n/**\n * index\n * @memberOf module:zrender/core/util\n */\n\n\nfunction indexOf(array, value) {\n  if (array) {\n    if (array.indexOf) {\n      return array.indexOf(value);\n    }\n\n    for (var i = 0, len = array.length; i < len; i++) {\n      if (array[i] === value) {\n        return i;\n      }\n    }\n  }\n\n  return -1;\n}\n/**\n * \n *\n * @memberOf module:zrender/core/util\n * @param {Function} clazz \n * @param {Function} baseClazz \n */\n\n\nfunction inherits(clazz, baseClazz) {\n  var clazzPrototype = clazz.prototype;\n\n  function F() {}\n\n  F.prototype = baseClazz.prototype;\n  clazz.prototype = new F();\n\n  for (var prop in clazzPrototype) {\n    if (clazzPrototype.hasOwnProperty(prop)) {\n      clazz.prototype[prop] = clazzPrototype[prop];\n    }\n  }\n\n  clazz.prototype.constructor = clazz;\n  clazz.superClass = baseClazz;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Object|Function} target\n * @param {Object|Function} sorce\n * @param {boolean} overlay\n */\n\n\nfunction mixin(target, source, overlay) {\n  target = 'prototype' in target ? target.prototype : target;\n  source = 'prototype' in source ? source.prototype : source;\n  defaults(target, source, overlay);\n}\n/**\n * Consider typed array.\n * @param {Array|TypedArray} data\n */\n\n\nfunction isArrayLike(data) {\n  if (!data) {\n    return;\n  }\n\n  if (typeof data === 'string') {\n    return false;\n  }\n\n  return typeof data.length === 'number';\n}\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Object|Array} obj\n * @param {Function} cb\n * @param {*} [context]\n */\n\n\nfunction each(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.forEach && obj.forEach === nativeForEach) {\n    obj.forEach(cb, context);\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, len = obj.length; i < len; i++) {\n      cb.call(context, obj[i], i, obj);\n    }\n  } else {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        cb.call(context, obj[key], key, obj);\n      }\n    }\n  }\n}\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction map(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.map && obj.map === nativeMap) {\n    return obj.map(cb, context);\n  } else {\n    var result = [];\n\n    for (var i = 0, len = obj.length; i < len; i++) {\n      result.push(cb.call(context, obj[i], i, obj));\n    }\n\n    return result;\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {Object} [memo]\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction reduce(obj, cb, memo, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.reduce && obj.reduce === nativeReduce) {\n    return obj.reduce(cb, memo, context);\n  } else {\n    for (var i = 0, len = obj.length; i < len; i++) {\n      memo = cb.call(context, memo, obj[i], i, obj);\n    }\n\n    return memo;\n  }\n}\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction filter(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.filter && obj.filter === nativeFilter) {\n    return obj.filter(cb, context);\n  } else {\n    var result = [];\n\n    for (var i = 0, len = obj.length; i < len; i++) {\n      if (cb.call(context, obj[i], i, obj)) {\n        result.push(obj[i]);\n      }\n    }\n\n    return result;\n  }\n}\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {*}\n */\n\n\nfunction find(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  for (var i = 0, len = obj.length; i < len; i++) {\n    if (cb.call(context, obj[i], i, obj)) {\n      return obj[i];\n    }\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @param {*} context\n * @return {Function}\n */\n\n\nfunction bind(func, context) {\n  var args = nativeSlice.call(arguments, 2);\n  return function () {\n    return func.apply(context, args.concat(nativeSlice.call(arguments)));\n  };\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @return {Function}\n */\n\n\nfunction curry(func) {\n  var args = nativeSlice.call(arguments, 1);\n  return function () {\n    return func.apply(this, args.concat(nativeSlice.call(arguments)));\n  };\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isArray(value) {\n  return objToString.call(value) === '[object Array]';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isString(value) {\n  return objToString.call(value) === '[object String]';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return type === 'function' || !!value && type === 'object';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isBuiltInObject(value) {\n  return !!BUILTIN_OBJECT[objToString.call(value)];\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isTypedArray(value) {\n  return !!TYPED_ARRAY[objToString.call(value)];\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isDom(value) {\n  return typeof value === 'object' && typeof value.nodeType === 'number' && typeof value.ownerDocument === 'object';\n}\n/**\n * Whether is exactly NaN. Notice isNaN('a') returns true.\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction eqNaN(value) {\n  /* eslint-disable-next-line no-self-compare */\n  return value !== value;\n}\n/**\n * If value1 is not null, then return value1, otherwise judget rest of values.\n * Low performance.\n * @memberOf module:zrender/core/util\n * @return {*} Final value\n */\n\n\nfunction retrieve(values) {\n  for (var i = 0, len = arguments.length; i < len; i++) {\n    if (arguments[i] != null) {\n      return arguments[i];\n    }\n  }\n}\n\nfunction retrieve2(value0, value1) {\n  return value0 != null ? value0 : value1;\n}\n\nfunction retrieve3(value0, value1, value2) {\n  return value0 != null ? value0 : value1 != null ? value1 : value2;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} arr\n * @param {number} startIndex\n * @param {number} endIndex\n * @return {Array}\n */\n\n\nfunction slice() {\n  return Function.call.apply(nativeSlice, arguments);\n}\n/**\n * Normalize css liked array configuration\n * e.g.\n *  3 => [3, 3, 3, 3]\n *  [4, 2] => [4, 2, 4, 2]\n *  [4, 3, 2] => [4, 3, 2, 3]\n * @param {number|Array.<number>} val\n * @return {Array.<number>}\n */\n\n\nfunction normalizeCssArray(val) {\n  if (typeof val === 'number') {\n    return [val, val, val, val];\n  }\n\n  var len = val.length;\n\n  if (len === 2) {\n    // vertical | horizontal\n    return [val[0], val[1], val[0], val[1]];\n  } else if (len === 3) {\n    // top | horizontal | bottom\n    return [val[0], val[1], val[2], val[1]];\n  }\n\n  return val;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {boolean} condition\n * @param {string} message\n */\n\n\nfunction assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {string} str string to be trimed\n * @return {string} trimed string\n */\n\n\nfunction trim(str) {\n  if (str == null) {\n    return null;\n  } else if (typeof str.trim === 'function') {\n    return str.trim();\n  } else {\n    return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n  }\n}\n\nvar primitiveKey = '__ec_primitive__';\n/**\n * Set an object as primitive to be ignored traversing children in clone or merge\n */\n\nfunction setAsPrimitive(obj) {\n  obj[primitiveKey] = true;\n}\n\nfunction isPrimitive(obj) {\n  return obj[primitiveKey];\n}\n/**\n * @constructor\n * @param {Object} obj Only apply `ownProperty`.\n */\n\n\nfunction HashMap(obj) {\n  var isArr = isArray(obj); // Key should not be set on this, otherwise\n  // methods get/set/... may be overrided.\n\n  this.data = {};\n  var thisMap = this;\n  obj instanceof HashMap ? obj.each(visit) : obj && each(obj, visit);\n\n  function visit(value, key) {\n    isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n  }\n}\n\nHashMap.prototype = {\n  constructor: HashMap,\n  // Do not provide `has` method to avoid defining what is `has`.\n  // (We usually treat `null` and `undefined` as the same, different\n  // from ES6 Map).\n  get: function (key) {\n    return this.data.hasOwnProperty(key) ? this.data[key] : null;\n  },\n  set: function (key, value) {\n    // Comparing with invocation chaining, `return value` is more commonly\n    // used in this case: `var someVal = map.set('a', genVal());`\n    return this.data[key] = value;\n  },\n  // Although util.each can be performed on this hashMap directly, user\n  // should not use the exposed keys, who are prefixed.\n  each: function (cb, context) {\n    context !== void 0 && (cb = bind(cb, context));\n    /* eslint-disable guard-for-in */\n\n    for (var key in this.data) {\n      this.data.hasOwnProperty(key) && cb(this.data[key], key);\n    }\n    /* eslint-enable guard-for-in */\n\n  },\n  // Do not use this method if performance sensitive.\n  removeKey: function (key) {\n    delete this.data[key];\n  }\n};\n\nfunction createHashMap(obj) {\n  return new HashMap(obj);\n}\n\nfunction concatArray(a, b) {\n  var newArray = new a.constructor(a.length + b.length);\n\n  for (var i = 0; i < a.length; i++) {\n    newArray[i] = a[i];\n  }\n\n  var offset = a.length;\n\n  for (i = 0; i < b.length; i++) {\n    newArray[i + offset] = b[i];\n  }\n\n  return newArray;\n}\n\nfunction noop() {}\n\nexports.$override = $override;\nexports.clone = clone;\nexports.merge = merge;\nexports.mergeAll = mergeAll;\nexports.extend = extend;\nexports.defaults = defaults;\nexports.createCanvas = createCanvas;\nexports.getContext = getContext;\nexports.indexOf = indexOf;\nexports.inherits = inherits;\nexports.mixin = mixin;\nexports.isArrayLike = isArrayLike;\nexports.each = each;\nexports.map = map;\nexports.reduce = reduce;\nexports.filter = filter;\nexports.find = find;\nexports.bind = bind;\nexports.curry = curry;\nexports.isArray = isArray;\nexports.isFunction = isFunction;\nexports.isString = isString;\nexports.isObject = isObject;\nexports.isBuiltInObject = isBuiltInObject;\nexports.isTypedArray = isTypedArray;\nexports.isDom = isDom;\nexports.eqNaN = eqNaN;\nexports.retrieve = retrieve;\nexports.retrieve2 = retrieve2;\nexports.retrieve3 = retrieve3;\nexports.slice = slice;\nexports.normalizeCssArray = normalizeCssArray;\nexports.assert = assert;\nexports.trim = trim;\nexports.setAsPrimitive = setAsPrimitive;\nexports.isPrimitive = isPrimitive;\nexports.createHashMap = createHashMap;\nexports.concatArray = concatArray;\nexports.noop = noop;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"./config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrender = require(\"zrender/lib/zrender\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar colorTool = require(\"zrender/lib/tool/color\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar timsort = require(\"zrender/lib/core/timsort\");\n\nvar Eventful = require(\"zrender/lib/mixin/Eventful\");\n\nvar GlobalModel = require(\"./model/Global\");\n\nvar ExtensionAPI = require(\"./ExtensionAPI\");\n\nvar CoordinateSystemManager = require(\"./CoordinateSystem\");\n\nvar OptionManager = require(\"./model/OptionManager\");\n\nvar backwardCompat = require(\"./preprocessor/backwardCompat\");\n\nvar dataStack = require(\"./processor/dataStack\");\n\nvar ComponentModel = require(\"./model/Component\");\n\nvar SeriesModel = require(\"./model/Series\");\n\nvar ComponentView = require(\"./view/Component\");\n\nvar ChartView = require(\"./view/Chart\");\n\nvar graphic = require(\"./util/graphic\");\n\nvar modelUtil = require(\"./util/model\");\n\nvar _throttle = require(\"./util/throttle\");\n\nvar throttle = _throttle.throttle;\n\nvar seriesColor = require(\"./visual/seriesColor\");\n\nvar aria = require(\"./visual/aria\");\n\nvar loadingDefault = require(\"./loading/default\");\n\nvar Scheduler = require(\"./stream/Scheduler\");\n\nvar lightTheme = require(\"./theme/light\");\n\nvar darkTheme = require(\"./theme/dark\");\n\nrequire(\"./component/dataset\");\n\nvar mapDataStorage = require(\"./coord/geo/mapDataStorage\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar assert = zrUtil.assert;\nvar each = zrUtil.each;\nvar isFunction = zrUtil.isFunction;\nvar isObject = zrUtil.isObject;\nvar parseClassType = ComponentModel.parseClassType;\nvar version = '4.8.0';\nvar dependencies = {\n  zrender: '4.3.1'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800;\nvar PRIORITY_PROCESSOR_DATASTACK = 900;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 3500;\nvar PRIORITY_VISUAL_COMPONENT = 4000; // FIXME\n// necessary?\n\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH\n  }\n}; // Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\n\nvar IN_MAIN_PROCESS = '__flagInMainProcess';\nvar OPTION_UPDATED = '__optionUpdated';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\n\nfunction createRegisterEventWithLowercaseName(method, ignoreDisposed) {\n  return function (eventName, handler, context) {\n    if (!ignoreDisposed && this._disposed) {\n      disposedWarning(this.id);\n      return;\n    } // Event name is all lowercase\n\n\n    eventName = eventName && eventName.toLowerCase();\n    Eventful.prototype[method].call(this, eventName, handler, context);\n  };\n}\n/**\n * @module echarts~MessageCenter\n */\n\n\nfunction MessageCenter() {\n  Eventful.call(this);\n}\n\nMessageCenter.prototype.on = createRegisterEventWithLowercaseName('on', true);\nMessageCenter.prototype.off = createRegisterEventWithLowercaseName('off', true);\nMessageCenter.prototype.one = createRegisterEventWithLowercaseName('one', true);\nzrUtil.mixin(MessageCenter, Eventful);\n/**\n * @module echarts~ECharts\n */\n\nfunction ECharts(dom, theme, opts) {\n  opts = opts || {}; // Get theme by name\n\n  if (typeof theme === 'string') {\n    theme = themeStorage[theme];\n  }\n  /**\n   * @type {string}\n   */\n\n\n  this.id;\n  /**\n   * Group id\n   * @type {string}\n   */\n\n  this.group;\n  /**\n   * @type {HTMLElement}\n   * @private\n   */\n\n  this._dom = dom;\n  var defaultRenderer = 'canvas';\n\n  /**\n   * @type {module:zrender/ZRender}\n   * @private\n   */\n  var zr = this._zr = zrender.init(dom, {\n    renderer: opts.renderer || defaultRenderer,\n    devicePixelRatio: opts.devicePixelRatio,\n    width: opts.width,\n    height: opts.height\n  });\n  /**\n   * Expect 60 fps.\n   * @type {Function}\n   * @private\n   */\n\n  this._throttledZrFlush = throttle(zrUtil.bind(zr.flush, zr), 17);\n  var theme = zrUtil.clone(theme);\n  theme && backwardCompat(theme, true);\n  /**\n   * @type {Object}\n   * @private\n   */\n\n  this._theme = theme;\n  /**\n   * @type {Array.<module:echarts/view/Chart>}\n   * @private\n   */\n\n  this._chartsViews = [];\n  /**\n   * @type {Object.<string, module:echarts/view/Chart>}\n   * @private\n   */\n\n  this._chartsMap = {};\n  /**\n   * @type {Array.<module:echarts/view/Component>}\n   * @private\n   */\n\n  this._componentsViews = [];\n  /**\n   * @type {Object.<string, module:echarts/view/Component>}\n   * @private\n   */\n\n  this._componentsMap = {};\n  /**\n   * @type {module:echarts/CoordinateSystem}\n   * @private\n   */\n\n  this._coordSysMgr = new CoordinateSystemManager();\n  /**\n   * @type {module:echarts/ExtensionAPI}\n   * @private\n   */\n\n  var api = this._api = createExtensionAPI(this); // Sort on demand\n\n  function prioritySortFunc(a, b) {\n    return a.__prio - b.__prio;\n  }\n\n  timsort(visualFuncs, prioritySortFunc);\n  timsort(dataProcessorFuncs, prioritySortFunc);\n  /**\n   * @type {module:echarts/stream/Scheduler}\n   */\n\n  this._scheduler = new Scheduler(this, api, dataProcessorFuncs, visualFuncs);\n  Eventful.call(this, this._ecEventProcessor = new EventProcessor());\n  /**\n   * @type {module:echarts~MessageCenter}\n   * @private\n   */\n\n  this._messageCenter = new MessageCenter(); // Init mouse events\n\n  this._initEvents(); // In case some people write `window.onresize = chart.resize`\n\n\n  this.resize = zrUtil.bind(this.resize, this); // Can't dispatch action during rendering procedure\n\n  this._pendingActions = [];\n  zr.animation.on('frame', this._onframe, this);\n  bindRenderedEvent(zr, this); // ECharts instance can be used as value.\n\n  zrUtil.setAsPrimitive(this);\n}\n\nvar echartsProto = ECharts.prototype;\n\nechartsProto._onframe = function () {\n  if (this._disposed) {\n    return;\n  }\n\n  var scheduler = this._scheduler; // Lazy update\n\n  if (this[OPTION_UPDATED]) {\n    var silent = this[OPTION_UPDATED].silent;\n    this[IN_MAIN_PROCESS] = true;\n    prepare(this);\n    updateMethods.update.call(this);\n    this[IN_MAIN_PROCESS] = false;\n    this[OPTION_UPDATED] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  } // Avoid do both lazy update and progress in one frame.\n  else if (scheduler.unfinished) {\n      // Stream progress.\n      var remainTime = TEST_FRAME_REMAIN_TIME;\n      var ecModel = this._model;\n      var api = this._api;\n      scheduler.unfinished = false;\n\n      do {\n        var startTime = +new Date();\n        scheduler.performSeriesTasks(ecModel); // Currently dataProcessorFuncs do not check threshold.\n\n        scheduler.performDataProcessorTasks(ecModel);\n        updateStreamModes(this, ecModel); // Do not update coordinate system here. Because that coord system update in\n        // each frame is not a good user experience. So we follow the rule that\n        // the extent of the coordinate system is determin in the first frame (the\n        // frame is executed immedietely after task reset.\n        // this._coordSysMgr.update(ecModel, api);\n        // console.log('--- ec frame visual ---', remainTime);\n\n        scheduler.performVisualTasks(ecModel);\n        renderSeries(this, this._model, api, 'remain');\n        remainTime -= +new Date() - startTime;\n      } while (remainTime > 0 && scheduler.unfinished); // Call flush explicitly for trigger finished event.\n\n\n      if (!scheduler.unfinished) {\n        this._zr.flush();\n      } // Else, zr flushing be ensue within the same frame,\n      // because zr flushing is after onframe event.\n\n    }\n};\n/**\n * @return {HTMLElement}\n */\n\n\nechartsProto.getDom = function () {\n  return this._dom;\n};\n/**\n * @return {module:zrender~ZRender}\n */\n\n\nechartsProto.getZr = function () {\n  return this._zr;\n};\n/**\n * Usage:\n * chart.setOption(option, notMerge, lazyUpdate);\n * chart.setOption(option, {\n *     notMerge: ...,\n *     lazyUpdate: ...,\n *     silent: ...\n * });\n *\n * @param {Object} option\n * @param {Object|boolean} [opts] opts or notMerge.\n * @param {boolean} [opts.notMerge=false]\n * @param {boolean} [opts.lazyUpdate=false] Useful when setOption frequently.\n */\n\n\nechartsProto.setOption = function (option, notMerge, lazyUpdate) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  var silent;\n\n  if (isObject(notMerge)) {\n    lazyUpdate = notMerge.lazyUpdate;\n    silent = notMerge.silent;\n    notMerge = notMerge.notMerge;\n  }\n\n  this[IN_MAIN_PROCESS] = true;\n\n  if (!this._model || notMerge) {\n    var optionManager = new OptionManager(this._api);\n    var theme = this._theme;\n    var ecModel = this._model = new GlobalModel();\n    ecModel.scheduler = this._scheduler;\n    ecModel.init(null, null, theme, optionManager);\n  }\n\n  this._model.setOption(option, optionPreprocessorFuncs);\n\n  if (lazyUpdate) {\n    this[OPTION_UPDATED] = {\n      silent: silent\n    };\n    this[IN_MAIN_PROCESS] = false;\n  } else {\n    prepare(this);\n    updateMethods.update.call(this); // Ensure zr refresh sychronously, and then pixel in canvas can be\n    // fetched after `setOption`.\n\n    this._zr.flush();\n\n    this[OPTION_UPDATED] = false;\n    this[IN_MAIN_PROCESS] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  }\n};\n/**\n * @DEPRECATED\n */\n\n\nechartsProto.setTheme = function () {\n  console.error('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n};\n/**\n * @return {module:echarts/model/Global}\n */\n\n\nechartsProto.getModel = function () {\n  return this._model;\n};\n/**\n * @return {Object}\n */\n\n\nechartsProto.getOption = function () {\n  return this._model && this._model.getOption();\n};\n/**\n * @return {number}\n */\n\n\nechartsProto.getWidth = function () {\n  return this._zr.getWidth();\n};\n/**\n * @return {number}\n */\n\n\nechartsProto.getHeight = function () {\n  return this._zr.getHeight();\n};\n/**\n * @return {number}\n */\n\n\nechartsProto.getDevicePixelRatio = function () {\n  return this._zr.painter.dpr || window.devicePixelRatio || 1;\n};\n/**\n * Get canvas which has all thing rendered\n * @param {Object} opts\n * @param {string} [opts.backgroundColor]\n * @return {string}\n */\n\n\nechartsProto.getRenderedCanvas = function (opts) {\n  if (!env.canvasSupported) {\n    return;\n  }\n\n  opts = opts || {};\n  opts.pixelRatio = opts.pixelRatio || 1;\n  opts.backgroundColor = opts.backgroundColor || this._model.get('backgroundColor');\n  var zr = this._zr; // var list = zr.storage.getDisplayList();\n  // Stop animations\n  // Never works before in init animation, so remove it.\n  // zrUtil.each(list, function (el) {\n  //     el.stopAnimation(true);\n  // });\n\n  return zr.painter.getRenderedCanvas(opts);\n};\n/**\n * Get svg data url\n * @return {string}\n */\n\n\nechartsProto.getSvgDataURL = function () {\n  if (!env.svgSupported) {\n    return;\n  }\n\n  var zr = this._zr;\n  var list = zr.storage.getDisplayList(); // Stop animations\n\n  zrUtil.each(list, function (el) {\n    el.stopAnimation(true);\n  });\n  return zr.painter.toDataURL();\n};\n/**\n * @return {string}\n * @param {Object} opts\n * @param {string} [opts.type='png']\n * @param {string} [opts.pixelRatio=1]\n * @param {string} [opts.backgroundColor]\n * @param {string} [opts.excludeComponents]\n */\n\n\nechartsProto.getDataURL = function (opts) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  opts = opts || {};\n  var excludeComponents = opts.excludeComponents;\n  var ecModel = this._model;\n  var excludesComponentViews = [];\n  var self = this;\n  each(excludeComponents, function (componentType) {\n    ecModel.eachComponent({\n      mainType: componentType\n    }, function (component) {\n      var view = self._componentsMap[component.__viewId];\n\n      if (!view.group.ignore) {\n        excludesComponentViews.push(view);\n        view.group.ignore = true;\n      }\n    });\n  });\n  var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.getRenderedCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n  each(excludesComponentViews, function (view) {\n    view.group.ignore = false;\n  });\n  return url;\n};\n/**\n * @return {string}\n * @param {Object} opts\n * @param {string} [opts.type='png']\n * @param {string} [opts.pixelRatio=1]\n * @param {string} [opts.backgroundColor]\n */\n\n\nechartsProto.getConnectedDataURL = function (opts) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  if (!env.canvasSupported) {\n    return;\n  }\n\n  var isSvg = opts.type === 'svg';\n  var groupId = this.group;\n  var mathMin = Math.min;\n  var mathMax = Math.max;\n  var MAX_NUMBER = Infinity;\n\n  if (connectedGroups[groupId]) {\n    var left = MAX_NUMBER;\n    var top = MAX_NUMBER;\n    var right = -MAX_NUMBER;\n    var bottom = -MAX_NUMBER;\n    var canvasList = [];\n    var dpr = opts && opts.pixelRatio || 1;\n    zrUtil.each(instances, function (chart, id) {\n      if (chart.group === groupId) {\n        var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.getRenderedCanvas(zrUtil.clone(opts));\n        var boundingRect = chart.getDom().getBoundingClientRect();\n        left = mathMin(boundingRect.left, left);\n        top = mathMin(boundingRect.top, top);\n        right = mathMax(boundingRect.right, right);\n        bottom = mathMax(boundingRect.bottom, bottom);\n        canvasList.push({\n          dom: canvas,\n          left: boundingRect.left,\n          top: boundingRect.top\n        });\n      }\n    });\n    left *= dpr;\n    top *= dpr;\n    right *= dpr;\n    bottom *= dpr;\n    var width = right - left;\n    var height = bottom - top;\n    var targetCanvas = zrUtil.createCanvas();\n    var zr = zrender.init(targetCanvas, {\n      renderer: isSvg ? 'svg' : 'canvas'\n    });\n    zr.resize({\n      width: width,\n      height: height\n    });\n\n    if (isSvg) {\n      var content = '';\n      each(canvasList, function (item) {\n        var x = item.left - left;\n        var y = item.top - top;\n        content += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n      });\n      zr.painter.getSvgRoot().innerHTML = content;\n\n      if (opts.connectedBackgroundColor) {\n        zr.painter.setBackgroundColor(opts.connectedBackgroundColor);\n      }\n\n      zr.refreshImmediately();\n      return zr.painter.toDataURL();\n    } else {\n      // Background between the charts\n      if (opts.connectedBackgroundColor) {\n        zr.add(new graphic.Rect({\n          shape: {\n            x: 0,\n            y: 0,\n            width: width,\n            height: height\n          },\n          style: {\n            fill: opts.connectedBackgroundColor\n          }\n        }));\n      }\n\n      each(canvasList, function (item) {\n        var img = new graphic.Image({\n          style: {\n            x: item.left * dpr - left,\n            y: item.top * dpr - top,\n            image: item.dom\n          }\n        });\n        zr.add(img);\n      });\n      zr.refreshImmediately();\n      return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n    }\n  } else {\n    return this.getDataURL(opts);\n  }\n};\n/**\n * Convert from logical coordinate system to pixel coordinate system.\n * See CoordinateSystem#convertToPixel.\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            geoIndex / geoId, geoName,\n *            bmapIndex / bmapId / bmapName,\n *            xAxisIndex / xAxisId / xAxisName,\n *            yAxisIndex / yAxisId / yAxisName,\n *            gridIndex / gridId / gridName,\n *            ... (can be extended)\n *        }\n * @param {Array|number} value\n * @return {Array|number} result\n */\n\n\nechartsProto.convertToPixel = zrUtil.curry(doConvertPixel, 'convertToPixel');\n/**\n * Convert from pixel coordinate system to logical coordinate system.\n * See CoordinateSystem#convertFromPixel.\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            geoIndex / geoId / geoName,\n *            bmapIndex / bmapId / bmapName,\n *            xAxisIndex / xAxisId / xAxisName,\n *            yAxisIndex / yAxisId / yAxisName\n *            gridIndex / gridId / gridName,\n *            ... (can be extended)\n *        }\n * @param {Array|number} value\n * @return {Array|number} result\n */\n\nechartsProto.convertFromPixel = zrUtil.curry(doConvertPixel, 'convertFromPixel');\n\nfunction doConvertPixel(methodName, finder, value) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  var ecModel = this._model;\n\n  var coordSysList = this._coordSysMgr.getCoordinateSystems();\n\n  var result;\n  finder = modelUtil.parseFinder(ecModel, finder);\n\n  for (var i = 0; i < coordSysList.length; i++) {\n    var coordSys = coordSysList[i];\n\n    if (coordSys[methodName] && (result = coordSys[methodName](ecModel, finder, value)) != null) {\n      return result;\n    }\n  }\n}\n/**\n * Is the specified coordinate systems or components contain the given pixel point.\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            geoIndex / geoId / geoName,\n *            bmapIndex / bmapId / bmapName,\n *            xAxisIndex / xAxisId / xAxisName,\n *            yAxisIndex / yAxisId / yAxisName,\n *            gridIndex / gridId / gridName,\n *            ... (can be extended)\n *        }\n * @param {Array|number} value\n * @return {boolean} result\n */\n\n\nechartsProto.containPixel = function (finder, value) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  var ecModel = this._model;\n  var result;\n  finder = modelUtil.parseFinder(ecModel, finder);\n  zrUtil.each(finder, function (models, key) {\n    key.indexOf('Models') >= 0 && zrUtil.each(models, function (model) {\n      var coordSys = model.coordinateSystem;\n\n      if (coordSys && coordSys.containPoint) {\n        result |= !!coordSys.containPoint(value);\n      } else if (key === 'seriesModels') {\n        var view = this._chartsMap[model.__viewId];\n\n        if (view && view.containPoint) {\n          result |= view.containPoint(value, model);\n        } else {}\n      } else {}\n    }, this);\n  }, this);\n  return !!result;\n};\n/**\n * Get visual from series or data.\n * @param {string|Object} finder\n *        If string, e.g., 'series', means {seriesIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex / seriesId / seriesName,\n *            dataIndex / dataIndexInside\n *        }\n *        If dataIndex is not specified, series visual will be fetched,\n *        but not data item visual.\n *        If all of seriesIndex, seriesId, seriesName are not specified,\n *        visual will be fetched from first series.\n * @param {string} visualType 'color', 'symbol', 'symbolSize'\n */\n\n\nechartsProto.getVisual = function (finder, visualType) {\n  var ecModel = this._model;\n  finder = modelUtil.parseFinder(ecModel, finder, {\n    defaultMainType: 'series'\n  });\n  var seriesModel = finder.seriesModel;\n  var data = seriesModel.getData();\n  var dataIndexInside = finder.hasOwnProperty('dataIndexInside') ? finder.dataIndexInside : finder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(finder.dataIndex) : null;\n  return dataIndexInside != null ? data.getItemVisual(dataIndexInside, visualType) : data.getVisual(visualType);\n};\n/**\n * Get view of corresponding component model\n * @param  {module:echarts/model/Component} componentModel\n * @return {module:echarts/view/Component}\n */\n\n\nechartsProto.getViewOfComponentModel = function (componentModel) {\n  return this._componentsMap[componentModel.__viewId];\n};\n/**\n * Get view of corresponding series model\n * @param  {module:echarts/model/Series} seriesModel\n * @return {module:echarts/view/Chart}\n */\n\n\nechartsProto.getViewOfSeriesModel = function (seriesModel) {\n  return this._chartsMap[seriesModel.__viewId];\n};\n\nvar updateMethods = {\n  prepareAndUpdate: function (payload) {\n    prepare(this);\n    updateMethods.update.call(this, payload);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  update: function (payload) {\n    // console.profile && console.profile('update');\n    var ecModel = this._model;\n    var api = this._api;\n    var zr = this._zr;\n    var coordSysMgr = this._coordSysMgr;\n    var scheduler = this._scheduler; // update before setOption\n\n    if (!ecModel) {\n      return;\n    }\n\n    scheduler.restoreData(ecModel, payload);\n    scheduler.performSeriesTasks(ecModel); // TODO\n    // Save total ecModel here for undo/redo (after restoring data and before processing data).\n    // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n    // Create new coordinate system each update\n    // In LineView may save the old coordinate system and use it to get the orignal point\n\n    coordSysMgr.create(ecModel, api);\n    scheduler.performDataProcessorTasks(ecModel, payload); // Current stream render is not supported in data process. So we can update\n    // stream modes after data processing, where the filtered data is used to\n    // deteming whether use progressive rendering.\n\n    updateStreamModes(this, ecModel); // We update stream modes before coordinate system updated, then the modes info\n    // can be fetched when coord sys updating (consider the barGrid extent fix). But\n    // the drawback is the full coord info can not be fetched. Fortunately this full\n    // coord is not requied in stream mode updater currently.\n\n    coordSysMgr.update(ecModel, api);\n    clearColorPalette(ecModel);\n    scheduler.performVisualTasks(ecModel, payload);\n    render(this, ecModel, api, payload); // Set background\n\n    var backgroundColor = ecModel.get('backgroundColor') || 'transparent'; // In IE8\n\n    if (!env.canvasSupported) {\n      var colorArr = colorTool.parse(backgroundColor);\n      backgroundColor = colorTool.stringify(colorArr, 'rgb');\n\n      if (colorArr[3] === 0) {\n        backgroundColor = 'transparent';\n      }\n    } else {\n      zr.setBackgroundColor(backgroundColor);\n    }\n\n    performPostUpdateFuncs(ecModel, api); // console.profile && console.profileEnd('update');\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateTransform: function (payload) {\n    var ecModel = this._model;\n    var ecIns = this;\n    var api = this._api; // update before setOption\n\n    if (!ecModel) {\n      return;\n    } // ChartView.markUpdateMethod(payload, 'updateTransform');\n\n\n    var componentDirtyList = [];\n    ecModel.eachComponent(function (componentType, componentModel) {\n      var componentView = ecIns.getViewOfComponentModel(componentModel);\n\n      if (componentView && componentView.__alive) {\n        if (componentView.updateTransform) {\n          var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n          result && result.update && componentDirtyList.push(componentView);\n        } else {\n          componentDirtyList.push(componentView);\n        }\n      }\n    });\n    var seriesDirtyMap = zrUtil.createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var chartView = ecIns._chartsMap[seriesModel.__viewId];\n\n      if (chartView.updateTransform) {\n        var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n        result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n      } else {\n        seriesDirtyMap.set(seriesModel.uid, 1);\n      }\n    });\n    clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n    // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n\n    this._scheduler.performVisualTasks(ecModel, payload, {\n      setDirty: true,\n      dirtyMap: seriesDirtyMap\n    }); // Currently, not call render of components. Geo render cost a lot.\n    // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n\n\n    renderSeries(ecIns, ecModel, api, payload, seriesDirtyMap);\n    performPostUpdateFuncs(ecModel, this._api);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateView: function (payload) {\n    var ecModel = this._model; // update before setOption\n\n    if (!ecModel) {\n      return;\n    }\n\n    ChartView.markUpdateMethod(payload, 'updateView');\n    clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n    this._scheduler.performVisualTasks(ecModel, payload, {\n      setDirty: true\n    });\n\n    render(this, this._model, this._api, payload);\n    performPostUpdateFuncs(ecModel, this._api);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateVisual: function (payload) {\n    updateMethods.update.call(this, payload); // var ecModel = this._model;\n    // // update before setOption\n    // if (!ecModel) {\n    //     return;\n    // }\n    // ChartView.markUpdateMethod(payload, 'updateVisual');\n    // clearColorPalette(ecModel);\n    // // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n    // this._scheduler.performVisualTasks(ecModel, payload, {visualType: 'visual', setDirty: true});\n    // render(this, this._model, this._api, payload);\n    // performPostUpdateFuncs(ecModel, this._api);\n  },\n\n  /**\n   * @param {Object} payload\n   * @private\n   */\n  updateLayout: function (payload) {\n    updateMethods.update.call(this, payload); // var ecModel = this._model;\n    // // update before setOption\n    // if (!ecModel) {\n    //     return;\n    // }\n    // ChartView.markUpdateMethod(payload, 'updateLayout');\n    // // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n    // // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n    // this._scheduler.performVisualTasks(ecModel, payload, {setDirty: true});\n    // render(this, this._model, this._api, payload);\n    // performPostUpdateFuncs(ecModel, this._api);\n  }\n};\n\nfunction prepare(ecIns) {\n  var ecModel = ecIns._model;\n  var scheduler = ecIns._scheduler;\n  scheduler.restorePipelines(ecModel);\n  scheduler.prepareStageTasks();\n  prepareView(ecIns, 'component', ecModel, scheduler);\n  prepareView(ecIns, 'chart', ecModel, scheduler);\n  scheduler.plan();\n}\n/**\n * @private\n */\n\n\nfunction updateDirectly(ecIns, method, payload, mainType, subType) {\n  var ecModel = ecIns._model; // broadcast\n\n  if (!mainType) {\n    // FIXME\n    // Chart will not be update directly here, except set dirty.\n    // But there is no such scenario now.\n    each(ecIns._componentsViews.concat(ecIns._chartsViews), callView);\n    return;\n  }\n\n  var query = {};\n  query[mainType + 'Id'] = payload[mainType + 'Id'];\n  query[mainType + 'Index'] = payload[mainType + 'Index'];\n  query[mainType + 'Name'] = payload[mainType + 'Name'];\n  var condition = {\n    mainType: mainType,\n    query: query\n  };\n  subType && (condition.subType = subType); // subType may be '' by parseClassType;\n\n  var excludeSeriesId = payload.excludeSeriesId;\n\n  if (excludeSeriesId != null) {\n    excludeSeriesId = zrUtil.createHashMap(modelUtil.normalizeToArray(excludeSeriesId));\n  } // If dispatchAction before setOption, do nothing.\n\n\n  ecModel && ecModel.eachComponent(condition, function (model) {\n    if (!excludeSeriesId || excludeSeriesId.get(model.id) == null) {\n      callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n    }\n  }, ecIns);\n\n  function callView(view) {\n    view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n  }\n}\n/**\n * Resize the chart\n * @param {Object} opts\n * @param {number} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Can be 'auto' (the same as null/undefined)\n * @param {boolean} [opts.silent=false]\n */\n\n\nechartsProto.resize = function (opts) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  this._zr.resize(opts);\n\n  var ecModel = this._model; // Resize loading effect\n\n  this._loadingFX && this._loadingFX.resize();\n\n  if (!ecModel) {\n    return;\n  }\n\n  var optionChanged = ecModel.resetOption('media');\n  var silent = opts && opts.silent;\n  this[IN_MAIN_PROCESS] = true;\n  optionChanged && prepare(this);\n  updateMethods.update.call(this);\n  this[IN_MAIN_PROCESS] = false;\n  flushPendingActions.call(this, silent);\n  triggerUpdatedEvent.call(this, silent);\n};\n\nfunction updateStreamModes(ecIns, ecModel) {\n  var chartsMap = ecIns._chartsMap;\n  var scheduler = ecIns._scheduler;\n  ecModel.eachSeries(function (seriesModel) {\n    scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n  });\n}\n/**\n * Show loading effect\n * @param  {string} [name='default']\n * @param  {Object} [cfg]\n */\n\n\nechartsProto.showLoading = function (name, cfg) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  if (isObject(name)) {\n    cfg = name;\n    name = '';\n  }\n\n  name = name || 'default';\n  this.hideLoading();\n\n  if (!loadingEffects[name]) {\n    return;\n  }\n\n  var el = loadingEffects[name](this._api, cfg);\n  var zr = this._zr;\n  this._loadingFX = el;\n  zr.add(el);\n};\n/**\n * Hide loading effect\n */\n\n\nechartsProto.hideLoading = function () {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  this._loadingFX && this._zr.remove(this._loadingFX);\n  this._loadingFX = null;\n};\n/**\n * @param {Object} eventObj\n * @return {Object}\n */\n\n\nechartsProto.makeActionFromEvent = function (eventObj) {\n  var payload = zrUtil.extend({}, eventObj);\n  payload.type = eventActionMap[eventObj.type];\n  return payload;\n};\n/**\n * @pubilc\n * @param {Object} payload\n * @param {string} [payload.type] Action type\n * @param {Object|boolean} [opt] If pass boolean, means opt.silent\n * @param {boolean} [opt.silent=false] Whether trigger events.\n * @param {boolean} [opt.flush=undefined]\n *                  true: Flush immediately, and then pixel in canvas can be fetched\n *                      immediately. Caution: it might affect performance.\n *                  false: Not flush.\n *                  undefined: Auto decide whether perform flush.\n */\n\n\nechartsProto.dispatchAction = function (payload, opt) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  if (!isObject(opt)) {\n    opt = {\n      silent: !!opt\n    };\n  }\n\n  if (!actions[payload.type]) {\n    return;\n  } // Avoid dispatch action before setOption. Especially in `connect`.\n\n\n  if (!this._model) {\n    return;\n  } // May dispatchAction in rendering procedure\n\n\n  if (this[IN_MAIN_PROCESS]) {\n    this._pendingActions.push(payload);\n\n    return;\n  }\n\n  doDispatchAction.call(this, payload, opt.silent);\n\n  if (opt.flush) {\n    this._zr.flush(true);\n  } else if (opt.flush !== false && env.browser.weChat) {\n    // In WeChat embeded browser, `requestAnimationFrame` and `setInterval`\n    // hang when sliding page (on touch event), which cause that zr does not\n    // refresh util user interaction finished, which is not expected.\n    // But `dispatchAction` may be called too frequently when pan on touch\n    // screen, which impacts performance if do not throttle them.\n    this._throttledZrFlush();\n  }\n\n  flushPendingActions.call(this, opt.silent);\n  triggerUpdatedEvent.call(this, opt.silent);\n};\n\nfunction doDispatchAction(payload, silent) {\n  var payloadType = payload.type;\n  var escapeConnect = payload.escapeConnect;\n  var actionWrap = actions[payloadType];\n  var actionInfo = actionWrap.actionInfo;\n  var cptType = (actionInfo.update || 'update').split(':');\n  var updateMethod = cptType.pop();\n  cptType = cptType[0] != null && parseClassType(cptType[0]);\n  this[IN_MAIN_PROCESS] = true;\n  var payloads = [payload];\n  var batched = false; // Batch action\n\n  if (payload.batch) {\n    batched = true;\n    payloads = zrUtil.map(payload.batch, function (item) {\n      item = zrUtil.defaults(zrUtil.extend({}, item), payload);\n      item.batch = null;\n      return item;\n    });\n  }\n\n  var eventObjBatch = [];\n  var eventObj;\n  var isHighDown = payloadType === 'highlight' || payloadType === 'downplay';\n  each(payloads, function (batchItem) {\n    // Action can specify the event by return it.\n    eventObj = actionWrap.action(batchItem, this._model, this._api); // Emit event outside\n\n    eventObj = eventObj || zrUtil.extend({}, batchItem); // Convert type to eventType\n\n    eventObj.type = actionInfo.event || eventObj.type;\n    eventObjBatch.push(eventObj); // light update does not perform data process, layout and visual.\n\n    if (isHighDown) {\n      // method, payload, mainType, subType\n      updateDirectly(this, updateMethod, batchItem, 'series');\n    } else if (cptType) {\n      updateDirectly(this, updateMethod, batchItem, cptType.main, cptType.sub);\n    }\n  }, this);\n\n  if (updateMethod !== 'none' && !isHighDown && !cptType) {\n    // Still dirty\n    if (this[OPTION_UPDATED]) {\n      // FIXME Pass payload ?\n      prepare(this);\n      updateMethods.update.call(this, payload);\n      this[OPTION_UPDATED] = false;\n    } else {\n      updateMethods[updateMethod].call(this, payload);\n    }\n  } // Follow the rule of action batch\n\n\n  if (batched) {\n    eventObj = {\n      type: actionInfo.event || payloadType,\n      escapeConnect: escapeConnect,\n      batch: eventObjBatch\n    };\n  } else {\n    eventObj = eventObjBatch[0];\n  }\n\n  this[IN_MAIN_PROCESS] = false;\n  !silent && this._messageCenter.trigger(eventObj.type, eventObj);\n}\n\nfunction flushPendingActions(silent) {\n  var pendingActions = this._pendingActions;\n\n  while (pendingActions.length) {\n    var payload = pendingActions.shift();\n    doDispatchAction.call(this, payload, silent);\n  }\n}\n\nfunction triggerUpdatedEvent(silent) {\n  !silent && this.trigger('updated');\n}\n/**\n * Event `rendered` is triggered when zr\n * rendered. It is useful for realtime\n * snapshot (reflect animation).\n *\n * Event `finished` is triggered when:\n * (1) zrender rendering finished.\n * (2) initial animation finished.\n * (3) progressive rendering finished.\n * (4) no pending action.\n * (5) no delayed setOption needs to be processed.\n */\n\n\nfunction bindRenderedEvent(zr, ecIns) {\n  zr.on('rendered', function () {\n    ecIns.trigger('rendered'); // The `finished` event should not be triggered repeatly,\n    // so it should only be triggered when rendering indeed happend\n    // in zrender. (Consider the case that dipatchAction is keep\n    // triggering when mouse move).\n\n    if ( // Although zr is dirty if initial animation is not finished\n    // and this checking is called on frame, we also check\n    // animation finished for robustness.\n    zr.animation.isFinished() && !ecIns[OPTION_UPDATED] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n      ecIns.trigger('finished');\n    }\n  });\n}\n/**\n * @param {Object} params\n * @param {number} params.seriesIndex\n * @param {Array|TypedArray} params.data\n */\n\n\nechartsProto.appendData = function (params) {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  var seriesIndex = params.seriesIndex;\n  var ecModel = this.getModel();\n  var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n  seriesModel.appendData(params); // Note: `appendData` does not support that update extent of coordinate\n  // system, util some scenario require that. In the expected usage of\n  // `appendData`, the initial extent of coordinate system should better\n  // be fixed by axis `min`/`max` setting or initial data, otherwise if\n  // the extent changed while `appendData`, the location of the painted\n  // graphic elements have to be changed, which make the usage of\n  // `appendData` meaningless.\n\n  this._scheduler.unfinished = true;\n};\n/**\n * Register event\n * @method\n */\n\n\nechartsProto.on = createRegisterEventWithLowercaseName('on', false);\nechartsProto.off = createRegisterEventWithLowercaseName('off', false);\nechartsProto.one = createRegisterEventWithLowercaseName('one', false);\n/**\n * Prepare view instances of charts and components\n * @param  {module:echarts/model/Global} ecModel\n * @private\n */\n\nfunction prepareView(ecIns, type, ecModel, scheduler) {\n  var isComponent = type === 'component';\n  var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n  var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n  var zr = ecIns._zr;\n  var api = ecIns._api;\n\n  for (var i = 0; i < viewList.length; i++) {\n    viewList[i].__alive = false;\n  }\n\n  isComponent ? ecModel.eachComponent(function (componentType, model) {\n    componentType !== 'series' && doPrepare(model);\n  }) : ecModel.eachSeries(doPrepare);\n\n  function doPrepare(model) {\n    // Consider: id same and type changed.\n    var viewId = '_ec_' + model.id + '_' + model.type;\n    var view = viewMap[viewId];\n\n    if (!view) {\n      var classType = parseClassType(model.type);\n      var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) : ChartView.getClass(classType.sub);\n      view = new Clazz();\n      view.init(ecModel, api);\n      viewMap[viewId] = view;\n      viewList.push(view);\n      zr.add(view.group);\n    }\n\n    model.__viewId = view.__id = viewId;\n    view.__alive = true;\n    view.__model = model;\n    view.group.__ecComponentInfo = {\n      mainType: model.mainType,\n      index: model.componentIndex\n    };\n    !isComponent && scheduler.prepareView(view, model, ecModel, api);\n  }\n\n  for (var i = 0; i < viewList.length;) {\n    var view = viewList[i];\n\n    if (!view.__alive) {\n      !isComponent && view.renderTask.dispose();\n      zr.remove(view.group);\n      view.dispose(ecModel, api);\n      viewList.splice(i, 1);\n      delete viewMap[view.__id];\n      view.__id = view.group.__ecComponentInfo = null;\n    } else {\n      i++;\n    }\n  }\n} // /**\n//  * Encode visual infomation from data after data processing\n//  *\n//  * @param {module:echarts/model/Global} ecModel\n//  * @param {object} layout\n//  * @param {boolean} [layoutFilter] `true`: only layout,\n//  *                                 `false`: only not layout,\n//  *                                 `null`/`undefined`: all.\n//  * @param {string} taskBaseTag\n//  * @private\n//  */\n// function startVisualEncoding(ecIns, ecModel, api, payload, layoutFilter) {\n//     each(visualFuncs, function (visual, index) {\n//         var isLayout = visual.isLayout;\n//         if (layoutFilter == null\n//             || (layoutFilter === false && !isLayout)\n//             || (layoutFilter === true && isLayout)\n//         ) {\n//             visual.func(ecModel, api, payload);\n//         }\n//     });\n// }\n\n\nfunction clearColorPalette(ecModel) {\n  ecModel.clearColorPalette();\n  ecModel.eachSeries(function (seriesModel) {\n    seriesModel.clearColorPalette();\n  });\n}\n\nfunction render(ecIns, ecModel, api, payload) {\n  renderComponents(ecIns, ecModel, api, payload);\n  each(ecIns._chartsViews, function (chart) {\n    chart.__alive = false;\n  });\n  renderSeries(ecIns, ecModel, api, payload); // Remove groups of unrendered charts\n\n  each(ecIns._chartsViews, function (chart) {\n    if (!chart.__alive) {\n      chart.remove(ecModel, api);\n    }\n  });\n}\n\nfunction renderComponents(ecIns, ecModel, api, payload, dirtyList) {\n  each(dirtyList || ecIns._componentsViews, function (componentView) {\n    var componentModel = componentView.__model;\n    componentView.render(componentModel, ecModel, api, payload);\n    updateZ(componentModel, componentView);\n  });\n}\n/**\n * Render each chart and component\n * @private\n */\n\n\nfunction renderSeries(ecIns, ecModel, api, payload, dirtyMap) {\n  // Render all charts\n  var scheduler = ecIns._scheduler;\n  var unfinished;\n  ecModel.eachSeries(function (seriesModel) {\n    var chartView = ecIns._chartsMap[seriesModel.__viewId];\n    chartView.__alive = true;\n    var renderTask = chartView.renderTask;\n    scheduler.updatePayload(renderTask, payload);\n\n    if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n      renderTask.dirty();\n    }\n\n    unfinished |= renderTask.perform(scheduler.getPerformArgs(renderTask));\n    chartView.group.silent = !!seriesModel.get('silent');\n    updateZ(seriesModel, chartView);\n    updateBlend(seriesModel, chartView);\n  });\n  scheduler.unfinished |= unfinished; // If use hover layer\n\n  updateHoverLayerStatus(ecIns, ecModel); // Add aria\n\n  aria(ecIns._zr.dom, ecModel);\n}\n\nfunction performPostUpdateFuncs(ecModel, api) {\n  each(postUpdateFuncs, function (func) {\n    func(ecModel, api);\n  });\n}\n\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\n/**\n * @private\n */\n\nechartsProto._initEvents = function () {\n  each(MOUSE_EVENT_NAMES, function (eveName) {\n    var handler = function (e) {\n      var ecModel = this.getModel();\n      var el = e.target;\n      var params;\n      var isGlobalOut = eveName === 'globalout'; // no e.target when 'globalout'.\n\n      if (isGlobalOut) {\n        params = {};\n      } else if (el && el.dataIndex != null) {\n        var dataModel = el.dataModel || ecModel.getSeriesByIndex(el.seriesIndex);\n        params = dataModel && dataModel.getDataParams(el.dataIndex, el.dataType, el) || {};\n      } // If element has custom eventData of components\n      else if (el && el.eventData) {\n          params = zrUtil.extend({}, el.eventData);\n        } // Contract: if params prepared in mouse event,\n      // these properties must be specified:\n      // {\n      //    componentType: string (component main type)\n      //    componentIndex: number\n      // }\n      // Otherwise event query can not work.\n\n\n      if (params) {\n        var componentType = params.componentType;\n        var componentIndex = params.componentIndex; // Special handling for historic reason: when trigger by\n        // markLine/markPoint/markArea, the componentType is\n        // 'markLine'/'markPoint'/'markArea', but we should better\n        // enable them to be queried by seriesIndex, since their\n        // option is set in each series.\n\n        if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n          componentType = 'series';\n          componentIndex = params.seriesIndex;\n        }\n\n        var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n        var view = model && this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n        params.event = e;\n        params.type = eveName;\n        this._ecEventProcessor.eventInfo = {\n          targetEl: el,\n          packedEvent: params,\n          model: model,\n          view: view\n        };\n        this.trigger(eveName, params);\n      }\n    }; // Consider that some component (like tooltip, brush, ...)\n    // register zr event handler, but user event handler might\n    // do anything, such as call `setOption` or `dispatchAction`,\n    // which probably update any of the content and probably\n    // cause problem if it is called previous other inner handlers.\n\n\n    handler.zrEventfulCallAtLast = true;\n\n    this._zr.on(eveName, handler, this);\n  }, this);\n  each(eventActionMap, function (actionType, eventType) {\n    this._messageCenter.on(eventType, function (event) {\n      this.trigger(eventType, event);\n    }, this);\n  }, this);\n};\n/**\n * @return {boolean}\n */\n\n\nechartsProto.isDisposed = function () {\n  return this._disposed;\n};\n/**\n * Clear\n */\n\n\nechartsProto.clear = function () {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  this.setOption({\n    series: []\n  }, true);\n};\n/**\n * Dispose instance\n */\n\n\nechartsProto.dispose = function () {\n  if (this._disposed) {\n    disposedWarning(this.id);\n    return;\n  }\n\n  this._disposed = true;\n  modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n  var api = this._api;\n  var ecModel = this._model;\n  each(this._componentsViews, function (component) {\n    component.dispose(ecModel, api);\n  });\n  each(this._chartsViews, function (chart) {\n    chart.dispose(ecModel, api);\n  }); // Dispose after all views disposed\n\n  this._zr.dispose();\n\n  delete instances[this.id];\n};\n\nzrUtil.mixin(ECharts, Eventful);\n\nfunction disposedWarning(id) {}\n\nfunction updateHoverLayerStatus(ecIns, ecModel) {\n  var zr = ecIns._zr;\n  var storage = zr.storage;\n  var elCount = 0;\n  storage.traverse(function (el) {\n    elCount++;\n  });\n\n  if (elCount > ecModel.get('hoverLayerThreshold') && !env.node) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.preventUsingHoverLayer) {\n        return;\n      }\n\n      var chartView = ecIns._chartsMap[seriesModel.__viewId];\n\n      if (chartView.__alive) {\n        chartView.group.traverse(function (el) {\n          // Don't switch back.\n          el.useHoverLayer = true;\n        });\n      }\n    });\n  }\n}\n/**\n * Update chart progressive and blend.\n * @param {module:echarts/model/Series|module:echarts/model/Component} model\n * @param {module:echarts/view/Component|module:echarts/view/Chart} view\n */\n\n\nfunction updateBlend(seriesModel, chartView) {\n  var blendMode = seriesModel.get('blendMode') || null;\n  chartView.group.traverse(function (el) {\n    // FIXME marker and other components\n    if (!el.isGroup) {\n      // Only set if blendMode is changed. In case element is incremental and don't wan't to rerender.\n      if (el.style.blend !== blendMode) {\n        el.setStyle('blend', blendMode);\n      }\n    }\n\n    if (el.eachPendingDisplayable) {\n      el.eachPendingDisplayable(function (displayable) {\n        displayable.setStyle('blend', blendMode);\n      });\n    }\n  });\n}\n/**\n * @param {module:echarts/model/Series|module:echarts/model/Component} model\n * @param {module:echarts/view/Component|module:echarts/view/Chart} view\n */\n\n\nfunction updateZ(model, view) {\n  var z = model.get('z');\n  var zlevel = model.get('zlevel'); // Set z and zlevel\n\n  view.group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n    }\n  });\n}\n\nfunction createExtensionAPI(ecInstance) {\n  var coordSysMgr = ecInstance._coordSysMgr;\n  return zrUtil.extend(new ExtensionAPI(ecInstance), {\n    // Inject methods\n    getCoordinateSystems: zrUtil.bind(coordSysMgr.getCoordinateSystems, coordSysMgr),\n    getComponentByElement: function (el) {\n      while (el) {\n        var modelInfo = el.__ecComponentInfo;\n\n        if (modelInfo != null) {\n          return ecInstance._model.getComponent(modelInfo.mainType, modelInfo.index);\n        }\n\n        el = el.parent;\n      }\n    }\n  });\n}\n/**\n * @class\n * Usage of query:\n * `chart.on('click', query, handler);`\n * The `query` can be:\n * + The component type query string, only `mainType` or `mainType.subType`,\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\n * + The component query object, like:\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\n * + The data query object, like:\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\n * + The other query object (cmponent customized query), like:\n *   `{element: 'some'}` (only available in custom series).\n *\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\n * same as there is no such prop in the `query` object.\n */\n\n\nfunction EventProcessor() {\n  // These info required: targetEl, packedEvent, model, view\n  this.eventInfo;\n}\n\nEventProcessor.prototype = {\n  constructor: EventProcessor,\n  normalizeQuery: function (query) {\n    var cptQuery = {};\n    var dataQuery = {};\n    var otherQuery = {}; // `query` is `mainType` or `mainType.subType` of component.\n\n    if (zrUtil.isString(query)) {\n      var condCptType = parseClassType(query); // `.main` and `.sub` may be ''.\n\n      cptQuery.mainType = condCptType.main || null;\n      cptQuery.subType = condCptType.sub || null;\n    } // `query` is an object, convert to {mainType, index, name, id}.\n    else {\n        // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n        // can not be used in `compomentModel.filterForExposedEvent`.\n        var suffixes = ['Index', 'Name', 'Id'];\n        var dataKeys = {\n          name: 1,\n          dataIndex: 1,\n          dataType: 1\n        };\n        zrUtil.each(query, function (val, key) {\n          var reserved = false;\n\n          for (var i = 0; i < suffixes.length; i++) {\n            var propSuffix = suffixes[i];\n            var suffixPos = key.lastIndexOf(propSuffix);\n\n            if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n              var mainType = key.slice(0, suffixPos); // Consider `dataIndex`.\n\n              if (mainType !== 'data') {\n                cptQuery.mainType = mainType;\n                cptQuery[propSuffix.toLowerCase()] = val;\n                reserved = true;\n              }\n            }\n          }\n\n          if (dataKeys.hasOwnProperty(key)) {\n            dataQuery[key] = val;\n            reserved = true;\n          }\n\n          if (!reserved) {\n            otherQuery[key] = val;\n          }\n        });\n      }\n\n    return {\n      cptQuery: cptQuery,\n      dataQuery: dataQuery,\n      otherQuery: otherQuery\n    };\n  },\n  filter: function (eventType, query, args) {\n    // They should be assigned before each trigger call.\n    var eventInfo = this.eventInfo;\n\n    if (!eventInfo) {\n      return true;\n    }\n\n    var targetEl = eventInfo.targetEl;\n    var packedEvent = eventInfo.packedEvent;\n    var model = eventInfo.model;\n    var view = eventInfo.view; // For event like 'globalout'.\n\n    if (!model || !view) {\n      return true;\n    }\n\n    var cptQuery = query.cptQuery;\n    var dataQuery = query.dataQuery;\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n\n    function check(query, host, prop, propOnHost) {\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\n    }\n  },\n  afterTrigger: function () {\n    // Make sure the eventInfo wont be used in next trigger.\n    this.eventInfo = null;\n  }\n};\n/**\n * @type {Object} key: actionType.\n * @inner\n */\n\nvar actions = {};\n/**\n * Map eventType to actionType\n * @type {Object}\n */\n\nvar eventActionMap = {};\n/**\n * Data processor functions of each stage\n * @type {Array.<Object.<string, Function>>}\n * @inner\n */\n\nvar dataProcessorFuncs = [];\n/**\n * @type {Array.<Function>}\n * @inner\n */\n\nvar optionPreprocessorFuncs = [];\n/**\n * @type {Array.<Function>}\n * @inner\n */\n\nvar postUpdateFuncs = [];\n/**\n * Visual encoding functions of each stage\n * @type {Array.<Object.<string, Function>>}\n */\n\nvar visualFuncs = [];\n/**\n * Theme storage\n * @type {Object.<key, Object>}\n */\n\nvar themeStorage = {};\n/**\n * Loading effects\n */\n\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = new Date() - 0;\nvar groupIdBase = new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n\nfunction enableConnect(chart) {\n  var STATUS_PENDING = 0;\n  var STATUS_UPDATING = 1;\n  var STATUS_UPDATED = 2;\n  var STATUS_KEY = '__connectUpdateStatus';\n\n  function updateConnectedChartsStatus(charts, status) {\n    for (var i = 0; i < charts.length; i++) {\n      var otherChart = charts[i];\n      otherChart[STATUS_KEY] = status;\n    }\n  }\n\n  each(eventActionMap, function (actionType, eventType) {\n    chart._messageCenter.on(eventType, function (event) {\n      if (connectedGroups[chart.group] && chart[STATUS_KEY] !== STATUS_PENDING) {\n        if (event && event.escapeConnect) {\n          return;\n        }\n\n        var action = chart.makeActionFromEvent(event);\n        var otherCharts = [];\n        each(instances, function (otherChart) {\n          if (otherChart !== chart && otherChart.group === chart.group) {\n            otherCharts.push(otherChart);\n          }\n        });\n        updateConnectedChartsStatus(otherCharts, STATUS_PENDING);\n        each(otherCharts, function (otherChart) {\n          if (otherChart[STATUS_KEY] !== STATUS_UPDATING) {\n            otherChart.dispatchAction(action);\n          }\n        });\n        updateConnectedChartsStatus(otherCharts, STATUS_UPDATED);\n      }\n    });\n  });\n}\n/**\n * @param {HTMLElement} dom\n * @param {Object} [theme]\n * @param {Object} opts\n * @param {number} [opts.devicePixelRatio] Use window.devicePixelRatio by default\n * @param {string} [opts.renderer] Can choose 'canvas' or 'svg' to render the chart.\n * @param {number} [opts.width] Use clientWidth of the input `dom` by default.\n *                              Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Use clientHeight of the input `dom` by default.\n *                               Can be 'auto' (the same as null/undefined)\n */\n\n\nfunction init(dom, theme, opts) {\n  var existInstance = getInstanceByDom(dom);\n\n  if (existInstance) {\n    return existInstance;\n  }\n\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  return chart;\n}\n/**\n * @return {string|Array.<module:echarts~ECharts>} groupId\n */\n\n\nfunction connect(groupId) {\n  // Is array of charts\n  if (zrUtil.isArray(groupId)) {\n    var charts = groupId;\n    groupId = null; // If any chart has group\n\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n\n  connectedGroups[groupId] = true;\n  return groupId;\n}\n/**\n * @DEPRECATED\n * @return {string} groupId\n */\n\n\nfunction disConnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\n * @return {string} groupId\n */\n\n\nvar disconnect = disConnect;\n/**\n * Dispose a chart instance\n * @param  {module:echarts~ECharts|HTMLDomElement|string} chart\n */\n\nfunction dispose(chart) {\n  if (typeof chart === 'string') {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\n/**\n * @param  {HTMLElement} dom\n * @return {echarts~ECharts}\n */\n\n\nfunction getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\n/**\n * @param {string} key\n * @return {echarts~ECharts}\n */\n\n\nfunction getInstanceById(key) {\n  return instances[key];\n}\n/**\n * Register theme\n */\n\n\nfunction registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\n * Register option preprocessor\n * @param {Function} preprocessorFunc\n */\n\n\nfunction registerPreprocessor(preprocessorFunc) {\n  optionPreprocessorFuncs.push(preprocessorFunc);\n}\n/**\n * @param {number} [priority=1000]\n * @param {Object|Function} processor\n */\n\n\nfunction registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_FILTER);\n}\n/**\n * Register postUpdater\n * @param {Function} postUpdateFunc\n */\n\n\nfunction registerPostUpdate(postUpdateFunc) {\n  postUpdateFuncs.push(postUpdateFunc);\n}\n/**\n * Usage:\n * registerAction('someAction', 'someEvent', function () { ... });\n * registerAction('someAction', function () { ... });\n * registerAction(\n *     {type: 'someAction', event: 'someEvent', update: 'updateView'},\n *     function () { ... }\n * );\n *\n * @param {(string|Object)} actionInfo\n * @param {string} actionInfo.type\n * @param {string} [actionInfo.event]\n * @param {string} [actionInfo.update]\n * @param {string} [eventName]\n * @param {Function} action\n */\n\n\nfunction registerAction(actionInfo, eventName, action) {\n  if (typeof eventName === 'function') {\n    action = eventName;\n    eventName = '';\n  }\n\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0]; // Event name is all lowercase\n\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event; // Validate action type and event name.\n\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n\n  eventActionMap[eventName] = actionType;\n}\n/**\n * @param {string} type\n * @param {*} CoordinateSystem\n */\n\n\nfunction registerCoordinateSystem(type, CoordinateSystem) {\n  CoordinateSystemManager.register(type, CoordinateSystem);\n}\n/**\n * Get dimensions of specified coordinate system.\n * @param {string} type\n * @return {Array.<string|Object>}\n */\n\n\nfunction getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\n/**\n * Layout is a special stage of visual encoding\n * Most visual encoding like color are common for different chart\n * But each chart has it's own layout algorithm\n *\n * @param {number} [priority=1000]\n * @param {Function} layoutTask\n */\n\n\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\n/**\n * @param {number} [priority=3000]\n * @param {module:echarts/stream/Task} visualTask\n */\n\n\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\n/**\n * @param {Object|Function} fn: {seriesType, createOnAllSeries, performRawSeries, reset}\n */\n\n\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n  return stageHandler;\n}\n/**\n * @param {string} name\n */\n\n\nfunction registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendComponentModel(opts\n/*, superClass*/\n) {\n  // var Clazz = ComponentModel;\n  // if (superClass) {\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ComponentModel.getClass(classType.main, classType.sub, true);\n  // }\n  return ComponentModel.extend(opts);\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendComponentView(opts\n/*, superClass*/\n) {\n  // var Clazz = ComponentView;\n  // if (superClass) {\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ComponentView.getClass(classType.main, classType.sub, true);\n  // }\n  return ComponentView.extend(opts);\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendSeriesModel(opts\n/*, superClass*/\n) {\n  // var Clazz = SeriesModel;\n  // if (superClass) {\n  //     superClass = 'series.' + superClass.replace('series.', '');\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ComponentModel.getClass(classType.main, classType.sub, true);\n  // }\n  return SeriesModel.extend(opts);\n}\n/**\n * @param {Object} opts\n * @param {string} [superClass]\n */\n\n\nfunction extendChartView(opts\n/*, superClass*/\n) {\n  // var Clazz = ChartView;\n  // if (superClass) {\n  //     superClass = superClass.replace('series.', '');\n  //     var classType = parseClassType(superClass);\n  //     Clazz = ChartView.getClass(classType.main, true);\n  // }\n  return ChartView.extend(opts);\n}\n/**\n * ZRender need a canvas context to do measureText.\n * But in node environment canvas may be created by node-canvas.\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n *\n * Be careful of using it in the browser.\n *\n * @param {Function} creator\n * @example\n *     var Canvas = require('canvas');\n *     var echarts = require('echarts');\n *     echarts.setCanvasCreator(function () {\n *         // Small size is enough.\n *         return new Canvas(32, 32);\n *     });\n */\n\n\nfunction setCanvasCreator(creator) {\n  zrUtil.$override('createCanvas', creator);\n}\n/**\n * @param {string} mapName\n * @param {Array.<Object>|Object|string} geoJson\n * @param {Object} [specialAreas]\n *\n * @example GeoJSON\n *     $.get('USA.json', function (geoJson) {\n *         echarts.registerMap('USA', geoJson);\n *         // Or\n *         echarts.registerMap('USA', {\n *             geoJson: geoJson,\n *             specialAreas: {}\n *         })\n *     });\n *\n *     $.get('airport.svg', function (svg) {\n *         echarts.registerMap('airport', {\n *             svg: svg\n *         }\n *     });\n *\n *     echarts.registerMap('eu', [\n *         {svg: eu-topographic.svg},\n *         {geoJSON: eu.json}\n *     ])\n */\n\n\nfunction registerMap(mapName, geoJson, specialAreas) {\n  mapDataStorage.registerMap(mapName, geoJson, specialAreas);\n}\n/**\n * @param {string} mapName\n * @return {Object}\n */\n\n\nfunction getMap(mapName) {\n  // For backward compatibility, only return the first one.\n  var records = mapDataStorage.retrieveMap(mapName);\n  return records && records[0] && {\n    geoJson: records[0].geoJSON,\n    specialAreas: records[0].specialAreas\n  };\n}\n\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesColor);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault); // Default actions\n\nregisterAction({\n  type: 'highlight',\n  event: 'highlight',\n  update: 'highlight'\n}, zrUtil.noop);\nregisterAction({\n  type: 'downplay',\n  event: 'downplay',\n  update: 'downplay'\n}, zrUtil.noop); // Default theme\n\nregisterTheme('light', lightTheme);\nregisterTheme('dark', darkTheme); // For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\n\nvar dataTool = {};\nexports.version = version;\nexports.dependencies = dependencies;\nexports.PRIORITY = PRIORITY;\nexports.init = init;\nexports.connect = connect;\nexports.disConnect = disConnect;\nexports.disconnect = disconnect;\nexports.dispose = dispose;\nexports.getInstanceByDom = getInstanceByDom;\nexports.getInstanceById = getInstanceById;\nexports.registerTheme = registerTheme;\nexports.registerPreprocessor = registerPreprocessor;\nexports.registerProcessor = registerProcessor;\nexports.registerPostUpdate = registerPostUpdate;\nexports.registerAction = registerAction;\nexports.registerCoordinateSystem = registerCoordinateSystem;\nexports.getCoordinateSystemDimensions = getCoordinateSystemDimensions;\nexports.registerLayout = registerLayout;\nexports.registerVisual = registerVisual;\nexports.registerLoading = registerLoading;\nexports.extendComponentModel = extendComponentModel;\nexports.extendComponentView = extendComponentView;\nexports.extendSeriesModel = extendSeriesModel;\nexports.extendChartView = extendChartView;\nexports.setCanvasCreator = setCanvasCreator;\nexports.registerMap = registerMap;\nexports.getMap = getMap;\nexports.dataTool = dataTool;\nvar ___ec_export = require(\"./export\");\n(function () {\n    for (var key in ___ec_export) {\n        if (___ec_export.hasOwnProperty(key)) {\n            exports[key] = ___ec_export[key];\n        }\n    }\n})();","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar pathTool = require(\"zrender/lib/tool/path\");\n\nvar colorTool = require(\"zrender/lib/tool/color\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar Transformable = require(\"zrender/lib/mixin/Transformable\");\n\nvar ZImage = require(\"zrender/lib/graphic/Image\");\n\nexports.Image = ZImage;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nexports.Group = Group;\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\nexports.Text = Text;\n\nvar Circle = require(\"zrender/lib/graphic/shape/Circle\");\n\nexports.Circle = Circle;\n\nvar Sector = require(\"zrender/lib/graphic/shape/Sector\");\n\nexports.Sector = Sector;\n\nvar Ring = require(\"zrender/lib/graphic/shape/Ring\");\n\nexports.Ring = Ring;\n\nvar Polygon = require(\"zrender/lib/graphic/shape/Polygon\");\n\nexports.Polygon = Polygon;\n\nvar Polyline = require(\"zrender/lib/graphic/shape/Polyline\");\n\nexports.Polyline = Polyline;\n\nvar Rect = require(\"zrender/lib/graphic/shape/Rect\");\n\nexports.Rect = Rect;\n\nvar Line = require(\"zrender/lib/graphic/shape/Line\");\n\nexports.Line = Line;\n\nvar BezierCurve = require(\"zrender/lib/graphic/shape/BezierCurve\");\n\nexports.BezierCurve = BezierCurve;\n\nvar Arc = require(\"zrender/lib/graphic/shape/Arc\");\n\nexports.Arc = Arc;\n\nvar CompoundPath = require(\"zrender/lib/graphic/CompoundPath\");\n\nexports.CompoundPath = CompoundPath;\n\nvar LinearGradient = require(\"zrender/lib/graphic/LinearGradient\");\n\nexports.LinearGradient = LinearGradient;\n\nvar RadialGradient = require(\"zrender/lib/graphic/RadialGradient\");\n\nexports.RadialGradient = RadialGradient;\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nexports.BoundingRect = BoundingRect;\n\nvar IncrementalDisplayable = require(\"zrender/lib/graphic/IncrementalDisplayable\");\n\nexports.IncrementalDisplayable = IncrementalDisplayable;\n\nvar subPixelOptimizeUtil = require(\"zrender/lib/graphic/helper/subPixelOptimize\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar EMPTY_OBJ = {};\nvar Z2_EMPHASIS_LIFT = 1; // key: label model property nane, value: style property name.\n\nvar CACHED_LABEL_STYLE_PROPERTIES = {\n  color: 'textFill',\n  textBorderColor: 'textStroke',\n  textBorderWidth: 'textStrokeWidth'\n};\nvar EMPHASIS = 'emphasis';\nvar NORMAL = 'normal'; // Reserve 0 as default.\n\nvar _highlightNextDigit = 1;\nvar _highlightKeyMap = {};\nvar _customShapeMap = {};\n/**\n * Extend shape with parameters\n */\n\nfunction extendShape(opts) {\n  return Path.extend(opts);\n}\n/**\n * Extend path\n */\n\n\nfunction extendPath(pathData, opts) {\n  return pathTool.extendFromString(pathData, opts);\n}\n/**\n * Register a user defined shape.\n * The shape class can be fetched by `getShapeClass`\n * This method will overwrite the registered shapes, including\n * the registered built-in shapes, if using the same `name`.\n * The shape can be used in `custom series` and\n * `graphic component` by declaring `{type: name}`.\n *\n * @param {string} name\n * @param {Object} ShapeClass Can be generated by `extendShape`.\n */\n\n\nfunction registerShape(name, ShapeClass) {\n  _customShapeMap[name] = ShapeClass;\n}\n/**\n * Find shape class registered by `registerShape`. Usually used in\n * fetching user defined shape.\n *\n * [Caution]:\n * (1) This method **MUST NOT be used inside echarts !!!**, unless it is prepared\n * to use user registered shapes.\n * Because the built-in shape (see `getBuiltInShape`) will be registered by\n * `registerShape` by default. That enables users to get both built-in\n * shapes as well as the shapes belonging to themsleves. But users can overwrite\n * the built-in shapes by using names like 'circle', 'rect' via calling\n * `registerShape`. So the echarts inner featrues should not fetch shapes from here\n * in case that it is overwritten by users, except that some features, like\n * `custom series`, `graphic component`, do it deliberately.\n *\n * (2) In the features like `custom series`, `graphic component`, the user input\n * `{tpye: 'xxx'}` does not only specify shapes but also specify other graphic\n * elements like `'group'`, `'text'`, `'image'` or event `'path'`. Those names\n * are reserved names, that is, if some user register a shape named `'image'`,\n * the shape will not be used. If we intending to add some more reserved names\n * in feature, that might bring break changes (disable some existing user shape\n * names). But that case probably rearly happen. So we dont make more mechanism\n * to resolve this issue here.\n *\n * @param {string} name\n * @return {Object} The shape class. If not found, return nothing.\n */\n\n\nfunction getShapeClass(name) {\n  if (_customShapeMap.hasOwnProperty(name)) {\n    return _customShapeMap[name];\n  }\n}\n/**\n * Create a path element from path data string\n * @param {string} pathData\n * @param {Object} opts\n * @param {module:zrender/core/BoundingRect} rect\n * @param {string} [layout=cover] 'center' or 'cover'\n */\n\n\nfunction makePath(pathData, opts, rect, layout) {\n  var path = pathTool.createFromString(pathData, opts);\n\n  if (rect) {\n    if (layout === 'center') {\n      rect = centerGraphic(rect, path.getBoundingRect());\n    }\n\n    resizePath(path, rect);\n  }\n\n  return path;\n}\n/**\n * Create a image element from image url\n * @param {string} imageUrl image url\n * @param {Object} opts options\n * @param {module:zrender/core/BoundingRect} rect constrain rect\n * @param {string} [layout=cover] 'center' or 'cover'\n */\n\n\nfunction makeImage(imageUrl, rect, layout) {\n  var path = new ZImage({\n    style: {\n      image: imageUrl,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    onload: function (img) {\n      if (layout === 'center') {\n        var boundingRect = {\n          width: img.width,\n          height: img.height\n        };\n        path.setStyle(centerGraphic(rect, boundingRect));\n      }\n    }\n  });\n  return path;\n}\n/**\n * Get position of centered element in bounding box.\n *\n * @param  {Object} rect         element local bounding box\n * @param  {Object} boundingRect constraint bounding box\n * @return {Object} element position containing x, y, width, and height\n */\n\n\nfunction centerGraphic(rect, boundingRect) {\n  // Set rect to center, keep width / height ratio.\n  var aspect = boundingRect.width / boundingRect.height;\n  var width = rect.height * aspect;\n  var height;\n\n  if (width <= rect.width) {\n    height = rect.height;\n  } else {\n    width = rect.width;\n    height = width / aspect;\n  }\n\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n  return {\n    x: cx - width / 2,\n    y: cy - height / 2,\n    width: width,\n    height: height\n  };\n}\n\nvar mergePath = pathTool.mergePath;\n/**\n * Resize a path to fit the rect\n * @param {module:zrender/graphic/Path} path\n * @param {Object} rect\n */\n\nfunction resizePath(path, rect) {\n  if (!path.applyTransform) {\n    return;\n  }\n\n  var pathRect = path.getBoundingRect();\n  var m = pathRect.calculateTransform(rect);\n  path.applyTransform(m);\n}\n/**\n * Sub pixel optimize line for canvas\n *\n * @param {Object} param\n * @param {Object} [param.shape]\n * @param {number} [param.shape.x1]\n * @param {number} [param.shape.y1]\n * @param {number} [param.shape.x2]\n * @param {number} [param.shape.y2]\n * @param {Object} [param.style]\n * @param {number} [param.style.lineWidth]\n * @return {Object} Modified param\n */\n\n\nfunction subPixelOptimizeLine(param) {\n  subPixelOptimizeUtil.subPixelOptimizeLine(param.shape, param.shape, param.style);\n  return param;\n}\n/**\n * Sub pixel optimize rect for canvas\n *\n * @param {Object} param\n * @param {Object} [param.shape]\n * @param {number} [param.shape.x]\n * @param {number} [param.shape.y]\n * @param {number} [param.shape.width]\n * @param {number} [param.shape.height]\n * @param {Object} [param.style]\n * @param {number} [param.style.lineWidth]\n * @return {Object} Modified param\n */\n\n\nfunction subPixelOptimizeRect(param) {\n  subPixelOptimizeUtil.subPixelOptimizeRect(param.shape, param.shape, param.style);\n  return param;\n}\n/**\n * Sub pixel optimize for canvas\n *\n * @param {number} position Coordinate, such as x, y\n * @param {number} lineWidth Should be nonnegative integer.\n * @param {boolean=} positiveOrNegative Default false (negative).\n * @return {number} Optimized position.\n */\n\n\nvar subPixelOptimize = subPixelOptimizeUtil.subPixelOptimize;\n\nfunction hasFillOrStroke(fillOrStroke) {\n  return fillOrStroke != null && fillOrStroke !== 'none';\n} // Most lifted color are duplicated.\n\n\nvar liftedColorMap = zrUtil.createHashMap();\nvar liftedColorCount = 0;\n\nfunction liftColor(color) {\n  if (typeof color !== 'string') {\n    return color;\n  }\n\n  var liftedColor = liftedColorMap.get(color);\n\n  if (!liftedColor) {\n    liftedColor = colorTool.lift(color, -0.1);\n\n    if (liftedColorCount < 10000) {\n      liftedColorMap.set(color, liftedColor);\n      liftedColorCount++;\n    }\n  }\n\n  return liftedColor;\n}\n\nfunction cacheElementStl(el) {\n  if (!el.__hoverStlDirty) {\n    return;\n  }\n\n  el.__hoverStlDirty = false;\n  var hoverStyle = el.__hoverStl;\n\n  if (!hoverStyle) {\n    el.__cachedNormalStl = el.__cachedNormalZ2 = null;\n    return;\n  }\n\n  var normalStyle = el.__cachedNormalStl = {};\n  el.__cachedNormalZ2 = el.z2;\n  var elStyle = el.style;\n\n  for (var name in hoverStyle) {\n    // See comment in `singleEnterEmphasis`.\n    if (hoverStyle[name] != null) {\n      normalStyle[name] = elStyle[name];\n    }\n  } // Always cache fill and stroke to normalStyle for lifting color.\n\n\n  normalStyle.fill = elStyle.fill;\n  normalStyle.stroke = elStyle.stroke;\n}\n\nfunction singleEnterEmphasis(el) {\n  var hoverStl = el.__hoverStl;\n\n  if (!hoverStl || el.__highlighted) {\n    return;\n  }\n\n  var zr = el.__zr;\n  var useHoverLayer = el.useHoverLayer && zr && zr.painter.type === 'canvas';\n  el.__highlighted = useHoverLayer ? 'layer' : 'plain';\n\n  if (el.isGroup || !zr && el.useHoverLayer) {\n    return;\n  }\n\n  var elTarget = el;\n  var targetStyle = el.style;\n\n  if (useHoverLayer) {\n    elTarget = zr.addHover(el);\n    targetStyle = elTarget.style;\n  }\n\n  rollbackDefaultTextStyle(targetStyle);\n\n  if (!useHoverLayer) {\n    cacheElementStl(elTarget);\n  } // styles can be:\n  // {\n  //    label: {\n  //        show: false,\n  //        position: 'outside',\n  //        fontSize: 18\n  //    },\n  //    emphasis: {\n  //        label: {\n  //            show: true\n  //        }\n  //    }\n  // },\n  // where properties of `emphasis` may not appear in `normal`. We previously use\n  // module:echarts/util/model#defaultEmphasis to merge `normal` to `emphasis`.\n  // But consider rich text and setOption in merge mode, it is impossible to cover\n  // all properties in merge. So we use merge mode when setting style here.\n  // But we choose the merge strategy that only properties that is not `null/undefined`.\n  // Because when making a textStyle (espacially rich text), it is not easy to distinguish\n  // `hasOwnProperty` and `null/undefined` in code, so we trade them as the same for simplicity.\n  // But this strategy brings a trouble that `null/undefined` can not be used to remove\n  // style any more in `emphasis`. Users can both set properties directly on normal and\n  // emphasis to avoid this issue, or we might support `'none'` for this case if required.\n\n\n  targetStyle.extendFrom(hoverStl);\n  setDefaultHoverFillStroke(targetStyle, hoverStl, 'fill');\n  setDefaultHoverFillStroke(targetStyle, hoverStl, 'stroke');\n  applyDefaultTextStyle(targetStyle);\n\n  if (!useHoverLayer) {\n    el.dirty(false);\n    el.z2 += Z2_EMPHASIS_LIFT;\n  }\n}\n\nfunction setDefaultHoverFillStroke(targetStyle, hoverStyle, prop) {\n  if (!hasFillOrStroke(hoverStyle[prop]) && hasFillOrStroke(targetStyle[prop])) {\n    targetStyle[prop] = liftColor(targetStyle[prop]);\n  }\n}\n\nfunction singleEnterNormal(el) {\n  var highlighted = el.__highlighted;\n\n  if (!highlighted) {\n    return;\n  }\n\n  el.__highlighted = false;\n\n  if (el.isGroup) {\n    return;\n  }\n\n  if (highlighted === 'layer') {\n    el.__zr && el.__zr.removeHover(el);\n  } else {\n    var style = el.style;\n    var normalStl = el.__cachedNormalStl;\n\n    if (normalStl) {\n      rollbackDefaultTextStyle(style);\n      el.setStyle(normalStl);\n      applyDefaultTextStyle(style);\n    } // `__cachedNormalZ2` will not be reset if calling `setElementHoverStyle`\n    // when `el` is on emphasis state. So here by comparing with 1, we try\n    // hard to make the bug case rare.\n\n\n    var normalZ2 = el.__cachedNormalZ2;\n\n    if (normalZ2 != null && el.z2 - normalZ2 === Z2_EMPHASIS_LIFT) {\n      el.z2 = normalZ2;\n    }\n  }\n}\n\nfunction traverseUpdate(el, updater, commonParam) {\n  // If root is group, also enter updater for `highDownOnUpdate`.\n  var fromState = NORMAL;\n  var toState = NORMAL;\n  var trigger; // See the rule of `highDownOnUpdate` on `graphic.setAsHighDownDispatcher`.\n\n  el.__highlighted && (fromState = EMPHASIS, trigger = true);\n  updater(el, commonParam);\n  el.__highlighted && (toState = EMPHASIS, trigger = true);\n  el.isGroup && el.traverse(function (child) {\n    !child.isGroup && updater(child, commonParam);\n  });\n  trigger && el.__highDownOnUpdate && el.__highDownOnUpdate(fromState, toState);\n}\n/**\n * Set hover style (namely \"emphasis style\") of element, based on the current\n * style of the given `el`.\n * This method should be called after all of the normal styles have been adopted\n * to the `el`. See the reason on `setHoverStyle`.\n *\n * @param {module:zrender/Element} el Should not be `zrender/container/Group`.\n * @param {Object} [el.hoverStyle] Can be set on el or its descendants,\n *        e.g., `el.hoverStyle = ...; graphic.setHoverStyle(el); `.\n *        Often used when item group has a label element and it's hoverStyle is different.\n * @param {Object|boolean} [hoverStl] The specified hover style.\n *        If set as `false`, disable the hover style.\n *        Similarly, The `el.hoverStyle` can alse be set\n *        as `false` to disable the hover style.\n *        Otherwise, use the default hover style if not provided.\n */\n\n\nfunction setElementHoverStyle(el, hoverStl) {\n  // For performance consideration, it might be better to make the \"hover style\" only the\n  // difference properties from the \"normal style\", but not a entire copy of all styles.\n  hoverStl = el.__hoverStl = hoverStl !== false && (el.hoverStyle || hoverStl || {});\n  el.__hoverStlDirty = true; // FIXME\n  // It is not completely right to save \"normal\"/\"emphasis\" flag on elements.\n  // It probably should be saved on `data` of series. Consider the cases:\n  // (1) A highlighted elements are moved out of the view port and re-enter\n  // again by dataZoom.\n  // (2) call `setOption` and replace elements totally when they are highlighted.\n\n  if (el.__highlighted) {\n    // Consider the case:\n    // The styles of a highlighted `el` is being updated. The new \"emphasis style\"\n    // should be adapted to the `el`. Notice here new \"normal styles\" should have\n    // been set outside and the cached \"normal style\" is out of date.\n    el.__cachedNormalStl = null; // Do not clear `__cachedNormalZ2` here, because setting `z2` is not a constraint\n    // of this method. In most cases, `z2` is not set and hover style should be able\n    // to rollback. Of course, that would bring bug, but only in a rare case, see\n    // `doSingleLeaveHover` for details.\n\n    singleEnterNormal(el);\n    singleEnterEmphasis(el);\n  }\n}\n\nfunction onElementMouseOver(e) {\n  !shouldSilent(this, e) // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !this.__highByOuter && traverseUpdate(this, singleEnterEmphasis);\n}\n\nfunction onElementMouseOut(e) {\n  !shouldSilent(this, e) // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !this.__highByOuter && traverseUpdate(this, singleEnterNormal);\n}\n\nfunction onElementEmphasisEvent(highlightDigit) {\n  this.__highByOuter |= 1 << (highlightDigit || 0);\n  traverseUpdate(this, singleEnterEmphasis);\n}\n\nfunction onElementNormalEvent(highlightDigit) {\n  !(this.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdate(this, singleEnterNormal);\n}\n\nfunction shouldSilent(el, e) {\n  return el.__highDownSilentOnTouch && e.zrByTouch;\n}\n/**\n * Set hover style (namely \"emphasis style\") of element,\n * based on the current style of the given `el`.\n *\n * (1)\n * **CONSTRAINTS** for this method:\n * <A> This method MUST be called after all of the normal styles having been adopted\n * to the `el`.\n * <B> The input `hoverStyle` (that is, \"emphasis style\") MUST be the subset of the\n * \"normal style\" having been set to the el.\n * <C> `color` MUST be one of the \"normal styles\" (because color might be lifted as\n * a default hover style).\n *\n * The reason: this method treat the current style of the `el` as the \"normal style\"\n * and cache them when enter/update the \"emphasis style\". Consider the case: the `el`\n * is in \"emphasis\" state and `setOption`/`dispatchAction` trigger the style updating\n * logic, where the el should shift from the original emphasis style to the new\n * \"emphasis style\" and should be able to \"downplay\" back to the new \"normal style\".\n *\n * Indeed, it is error-prone to make a interface has so many constraints, but I have\n * not found a better solution yet to fit the backward compatibility, performance and\n * the current programming style.\n *\n * (2)\n * Call the method for a \"root\" element once. Do not call it for each descendants.\n * If the descendants elemenets of a group has itself hover style different from the\n * root group, we can simply mount the style on `el.hoverStyle` for them, but should\n * not call this method for them.\n *\n * (3) These input parameters can be set directly on `el`:\n *\n * @param {module:zrender/Element} el\n * @param {Object} [el.hoverStyle] See `graphic.setElementHoverStyle`.\n * @param {boolean} [el.highDownSilentOnTouch=false] See `graphic.setAsHighDownDispatcher`.\n * @param {Function} [el.highDownOnUpdate] See `graphic.setAsHighDownDispatcher`.\n * @param {Object|boolean} [hoverStyle] See `graphic.setElementHoverStyle`.\n */\n\n\nfunction setHoverStyle(el, hoverStyle) {\n  setAsHighDownDispatcher(el, true);\n  traverseUpdate(el, setElementHoverStyle, hoverStyle);\n}\n/**\n * @param {module:zrender/Element} el\n * @param {Function} [el.highDownOnUpdate] Called when state updated.\n *        Since `setHoverStyle` has the constraint that it must be called after\n *        all of the normal style updated, `highDownOnUpdate` is not needed to\n *        trigger if both `fromState` and `toState` is 'normal', and needed to\n *        trigger if both `fromState` and `toState` is 'emphasis', which enables\n *        to sync outside style settings to \"emphasis\" state.\n *        @this {string} This dispatcher `el`.\n *        @param {string} fromState Can be \"normal\" or \"emphasis\".\n *               `fromState` might equal to `toState`,\n *               for example, when this method is called when `el` is\n *               on \"emphasis\" state.\n *        @param {string} toState Can be \"normal\" or \"emphasis\".\n *\n *        FIXME\n *        CAUTION: Do not expose `highDownOnUpdate` outside echarts.\n *        Because it is not a complete solution. The update\n *        listener should not have been mount in element,\n *        and the normal/emphasis state should not have\n *        mantained on elements.\n *\n * @param {boolean} [el.highDownSilentOnTouch=false]\n *        In touch device, mouseover event will be trigger on touchstart event\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\n *        conveniently use hoverStyle when tap on touch screen without additional\n *        code for compatibility.\n *        But if the chart/component has select feature, which usually also use\n *        hoverStyle, there might be conflict between 'select-highlight' and\n *        'hover-highlight' especially when roam is enabled (see geo for example).\n *        In this case, `highDownSilentOnTouch` should be used to disable\n *        hover-highlight on touch device.\n * @param {boolean} [asDispatcher=true] If `false`, do not set as \"highDownDispatcher\".\n */\n\n\nfunction setAsHighDownDispatcher(el, asDispatcher) {\n  var disable = asDispatcher === false; // Make `highDownSilentOnTouch` and `highDownOnUpdate` only work after\n  // `setAsHighDownDispatcher` called. Avoid it is modified by user unexpectedly.\n\n  el.__highDownSilentOnTouch = el.highDownSilentOnTouch;\n  el.__highDownOnUpdate = el.highDownOnUpdate; // Simple optimize, since this method might be\n  // called for each elements of a group in some cases.\n\n  if (!disable || el.__highDownDispatcher) {\n    var method = disable ? 'off' : 'on'; // Duplicated function will be auto-ignored, see Eventful.js.\n\n    el[method]('mouseover', onElementMouseOver)[method]('mouseout', onElementMouseOut); // Emphasis, normal can be triggered manually by API or other components like hover link.\n\n    el[method]('emphasis', onElementEmphasisEvent)[method]('normal', onElementNormalEvent); // Also keep previous record.\n\n    el.__highByOuter = el.__highByOuter || 0;\n    el.__highDownDispatcher = !disable;\n  }\n}\n/**\n * @param {module:zrender/src/Element} el\n * @return {boolean}\n */\n\n\nfunction isHighDownDispatcher(el) {\n  return !!(el && el.__highDownDispatcher);\n}\n/**\n * Support hightlight/downplay record on each elements.\n * For the case: hover highlight/downplay (legend, visualMap, ...) and\n * user triggerred hightlight/downplay should not conflict.\n * Only all of the highlightDigit cleared, return to normal.\n * @param {string} highlightKey\n * @return {number} highlightDigit\n */\n\n\nfunction getHighlightDigit(highlightKey) {\n  var highlightDigit = _highlightKeyMap[highlightKey];\n\n  if (highlightDigit == null && _highlightNextDigit <= 32) {\n    highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\n  }\n\n  return highlightDigit;\n}\n/**\n * See more info in `setTextStyleCommon`.\n * @param {Object|module:zrender/graphic/Style} normalStyle\n * @param {Object} emphasisStyle\n * @param {module:echarts/model/Model} normalModel\n * @param {module:echarts/model/Model} emphasisModel\n * @param {Object} opt Check `opt` of `setTextStyleCommon` to find other props.\n * @param {string|Function} [opt.defaultText]\n * @param {module:echarts/model/Model} [opt.labelFetcher] Fetch text by\n *      `opt.labelFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex, opt.labelProp)`\n * @param {number} [opt.labelDataIndex] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex, opt.labelProp)`\n * @param {number} [opt.labelDimIndex] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex, opt.labelProp)`\n * @param {string} [opt.labelProp] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex, opt.labelProp)`\n * @param {Object} [normalSpecified]\n * @param {Object} [emphasisSpecified]\n */\n\n\nfunction setLabelStyle(normalStyle, emphasisStyle, normalModel, emphasisModel, opt, normalSpecified, emphasisSpecified) {\n  opt = opt || EMPTY_OBJ;\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var labelProp = opt.labelProp; // This scenario, `label.normal.show = true; label.emphasis.show = false`,\n  // is not supported util someone requests.\n\n  var showNormal = normalModel.getShallow('show');\n  var showEmphasis = emphasisModel.getShallow('show'); // Consider performance, only fetch label when necessary.\n  // If `normal.show` is `false` and `emphasis.show` is `true` and `emphasis.formatter` is not set,\n  // label should be displayed, where text is fetched by `normal.formatter` or `opt.defaultText`.\n\n  var baseText;\n\n  if (showNormal || showEmphasis) {\n    if (labelFetcher) {\n      baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, labelProp);\n    }\n\n    if (baseText == null) {\n      baseText = zrUtil.isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt) : opt.defaultText;\n    }\n  }\n\n  var normalStyleText = showNormal ? baseText : null;\n  var emphasisStyleText = showEmphasis ? zrUtil.retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, 'emphasis', null, labelDimIndex, labelProp) : null, baseText) : null; // Optimize: If style.text is null, text will not be drawn.\n\n  if (normalStyleText != null || emphasisStyleText != null) {\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    // If we set default values on `emphasisStyle`, consider case:\n    // Firstly, `setOption(... label: {normal: {text: null}, emphasis: {show: true}} ...);`\n    // Secondly, `setOption(... label: {noraml: {show: true, text: 'abc', color: 'red'} ...);`\n    // Then the 'red' will not work on emphasis.\n    setTextStyle(normalStyle, normalModel, normalSpecified, opt);\n    setTextStyle(emphasisStyle, emphasisModel, emphasisSpecified, opt, true);\n  }\n\n  normalStyle.text = normalStyleText;\n  emphasisStyle.text = emphasisStyleText;\n}\n/**\n * Modify label style manually.\n * Only works after `setLabelStyle` and `setElementHoverStyle` called.\n *\n * @param {module:zrender/src/Element} el\n * @param {Object} [normalStyleProps] optional\n * @param {Object} [emphasisStyleProps] optional\n */\n\n\nfunction modifyLabelStyle(el, normalStyleProps, emphasisStyleProps) {\n  var elStyle = el.style;\n\n  if (normalStyleProps) {\n    rollbackDefaultTextStyle(elStyle);\n    el.setStyle(normalStyleProps);\n    applyDefaultTextStyle(elStyle);\n  }\n\n  elStyle = el.__hoverStl;\n\n  if (emphasisStyleProps && elStyle) {\n    rollbackDefaultTextStyle(elStyle);\n    zrUtil.extend(elStyle, emphasisStyleProps);\n    applyDefaultTextStyle(elStyle);\n  }\n}\n/**\n * Set basic textStyle properties.\n * See more info in `setTextStyleCommon`.\n * @param {Object|module:zrender/graphic/Style} textStyle\n * @param {module:echarts/model/Model} model\n * @param {Object} [specifiedTextStyle] Can be overrided by settings in model.\n * @param {Object} [opt] See `opt` of `setTextStyleCommon`.\n * @param {boolean} [isEmphasis]\n */\n\n\nfunction setTextStyle(textStyle, textStyleModel, specifiedTextStyle, opt, isEmphasis) {\n  setTextStyleCommon(textStyle, textStyleModel, opt, isEmphasis);\n  specifiedTextStyle && zrUtil.extend(textStyle, specifiedTextStyle); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n\n  return textStyle;\n}\n/**\n * Set text option in the style.\n * See more info in `setTextStyleCommon`.\n * @deprecated\n * @param {Object} textStyle\n * @param {module:echarts/model/Model} labelModel\n * @param {string|boolean} defaultColor Default text color.\n *        If set as false, it will be processed as a emphasis style.\n */\n\n\nfunction setText(textStyle, labelModel, defaultColor) {\n  var opt = {\n    isRectText: true\n  };\n  var isEmphasis;\n\n  if (defaultColor === false) {\n    isEmphasis = true;\n  } else {\n    // Support setting color as 'auto' to get visual color.\n    opt.autoColor = defaultColor;\n  }\n\n  setTextStyleCommon(textStyle, labelModel, opt, isEmphasis); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n}\n/**\n * The uniform entry of set text style, that is, retrieve style definitions\n * from `model` and set to `textStyle` object.\n *\n * Never in merge mode, but in overwrite mode, that is, all of the text style\n * properties will be set. (Consider the states of normal and emphasis and\n * default value can be adopted, merge would make the logic too complicated\n * to manage.)\n *\n * The `textStyle` object can either be a plain object or an instance of\n * `zrender/src/graphic/Style`, and either be the style of normal or emphasis.\n * After this mothod called, the `textStyle` object can then be used in\n * `el.setStyle(textStyle)` or `el.hoverStyle = textStyle`.\n *\n * Default value will be adopted and `insideRollbackOpt` will be created.\n * See `applyDefaultTextStyle` `rollbackDefaultTextStyle` for more details.\n *\n * opt: {\n *      disableBox: boolean, Whether diable drawing box of block (outer most).\n *      isRectText: boolean,\n *      autoColor: string, specify a color when color is 'auto',\n *              for textFill, textStroke, textBackgroundColor, and textBorderColor.\n *              If autoColor specified, it is used as default textFill.\n *      useInsideStyle:\n *              `true`: Use inside style (textFill, textStroke, textStrokeWidth)\n *                  if `textFill` is not specified.\n *              `false`: Do not use inside style.\n *              `null/undefined`: use inside style if `isRectText` is true and\n *                  `textFill` is not specified and textPosition contains `'inside'`.\n *      forceRich: boolean\n * }\n */\n\n\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isEmphasis) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n\n  if (opt.isRectText) {\n    var textPosition;\n\n    if (opt.getTextPosition) {\n      textPosition = opt.getTextPosition(textStyleModel, isEmphasis);\n    } else {\n      textPosition = textStyleModel.getShallow('position') || (isEmphasis ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n      // in bar series, and magric type should be considered.\n\n      textPosition === 'outside' && (textPosition = 'top');\n    }\n\n    textStyle.textPosition = textPosition;\n    textStyle.textOffset = textStyleModel.getShallow('offset');\n    var labelRotate = textStyleModel.getShallow('rotate');\n    labelRotate != null && (labelRotate *= Math.PI / 180);\n    textStyle.textRotation = labelRotate;\n    textStyle.textDistance = zrUtil.retrieve2(textStyleModel.getShallow('distance'), isEmphasis ? null : 5);\n  }\n\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n\n  if (richItemNames) {\n    richResult = {};\n\n    for (var name in richItemNames) {\n      if (richItemNames.hasOwnProperty(name)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name]); // In rich, never `disableBox`.\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n\n        setTokenTextStyle(richResult[name] = {}, richTextStyle, globalTextStyle, opt, isEmphasis);\n      }\n    }\n  }\n\n  textStyle.rich = richResult;\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isEmphasis, true);\n\n  if (opt.forceRich && !opt.textStyle) {\n    opt.textStyle = {};\n  }\n\n  return textStyle;\n} // Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n\n\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n\n      for (var name in rich) {\n        if (rich.hasOwnProperty(name)) {\n          richItemNameMap[name] = 1;\n        }\n      }\n    }\n\n    textStyleModel = textStyleModel.parentModel;\n  }\n\n  return richItemNameMap;\n}\n\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isEmphasis, isBlock) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isEmphasis && globalTextStyle || EMPTY_OBJ;\n  textStyle.textFill = getAutoColor(textStyleModel.getShallow('color'), opt) || globalTextStyle.color;\n  textStyle.textStroke = getAutoColor(textStyleModel.getShallow('textBorderColor'), opt) || globalTextStyle.textBorderColor;\n  textStyle.textStrokeWidth = zrUtil.retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n  if (!isEmphasis) {\n    if (isBlock) {\n      textStyle.insideRollbackOpt = opt;\n      applyDefaultTextStyle(textStyle);\n    } // Set default finally.\n\n\n    if (textStyle.textFill == null) {\n      textStyle.textFill = opt.autoColor;\n    }\n  } // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n\n\n  textStyle.fontStyle = textStyleModel.getShallow('fontStyle') || globalTextStyle.fontStyle;\n  textStyle.fontWeight = textStyleModel.getShallow('fontWeight') || globalTextStyle.fontWeight;\n  textStyle.fontSize = textStyleModel.getShallow('fontSize') || globalTextStyle.fontSize;\n  textStyle.fontFamily = textStyleModel.getShallow('fontFamily') || globalTextStyle.fontFamily;\n  textStyle.textAlign = textStyleModel.getShallow('align');\n  textStyle.textVerticalAlign = textStyleModel.getShallow('verticalAlign') || textStyleModel.getShallow('baseline');\n  textStyle.textLineHeight = textStyleModel.getShallow('lineHeight');\n  textStyle.textWidth = textStyleModel.getShallow('width');\n  textStyle.textHeight = textStyleModel.getShallow('height');\n  textStyle.textTag = textStyleModel.getShallow('tag');\n\n  if (!isBlock || !opt.disableBox) {\n    textStyle.textBackgroundColor = getAutoColor(textStyleModel.getShallow('backgroundColor'), opt);\n    textStyle.textPadding = textStyleModel.getShallow('padding');\n    textStyle.textBorderColor = getAutoColor(textStyleModel.getShallow('borderColor'), opt);\n    textStyle.textBorderWidth = textStyleModel.getShallow('borderWidth');\n    textStyle.textBorderRadius = textStyleModel.getShallow('borderRadius');\n    textStyle.textBoxShadowColor = textStyleModel.getShallow('shadowColor');\n    textStyle.textBoxShadowBlur = textStyleModel.getShallow('shadowBlur');\n    textStyle.textBoxShadowOffsetX = textStyleModel.getShallow('shadowOffsetX');\n    textStyle.textBoxShadowOffsetY = textStyleModel.getShallow('shadowOffsetY');\n  }\n\n  textStyle.textShadowColor = textStyleModel.getShallow('textShadowColor') || globalTextStyle.textShadowColor;\n  textStyle.textShadowBlur = textStyleModel.getShallow('textShadowBlur') || globalTextStyle.textShadowBlur;\n  textStyle.textShadowOffsetX = textStyleModel.getShallow('textShadowOffsetX') || globalTextStyle.textShadowOffsetX;\n  textStyle.textShadowOffsetY = textStyleModel.getShallow('textShadowOffsetY') || globalTextStyle.textShadowOffsetY;\n}\n\nfunction getAutoColor(color, opt) {\n  return color !== 'auto' ? color : opt && opt.autoColor ? opt.autoColor : null;\n}\n/**\n * Give some default value to the input `textStyle` object, based on the current settings\n * in this `textStyle` object.\n *\n * The Scenario:\n * when text position is `inside` and `textFill` is not specified, we show\n * text border by default for better view. But it should be considered that text position\n * might be changed when hovering or being emphasis, where the `insideRollback` is used to\n * restore the style.\n *\n * Usage (& NOTICE):\n * When a style object (eithor plain object or instance of `zrender/src/graphic/Style`) is\n * about to be modified on its text related properties, `rollbackDefaultTextStyle` should\n * be called before the modification and `applyDefaultTextStyle` should be called after that.\n * (For the case that all of the text related properties is reset, like `setTextStyleCommon`\n * does, `rollbackDefaultTextStyle` is not needed to be called).\n */\n\n\nfunction applyDefaultTextStyle(textStyle) {\n  var textPosition = textStyle.textPosition;\n  var opt = textStyle.insideRollbackOpt;\n  var insideRollback;\n\n  if (opt && textStyle.textFill == null) {\n    var autoColor = opt.autoColor;\n    var isRectText = opt.isRectText;\n    var useInsideStyle = opt.useInsideStyle;\n    var useInsideStyleCache = useInsideStyle !== false && (useInsideStyle === true || isRectText && textPosition // textPosition can be [10, 30]\n    && typeof textPosition === 'string' && textPosition.indexOf('inside') >= 0);\n    var useAutoColorCache = !useInsideStyleCache && autoColor != null; // All of the props declared in `CACHED_LABEL_STYLE_PROPERTIES` are to be cached.\n\n    if (useInsideStyleCache || useAutoColorCache) {\n      insideRollback = {\n        textFill: textStyle.textFill,\n        textStroke: textStyle.textStroke,\n        textStrokeWidth: textStyle.textStrokeWidth\n      };\n    }\n\n    if (useInsideStyleCache) {\n      textStyle.textFill = '#fff'; // Consider text with #fff overflow its container.\n\n      if (textStyle.textStroke == null) {\n        textStyle.textStroke = autoColor;\n        textStyle.textStrokeWidth == null && (textStyle.textStrokeWidth = 2);\n      }\n    }\n\n    if (useAutoColorCache) {\n      textStyle.textFill = autoColor;\n    }\n  } // Always set `insideRollback`, so that the previous one can be cleared.\n\n\n  textStyle.insideRollback = insideRollback;\n}\n/**\n * Consider the case: in a scatter,\n * label: {\n *     normal: {position: 'inside'},\n *     emphasis: {position: 'top'}\n * }\n * In the normal state, the `textFill` will be set as '#fff' for pretty view (see\n * `applyDefaultTextStyle`), but when switching to emphasis state, the `textFill`\n * should be retured to 'autoColor', but not keep '#fff'.\n */\n\n\nfunction rollbackDefaultTextStyle(style) {\n  var insideRollback = style.insideRollback;\n\n  if (insideRollback) {\n    // Reset all of the props in `CACHED_LABEL_STYLE_PROPERTIES`.\n    style.textFill = insideRollback.textFill;\n    style.textStroke = insideRollback.textStroke;\n    style.textStrokeWidth = insideRollback.textStrokeWidth;\n    style.insideRollback = null;\n  }\n}\n\nfunction getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return zrUtil.trim([// FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\n\nfunction animateOrSetProps(isUpdate, el, props, animatableModel, dataIndex, cb) {\n  if (typeof dataIndex === 'function') {\n    cb = dataIndex;\n    dataIndex = null;\n  } // Do not check 'animation' property directly here. Consider this case:\n  // animation model is an `itemModel`, whose does not have `isAnimationEnabled`\n  // but its parent model (`seriesModel`) does.\n\n\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n\n  if (animationEnabled) {\n    var postfix = isUpdate ? 'Update' : '';\n    var duration = animatableModel.getShallow('animationDuration' + postfix);\n    var animationEasing = animatableModel.getShallow('animationEasing' + postfix);\n    var animationDelay = animatableModel.getShallow('animationDelay' + postfix);\n\n    if (typeof animationDelay === 'function') {\n      animationDelay = animationDelay(dataIndex, animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n    }\n\n    if (typeof duration === 'function') {\n      duration = duration(dataIndex);\n    }\n\n    duration > 0 ? el.animateTo(props, duration, animationDelay || 0, animationEasing, cb, !!cb) : (el.stopAnimation(), el.attr(props), cb && cb());\n  } else {\n    el.stopAnimation();\n    el.attr(props);\n    cb && cb();\n  }\n}\n/**\n * Update graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n *\n * @param {module:zrender/Element} el\n * @param {Object} props\n * @param {module:echarts/model/Model} [animatableModel]\n * @param {number} [dataIndex]\n * @param {Function} [cb]\n * @example\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\n *     // Or\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, function () { console.log('Animation done!'); });\n */\n\n\nfunction updateProps(el, props, animatableModel, dataIndex, cb) {\n  animateOrSetProps(true, el, props, animatableModel, dataIndex, cb);\n}\n/**\n * Init graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n *\n * @param {module:zrender/Element} el\n * @param {Object} props\n * @param {module:echarts/model/Model} [animatableModel]\n * @param {number} [dataIndex]\n * @param {Function} cb\n */\n\n\nfunction initProps(el, props, animatableModel, dataIndex, cb) {\n  animateOrSetProps(false, el, props, animatableModel, dataIndex, cb);\n}\n/**\n * Get transform matrix of target (param target),\n * in coordinate of its ancestor (param ancestor)\n *\n * @param {module:zrender/mixin/Transformable} target\n * @param {module:zrender/mixin/Transformable} [ancestor]\n */\n\n\nfunction getTransform(target, ancestor) {\n  var mat = matrix.identity([]);\n\n  while (target && target !== ancestor) {\n    matrix.mul(mat, target.getLocalTransform(), mat);\n    target = target.parent;\n  }\n\n  return mat;\n}\n/**\n * Apply transform to an vertex.\n * @param {Array.<number>} target [x, y]\n * @param {Array.<number>|TypedArray.<number>|Object} transform Can be:\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\n * @param {boolean=} invert Whether use invert matrix.\n * @return {Array.<number>} [x, y]\n */\n\n\nfunction applyTransform(target, transform, invert) {\n  if (transform && !zrUtil.isArrayLike(transform)) {\n    transform = Transformable.getLocalTransform(transform);\n  }\n\n  if (invert) {\n    transform = matrix.invert([], transform);\n  }\n\n  return vector.applyTransform([], target, transform);\n}\n/**\n * @param {string} direction 'left' 'right' 'top' 'bottom'\n * @param {Array.<number>} transform Transform matrix: like [1, 0, 0, 1, 0, 0]\n * @param {boolean=} invert Whether use invert matrix.\n * @return {string} Transformed direction. 'left' 'right' 'top' 'bottom'\n */\n\n\nfunction transformDirection(direction, transform, invert) {\n  // Pick a base, ensure that transform result will not be (0, 0).\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n  vertex = applyTransform(vertex, transform, invert);\n  return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n}\n/**\n * Apply group transition animation from g1 to g2.\n * If no animatableModel, no animation.\n */\n\n\nfunction groupTransition(g1, g2, animatableModel, cb) {\n  if (!g1 || !g2) {\n    return;\n  }\n\n  function getElMap(g) {\n    var elMap = {};\n    g.traverse(function (el) {\n      if (!el.isGroup && el.anid) {\n        elMap[el.anid] = el;\n      }\n    });\n    return elMap;\n  }\n\n  function getAnimatableProps(el) {\n    var obj = {\n      position: vector.clone(el.position),\n      rotation: el.rotation\n    };\n\n    if (el.shape) {\n      obj.shape = zrUtil.extend({}, el.shape);\n    }\n\n    return obj;\n  }\n\n  var elMap1 = getElMap(g1);\n  g2.traverse(function (el) {\n    if (!el.isGroup && el.anid) {\n      var oldEl = elMap1[el.anid];\n\n      if (oldEl) {\n        var newProp = getAnimatableProps(el);\n        el.attr(getAnimatableProps(oldEl));\n        updateProps(el, newProp, animatableModel, el.dataIndex);\n      } // else {\n      //     if (el.previousProps) {\n      //         graphic.updateProps\n      //     }\n      // }\n\n    }\n  });\n}\n/**\n * @param {Array.<Array.<number>>} points Like: [[23, 44], [53, 66], ...]\n * @param {Object} rect {x, y, width, height}\n * @return {Array.<Array.<number>>} A new clipped points.\n */\n\n\nfunction clipPointsByRect(points, rect) {\n  // FIXME: this way migth be incorrect when grpahic clipped by a corner.\n  // and when element have border.\n  return zrUtil.map(points, function (point) {\n    var x = point[0];\n    x = mathMax(x, rect.x);\n    x = mathMin(x, rect.x + rect.width);\n    var y = point[1];\n    y = mathMax(y, rect.y);\n    y = mathMin(y, rect.y + rect.height);\n    return [x, y];\n  });\n}\n/**\n * @param {Object} targetRect {x, y, width, height}\n * @param {Object} rect {x, y, width, height}\n * @return {Object} A new clipped rect. If rect size are negative, return undefined.\n */\n\n\nfunction clipRectByRect(targetRect, rect) {\n  var x = mathMax(targetRect.x, rect.x);\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\n  var y = mathMax(targetRect.y, rect.y);\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height); // If the total rect is cliped, nothing, including the border,\n  // should be painted. So return undefined.\n\n  if (x2 >= x && y2 >= y) {\n    return {\n      x: x,\n      y: y,\n      width: x2 - x,\n      height: y2 - y\n    };\n  }\n}\n/**\n * @param {string} iconStr Support 'image://' or 'path://' or direct svg path.\n * @param {Object} [opt] Properties of `module:zrender/Element`, except `style`.\n * @param {Object} [rect] {x, y, width, height}\n * @return {module:zrender/Element} Icon path or image element.\n */\n\n\nfunction createIcon(iconStr, opt, rect) {\n  opt = zrUtil.extend({\n    rectHover: true\n  }, opt);\n  var style = opt.style = {\n    strokeNoScale: true\n  };\n  rect = rect || {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  };\n\n  if (iconStr) {\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), zrUtil.defaults(style, rect), new ZImage(opt)) : makePath(iconStr.replace('path://', ''), opt, rect, 'center');\n  }\n}\n/**\n * Return `true` if the given line (line `a`) and the given polygon\n * are intersect.\n * Note that we do not count colinear as intersect here because no\n * requirement for that. We could do that if required in future.\n *\n * @param {number} a1x\n * @param {number} a1y\n * @param {number} a2x\n * @param {number} a2y\n * @param {Array.<Array.<number>>} points Points of the polygon.\n * @return {boolean}\n */\n\n\nfunction linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\n  for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\n    var p = points[i];\n\n    if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\n      return true;\n    }\n\n    p2 = p;\n  }\n}\n/**\n * Return `true` if the given two lines (line `a` and line `b`)\n * are intersect.\n * Note that we do not count colinear as intersect here because no\n * requirement for that. We could do that if required in future.\n *\n * @param {number} a1x\n * @param {number} a1y\n * @param {number} a2x\n * @param {number} a2y\n * @param {number} b1x\n * @param {number} b1y\n * @param {number} b2x\n * @param {number} b2y\n * @return {boolean}\n */\n\n\nfunction lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n  // let `vec_m` to be `vec_a2 - vec_a1` and `vec_n` to be `vec_b2 - vec_b1`.\n  var mx = a2x - a1x;\n  var my = a2y - a1y;\n  var nx = b2x - b1x;\n  var ny = b2y - b1y; // `vec_m` and `vec_n` are parallel iff\n  //     exising `k` such that `vec_m = k  vec_n`, equivalent to `vec_m X vec_n = 0`.\n\n  var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n\n  if (nearZero(nmCrossProduct)) {\n    return false;\n  } // `vec_m` and `vec_n` are intersect iff\n  //     existing `p` and `q` in [0, 1] such that `vec_a1 + p * vec_m = vec_b1 + q * vec_n`,\n  //     such that `q = ((vec_a1 - vec_b1) X vec_m) / (vec_n X vec_m)`\n  //           and `p = ((vec_a1 - vec_b1) X vec_n) / (vec_n X vec_m)`.\n\n\n  var b1a1x = a1x - b1x;\n  var b1a1y = a1y - b1y;\n  var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\n\n  if (q < 0 || q > 1) {\n    return false;\n  }\n\n  var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n\n  if (p < 0 || p > 1) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Cross product of 2-dimension vector.\n */\n\n\nfunction crossProduct2d(x1, y1, x2, y2) {\n  return x1 * y2 - x2 * y1;\n}\n\nfunction nearZero(val) {\n  return val <= 1e-6 && val >= -1e-6;\n} // Register built-in shapes. These shapes might be overwirtten\n// by users, although we do not recommend that.\n\n\nregisterShape('circle', Circle);\nregisterShape('sector', Sector);\nregisterShape('ring', Ring);\nregisterShape('polygon', Polygon);\nregisterShape('polyline', Polyline);\nregisterShape('rect', Rect);\nregisterShape('line', Line);\nregisterShape('bezierCurve', BezierCurve);\nregisterShape('arc', Arc);\nexports.Z2_EMPHASIS_LIFT = Z2_EMPHASIS_LIFT;\nexports.CACHED_LABEL_STYLE_PROPERTIES = CACHED_LABEL_STYLE_PROPERTIES;\nexports.extendShape = extendShape;\nexports.extendPath = extendPath;\nexports.registerShape = registerShape;\nexports.getShapeClass = getShapeClass;\nexports.makePath = makePath;\nexports.makeImage = makeImage;\nexports.mergePath = mergePath;\nexports.resizePath = resizePath;\nexports.subPixelOptimizeLine = subPixelOptimizeLine;\nexports.subPixelOptimizeRect = subPixelOptimizeRect;\nexports.subPixelOptimize = subPixelOptimize;\nexports.setElementHoverStyle = setElementHoverStyle;\nexports.setHoverStyle = setHoverStyle;\nexports.setAsHighDownDispatcher = setAsHighDownDispatcher;\nexports.isHighDownDispatcher = isHighDownDispatcher;\nexports.getHighlightDigit = getHighlightDigit;\nexports.setLabelStyle = setLabelStyle;\nexports.modifyLabelStyle = modifyLabelStyle;\nexports.setTextStyle = setTextStyle;\nexports.setText = setText;\nexports.getFont = getFont;\nexports.updateProps = updateProps;\nexports.initProps = initProps;\nexports.getTransform = getTransform;\nexports.applyTransform = applyTransform;\nexports.transformDirection = transformDirection;\nexports.groupTransition = groupTransition;\nexports.clipPointsByRect = clipPointsByRect;\nexports.clipRectByRect = clipRectByRect;\nexports.createIcon = createIcon;\nexports.linePolygonIntersect = linePolygonIntersect;\nexports.lineLineIntersect = lineLineIntersect;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The method \"quantile\" was copied from \"d3.js\".\n* (See more details in the comment of the method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nvar RADIAN_EPSILON = 1e-4;\n\nfunction _trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n/**\n * Linear mapping a value from domain to range\n * @memberOf module:echarts/util/number\n * @param  {(number|Array.<number>)} val\n * @param  {Array.<number>} domain Domain extent domain[0] can be bigger than domain[1]\n * @param  {Array.<number>} range  Range extent range[0] can be bigger than range[1]\n * @param  {boolean} clamp\n * @return {(number|Array.<number>}\n */\n\n\nfunction linearMap(val, domain, range, clamp) {\n  var subDomain = domain[1] - domain[0];\n  var subRange = range[1] - range[0];\n\n  if (subDomain === 0) {\n    return subRange === 0 ? range[0] : (range[0] + range[1]) / 2;\n  } // Avoid accuracy problem in edge, such as\n  // 146.39 - 62.83 === 83.55999999999999.\n  // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n  // It is a little verbose for efficiency considering this method\n  // is a hotspot.\n\n\n  if (clamp) {\n    if (subDomain > 0) {\n      if (val <= domain[0]) {\n        return range[0];\n      } else if (val >= domain[1]) {\n        return range[1];\n      }\n    } else {\n      if (val >= domain[0]) {\n        return range[0];\n      } else if (val <= domain[1]) {\n        return range[1];\n      }\n    }\n  } else {\n    if (val === domain[0]) {\n      return range[0];\n    }\n\n    if (val === domain[1]) {\n      return range[1];\n    }\n  }\n\n  return (val - domain[0]) / subDomain * subRange + range[0];\n}\n/**\n * Convert a percent string to absolute number.\n * Returns NaN if percent is not a valid string or number\n * @memberOf module:echarts/util/number\n * @param {string|number} percent\n * @param {number} all\n * @return {number}\n */\n\n\nfunction parsePercent(percent, all) {\n  switch (percent) {\n    case 'center':\n    case 'middle':\n      percent = '50%';\n      break;\n\n    case 'left':\n    case 'top':\n      percent = '0%';\n      break;\n\n    case 'right':\n    case 'bottom':\n      percent = '100%';\n      break;\n  }\n\n  if (typeof percent === 'string') {\n    if (_trim(percent).match(/%$/)) {\n      return parseFloat(percent) / 100 * all;\n    }\n\n    return parseFloat(percent);\n  }\n\n  return percent == null ? NaN : +percent;\n}\n/**\n * (1) Fix rounding error of float numbers.\n * (2) Support return string to avoid scientific notation like '3.5e-7'.\n *\n * @param {number} x\n * @param {number} [precision]\n * @param {boolean} [returnStr]\n * @return {number|string}\n */\n\n\nfunction round(x, precision, returnStr) {\n  if (precision == null) {\n    precision = 10;\n  } // Avoid range error\n\n\n  precision = Math.min(Math.max(0, precision), 20);\n  x = (+x).toFixed(precision);\n  return returnStr ? x : +x;\n}\n/**\n * asc sort arr.\n * The input arr will be modified.\n *\n * @param {Array} arr\n * @return {Array} The input arr.\n */\n\n\nfunction asc(arr) {\n  arr.sort(function (a, b) {\n    return a - b;\n  });\n  return arr;\n}\n/**\n * Get precision\n * @param {number} val\n */\n\n\nfunction getPrecision(val) {\n  val = +val;\n\n  if (isNaN(val)) {\n    return 0;\n  } // It is much faster than methods converting number to string as follows\n  //      var tmp = val.toString();\n  //      return tmp.length - 1 - tmp.indexOf('.');\n  // especially when precision is low\n\n\n  var e = 1;\n  var count = 0;\n\n  while (Math.round(val * e) / e !== val) {\n    e *= 10;\n    count++;\n  }\n\n  return count;\n}\n/**\n * @param {string|number} val\n * @return {number}\n */\n\n\nfunction getPrecisionSafe(val) {\n  var str = val.toString(); // Consider scientific notation: '3.4e-12' '3.4e+12'\n\n  var eIndex = str.indexOf('e');\n\n  if (eIndex > 0) {\n    var precision = +str.slice(eIndex + 1);\n    return precision < 0 ? -precision : 0;\n  } else {\n    var dotIndex = str.indexOf('.');\n    return dotIndex < 0 ? 0 : str.length - 1 - dotIndex;\n  }\n}\n/**\n * Minimal dicernible data precisioin according to a single pixel.\n *\n * @param {Array.<number>} dataExtent\n * @param {Array.<number>} pixelExtent\n * @return {number} precision\n */\n\n\nfunction getPixelPrecision(dataExtent, pixelExtent) {\n  var log = Math.log;\n  var LN10 = Math.LN10;\n  var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n  var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10); // toFixed() digits argument must be between 0 and 20.\n\n  var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n  return !isFinite(precision) ? 20 : precision;\n}\n/**\n * Get a data of given precision, assuring the sum of percentages\n * in valueList is 1.\n * The largest remainer method is used.\n * https://en.wikipedia.org/wiki/Largest_remainder_method\n *\n * @param {Array.<number>} valueList a list of all data\n * @param {number} idx index of the data to be processed in valueList\n * @param {number} precision integer number showing digits of precision\n * @return {number} percent ranging from 0 to 100\n */\n\n\nfunction getPercentWithPrecision(valueList, idx, precision) {\n  if (!valueList[idx]) {\n    return 0;\n  }\n\n  var sum = zrUtil.reduce(valueList, function (acc, val) {\n    return acc + (isNaN(val) ? 0 : val);\n  }, 0);\n\n  if (sum === 0) {\n    return 0;\n  }\n\n  var digits = Math.pow(10, precision);\n  var votesPerQuota = zrUtil.map(valueList, function (val) {\n    return (isNaN(val) ? 0 : val) / sum * digits * 100;\n  });\n  var targetSeats = digits * 100;\n  var seats = zrUtil.map(votesPerQuota, function (votes) {\n    // Assign automatic seats.\n    return Math.floor(votes);\n  });\n  var currentSum = zrUtil.reduce(seats, function (acc, val) {\n    return acc + val;\n  }, 0);\n  var remainder = zrUtil.map(votesPerQuota, function (votes, idx) {\n    return votes - seats[idx];\n  }); // Has remainding votes.\n\n  while (currentSum < targetSeats) {\n    // Find next largest remainder.\n    var max = Number.NEGATIVE_INFINITY;\n    var maxId = null;\n\n    for (var i = 0, len = remainder.length; i < len; ++i) {\n      if (remainder[i] > max) {\n        max = remainder[i];\n        maxId = i;\n      }\n    } // Add a vote to max remainder.\n\n\n    ++seats[maxId];\n    remainder[maxId] = 0;\n    ++currentSum;\n  }\n\n  return seats[idx] / digits;\n} // Number.MAX_SAFE_INTEGER, ie do not support.\n\n\nvar MAX_SAFE_INTEGER = 9007199254740991;\n/**\n * To 0 - 2 * PI, considering negative radian.\n * @param {number} radian\n * @return {number}\n */\n\nfunction remRadian(radian) {\n  var pi2 = Math.PI * 2;\n  return (radian % pi2 + pi2) % pi2;\n}\n/**\n * @param {type} radian\n * @return {boolean}\n */\n\n\nfunction isRadianAroundZero(val) {\n  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n}\n/* eslint-disable */\n\n\nvar TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d\\d)(?::(\\d\\d)(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n\n/* eslint-enable */\n\n/**\n * @param {string|Date|number} value These values can be accepted:\n *   + An instance of Date, represent a time in its own time zone.\n *   + Or string in a subset of ISO 8601, only including:\n *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\n *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\n *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\n *     all of which will be treated as local time if time zone is not specified\n *     (see <https://momentjs.com/>).\n *   + Or other string format, including (all of which will be treated as loacal time):\n *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\n *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\n *   + a timestamp, which represent a time in UTC.\n * @return {Date} date\n */\n\nfunction parseDate(value) {\n  if (value instanceof Date) {\n    return value;\n  } else if (typeof value === 'string') {\n    // Different browsers parse date in different way, so we parse it manually.\n    // Some other issues:\n    // new Date('1970-01-01') is UTC,\n    // new Date('1970/01/01') and new Date('1970-1-01') is local.\n    // See issue #3623\n    var match = TIME_REG.exec(value);\n\n    if (!match) {\n      // return Invalid Date.\n      return new Date(NaN);\n    } // Use local time when no timezone offset specifed.\n\n\n    if (!match[8]) {\n      // match[n] can only be string or undefined.\n      // But take care of '12' + 1 => '121'.\n      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, +match[7] || 0);\n    } // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n    // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n    // For example, system timezone is set as \"Time Zone: America/Toronto\",\n    // then these code will get different result:\n    // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n    // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n    // So we should not use `new Date`, but use `Date.UTC`.\n    else {\n        var hour = +match[4] || 0;\n\n        if (match[8].toUpperCase() !== 'Z') {\n          hour -= match[8].slice(0, 3);\n        }\n\n        return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, +match[7] || 0));\n      }\n  } else if (value == null) {\n    return new Date(NaN);\n  }\n\n  return new Date(Math.round(value));\n}\n/**\n * Quantity of a number. e.g. 0.1, 1, 10, 100\n *\n * @param  {number} val\n * @return {number}\n */\n\n\nfunction quantity(val) {\n  return Math.pow(10, quantityExponent(val));\n}\n/**\n * Exponent of the quantity of a number\n * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\n *\n * @param  {number} val non-negative value\n * @return {number}\n */\n\n\nfunction quantityExponent(val) {\n  if (val === 0) {\n    return 0;\n  }\n\n  var exp = Math.floor(Math.log(val) / Math.LN10);\n  /**\n   * exp is expected to be the rounded-down result of the base-10 log of val.\n   * But due to the precision loss with Math.log(val), we need to restore it\n   * using 10^exp to make sure we can get val back from exp. #11249\n   */\n\n  if (val / Math.pow(10, exp) >= 10) {\n    exp++;\n  }\n\n  return exp;\n}\n/**\n * find a nice number approximately equal to x. Round the number if round = true,\n * take ceiling if round = false. The primary observation is that the nicest\n * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\n *\n * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\n *\n * @param  {number} val Non-negative value.\n * @param  {boolean} round\n * @return {number}\n */\n\n\nfunction nice(val, round) {\n  var exponent = quantityExponent(val);\n  var exp10 = Math.pow(10, exponent);\n  var f = val / exp10; // 1 <= f < 10\n\n  var nf;\n\n  if (round) {\n    if (f < 1.5) {\n      nf = 1;\n    } else if (f < 2.5) {\n      nf = 2;\n    } else if (f < 4) {\n      nf = 3;\n    } else if (f < 7) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  } else {\n    if (f < 1) {\n      nf = 1;\n    } else if (f < 2) {\n      nf = 2;\n    } else if (f < 3) {\n      nf = 3;\n    } else if (f < 5) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  }\n\n  val = nf * exp10; // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n  // 20 is the uppper bound of toFixed.\n\n  return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n}\n/**\n * This code was copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\n * See the license statement at the head of this file.\n * @param {Array.<number>} ascArr\n */\n\n\nfunction quantile(ascArr, p) {\n  var H = (ascArr.length - 1) * p + 1;\n  var h = Math.floor(H);\n  var v = +ascArr[h - 1];\n  var e = H - h;\n  return e ? v + e * (ascArr[h] - v) : v;\n}\n/**\n * Order intervals asc, and split them when overlap.\n * expect(numberUtil.reformIntervals([\n *     {interval: [18, 62], close: [1, 1]},\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [1, 1]},\n *     {interval: [62, 150], close: [1, 1]},\n *     {interval: [106, 150], close: [1, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ])).toEqual([\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [0, 1]},\n *     {interval: [18, 62], close: [0, 1]},\n *     {interval: [62, 150], close: [0, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ]);\n * @param {Array.<Object>} list, where `close` mean open or close\n *        of the interval, and Infinity can be used.\n * @return {Array.<Object>} The origin list, which has been reformed.\n */\n\n\nfunction reformIntervals(list) {\n  list.sort(function (a, b) {\n    return littleThan(a, b, 0) ? -1 : 1;\n  });\n  var curr = -Infinity;\n  var currClose = 1;\n\n  for (var i = 0; i < list.length;) {\n    var interval = list[i].interval;\n    var close = list[i].close;\n\n    for (var lg = 0; lg < 2; lg++) {\n      if (interval[lg] <= curr) {\n        interval[lg] = curr;\n        close[lg] = !lg ? 1 - currClose : 1;\n      }\n\n      curr = interval[lg];\n      currClose = close[lg];\n    }\n\n    if (interval[0] === interval[1] && close[0] * close[1] !== 1) {\n      list.splice(i, 1);\n    } else {\n      i++;\n    }\n  }\n\n  return list;\n\n  function littleThan(a, b, lg) {\n    return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n  }\n}\n/**\n * parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n * ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n * subtraction forces infinities to NaN\n *\n * @param {*} v\n * @return {boolean}\n */\n\n\nfunction isNumeric(v) {\n  return v - parseFloat(v) >= 0;\n}\n\nexports.linearMap = linearMap;\nexports.parsePercent = parsePercent;\nexports.round = round;\nexports.asc = asc;\nexports.getPrecision = getPrecision;\nexports.getPrecisionSafe = getPrecisionSafe;\nexports.getPixelPrecision = getPixelPrecision;\nexports.getPercentWithPrecision = getPercentWithPrecision;\nexports.MAX_SAFE_INTEGER = MAX_SAFE_INTEGER;\nexports.remRadian = remRadian;\nexports.isRadianAroundZero = isRadianAroundZero;\nexports.parseDate = parseDate;\nexports.quantity = quantity;\nexports.quantityExponent = quantityExponent;\nexports.nice = nice;\nexports.quantile = quantile;\nexports.reformIntervals = reformIntervals;\nexports.isNumeric = isNumeric;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// (1) The code `if (__DEV__) ...` can be removed by build tool.\n// (2) If intend to use `__DEV__`, this module should be imported. Use a global\n// variable `__DEV__` may cause that miss the declaration (see #6535), or the\n// declaration is behind of the using position (for example in `Model.extent`,\n// And tools like rollup can not analysis the dependency if not import).\nvar dev; // In browser\n\nif (typeof window !== 'undefined') {\n  dev = window.__DEV__;\n} // In node\nelse if (typeof global !== 'undefined') {\n    dev = global.__DEV__;\n  }\n\nif (typeof dev === 'undefined') {\n  dev = true;\n}\n\nvar __DEV__ = dev;\nexports.__DEV__ = __DEV__;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _number = require(\"./number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar formatUtil = require(\"./format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Layout helpers for each component positioning\nvar each = zrUtil.each;\n/**\n * @public\n */\n\nvar LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n/**\n * @public\n */\n\nvar HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\n\nfunction boxLayout(orient, group, gap, maxWidth, maxHeight) {\n  var x = 0;\n  var y = 0;\n\n  if (maxWidth == null) {\n    maxWidth = Infinity;\n  }\n\n  if (maxHeight == null) {\n    maxHeight = Infinity;\n  }\n\n  var currentLineMaxSize = 0;\n  group.eachChild(function (child, idx) {\n    var position = child.position;\n    var rect = child.getBoundingRect();\n    var nextChild = group.childAt(idx + 1);\n    var nextChildRect = nextChild && nextChild.getBoundingRect();\n    var nextX;\n    var nextY;\n\n    if (orient === 'horizontal') {\n      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n      nextX = x + moveX; // Wrap when width exceeds maxWidth or meet a `newline` group\n      // FIXME compare before adding gap?\n\n      if (nextX > maxWidth || child.newline) {\n        x = 0;\n        nextX = moveX;\n        y += currentLineMaxSize + gap;\n        currentLineMaxSize = rect.height;\n      } else {\n        // FIXME: consider rect.y is not `0`?\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n      }\n    } else {\n      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n      nextY = y + moveY; // Wrap when width exceeds maxHeight or meet a `newline` group\n\n      if (nextY > maxHeight || child.newline) {\n        x += currentLineMaxSize + gap;\n        y = 0;\n        nextY = moveY;\n        currentLineMaxSize = rect.width;\n      } else {\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n      }\n    }\n\n    if (child.newline) {\n      return;\n    }\n\n    position[0] = x;\n    position[1] = y;\n    orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n  });\n}\n/**\n * VBox or HBox layouting\n * @param {string} orient\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\n\nvar box = boxLayout;\n/**\n * VBox layouting\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\nvar vbox = zrUtil.curry(boxLayout, 'vertical');\n/**\n * HBox layouting\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\nvar hbox = zrUtil.curry(boxLayout, 'horizontal');\n/**\n * If x or x2 is not specified or 'center' 'left' 'right',\n * the width would be as long as possible.\n * If y or y2 is not specified or 'middle' 'top' 'bottom',\n * the height would be as long as possible.\n *\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.x]\n * @param {number|string} [positionInfo.y]\n * @param {number|string} [positionInfo.x2]\n * @param {number|string} [positionInfo.y2]\n * @param {Object} containerRect {width, height}\n * @param {string|number} margin\n * @return {Object} {width, height}\n */\n\nfunction getAvailableSize(positionInfo, containerRect, margin) {\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var x = parsePercent(positionInfo.x, containerWidth);\n  var y = parsePercent(positionInfo.y, containerHeight);\n  var x2 = parsePercent(positionInfo.x2, containerWidth);\n  var y2 = parsePercent(positionInfo.y2, containerHeight);\n  (isNaN(x) || isNaN(parseFloat(positionInfo.x))) && (x = 0);\n  (isNaN(x2) || isNaN(parseFloat(positionInfo.x2))) && (x2 = containerWidth);\n  (isNaN(y) || isNaN(parseFloat(positionInfo.y))) && (y = 0);\n  (isNaN(y2) || isNaN(parseFloat(positionInfo.y2))) && (y2 = containerHeight);\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  return {\n    width: Math.max(x2 - x - margin[1] - margin[3], 0),\n    height: Math.max(y2 - y - margin[0] - margin[2], 0)\n  };\n}\n/**\n * Parse position info.\n *\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.left]\n * @param {number|string} [positionInfo.top]\n * @param {number|string} [positionInfo.right]\n * @param {number|string} [positionInfo.bottom]\n * @param {number|string} [positionInfo.width]\n * @param {number|string} [positionInfo.height]\n * @param {number|string} [positionInfo.aspect] Aspect is width / height\n * @param {Object} containerRect\n * @param {string|number} [margin]\n *\n * @return {module:zrender/core/BoundingRect}\n */\n\n\nfunction getLayoutRect(positionInfo, containerRect, margin) {\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var left = parsePercent(positionInfo.left, containerWidth);\n  var top = parsePercent(positionInfo.top, containerHeight);\n  var right = parsePercent(positionInfo.right, containerWidth);\n  var bottom = parsePercent(positionInfo.bottom, containerHeight);\n  var width = parsePercent(positionInfo.width, containerWidth);\n  var height = parsePercent(positionInfo.height, containerHeight);\n  var verticalMargin = margin[2] + margin[0];\n  var horizontalMargin = margin[1] + margin[3];\n  var aspect = positionInfo.aspect; // If width is not specified, calculate width from left and right\n\n  if (isNaN(width)) {\n    width = containerWidth - right - horizontalMargin - left;\n  }\n\n  if (isNaN(height)) {\n    height = containerHeight - bottom - verticalMargin - top;\n  }\n\n  if (aspect != null) {\n    // If width and height are not given\n    // 1. Graph should not exceeds the container\n    // 2. Aspect must be keeped\n    // 3. Graph should take the space as more as possible\n    // FIXME\n    // Margin is not considered, because there is no case that both\n    // using margin and aspect so far.\n    if (isNaN(width) && isNaN(height)) {\n      if (aspect > containerWidth / containerHeight) {\n        width = containerWidth * 0.8;\n      } else {\n        height = containerHeight * 0.8;\n      }\n    } // Calculate width or height with given aspect\n\n\n    if (isNaN(width)) {\n      width = aspect * height;\n    }\n\n    if (isNaN(height)) {\n      height = width / aspect;\n    }\n  } // If left is not specified, calculate left from right and width\n\n\n  if (isNaN(left)) {\n    left = containerWidth - right - width - horizontalMargin;\n  }\n\n  if (isNaN(top)) {\n    top = containerHeight - bottom - height - verticalMargin;\n  } // Align left and top\n\n\n  switch (positionInfo.left || positionInfo.right) {\n    case 'center':\n      left = containerWidth / 2 - width / 2 - margin[3];\n      break;\n\n    case 'right':\n      left = containerWidth - width - horizontalMargin;\n      break;\n  }\n\n  switch (positionInfo.top || positionInfo.bottom) {\n    case 'middle':\n    case 'center':\n      top = containerHeight / 2 - height / 2 - margin[0];\n      break;\n\n    case 'bottom':\n      top = containerHeight - height - verticalMargin;\n      break;\n  } // If something is wrong and left, top, width, height are calculated as NaN\n\n\n  left = left || 0;\n  top = top || 0;\n\n  if (isNaN(width)) {\n    // Width may be NaN if only one value is given except width\n    width = containerWidth - horizontalMargin - left - (right || 0);\n  }\n\n  if (isNaN(height)) {\n    // Height may be NaN if only one value is given except height\n    height = containerHeight - verticalMargin - top - (bottom || 0);\n  }\n\n  var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\n  rect.margin = margin;\n  return rect;\n}\n/**\n * Position a zr element in viewport\n *  Group position is specified by either\n *  {left, top}, {right, bottom}\n *  If all properties exists, right and bottom will be igonred.\n *\n * Logic:\n *     1. Scale (against origin point in parent coord)\n *     2. Rotate (against origin point in parent coord)\n *     3. Traslate (with el.position by this method)\n * So this method only fixes the last step 'Traslate', which does not affect\n * scaling and rotating.\n *\n * If be called repeatly with the same input el, the same result will be gotten.\n *\n * @param {module:zrender/Element} el Should have `getBoundingRect` method.\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.left]\n * @param {number|string} [positionInfo.top]\n * @param {number|string} [positionInfo.right]\n * @param {number|string} [positionInfo.bottom]\n * @param {number|string} [positionInfo.width] Only for opt.boundingModel: 'raw'\n * @param {number|string} [positionInfo.height] Only for opt.boundingModel: 'raw'\n * @param {Object} containerRect\n * @param {string|number} margin\n * @param {Object} [opt]\n * @param {Array.<number>} [opt.hv=[1,1]] Only horizontal or only vertical.\n * @param {Array.<number>} [opt.boundingMode='all']\n *        Specify how to calculate boundingRect when locating.\n *        'all': Position the boundingRect that is transformed and uioned\n *               both itself and its descendants.\n *               This mode simplies confine the elements in the bounding\n *               of their container (e.g., using 'right: 0').\n *        'raw': Position the boundingRect that is not transformed and only itself.\n *               This mode is useful when you want a element can overflow its\n *               container. (Consider a rotated circle needs to be located in a corner.)\n *               In this mode positionInfo.width/height can only be number.\n */\n\n\nfunction positionElement(el, positionInfo, containerRect, margin, opt) {\n  var h = !opt || !opt.hv || opt.hv[0];\n  var v = !opt || !opt.hv || opt.hv[1];\n  var boundingMode = opt && opt.boundingMode || 'all';\n\n  if (!h && !v) {\n    return;\n  }\n\n  var rect;\n\n  if (boundingMode === 'raw') {\n    rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n  } else {\n    rect = el.getBoundingRect();\n\n    if (el.needLocalTransform()) {\n      var transform = el.getLocalTransform(); // Notice: raw rect may be inner object of el,\n      // which should not be modified.\n\n      rect = rect.clone();\n      rect.applyTransform(transform);\n    }\n  } // The real width and height can not be specified but calculated by the given el.\n\n\n  positionInfo = getLayoutRect(zrUtil.defaults({\n    width: rect.width,\n    height: rect.height\n  }, positionInfo), containerRect, margin); // Because 'tranlate' is the last step in transform\n  // (see zrender/core/Transformable#getLocalTransform),\n  // we can just only modify el.position to get final result.\n\n  var elPos = el.position;\n  var dx = h ? positionInfo.x - rect.x : 0;\n  var dy = v ? positionInfo.y - rect.y : 0;\n  el.attr('position', boundingMode === 'raw' ? [dx, dy] : [elPos[0] + dx, elPos[1] + dy]);\n}\n/**\n * @param {Object} option Contains some of the properties in HV_NAMES.\n * @param {number} hvIdx 0: horizontal; 1: vertical.\n */\n\n\nfunction sizeCalculable(option, hvIdx) {\n  return option[HV_NAMES[hvIdx][0]] != null || option[HV_NAMES[hvIdx][1]] != null && option[HV_NAMES[hvIdx][2]] != null;\n}\n/**\n * Consider Case:\n * When defulat option has {left: 0, width: 100}, and we set {right: 0}\n * through setOption or media query, using normal zrUtil.merge will cause\n * {right: 0} does not take effect.\n *\n * @example\n * ComponentModel.extend({\n *     init: function () {\n *         ...\n *         var inputPositionParams = layout.getLayoutParams(option);\n *         this.mergeOption(inputPositionParams);\n *     },\n *     mergeOption: function (newOption) {\n *         newOption && zrUtil.merge(thisOption, newOption, true);\n *         layout.mergeLayoutParam(thisOption, newOption);\n *     }\n * });\n *\n * @param {Object} targetOption\n * @param {Object} newOption\n * @param {Object|string} [opt]\n * @param {boolean|Array.<boolean>} [opt.ignoreSize=false] Used for the components\n *  that width (or height) should not be calculated by left and right (or top and bottom).\n */\n\n\nfunction mergeLayoutParam(targetOption, newOption, opt) {\n  !zrUtil.isObject(opt) && (opt = {});\n  var ignoreSize = opt.ignoreSize;\n  !zrUtil.isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n  var hResult = merge(HV_NAMES[0], 0);\n  var vResult = merge(HV_NAMES[1], 1);\n  copy(HV_NAMES[0], targetOption, hResult);\n  copy(HV_NAMES[1], targetOption, vResult);\n\n  function merge(names, hvIdx) {\n    var newParams = {};\n    var newValueCount = 0;\n    var merged = {};\n    var mergedValueCount = 0;\n    var enoughParamNumber = 2;\n    each(names, function (name) {\n      merged[name] = targetOption[name];\n    });\n    each(names, function (name) {\n      // Consider case: newOption.width is null, which is\n      // set by user for removing width setting.\n      hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n      hasValue(newParams, name) && newValueCount++;\n      hasValue(merged, name) && mergedValueCount++;\n    });\n\n    if (ignoreSize[hvIdx]) {\n      // Only one of left/right is premitted to exist.\n      if (hasValue(newOption, names[1])) {\n        merged[names[2]] = null;\n      } else if (hasValue(newOption, names[2])) {\n        merged[names[1]] = null;\n      }\n\n      return merged;\n    } // Case: newOption: {width: ..., right: ...},\n    // or targetOption: {right: ...} and newOption: {width: ...},\n    // There is no conflict when merged only has params count\n    // little than enoughParamNumber.\n\n\n    if (mergedValueCount === enoughParamNumber || !newValueCount) {\n      return merged;\n    } // Case: newOption: {width: ..., right: ...},\n    // Than we can make sure user only want those two, and ignore\n    // all origin params in targetOption.\n    else if (newValueCount >= enoughParamNumber) {\n        return newParams;\n      } else {\n        // Chose another param from targetOption by priority.\n        for (var i = 0; i < names.length; i++) {\n          var name = names[i];\n\n          if (!hasProp(newParams, name) && hasProp(targetOption, name)) {\n            newParams[name] = targetOption[name];\n            break;\n          }\n        }\n\n        return newParams;\n      }\n  }\n\n  function hasProp(obj, name) {\n    return obj.hasOwnProperty(name);\n  }\n\n  function hasValue(obj, name) {\n    return obj[name] != null && obj[name] !== 'auto';\n  }\n\n  function copy(names, target, source) {\n    each(names, function (name) {\n      target[name] = source[name];\n    });\n  }\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\n\n\nfunction getLayoutParams(source) {\n  return copyLayoutParams({}, source);\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\n\n\nfunction copyLayoutParams(target, source) {\n  source && target && each(LOCATION_PARAMS, function (name) {\n    source.hasOwnProperty(name) && (target[name] = source[name]);\n  });\n  return target;\n}\n\nexports.LOCATION_PARAMS = LOCATION_PARAMS;\nexports.HV_NAMES = HV_NAMES;\nexports.box = box;\nexports.vbox = vbox;\nexports.hbox = hbox;\nexports.getAvailableSize = getAvailableSize;\nexports.getLayoutRect = getLayoutRect;\nexports.positionElement = positionElement;\nexports.sizeCalculable = sizeCalculable;\nexports.mergeLayoutParam = mergeLayoutParam;\nexports.getLayoutParams = getLayoutParams;\nexports.copyLayoutParams = copyLayoutParams;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar isArray = zrUtil.isArray;\n/**\n * Make the name displayable. But we should\n * make sure it is not duplicated with user\n * specified name, so use '\\0';\n */\n\nvar DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\n/**\n * If value is not array, then translate it to array.\n * @param  {*} value\n * @return {Array} [value] or value\n */\n\nfunction normalizeToArray(value) {\n  return value instanceof Array ? value : value == null ? [] : [value];\n}\n/**\n * Sync default option between normal and emphasis like `position` and `show`\n * In case some one will write code like\n *     label: {\n *          show: false,\n *          position: 'outside',\n *          fontSize: 18\n *     },\n *     emphasis: {\n *          label: { show: true }\n *     }\n * @param {Object} opt\n * @param {string} key\n * @param {Array.<string>} subOpts\n */\n\n\nfunction defaultEmphasis(opt, key, subOpts) {\n  // Caution: performance sensitive.\n  if (opt) {\n    opt[key] = opt[key] || {};\n    opt.emphasis = opt.emphasis || {};\n    opt.emphasis[key] = opt.emphasis[key] || {}; // Default emphasis option from normal\n\n    for (var i = 0, len = subOpts.length; i < len; i++) {\n      var subOptName = subOpts[i];\n\n      if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\n        opt.emphasis[key][subOptName] = opt[key][subOptName];\n      }\n    }\n  }\n}\n\nvar TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding']; // modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n//     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n//     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n//     // FIXME: deprecated, check and remove it.\n//     'textStyle'\n// ]);\n\n/**\n * The method do not ensure performance.\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method retieves value from data.\n * @param {string|number|Date|Array|Object} dataItem\n * @return {number|string|Date|Array.<number|string|Date>}\n */\n\nfunction getDataItemValue(dataItem) {\n  return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\n}\n/**\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method determine if dataItem has extra option besides value\n * @param {string|number|Date|Array|Object} dataItem\n */\n\n\nfunction isDataItemOption(dataItem) {\n  return isObject(dataItem) && !(dataItem instanceof Array); // // markLine data can be array\n  // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n}\n/**\n * Mapping to exists for merge.\n *\n * @public\n * @param {Array.<Object>|Array.<module:echarts/model/Component>} exists\n * @param {Object|Array.<Object>} newCptOptions\n * @return {Array.<Object>} Result, like [{exist: ..., option: ...}, {}],\n *                          index of which is the same as exists.\n */\n\n\nfunction mappingToExists(exists, newCptOptions) {\n  // Mapping by the order by original option (but not order of\n  // new option) in merge mode. Because we should ensure\n  // some specified index (like xAxisIndex) is consistent with\n  // original option, which is easy to understand, espatially in\n  // media query. And in most case, merge option is used to\n  // update partial option but not be expected to change order.\n  newCptOptions = (newCptOptions || []).slice();\n  var result = zrUtil.map(exists || [], function (obj, index) {\n    return {\n      exist: obj\n    };\n  }); // Mapping by id or name if specified.\n\n  each(newCptOptions, function (cptOption, index) {\n    if (!isObject(cptOption)) {\n      return;\n    } // id has highest priority.\n\n\n    for (var i = 0; i < result.length; i++) {\n      if (!result[i].option // Consider name: two map to one.\n      && cptOption.id != null && result[i].exist.id === cptOption.id + '') {\n        result[i].option = cptOption;\n        newCptOptions[index] = null;\n        return;\n      }\n    }\n\n    for (var i = 0; i < result.length; i++) {\n      var exist = result[i].exist;\n\n      if (!result[i].option // Consider name: two map to one.\n      // Can not match when both ids exist but different.\n      && (exist.id == null || cptOption.id == null) && cptOption.name != null && !isIdInner(cptOption) && !isIdInner(exist) && exist.name === cptOption.name + '') {\n        result[i].option = cptOption;\n        newCptOptions[index] = null;\n        return;\n      }\n    }\n  }); // Otherwise mapping by index.\n\n  each(newCptOptions, function (cptOption, index) {\n    if (!isObject(cptOption)) {\n      return;\n    }\n\n    var i = 0;\n\n    for (; i < result.length; i++) {\n      var exist = result[i].exist;\n\n      if (!result[i].option // Existing model that already has id should be able to\n      // mapped to (because after mapping performed model may\n      // be assigned with a id, whish should not affect next\n      // mapping), except those has inner id.\n      && !isIdInner(exist) // Caution:\n      // Do not overwrite id. But name can be overwritten,\n      // because axis use name as 'show label text'.\n      // 'exist' always has id and name and we dont\n      // need to check it.\n      && cptOption.id == null) {\n        result[i].option = cptOption;\n        break;\n      }\n    }\n\n    if (i >= result.length) {\n      result.push({\n        option: cptOption\n      });\n    }\n  });\n  return result;\n}\n/**\n * Make id and name for mapping result (result of mappingToExists)\n * into `keyInfo` field.\n *\n * @public\n * @param {Array.<Object>} Result, like [{exist: ..., option: ...}, {}],\n *                          which order is the same as exists.\n * @return {Array.<Object>} The input.\n */\n\n\nfunction makeIdAndName(mapResult) {\n  // We use this id to hash component models and view instances\n  // in echarts. id can be specified by user, or auto generated.\n  // The id generation rule ensures new view instance are able\n  // to mapped to old instance when setOption are called in\n  // no-merge mode. So we generate model id by name and plus\n  // type in view id.\n  // name can be duplicated among components, which is convenient\n  // to specify multi components (like series) by one name.\n  // Ensure that each id is distinct.\n  var idMap = zrUtil.createHashMap();\n  each(mapResult, function (item, index) {\n    var existCpt = item.exist;\n    existCpt && idMap.set(existCpt.id, item);\n  });\n  each(mapResult, function (item, index) {\n    var opt = item.option;\n    zrUtil.assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n    opt && opt.id != null && idMap.set(opt.id, item);\n    !item.keyInfo && (item.keyInfo = {});\n  }); // Make name and id.\n\n  each(mapResult, function (item, index) {\n    var existCpt = item.exist;\n    var opt = item.option;\n    var keyInfo = item.keyInfo;\n\n    if (!isObject(opt)) {\n      return;\n    } // name can be overwitten. Consider case: axis.name = '20km'.\n    // But id generated by name will not be changed, which affect\n    // only in that case: setOption with 'not merge mode' and view\n    // instance will be recreated, which can be accepted.\n\n\n    keyInfo.name = opt.name != null ? opt.name + '' : existCpt ? existCpt.name // Avoid diffferent series has the same name,\n    // because name may be used like in color pallet.\n    : DUMMY_COMPONENT_NAME_PREFIX + index;\n\n    if (existCpt) {\n      keyInfo.id = existCpt.id;\n    } else if (opt.id != null) {\n      keyInfo.id = opt.id + '';\n    } else {\n      // Consider this situatoin:\n      //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n      //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n      // Series with the same name between optionA and optionB\n      // should be mapped.\n      var idNum = 0;\n\n      do {\n        keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n      } while (idMap.get(keyInfo.id));\n    }\n\n    idMap.set(keyInfo.id, item);\n  });\n}\n\nfunction isNameSpecified(componentModel) {\n  var name = componentModel.name; // Is specified when `indexOf` get -1 or > 0.\n\n  return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\n}\n/**\n * @public\n * @param {Object} cptOption\n * @return {boolean}\n */\n\n\nfunction isIdInner(cptOption) {\n  return isObject(cptOption) && cptOption.id && (cptOption.id + '').indexOf('\\0_ec_\\0') === 0;\n}\n/**\n * A helper for removing duplicate items between batchA and batchB,\n * and in themselves, and categorize by series.\n *\n * @param {Array.<Object>} batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @param {Array.<Object>} batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @return {Array.<Array.<Object>, Array.<Object>>} result: [resultBatchA, resultBatchB]\n */\n\n\nfunction compressBatches(batchA, batchB) {\n  var mapA = {};\n  var mapB = {};\n  makeMap(batchA || [], mapA);\n  makeMap(batchB || [], mapB, mapA);\n  return [mapToArray(mapA), mapToArray(mapB)];\n\n  function makeMap(sourceBatch, map, otherMap) {\n    for (var i = 0, len = sourceBatch.length; i < len; i++) {\n      var seriesId = sourceBatch[i].seriesId;\n      var dataIndices = normalizeToArray(sourceBatch[i].dataIndex);\n      var otherDataIndices = otherMap && otherMap[seriesId];\n\n      for (var j = 0, lenj = dataIndices.length; j < lenj; j++) {\n        var dataIndex = dataIndices[j];\n\n        if (otherDataIndices && otherDataIndices[dataIndex]) {\n          otherDataIndices[dataIndex] = null;\n        } else {\n          (map[seriesId] || (map[seriesId] = {}))[dataIndex] = 1;\n        }\n      }\n    }\n  }\n\n  function mapToArray(map, isData) {\n    var result = [];\n\n    for (var i in map) {\n      if (map.hasOwnProperty(i) && map[i] != null) {\n        if (isData) {\n          result.push(+i);\n        } else {\n          var dataIndices = mapToArray(map[i], true);\n          dataIndices.length && result.push({\n            seriesId: i,\n            dataIndex: dataIndices\n          });\n        }\n      }\n    }\n\n    return result;\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Object} payload Contains dataIndex (means rawIndex) / dataIndexInside / name\n *                         each of which can be Array or primary type.\n * @return {number|Array.<number>} dataIndex If not found, return undefined/null.\n */\n\n\nfunction queryDataIndex(data, payload) {\n  if (payload.dataIndexInside != null) {\n    return payload.dataIndexInside;\n  } else if (payload.dataIndex != null) {\n    return zrUtil.isArray(payload.dataIndex) ? zrUtil.map(payload.dataIndex, function (value) {\n      return data.indexOfRawIndex(value);\n    }) : data.indexOfRawIndex(payload.dataIndex);\n  } else if (payload.name != null) {\n    return zrUtil.isArray(payload.name) ? zrUtil.map(payload.name, function (value) {\n      return data.indexOfName(value);\n    }) : data.indexOfName(payload.name);\n  }\n}\n/**\n * Enable property storage to any host object.\n * Notice: Serialization is not supported.\n *\n * For example:\n * var inner = zrUitl.makeInner();\n *\n * function some1(hostObj) {\n *      inner(hostObj).someProperty = 1212;\n *      ...\n * }\n * function some2() {\n *      var fields = inner(this);\n *      fields.someProperty1 = 1212;\n *      fields.someProperty2 = 'xx';\n *      ...\n * }\n *\n * @return {Function}\n */\n\n\nfunction makeInner() {\n  // Consider different scope by es module import.\n  var key = '__\\0ec_inner_' + innerUniqueIndex++ + '_' + Math.random().toFixed(5);\n  return function (hostObj) {\n    return hostObj[key] || (hostObj[key] = {});\n  };\n}\n\nvar innerUniqueIndex = 0;\n/**\n * @param {module:echarts/model/Global} ecModel\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex, seriesId, seriesName,\n *            geoIndex, geoId, geoName,\n *            bmapIndex, bmapId, bmapName,\n *            xAxisIndex, xAxisId, xAxisName,\n *            yAxisIndex, yAxisId, yAxisName,\n *            gridIndex, gridId, gridName,\n *            ... (can be extended)\n *        }\n *        Each properties can be number|string|Array.<number>|Array.<string>\n *        For example, a finder could be\n *        {\n *            seriesIndex: 3,\n *            geoId: ['aa', 'cc'],\n *            gridName: ['xx', 'rr']\n *        }\n *        xxxIndex can be set as 'all' (means all xxx) or 'none' (means not specify)\n *        If nothing or null/undefined specified, return nothing.\n * @param {Object} [opt]\n * @param {string} [opt.defaultMainType]\n * @param {Array.<string>} [opt.includeMainTypes]\n * @return {Object} result like:\n *        {\n *            seriesModels: [seriesModel1, seriesModel2],\n *            seriesModel: seriesModel1, // The first model\n *            geoModels: [geoModel1, geoModel2],\n *            geoModel: geoModel1, // The first model\n *            ...\n *        }\n */\n\nfunction parseFinder(ecModel, finder, opt) {\n  if (zrUtil.isString(finder)) {\n    var obj = {};\n    obj[finder + 'Index'] = 0;\n    finder = obj;\n  }\n\n  var defaultMainType = opt && opt.defaultMainType;\n\n  if (defaultMainType && !has(finder, defaultMainType + 'Index') && !has(finder, defaultMainType + 'Id') && !has(finder, defaultMainType + 'Name')) {\n    finder[defaultMainType + 'Index'] = 0;\n  }\n\n  var result = {};\n  each(finder, function (value, key) {\n    var value = finder[key]; // Exclude 'dataIndex' and other illgal keys.\n\n    if (key === 'dataIndex' || key === 'dataIndexInside') {\n      result[key] = value;\n      return;\n    }\n\n    var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n    var mainType = parsedKey[1];\n    var queryType = (parsedKey[2] || '').toLowerCase();\n\n    if (!mainType || !queryType || value == null || queryType === 'index' && value === 'none' || opt && opt.includeMainTypes && zrUtil.indexOf(opt.includeMainTypes, mainType) < 0) {\n      return;\n    }\n\n    var queryParam = {\n      mainType: mainType\n    };\n\n    if (queryType !== 'index' || value !== 'all') {\n      queryParam[queryType] = value;\n    }\n\n    var models = ecModel.queryComponents(queryParam);\n    result[mainType + 'Models'] = models;\n    result[mainType + 'Model'] = models[0];\n  });\n  return result;\n}\n\nfunction has(obj, prop) {\n  return obj && obj.hasOwnProperty(prop);\n}\n\nfunction setAttribute(dom, key, value) {\n  dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\n}\n\nfunction getAttribute(dom, key) {\n  return dom.getAttribute ? dom.getAttribute(key) : dom[key];\n}\n\nfunction getTooltipRenderMode(renderModeOption) {\n  if (renderModeOption === 'auto') {\n    // Using html when `document` exists, use richText otherwise\n    return env.domSupported ? 'html' : 'richText';\n  } else {\n    return renderModeOption || 'html';\n  }\n}\n/**\n * Group a list by key.\n *\n * @param {Array} array\n * @param {Function} getKey\n *        param {*} Array item\n *        return {string} key\n * @return {Object} Result\n *        {Array}: keys,\n *        {module:zrender/core/util/HashMap} buckets: {key -> Array}\n */\n\n\nfunction groupData(array, getKey) {\n  var buckets = zrUtil.createHashMap();\n  var keys = [];\n  zrUtil.each(array, function (item) {\n    var key = getKey(item);\n    (buckets.get(key) || (keys.push(key), buckets.set(key, []))).push(item);\n  });\n  return {\n    keys: keys,\n    buckets: buckets\n  };\n}\n\nexports.normalizeToArray = normalizeToArray;\nexports.defaultEmphasis = defaultEmphasis;\nexports.TEXT_STYLE_OPTIONS = TEXT_STYLE_OPTIONS;\nexports.getDataItemValue = getDataItemValue;\nexports.isDataItemOption = isDataItemOption;\nexports.mappingToExists = mappingToExists;\nexports.makeIdAndName = makeIdAndName;\nexports.isNameSpecified = isNameSpecified;\nexports.isIdInner = isIdInner;\nexports.compressBatches = compressBatches;\nexports.queryDataIndex = queryDataIndex;\nexports.makeInner = makeInner;\nexports.parseFinder = parseFinder;\nexports.setAttribute = setAttribute;\nexports.getAttribute = getAttribute;\nexports.getTooltipRenderMode = getTooltipRenderMode;\nexports.groupData = groupData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _format = require(\"../util/format\");\n\nvar formatTime = _format.formatTime;\nvar encodeHTML = _format.encodeHTML;\nvar addCommas = _format.addCommas;\nvar getTooltipMarker = _format.getTooltipMarker;\n\nvar modelUtil = require(\"../util/model\");\n\nvar ComponentModel = require(\"./Component\");\n\nvar colorPaletteMixin = require(\"./mixin/colorPalette\");\n\nvar dataFormatMixin = require(\"../model/mixin/dataFormat\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n\nvar _task = require(\"../stream/task\");\n\nvar createTask = _task.createTask;\n\nvar _sourceHelper = require(\"../data/helper/sourceHelper\");\n\nvar prepareSource = _sourceHelper.prepareSource;\nvar getSource = _sourceHelper.getSource;\n\nvar _dataProvider = require(\"../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = modelUtil.makeInner();\nvar SeriesModel = ComponentModel.extend({\n  type: 'series.__base__',\n\n  /**\n   * @readOnly\n   */\n  seriesIndex: 0,\n  // coodinateSystem will be injected in the echarts/CoordinateSystem\n  coordinateSystem: null,\n\n  /**\n   * @type {Object}\n   * @protected\n   */\n  defaultOption: null,\n\n  /**\n   * legend visual provider to the legend component\n   * @type {Object}\n   */\n  // PENDING\n  legendVisualProvider: null,\n\n  /**\n   * Access path of color for visual\n   */\n  visualColorAccessPath: 'itemStyle.color',\n\n  /**\n   * Access path of borderColor for visual\n   */\n  visualBorderColorAccessPath: 'itemStyle.borderColor',\n\n  /**\n   * Support merge layout params.\n   * Only support 'box' now (left/right/top/bottom/width/height).\n   * @type {string|Object} Object can be {ignoreSize: true}\n   * @readOnly\n   */\n  layoutMode: null,\n  init: function (option, parentModel, ecModel, extraOpt) {\n    /**\n     * @type {number}\n     * @readOnly\n     */\n    this.seriesIndex = this.componentIndex;\n    this.dataTask = createTask({\n      count: dataTaskCount,\n      reset: dataTaskReset\n    });\n    this.dataTask.context = {\n      model: this\n    };\n    this.mergeDefaultAndTheme(option, ecModel);\n    prepareSource(this);\n    var data = this.getInitialData(option, ecModel);\n    wrapData(data, this);\n    this.dataTask.context.data = data;\n\n    /**\n     * @type {module:echarts/data/List|module:echarts/data/Tree|module:echarts/data/Graph}\n     * @private\n     */\n    inner(this).dataBeforeProcessed = data; // If we reverse the order (make data firstly, and then make\n    // dataBeforeProcessed by cloneShallow), cloneShallow will\n    // cause data.graph.data !== data when using\n    // module:echarts/data/Graph or module:echarts/data/Tree.\n    // See module:echarts/data/helper/linkList\n    // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\n    // init or merge stage, because the data can be restored. So we do not `restoreData`\n    // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\n    // Call `seriesModel.getRawData()` instead.\n    // this.restoreData();\n\n    autoSeriesName(this);\n  },\n\n  /**\n   * Util for merge default and theme to option\n   * @param  {Object} option\n   * @param  {module:echarts/model/Global} ecModel\n   */\n  mergeDefaultAndTheme: function (option, ecModel) {\n    var layoutMode = this.layoutMode;\n    var inputPositionParams = layoutMode ? getLayoutParams(option) : {}; // Backward compat: using subType on theme.\n    // But if name duplicate between series subType\n    // (for example: parallel) add component mainType,\n    // add suffix 'Series'.\n\n    var themeSubType = this.subType;\n\n    if (ComponentModel.hasClass(themeSubType)) {\n      themeSubType += 'Series';\n    }\n\n    zrUtil.merge(option, ecModel.getTheme().get(this.subType));\n    zrUtil.merge(option, this.getDefaultOption()); // Default label emphasis `show`\n\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n    this.fillDataTextStyle(option.data);\n\n    if (layoutMode) {\n      mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  },\n  mergeOption: function (newSeriesOption, ecModel) {\n    // this.settingTask.dirty();\n    newSeriesOption = zrUtil.merge(this.option, newSeriesOption, true);\n    this.fillDataTextStyle(newSeriesOption.data);\n    var layoutMode = this.layoutMode;\n\n    if (layoutMode) {\n      mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n    }\n\n    prepareSource(this);\n    var data = this.getInitialData(newSeriesOption, ecModel);\n    wrapData(data, this);\n    this.dataTask.dirty();\n    this.dataTask.context.data = data;\n    inner(this).dataBeforeProcessed = data;\n    autoSeriesName(this);\n  },\n  fillDataTextStyle: function (data) {\n    // Default data label emphasis `show`\n    // FIXME Tree structure data ?\n    // FIXME Performance ?\n    if (data && !zrUtil.isTypedArray(data)) {\n      var props = ['show'];\n\n      for (var i = 0; i < data.length; i++) {\n        if (data[i] && data[i].label) {\n          modelUtil.defaultEmphasis(data[i], 'label', props);\n        }\n      }\n    }\n  },\n\n  /**\n   * Init a data structure from data related option in series\n   * Must be overwritten\n   */\n  getInitialData: function () {},\n\n  /**\n   * Append data to list\n   * @param {Object} params\n   * @param {Array|TypedArray} params.data\n   */\n  appendData: function (params) {\n    // FIXME ???\n    // (1) If data from dataset, forbidden append.\n    // (2) support append data of dataset.\n    var data = this.getRawData();\n    data.appendData(params.data);\n  },\n\n  /**\n   * Consider some method like `filter`, `map` need make new data,\n   * We should make sure that `seriesModel.getData()` get correct\n   * data in the stream procedure. So we fetch data from upstream\n   * each time `task.perform` called.\n   * @param {string} [dataType]\n   * @return {module:echarts/data/List}\n   */\n  getData: function (dataType) {\n    var task = getCurrentTask(this);\n\n    if (task) {\n      var data = task.context.data;\n      return dataType == null ? data : data.getLinkedData(dataType);\n    } else {\n      // When series is not alive (that may happen when click toolbox\n      // restore or setOption with not merge mode), series data may\n      // be still need to judge animation or something when graphic\n      // elements want to know whether fade out.\n      return inner(this).data;\n    }\n  },\n\n  /**\n   * @param {module:echarts/data/List} data\n   */\n  setData: function (data) {\n    var task = getCurrentTask(this);\n\n    if (task) {\n      var context = task.context; // Consider case: filter, data sample.\n\n      if (context.data !== data && task.modifyOutputEnd) {\n        task.setOutputEnd(data.count());\n      }\n\n      context.outputData = data; // Caution: setData should update context.data,\n      // Because getData may be called multiply in a\n      // single stage and expect to get the data just\n      // set. (For example, AxisProxy, x y both call\n      // getData and setDate sequentially).\n      // So the context.data should be fetched from\n      // upstream each time when a stage starts to be\n      // performed.\n\n      if (task !== this.dataTask) {\n        context.data = data;\n      }\n    }\n\n    inner(this).data = data;\n  },\n\n  /**\n   * @see {module:echarts/data/helper/sourceHelper#getSource}\n   * @return {module:echarts/data/Source} source\n   */\n  getSource: function () {\n    return getSource(this);\n  },\n\n  /**\n   * Get data before processed\n   * @return {module:echarts/data/List}\n   */\n  getRawData: function () {\n    return inner(this).dataBeforeProcessed;\n  },\n\n  /**\n   * Get base axis if has coordinate system and has axis.\n   * By default use coordSys.getBaseAxis();\n   * Can be overrided for some chart.\n   * @return {type} description\n   */\n  getBaseAxis: function () {\n    var coordSys = this.coordinateSystem;\n    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n  },\n  // FIXME\n\n  /**\n   * Default tooltip formatter\n   *\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {number} [dataType]\n   * @param {string} [renderMode='html'] valid values: 'html' and 'richText'.\n   *                                     'html' is used for rendering tooltip in extra DOM form, and the result\n   *                                     string is used as DOM HTML content.\n   *                                     'richText' is used for rendering tooltip in rich text form, for those where\n   *                                     DOM operation is not supported.\n   * @return {Object} formatted tooltip with `html` and `markers`\n   */\n  formatTooltip: function (dataIndex, multipleSeries, dataType, renderMode) {\n    var series = this;\n    renderMode = renderMode || 'html';\n    var newLine = renderMode === 'html' ? '<br/>' : '\\n';\n    var isRichText = renderMode === 'richText';\n    var markers = {};\n    var markerId = 0;\n\n    function formatArrayValue(value) {\n      // ??? TODO refactor these logic.\n      // check: category-no-encode-has-axis-data in dataset.html\n      var vertially = zrUtil.reduce(value, function (vertially, val, idx) {\n        var dimItem = data.getDimensionInfo(idx);\n        return vertially |= dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n      }, 0);\n      var result = [];\n      tooltipDims.length ? zrUtil.each(tooltipDims, function (dim) {\n        setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n      }) // By default, all dims is used on tooltip.\n      : zrUtil.each(value, setEachItem);\n\n      function setEachItem(val, dim) {\n        var dimInfo = data.getDimensionInfo(dim); // If `dimInfo.tooltip` is not set, show tooltip.\n\n        if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n          return;\n        }\n\n        var dimType = dimInfo.type;\n        var markName = 'sub' + series.seriesIndex + 'at' + markerId;\n        var dimHead = getTooltipMarker({\n          color: color,\n          type: 'subItem',\n          renderMode: renderMode,\n          markerId: markName\n        });\n        var dimHeadStr = typeof dimHead === 'string' ? dimHead : dimHead.content;\n        var valStr = (vertially ? dimHeadStr + encodeHTML(dimInfo.displayName || '-') + ': ' : '') + // FIXME should not format time for raw data?\n        encodeHTML(dimType === 'ordinal' ? val + '' : dimType === 'time' ? multipleSeries ? '' : formatTime('yyyy/MM/dd hh:mm:ss', val) : addCommas(val));\n        valStr && result.push(valStr);\n\n        if (isRichText) {\n          markers[markName] = color;\n          ++markerId;\n        }\n      }\n\n      var newLine = vertially ? isRichText ? '\\n' : '<br/>' : '';\n      var content = newLine + result.join(newLine || ', ');\n      return {\n        renderMode: renderMode,\n        content: content,\n        style: markers\n      };\n    }\n\n    function formatSingleValue(val) {\n      // return encodeHTML(addCommas(val));\n      return {\n        renderMode: renderMode,\n        content: encodeHTML(addCommas(val)),\n        style: markers\n      };\n    }\n\n    var data = this.getData();\n    var tooltipDims = data.mapDimension('defaultedTooltip', true);\n    var tooltipDimLen = tooltipDims.length;\n    var value = this.getRawValue(dataIndex);\n    var isValueArr = zrUtil.isArray(value);\n    var color = data.getItemVisual(dataIndex, 'color');\n\n    if (zrUtil.isObject(color) && color.colorStops) {\n      color = (color.colorStops[0] || {}).color;\n    }\n\n    color = color || 'transparent'; // Complicated rule for pretty tooltip.\n\n    var formattedValue = tooltipDimLen > 1 || isValueArr && !tooltipDimLen ? formatArrayValue(value) : tooltipDimLen ? formatSingleValue(retrieveRawValue(data, dataIndex, tooltipDims[0])) : formatSingleValue(isValueArr ? value[0] : value);\n    var content = formattedValue.content;\n    var markName = series.seriesIndex + 'at' + markerId;\n    var colorEl = getTooltipMarker({\n      color: color,\n      type: 'item',\n      renderMode: renderMode,\n      markerId: markName\n    });\n    markers[markName] = color;\n    ++markerId;\n    var name = data.getName(dataIndex);\n    var seriesName = this.name;\n\n    if (!modelUtil.isNameSpecified(this)) {\n      seriesName = '';\n    }\n\n    seriesName = seriesName ? encodeHTML(seriesName) + (!multipleSeries ? newLine : ': ') : '';\n    var colorStr = typeof colorEl === 'string' ? colorEl : colorEl.content;\n    var html = !multipleSeries ? seriesName + colorStr + (name ? encodeHTML(name) + ': ' + content : content) : colorStr + seriesName + content;\n    return {\n      html: html,\n      markers: markers\n    };\n  },\n\n  /**\n   * @return {boolean}\n   */\n  isAnimationEnabled: function () {\n    if (env.node) {\n      return false;\n    }\n\n    var animationEnabled = this.getShallow('animation');\n\n    if (animationEnabled) {\n      if (this.getData().count() > this.getShallow('animationThreshold')) {\n        animationEnabled = false;\n      }\n    }\n\n    return animationEnabled;\n  },\n  restoreData: function () {\n    this.dataTask.dirty();\n  },\n  getColorFromPalette: function (name, scope, requestColorNum) {\n    var ecModel = this.ecModel; // PENDING\n\n    var color = colorPaletteMixin.getColorFromPalette.call(this, name, scope, requestColorNum);\n\n    if (!color) {\n      color = ecModel.getColorFromPalette(name, scope, requestColorNum);\n    }\n\n    return color;\n  },\n\n  /**\n   * Use `data.mapDimension(coordDim, true)` instead.\n   * @deprecated\n   */\n  coordDimToDataDim: function (coordDim) {\n    return this.getRawData().mapDimension(coordDim, true);\n  },\n\n  /**\n   * Get progressive rendering count each step\n   * @return {number}\n   */\n  getProgressive: function () {\n    return this.get('progressive');\n  },\n\n  /**\n   * Get progressive rendering count each step\n   * @return {number}\n   */\n  getProgressiveThreshold: function () {\n    return this.get('progressiveThreshold');\n  },\n\n  /**\n   * Get data indices for show tooltip content. See tooltip.\n   * @abstract\n   * @param {Array.<string>|string} dim\n   * @param {Array.<number>} value\n   * @param {module:echarts/coord/single/SingleAxis} baseAxis\n   * @return {Object} {dataIndices, nestestValue}.\n   */\n  getAxisTooltipData: null,\n\n  /**\n   * See tooltip.\n   * @abstract\n   * @param {number} dataIndex\n   * @return {Array.<number>} Point of tooltip. null/undefined can be returned.\n   */\n  getTooltipPosition: null,\n\n  /**\n   * @see {module:echarts/stream/Scheduler}\n   */\n  pipeTask: null,\n\n  /**\n   * Convinient for override in extended class.\n   * @protected\n   * @type {Function}\n   */\n  preventIncremental: null,\n\n  /**\n   * @public\n   * @readOnly\n   * @type {Object}\n   */\n  pipelineContext: null\n});\nzrUtil.mixin(SeriesModel, dataFormatMixin);\nzrUtil.mixin(SeriesModel, colorPaletteMixin);\n/**\n * MUST be called after `prepareSource` called\n * Here we need to make auto series, especially for auto legend. But we\n * do not modify series.name in option to avoid side effects.\n */\n\nfunction autoSeriesName(seriesModel) {\n  // User specified name has higher priority, otherwise it may cause\n  // series can not be queried unexpectedly.\n  var name = seriesModel.name;\n\n  if (!modelUtil.isNameSpecified(seriesModel)) {\n    seriesModel.name = getSeriesAutoName(seriesModel) || name;\n  }\n}\n\nfunction getSeriesAutoName(seriesModel) {\n  var data = seriesModel.getRawData();\n  var dataDims = data.mapDimension('seriesName', true);\n  var nameArr = [];\n  zrUtil.each(dataDims, function (dataDim) {\n    var dimInfo = data.getDimensionInfo(dataDim);\n    dimInfo.displayName && nameArr.push(dimInfo.displayName);\n  });\n  return nameArr.join(' ');\n}\n\nfunction dataTaskCount(context) {\n  return context.model.getRawData().count();\n}\n\nfunction dataTaskReset(context) {\n  var seriesModel = context.model;\n  seriesModel.setData(seriesModel.getRawData().cloneShallow());\n  return dataTaskProgress;\n}\n\nfunction dataTaskProgress(param, context) {\n  // Avoid repead cloneShallow when data just created in reset.\n  if (context.outputData && param.end > context.outputData.count()) {\n    context.model.getRawData().cloneShallow(context.outputData);\n  }\n} // TODO refactor\n\n\nfunction wrapData(data, seriesModel) {\n  zrUtil.each(data.CHANGABLE_METHODS, function (methodName) {\n    data.wrapMethod(methodName, zrUtil.curry(onDataSelfChange, seriesModel));\n  });\n}\n\nfunction onDataSelfChange(seriesModel) {\n  var task = getCurrentTask(seriesModel);\n\n  if (task) {\n    // Consider case: filter, selectRange\n    task.setOutputEnd(this.count());\n  }\n}\n\nfunction getCurrentTask(seriesModel) {\n  var scheduler = (seriesModel.ecModel || {}).scheduler;\n  var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\n\n  if (pipeline) {\n    // When pipline finished, the currrentTask keep the last\n    // task (renderTask).\n    var task = pipeline.currentTask;\n\n    if (task) {\n      var agentStubMap = task.agentStubMap;\n\n      if (agentStubMap) {\n        task = agentStubMap.get(seriesModel.uid);\n      }\n    }\n\n    return task;\n  }\n}\n\nvar _default = SeriesModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar numberUtil = require(\"./number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Text from 'zrender/src/graphic/Text';\n\n/**\n * add commas after every three numbers\n * @param {string|number} x\n * @return {string}\n */\nfunction addCommas(x) {\n  if (isNaN(x)) {\n    return '-';\n  }\n\n  x = (x + '').split('.');\n  return x[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (x.length > 1 ? '.' + x[1] : '');\n}\n/**\n * @param {string} str\n * @param {boolean} [upperCaseFirst=false]\n * @return {string} str\n */\n\n\nfunction toCamelCase(str, upperCaseFirst) {\n  str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n    return group1.toUpperCase();\n  });\n\n  if (upperCaseFirst && str) {\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  return str;\n}\n\nvar normalizeCssArray = zrUtil.normalizeCssArray;\nvar replaceReg = /([&<>\"'])/g;\nvar replaceMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&#39;'\n};\n\nfunction encodeHTML(source) {\n  return source == null ? '' : (source + '').replace(replaceReg, function (str, c) {\n    return replaceMap[c];\n  });\n}\n\nvar TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\n\nvar wrapVar = function (varName, seriesIdx) {\n  return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n};\n/**\n * Template formatter\n * @param {string} tpl\n * @param {Array.<Object>|Object} paramsList\n * @param {boolean} [encode=false]\n * @return {string}\n */\n\n\nfunction formatTpl(tpl, paramsList, encode) {\n  if (!zrUtil.isArray(paramsList)) {\n    paramsList = [paramsList];\n  }\n\n  var seriesLen = paramsList.length;\n\n  if (!seriesLen) {\n    return '';\n  }\n\n  var $vars = paramsList[0].$vars || [];\n\n  for (var i = 0; i < $vars.length; i++) {\n    var alias = TPL_VAR_ALIAS[i];\n    tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\n  }\n\n  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n    for (var k = 0; k < $vars.length; k++) {\n      var val = paramsList[seriesIdx][$vars[k]];\n      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n    }\n  }\n\n  return tpl;\n}\n/**\n * simple Template formatter\n *\n * @param {string} tpl\n * @param {Object} param\n * @param {boolean} [encode=false]\n * @return {string}\n */\n\n\nfunction formatTplSimple(tpl, param, encode) {\n  zrUtil.each(param, function (value, key) {\n    tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\n  });\n  return tpl;\n}\n/**\n * @param {Object|string} [opt] If string, means color.\n * @param {string} [opt.color]\n * @param {string} [opt.extraCssText]\n * @param {string} [opt.type='item'] 'item' or 'subItem'\n * @param {string} [opt.renderMode='html'] render mode of tooltip, 'html' or 'richText'\n * @param {string} [opt.markerId='X'] id name for marker. If only one marker is in a rich text, this can be omitted.\n * @return {string}\n */\n\n\nfunction getTooltipMarker(opt, extraCssText) {\n  opt = zrUtil.isString(opt) ? {\n    color: opt,\n    extraCssText: extraCssText\n  } : opt || {};\n  var color = opt.color;\n  var type = opt.type;\n  var extraCssText = opt.extraCssText;\n  var renderMode = opt.renderMode || 'html';\n  var markerId = opt.markerId || 'X';\n\n  if (!color) {\n    return '';\n  }\n\n  if (renderMode === 'html') {\n    return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:5px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\n  } else {\n    // Space for rich element marker\n    return {\n      renderMode: renderMode,\n      content: '{marker' + markerId + '|}  ',\n      style: {\n        color: color\n      }\n    };\n  }\n}\n\nfunction pad(str, len) {\n  str += '';\n  return '0000'.substr(0, len - str.length) + str;\n}\n/**\n * ISO Date format\n * @param {string} tpl\n * @param {number} value\n * @param {boolean} [isUTC=false] Default in local time.\n *           see `module:echarts/scale/Time`\n *           and `module:echarts/util/number#parseDate`.\n * @inner\n */\n\n\nfunction formatTime(tpl, value, isUTC) {\n  if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n    tpl = 'MM-dd\\nyyyy';\n  }\n\n  var date = numberUtil.parseDate(value);\n  var utc = isUTC ? 'UTC' : '';\n  var y = date['get' + utc + 'FullYear']();\n  var M = date['get' + utc + 'Month']() + 1;\n  var d = date['get' + utc + 'Date']();\n  var h = date['get' + utc + 'Hours']();\n  var m = date['get' + utc + 'Minutes']();\n  var s = date['get' + utc + 'Seconds']();\n  var S = date['get' + utc + 'Milliseconds']();\n  tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', y % 100).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\n  return tpl;\n}\n/**\n * Capital first\n * @param {string} str\n * @return {string}\n */\n\n\nfunction capitalFirst(str) {\n  return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n}\n\nvar truncateText = textContain.truncateText;\n/**\n * @public\n * @param {Object} opt\n * @param {string} opt.text\n * @param {string} opt.font\n * @param {string} [opt.textAlign='left']\n * @param {string} [opt.textVerticalAlign='top']\n * @param {Array.<number>} [opt.textPadding]\n * @param {number} [opt.textLineHeight]\n * @param {Object} [opt.rich]\n * @param {Object} [opt.truncate]\n * @return {Object} {x, y, width, height, lineHeight}\n */\n\nfunction getTextBoundingRect(opt) {\n  return textContain.getBoundingRect(opt.text, opt.font, opt.textAlign, opt.textVerticalAlign, opt.textPadding, opt.textLineHeight, opt.rich, opt.truncate);\n}\n/**\n * @deprecated\n * the `textLineHeight` was added later.\n * For backward compatiblility, put it as the last parameter.\n * But deprecated this interface. Please use `getTextBoundingRect` instead.\n */\n\n\nfunction getTextRect(text, font, textAlign, textVerticalAlign, textPadding, rich, truncate, textLineHeight) {\n  return textContain.getBoundingRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate);\n}\n/**\n * open new tab\n * @param {string} link url\n * @param {string} target blank or self\n */\n\n\nfunction windowOpen(link, target) {\n  if (target === '_blank' || target === 'blank') {\n    var blank = window.open();\n    blank.opener = null;\n    blank.location = link;\n  } else {\n    window.open(link, target);\n  }\n}\n\nexports.addCommas = addCommas;\nexports.toCamelCase = toCamelCase;\nexports.normalizeCssArray = normalizeCssArray;\nexports.encodeHTML = encodeHTML;\nexports.formatTpl = formatTpl;\nexports.formatTplSimple = formatTplSimple;\nexports.getTooltipMarker = getTooltipMarker;\nexports.formatTime = formatTime;\nexports.capitalFirst = capitalFirst;\nexports.truncateText = truncateText;\nexports.getTextBoundingRect = getTextBoundingRect;\nexports.getTextRect = getTextRect;\nexports.windowOpen = windowOpen;","var vec2 = require(\"./vector\");\n\nvar matrix = require(\"./matrix\");\n\n/**\n * @module echarts/core/BoundingRect\n */\nvar v2ApplyTransform = vec2.applyTransform;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n/**\n * @alias module:echarts/core/BoundingRect\n */\n\nfunction BoundingRect(x, y, width, height) {\n  if (width < 0) {\n    x = x + width;\n    width = -width;\n  }\n\n  if (height < 0) {\n    y = y + height;\n    height = -height;\n  }\n  /**\n   * @type {number}\n   */\n\n\n  this.x = x;\n  /**\n   * @type {number}\n   */\n\n  this.y = y;\n  /**\n   * @type {number}\n   */\n\n  this.width = width;\n  /**\n   * @type {number}\n   */\n\n  this.height = height;\n}\n\nBoundingRect.prototype = {\n  constructor: BoundingRect,\n\n  /**\n   * @param {module:echarts/core/BoundingRect} other\n   */\n  union: function (other) {\n    var x = mathMin(other.x, this.x);\n    var y = mathMin(other.y, this.y);\n    this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n    this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n    this.x = x;\n    this.y = y;\n  },\n\n  /**\n   * @param {Array.<number>} m\n   * @methods\n   */\n  applyTransform: function () {\n    var lt = [];\n    var rb = [];\n    var lb = [];\n    var rt = [];\n    return function (m) {\n      // In case usage like this\n      // el.getBoundingRect().applyTransform(el.transform)\n      // And element has no transform\n      if (!m) {\n        return;\n      }\n\n      lt[0] = lb[0] = this.x;\n      lt[1] = rt[1] = this.y;\n      rb[0] = rt[0] = this.x + this.width;\n      rb[1] = lb[1] = this.y + this.height;\n      v2ApplyTransform(lt, lt, m);\n      v2ApplyTransform(rb, rb, m);\n      v2ApplyTransform(lb, lb, m);\n      v2ApplyTransform(rt, rt, m);\n      this.x = mathMin(lt[0], rb[0], lb[0], rt[0]);\n      this.y = mathMin(lt[1], rb[1], lb[1], rt[1]);\n      var maxX = mathMax(lt[0], rb[0], lb[0], rt[0]);\n      var maxY = mathMax(lt[1], rb[1], lb[1], rt[1]);\n      this.width = maxX - this.x;\n      this.height = maxY - this.y;\n    };\n  }(),\n\n  /**\n   * Calculate matrix of transforming from self to target rect\n   * @param  {module:zrender/core/BoundingRect} b\n   * @return {Array.<number>}\n   */\n  calculateTransform: function (b) {\n    var a = this;\n    var sx = b.width / a.width;\n    var sy = b.height / a.height;\n    var m = matrix.create(); // \n\n    matrix.translate(m, m, [-a.x, -a.y]);\n    matrix.scale(m, m, [sx, sy]);\n    matrix.translate(m, m, [b.x, b.y]);\n    return m;\n  },\n\n  /**\n   * @param {(module:echarts/core/BoundingRect|Object)} b\n   * @return {boolean}\n   */\n  intersect: function (b) {\n    if (!b) {\n      return false;\n    }\n\n    if (!(b instanceof BoundingRect)) {\n      // Normalize negative width/height.\n      b = BoundingRect.create(b);\n    }\n\n    var a = this;\n    var ax0 = a.x;\n    var ax1 = a.x + a.width;\n    var ay0 = a.y;\n    var ay1 = a.y + a.height;\n    var bx0 = b.x;\n    var bx1 = b.x + b.width;\n    var by0 = b.y;\n    var by1 = b.y + b.height;\n    return !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n  },\n  contain: function (x, y) {\n    var rect = this;\n    return x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height;\n  },\n\n  /**\n   * @return {module:echarts/core/BoundingRect}\n   */\n  clone: function () {\n    return new BoundingRect(this.x, this.y, this.width, this.height);\n  },\n\n  /**\n   * Copy from another rect\n   */\n  copy: function (other) {\n    this.x = other.x;\n    this.y = other.y;\n    this.width = other.width;\n    this.height = other.height;\n  },\n  plain: function () {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height\n    };\n  }\n};\n/**\n * @param {Object|module:zrender/core/BoundingRect} rect\n * @param {number} rect.x\n * @param {number} rect.y\n * @param {number} rect.width\n * @param {number} rect.height\n * @return {module:zrender/core/BoundingRect}\n */\n\nBoundingRect.create = function (rect) {\n  return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n};\n\nvar _default = BoundingRect;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar _clazz = require(\"../util/clazz\");\n\nvar enableClassExtend = _clazz.enableClassExtend;\nvar enableClassCheck = _clazz.enableClassCheck;\n\nvar lineStyleMixin = require(\"./mixin/lineStyle\");\n\nvar areaStyleMixin = require(\"./mixin/areaStyle\");\n\nvar textStyleMixin = require(\"./mixin/textStyle\");\n\nvar itemStyleMixin = require(\"./mixin/itemStyle\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/model/Model\n */\nvar mixin = zrUtil.mixin;\nvar inner = makeInner();\n/**\n * @alias module:echarts/model/Model\n * @constructor\n * @param {Object} [option]\n * @param {module:echarts/model/Model} [parentModel]\n * @param {module:echarts/model/Global} [ecModel]\n */\n\nfunction Model(option, parentModel, ecModel) {\n  /**\n   * @type {module:echarts/model/Model}\n   * @readOnly\n   */\n  this.parentModel = parentModel;\n  /**\n   * @type {module:echarts/model/Global}\n   * @readOnly\n   */\n\n  this.ecModel = ecModel;\n  /**\n   * @type {Object}\n   * @protected\n   */\n\n  this.option = option; // Simple optimization\n  // if (this.init) {\n  //     if (arguments.length <= 4) {\n  //         this.init(option, parentModel, ecModel, extraOpt);\n  //     }\n  //     else {\n  //         this.init.apply(this, arguments);\n  //     }\n  // }\n}\n\nModel.prototype = {\n  constructor: Model,\n\n  /**\n   * Model \n   * @param {Object} option\n   */\n  init: null,\n\n  /**\n   *  Option merge\n   */\n  mergeOption: function (option) {\n    zrUtil.merge(this.option, option, true);\n  },\n\n  /**\n   * @param {string|Array.<string>} path\n   * @param {boolean} [ignoreParent=false]\n   * @return {*}\n   */\n  get: function (path, ignoreParent) {\n    if (path == null) {\n      return this.option;\n    }\n\n    return doGet(this.option, this.parsePath(path), !ignoreParent && getParent(this, path));\n  },\n\n  /**\n   * @param {string} key\n   * @param {boolean} [ignoreParent=false]\n   * @return {*}\n   */\n  getShallow: function (key, ignoreParent) {\n    var option = this.option;\n    var val = option == null ? option : option[key];\n    var parentModel = !ignoreParent && getParent(this, key);\n\n    if (val == null && parentModel) {\n      val = parentModel.getShallow(key);\n    }\n\n    return val;\n  },\n\n  /**\n   * @param {string|Array.<string>} [path]\n   * @param {module:echarts/model/Model} [parentModel]\n   * @return {module:echarts/model/Model}\n   */\n  getModel: function (path, parentModel) {\n    var obj = path == null ? this.option : doGet(this.option, path = this.parsePath(path));\n    var thisParentModel;\n    parentModel = parentModel || (thisParentModel = getParent(this, path)) && thisParentModel.getModel(path);\n    return new Model(obj, parentModel, this.ecModel);\n  },\n\n  /**\n   * If model has option\n   */\n  isEmpty: function () {\n    return this.option == null;\n  },\n  restoreData: function () {},\n  // Pending\n  clone: function () {\n    var Ctor = this.constructor;\n    return new Ctor(zrUtil.clone(this.option));\n  },\n  setReadOnly: function (properties) {// clazzUtil.setReadOnly(this, properties);\n  },\n  // If path is null/undefined, return null/undefined.\n  parsePath: function (path) {\n    if (typeof path === 'string') {\n      path = path.split('.');\n    }\n\n    return path;\n  },\n\n  /**\n   * @param {Function} getParentMethod\n   *        param {Array.<string>|string} path\n   *        return {module:echarts/model/Model}\n   */\n  customizeGetParent: function (getParentMethod) {\n    inner(this).getParent = getParentMethod;\n  },\n  isAnimationEnabled: function () {\n    if (!env.node) {\n      if (this.option.animation != null) {\n        return !!this.option.animation;\n      } else if (this.parentModel) {\n        return this.parentModel.isAnimationEnabled();\n      }\n    }\n  }\n};\n\nfunction doGet(obj, pathArr, parentModel) {\n  for (var i = 0; i < pathArr.length; i++) {\n    // Ignore empty\n    if (!pathArr[i]) {\n      continue;\n    } // obj could be number/string/... (like 0)\n\n\n    obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\n\n    if (obj == null) {\n      break;\n    }\n  }\n\n  if (obj == null && parentModel) {\n    obj = parentModel.get(pathArr);\n  }\n\n  return obj;\n} // `path` can be null/undefined\n\n\nfunction getParent(model, path) {\n  var getParentMethod = inner(model).getParent;\n  return getParentMethod ? getParentMethod.call(model, path) : model.parentModel;\n} // Enable Model.extend.\n\n\nenableClassExtend(Model);\nenableClassCheck(Model);\nmixin(Model, lineStyleMixin);\nmixin(Model, areaStyleMixin);\nmixin(Model, textStyleMixin);\nmixin(Model, itemStyleMixin);\nvar _default = Model;\nmodule.exports = _default;","/* global Float32Array */\nvar ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;\n/**\n * \n * @param {number} [x=0]\n * @param {number} [y=0]\n * @return {Vector2}\n */\n\nfunction create(x, y) {\n  var out = new ArrayCtor(2);\n\n  if (x == null) {\n    x = 0;\n  }\n\n  if (y == null) {\n    y = 0;\n  }\n\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v\n * @return {Vector2}\n */\n\n\nfunction copy(out, v) {\n  out[0] = v[0];\n  out[1] = v[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} v\n * @return {Vector2}\n */\n\n\nfunction clone(v) {\n  var out = new ArrayCtor(2);\n  out[0] = v[0];\n  out[1] = v[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {number} a\n * @param {number} b\n * @return {Vector2} \n */\n\n\nfunction set(out, a, b) {\n  out[0] = a;\n  out[1] = b;\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction add(out, v1, v2) {\n  out[0] = v1[0] + v2[0];\n  out[1] = v1[1] + v2[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @param {number} a\n */\n\n\nfunction scaleAndAdd(out, v1, v2, a) {\n  out[0] = v1[0] + v2[0] * a;\n  out[1] = v1[1] + v2[1] * a;\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction sub(out, v1, v2) {\n  out[0] = v1[0] - v2[0];\n  out[1] = v1[1] - v2[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} v\n * @return {number}\n */\n\n\nfunction len(v) {\n  return Math.sqrt(lenSquare(v));\n}\n\nvar length = len; // jshint ignore:line\n\n/**\n * \n * @param {Vector2} v\n * @return {number}\n */\n\nfunction lenSquare(v) {\n  return v[0] * v[0] + v[1] * v[1];\n}\n\nvar lengthSquare = lenSquare;\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\nfunction mul(out, v1, v2) {\n  out[0] = v1[0] * v2[0];\n  out[1] = v1[1] * v2[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction div(out, v1, v2) {\n  out[0] = v1[0] / v2[0];\n  out[1] = v1[1] / v2[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\n\nfunction dot(v1, v2) {\n  return v1[0] * v2[0] + v1[1] * v2[1];\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v\n * @param {number} s\n */\n\n\nfunction scale(out, v, s) {\n  out[0] = v[0] * s;\n  out[1] = v[1] * s;\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v\n */\n\n\nfunction normalize(out, v) {\n  var d = len(v);\n\n  if (d === 0) {\n    out[0] = 0;\n    out[1] = 0;\n  } else {\n    out[0] = v[0] / d;\n    out[1] = v[1] / d;\n  }\n\n  return out;\n}\n/**\n * \n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\n\nfunction distance(v1, v2) {\n  return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\n\nvar dist = distance;\n/**\n * \n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\nfunction distanceSquare(v1, v2) {\n  return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\n\nvar distSquare = distanceSquare;\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v\n */\n\nfunction negate(out, v) {\n  out[0] = -v[0];\n  out[1] = -v[1];\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @param {number} t\n */\n\n\nfunction lerp(out, v1, v2, t) {\n  out[0] = v1[0] + t * (v2[0] - v1[0]);\n  out[1] = v1[1] + t * (v2[1] - v1[1]);\n  return out;\n}\n/**\n * \n * @param {Vector2} out\n * @param {Vector2} v\n * @param {Vector2} m\n */\n\n\nfunction applyTransform(out, v, m) {\n  var x = v[0];\n  var y = v[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * \n * @param  {Vector2} out\n * @param  {Vector2} v1\n * @param  {Vector2} v2\n */\n\n\nfunction min(out, v1, v2) {\n  out[0] = Math.min(v1[0], v2[0]);\n  out[1] = Math.min(v1[1], v2[1]);\n  return out;\n}\n/**\n * \n * @param  {Vector2} out\n * @param  {Vector2} v1\n * @param  {Vector2} v2\n */\n\n\nfunction max(out, v1, v2) {\n  out[0] = Math.max(v1[0], v2[0]);\n  out[1] = Math.max(v1[1], v2[1]);\n  return out;\n}\n\nexports.create = create;\nexports.copy = copy;\nexports.clone = clone;\nexports.set = set;\nexports.add = add;\nexports.scaleAndAdd = scaleAndAdd;\nexports.sub = sub;\nexports.len = len;\nexports.length = length;\nexports.lenSquare = lenSquare;\nexports.lengthSquare = lengthSquare;\nexports.mul = mul;\nexports.div = div;\nexports.dot = dot;\nexports.scale = scale;\nexports.normalize = normalize;\nexports.distance = distance;\nexports.dist = dist;\nexports.distanceSquare = distanceSquare;\nexports.distSquare = distSquare;\nexports.negate = negate;\nexports.lerp = lerp;\nexports.applyTransform = applyTransform;\nexports.min = min;\nexports.max = max;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"./Model\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar _clazz = require(\"../util/clazz\");\n\nvar enableClassManagement = _clazz.enableClassManagement;\nvar parseClassType = _clazz.parseClassType;\n\nvar _model = require(\"../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar layout = require(\"../util/layout\");\n\nvar boxLayoutMixin = require(\"./mixin/boxLayout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Component model\n *\n * @module echarts/model/Component\n */\nvar inner = makeInner();\n/**\n * @alias module:echarts/model/Component\n * @constructor\n * @param {Object} option\n * @param {module:echarts/model/Model} parentModel\n * @param {module:echarts/model/Model} ecModel\n */\n\nvar ComponentModel = Model.extend({\n  type: 'component',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  id: '',\n\n  /**\n   * Because simplified concept is probably better, series.name (or component.name)\n   * has been having too many resposibilities:\n   * (1) Generating id (which requires name in option should not be modified).\n   * (2) As an index to mapping series when merging option or calling API (a name\n   * can refer to more then one components, which is convinient is some case).\n   * (3) Display.\n   * @readOnly\n   */\n  name: '',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  mainType: '',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  subType: '',\n\n  /**\n   * @readOnly\n   * @type {number}\n   */\n  componentIndex: 0,\n\n  /**\n   * @type {Object}\n   * @protected\n   */\n  defaultOption: null,\n\n  /**\n   * @type {module:echarts/model/Global}\n   * @readOnly\n   */\n  ecModel: null,\n\n  /**\n   * key: componentType\n   * value:  Component model list, can not be null.\n   * @type {Object.<string, Array.<module:echarts/model/Model>>}\n   * @readOnly\n   */\n  dependentModels: [],\n\n  /**\n   * @type {string}\n   * @readOnly\n   */\n  uid: null,\n\n  /**\n   * Support merge layout params.\n   * Only support 'box' now (left/right/top/bottom/width/height).\n   * @type {string|Object} Object can be {ignoreSize: true}\n   * @readOnly\n   */\n  layoutMode: null,\n  $constructor: function (option, parentModel, ecModel, extraOpt) {\n    Model.call(this, option, parentModel, ecModel, extraOpt);\n    this.uid = componentUtil.getUID('ec_cpt_model');\n  },\n  init: function (option, parentModel, ecModel, extraOpt) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n  mergeDefaultAndTheme: function (option, ecModel) {\n    var layoutMode = this.layoutMode;\n    var inputPositionParams = layoutMode ? layout.getLayoutParams(option) : {};\n    var themeModel = ecModel.getTheme();\n    zrUtil.merge(option, themeModel.get(this.mainType));\n    zrUtil.merge(option, this.getDefaultOption());\n\n    if (layoutMode) {\n      layout.mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  },\n  mergeOption: function (option, extraOpt) {\n    zrUtil.merge(this.option, option, true);\n    var layoutMode = this.layoutMode;\n\n    if (layoutMode) {\n      layout.mergeLayoutParam(this.option, option, layoutMode);\n    }\n  },\n  // Hooker after init or mergeOption\n  optionUpdated: function (newCptOption, isInit) {},\n  getDefaultOption: function () {\n    var fields = inner(this);\n\n    if (!fields.defaultOption) {\n      var optList = [];\n      var Class = this.constructor;\n\n      while (Class) {\n        var opt = Class.prototype.defaultOption;\n        opt && optList.push(opt);\n        Class = Class.superClass;\n      }\n\n      var defaultOption = {};\n\n      for (var i = optList.length - 1; i >= 0; i--) {\n        defaultOption = zrUtil.merge(defaultOption, optList[i], true);\n      }\n\n      fields.defaultOption = defaultOption;\n    }\n\n    return fields.defaultOption;\n  },\n  getReferringComponents: function (mainType) {\n    return this.ecModel.queryComponents({\n      mainType: mainType,\n      index: this.get(mainType + 'Index', true),\n      id: this.get(mainType + 'Id', true)\n    });\n  }\n}); // Reset ComponentModel.extend, add preConstruct.\n// clazzUtil.enableClassExtend(\n//     ComponentModel,\n//     function (option, parentModel, ecModel, extraOpt) {\n//         // Set dependentModels, componentIndex, name, id, mainType, subType.\n//         zrUtil.extend(this, extraOpt);\n//         this.uid = componentUtil.getUID('componentModel');\n//         // this.setReadOnly([\n//         //     'type', 'id', 'uid', 'name', 'mainType', 'subType',\n//         //     'dependentModels', 'componentIndex'\n//         // ]);\n//     }\n// );\n// Add capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nenableClassManagement(ComponentModel, {\n  registerWhenExtend: true\n});\ncomponentUtil.enableSubTypeDefaulter(ComponentModel); // Add capability of ComponentModel.topologicalTravel.\n\ncomponentUtil.enableTopologicalTravel(ComponentModel, getDependencies);\n\nfunction getDependencies(componentType) {\n  var deps = [];\n  zrUtil.each(ComponentModel.getClassesByMainType(componentType), function (Clazz) {\n    deps = deps.concat(Clazz.prototype.dependencies || []);\n  }); // Ensure main type.\n\n  deps = zrUtil.map(deps, function (type) {\n    return parseClassType(type).main;\n  }); // Hack dataset for convenience.\n\n  if (componentType !== 'dataset' && zrUtil.indexOf(deps, 'dataset') <= 0) {\n    deps.unshift('dataset');\n  }\n\n  return deps;\n}\n\nzrUtil.mixin(ComponentModel, boxLayoutMixin);\nvar _default = ComponentModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../model/Model\");\n\nvar DataDiffer = require(\"./DataDiffer\");\n\nvar Source = require(\"./Source\");\n\nvar _dataProvider = require(\"./helper/dataProvider\");\n\nvar defaultDimValueGetters = _dataProvider.defaultDimValueGetters;\nvar DefaultDataProvider = _dataProvider.DefaultDataProvider;\n\nvar _dimensionHelper = require(\"./helper/dimensionHelper\");\n\nvar summarizeDimensions = _dimensionHelper.summarizeDimensions;\n\nvar DataDimensionInfo = require(\"./DataDimensionInfo\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float64Array, Int32Array, Uint32Array, Uint16Array */\n\n/**\n * List for data storage\n * @module echarts/data/List\n */\nvar isObject = zrUtil.isObject;\nvar UNDEFINED = 'undefined';\nvar INDEX_NOT_FOUND = -1; // Use prefix to avoid index to be the same as otherIdList[idx],\n// which will cause weird udpate animation.\n\nvar ID_PREFIX = 'e\\0\\0';\nvar dataCtors = {\n  'float': typeof Float64Array === UNDEFINED ? Array : Float64Array,\n  'int': typeof Int32Array === UNDEFINED ? Array : Int32Array,\n  // Ordinal data type can be string or int\n  'ordinal': Array,\n  'number': Array,\n  'time': Array\n}; // Caution: MUST not use `new CtorUint32Array(arr, 0, len)`, because the Ctor of array is\n// different from the Ctor of typed array.\n\nvar CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\nvar CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\nvar CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\n\nfunction getIndicesCtor(list) {\n  // The possible max value in this._indicies is always this._rawCount despite of filtering.\n  return list._rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\n}\n\nfunction cloneChunk(originalChunk) {\n  var Ctor = originalChunk.constructor; // Only shallow clone is enough when Array.\n\n  return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);\n}\n\nvar TRANSFERABLE_PROPERTIES = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_rawData', '_chunkSize', '_chunkCount', '_dimValueGetter', '_count', '_rawCount', '_nameDimIdx', '_idDimIdx'];\nvar CLONE_PROPERTIES = ['_extent', '_approximateExtent', '_rawExtent'];\n\nfunction transferProperties(target, source) {\n  zrUtil.each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\n    if (source.hasOwnProperty(propName)) {\n      target[propName] = source[propName];\n    }\n  });\n  target.__wrappedMethods = source.__wrappedMethods;\n  zrUtil.each(CLONE_PROPERTIES, function (propName) {\n    target[propName] = zrUtil.clone(source[propName]);\n  });\n  target._calculationInfo = zrUtil.extend(source._calculationInfo);\n}\n/**\n * @constructor\n * @alias module:echarts/data/List\n *\n * @param {Array.<string|Object|module:data/DataDimensionInfo>} dimensions\n *      For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\n *      Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\n * @param {module:echarts/model/Model} hostModel\n */\n\n\nvar List = function (dimensions, hostModel) {\n  dimensions = dimensions || ['x', 'y'];\n  var dimensionInfos = {};\n  var dimensionNames = [];\n  var invertedIndicesMap = {};\n\n  for (var i = 0; i < dimensions.length; i++) {\n    // Use the original dimensions[i], where other flag props may exists.\n    var dimensionInfo = dimensions[i];\n\n    if (zrUtil.isString(dimensionInfo)) {\n      dimensionInfo = new DataDimensionInfo({\n        name: dimensionInfo\n      });\n    } else if (!(dimensionInfo instanceof DataDimensionInfo)) {\n      dimensionInfo = new DataDimensionInfo(dimensionInfo);\n    }\n\n    var dimensionName = dimensionInfo.name;\n    dimensionInfo.type = dimensionInfo.type || 'float';\n\n    if (!dimensionInfo.coordDim) {\n      dimensionInfo.coordDim = dimensionName;\n      dimensionInfo.coordDimIndex = 0;\n    }\n\n    dimensionInfo.otherDims = dimensionInfo.otherDims || {};\n    dimensionNames.push(dimensionName);\n    dimensionInfos[dimensionName] = dimensionInfo;\n    dimensionInfo.index = i;\n\n    if (dimensionInfo.createInvertedIndices) {\n      invertedIndicesMap[dimensionName] = [];\n    }\n  }\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n\n\n  this.dimensions = dimensionNames;\n  /**\n   * Infomation of each data dimension, like data type.\n   * @type {Object}\n   */\n\n  this._dimensionInfos = dimensionInfos;\n  /**\n   * @type {module:echarts/model/Model}\n   */\n\n  this.hostModel = hostModel;\n  /**\n   * @type {module:echarts/model/Model}\n   */\n\n  this.dataType;\n  /**\n   * Indices stores the indices of data subset after filtered.\n   * This data subset will be used in chart.\n   * @type {Array.<number>}\n   * @readOnly\n   */\n\n  this._indices = null;\n  this._count = 0;\n  this._rawCount = 0;\n  /**\n   * Data storage\n   * @type {Object.<key, Array.<TypedArray|Array>>}\n   * @private\n   */\n\n  this._storage = {};\n  /**\n   * @type {Array.<string>}\n   */\n\n  this._nameList = [];\n  /**\n   * @type {Array.<string>}\n   */\n\n  this._idList = [];\n  /**\n   * Models of data option is stored sparse for optimizing memory cost\n   * @type {Array.<module:echarts/model/Model>}\n   * @private\n   */\n\n  this._optionModels = [];\n  /**\n   * Global visual properties after visual coding\n   * @type {Object}\n   * @private\n   */\n\n  this._visual = {};\n  /**\n   * Globel layout properties.\n   * @type {Object}\n   * @private\n   */\n\n  this._layout = {};\n  /**\n   * Item visual properties after visual coding\n   * @type {Array.<Object>}\n   * @private\n   */\n\n  this._itemVisuals = [];\n  /**\n   * Key: visual type, Value: boolean\n   * @type {Object}\n   * @readOnly\n   */\n\n  this.hasItemVisual = {};\n  /**\n   * Item layout properties after layout\n   * @type {Array.<Object>}\n   * @private\n   */\n\n  this._itemLayouts = [];\n  /**\n   * Graphic elemnents\n   * @type {Array.<module:zrender/Element>}\n   * @private\n   */\n\n  this._graphicEls = [];\n  /**\n   * Max size of each chunk.\n   * @type {number}\n   * @private\n   */\n\n  this._chunkSize = 1e5;\n  /**\n   * @type {number}\n   * @private\n   */\n\n  this._chunkCount = 0;\n  /**\n   * @type {Array.<Array|Object>}\n   * @private\n   */\n\n  this._rawData;\n  /**\n   * Raw extent will not be cloned, but only transfered.\n   * It will not be calculated util needed.\n   * key: dim,\n   * value: {end: number, extent: Array.<number>}\n   * @type {Object}\n   * @private\n   */\n\n  this._rawExtent = {};\n  /**\n   * @type {Object}\n   * @private\n   */\n\n  this._extent = {};\n  /**\n   * key: dim\n   * value: extent\n   * @type {Object}\n   * @private\n   */\n\n  this._approximateExtent = {};\n  /**\n   * Cache summary info for fast visit. See \"dimensionHelper\".\n   * @type {Object}\n   * @private\n   */\n\n  this._dimensionsSummary = summarizeDimensions(this);\n  /**\n   * @type {Object.<Array|TypedArray>}\n   * @private\n   */\n\n  this._invertedIndicesMap = invertedIndicesMap;\n  /**\n   * @type {Object}\n   * @private\n   */\n\n  this._calculationInfo = {};\n  /**\n   * User output info of this data.\n   * DO NOT use it in other places!\n   *\n   * When preparing user params for user callbacks, we have\n   * to clone these inner data structures to prevent users\n   * from modifying them to effect built-in logic. And for\n   * performance consideration we make this `userOutput` to\n   * avoid clone them too many times.\n   *\n   * @type {Object}\n   * @readOnly\n   */\n\n  this.userOutput = this._dimensionsSummary.userOutput;\n};\n\nvar listProto = List.prototype;\nlistProto.type = 'list';\n/**\n * If each data item has it's own option\n * @type {boolean}\n */\n\nlistProto.hasItemOption = true;\n/**\n * The meanings of the input parameter `dim`:\n *\n * + If dim is a number (e.g., `1`), it means the index of the dimension.\n *   For example, `getDimension(0)` will return 'x' or 'lng' or 'radius'.\n * + If dim is a number-like string (e.g., `\"1\"`):\n *     + If there is the same concrete dim name defined in `this.dimensions`, it means that concrete name.\n *     + If not, it will be converted to a number, which means the index of the dimension.\n *        (why? because of the backward compatbility. We have been tolerating number-like string in\n *        dimension setting, although now it seems that it is not a good idea.)\n *     For example, `visualMap[i].dimension: \"1\"` is the same meaning as `visualMap[i].dimension: 1`,\n *     if no dimension name is defined as `\"1\"`.\n * + If dim is a not-number-like string, it means the concrete dim name.\n *   For example, it can be be default name `\"x\"`, `\"y\"`, `\"z\"`, `\"lng\"`, `\"lat\"`, `\"angle\"`, `\"radius\"`,\n *   or customized in `dimensions` property of option like `\"age\"`.\n *\n * Get dimension name\n * @param {string|number} dim See above.\n * @return {string} Concrete dim name.\n */\n\nlistProto.getDimension = function (dim) {\n  if (typeof dim === 'number' // If being a number-like string but not being defined a dimension name.\n  || !isNaN(dim) && !this._dimensionInfos.hasOwnProperty(dim)) {\n    dim = this.dimensions[dim];\n  }\n\n  return dim;\n};\n/**\n * Get type and calculation info of particular dimension\n * @param {string|number} dim\n *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\n *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\n */\n\n\nlistProto.getDimensionInfo = function (dim) {\n  // Do not clone, because there may be categories in dimInfo.\n  return this._dimensionInfos[this.getDimension(dim)];\n};\n/**\n * @return {Array.<string>} concrete dimension name list on coord.\n */\n\n\nlistProto.getDimensionsOnCoord = function () {\n  return this._dimensionsSummary.dataDimsOnCoord.slice();\n};\n/**\n * @param {string} coordDim\n * @param {number} [idx] A coordDim may map to more than one data dim.\n *        If idx is `true`, return a array of all mapped dims.\n *        If idx is not specified, return the first dim not extra.\n * @return {string|Array.<string>} concrete data dim.\n *        If idx is number, and not found, return null/undefined.\n *        If idx is `true`, and not found, return empty array (always return array).\n */\n\n\nlistProto.mapDimension = function (coordDim, idx) {\n  var dimensionsSummary = this._dimensionsSummary;\n\n  if (idx == null) {\n    return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\n  }\n\n  var dims = dimensionsSummary.encode[coordDim];\n  return idx === true // always return array if idx is `true`\n  ? (dims || []).slice() : dims && dims[idx];\n};\n/**\n * Initialize from data\n * @param {Array.<Object|number|Array>} data source or data or data provider.\n * @param {Array.<string>} [nameLIst] The name of a datum is used on data diff and\n *        defualt label/tooltip.\n *        A name can be specified in encode.itemName,\n *        or dataItem.name (only for series option data),\n *        or provided in nameList from outside.\n * @param {Function} [dimValueGetter] (dataItem, dimName, dataIndex, dimIndex) => number\n */\n\n\nlistProto.initData = function (data, nameList, dimValueGetter) {\n  var notProvider = Source.isInstance(data) || zrUtil.isArrayLike(data);\n\n  if (notProvider) {\n    data = new DefaultDataProvider(data, this.dimensions.length);\n  }\n\n  this._rawData = data; // Clear\n\n  this._storage = {};\n  this._indices = null;\n  this._nameList = nameList || [];\n  this._idList = [];\n  this._nameRepeatCount = {};\n\n  if (!dimValueGetter) {\n    this.hasItemOption = false;\n  }\n  /**\n   * @readOnly\n   */\n\n\n  this.defaultDimValueGetter = defaultDimValueGetters[this._rawData.getSource().sourceFormat]; // Default dim value getter\n\n  this._dimValueGetter = dimValueGetter = dimValueGetter || this.defaultDimValueGetter;\n  this._dimValueGetterArrayRows = defaultDimValueGetters.arrayRows; // Reset raw extent.\n\n  this._rawExtent = {};\n\n  this._initDataFromProvider(0, data.count()); // If data has no item option.\n\n\n  if (data.pure) {\n    this.hasItemOption = false;\n  }\n};\n\nlistProto.getProvider = function () {\n  return this._rawData;\n};\n/**\n * Caution: Can be only called on raw data (before `this._indices` created).\n */\n\n\nlistProto.appendData = function (data) {\n  var rawData = this._rawData;\n  var start = this.count();\n  rawData.appendData(data);\n  var end = rawData.count();\n\n  if (!rawData.persistent) {\n    end += start;\n  }\n\n  this._initDataFromProvider(start, end);\n};\n/**\n * Caution: Can be only called on raw data (before `this._indices` created).\n * This method does not modify `rawData` (`dataProvider`), but only\n * add values to storage.\n *\n * The final count will be increased by `Math.max(values.length, names.length)`.\n *\n * @param {Array.<Array.<*>>} values That is the SourceType: 'arrayRows', like\n *        [\n *            [12, 33, 44],\n *            [NaN, 43, 1],\n *            ['-', 'asdf', 0]\n *        ]\n *        Each item is exaclty cooresponding to a dimension.\n * @param {Array.<string>} [names]\n */\n\n\nlistProto.appendValues = function (values, names) {\n  var chunkSize = this._chunkSize;\n  var storage = this._storage;\n  var dimensions = this.dimensions;\n  var dimLen = dimensions.length;\n  var rawExtent = this._rawExtent;\n  var start = this.count();\n  var end = start + Math.max(values.length, names ? names.length : 0);\n  var originalChunkCount = this._chunkCount;\n\n  for (var i = 0; i < dimLen; i++) {\n    var dim = dimensions[i];\n\n    if (!rawExtent[dim]) {\n      rawExtent[dim] = getInitialExtent();\n    }\n\n    if (!storage[dim]) {\n      storage[dim] = [];\n    }\n\n    prepareChunks(storage, this._dimensionInfos[dim], chunkSize, originalChunkCount, end);\n    this._chunkCount = storage[dim].length;\n  }\n\n  var emptyDataItem = new Array(dimLen);\n\n  for (var idx = start; idx < end; idx++) {\n    var sourceIdx = idx - start;\n    var chunkIndex = Math.floor(idx / chunkSize);\n    var chunkOffset = idx % chunkSize; // Store the data by dimensions\n\n    for (var k = 0; k < dimLen; k++) {\n      var dim = dimensions[k];\n\n      var val = this._dimValueGetterArrayRows(values[sourceIdx] || emptyDataItem, dim, sourceIdx, k);\n\n      storage[dim][chunkIndex][chunkOffset] = val;\n      var dimRawExtent = rawExtent[dim];\n      val < dimRawExtent[0] && (dimRawExtent[0] = val);\n      val > dimRawExtent[1] && (dimRawExtent[1] = val);\n    }\n\n    if (names) {\n      this._nameList[idx] = names[sourceIdx];\n    }\n  }\n\n  this._rawCount = this._count = end; // Reset data extent\n\n  this._extent = {};\n  prepareInvertedIndex(this);\n};\n\nlistProto._initDataFromProvider = function (start, end) {\n  // Optimize.\n  if (start >= end) {\n    return;\n  }\n\n  var chunkSize = this._chunkSize;\n  var rawData = this._rawData;\n  var storage = this._storage;\n  var dimensions = this.dimensions;\n  var dimLen = dimensions.length;\n  var dimensionInfoMap = this._dimensionInfos;\n  var nameList = this._nameList;\n  var idList = this._idList;\n  var rawExtent = this._rawExtent;\n  var nameRepeatCount = this._nameRepeatCount = {};\n  var nameDimIdx;\n  var originalChunkCount = this._chunkCount;\n\n  for (var i = 0; i < dimLen; i++) {\n    var dim = dimensions[i];\n\n    if (!rawExtent[dim]) {\n      rawExtent[dim] = getInitialExtent();\n    }\n\n    var dimInfo = dimensionInfoMap[dim];\n\n    if (dimInfo.otherDims.itemName === 0) {\n      nameDimIdx = this._nameDimIdx = i;\n    }\n\n    if (dimInfo.otherDims.itemId === 0) {\n      this._idDimIdx = i;\n    }\n\n    if (!storage[dim]) {\n      storage[dim] = [];\n    }\n\n    prepareChunks(storage, dimInfo, chunkSize, originalChunkCount, end);\n    this._chunkCount = storage[dim].length;\n  }\n\n  var dataItem = new Array(dimLen);\n\n  for (var idx = start; idx < end; idx++) {\n    // NOTICE: Try not to write things into dataItem\n    dataItem = rawData.getItem(idx, dataItem); // Each data item is value\n    // [1, 2]\n    // 2\n    // Bar chart, line chart which uses category axis\n    // only gives the 'y' value. 'x' value is the indices of category\n    // Use a tempValue to normalize the value to be a (x, y) value\n\n    var chunkIndex = Math.floor(idx / chunkSize);\n    var chunkOffset = idx % chunkSize; // Store the data by dimensions\n\n    for (var k = 0; k < dimLen; k++) {\n      var dim = dimensions[k];\n      var dimStorage = storage[dim][chunkIndex]; // PENDING NULL is empty or zero\n\n      var val = this._dimValueGetter(dataItem, dim, idx, k);\n\n      dimStorage[chunkOffset] = val;\n      var dimRawExtent = rawExtent[dim];\n      val < dimRawExtent[0] && (dimRawExtent[0] = val);\n      val > dimRawExtent[1] && (dimRawExtent[1] = val);\n    } // ??? FIXME not check by pure but sourceFormat?\n    // TODO refactor these logic.\n\n\n    if (!rawData.pure) {\n      var name = nameList[idx];\n\n      if (dataItem && name == null) {\n        // If dataItem is {name: ...}, it has highest priority.\n        // That is appropriate for many common cases.\n        if (dataItem.name != null) {\n          // There is no other place to persistent dataItem.name,\n          // so save it to nameList.\n          nameList[idx] = name = dataItem.name;\n        } else if (nameDimIdx != null) {\n          var nameDim = dimensions[nameDimIdx];\n          var nameDimChunk = storage[nameDim][chunkIndex];\n\n          if (nameDimChunk) {\n            name = nameDimChunk[chunkOffset];\n            var ordinalMeta = dimensionInfoMap[nameDim].ordinalMeta;\n\n            if (ordinalMeta && ordinalMeta.categories.length) {\n              name = ordinalMeta.categories[name];\n            }\n          }\n        }\n      } // Try using the id in option\n      // id or name is used on dynamical data, mapping old and new items.\n\n\n      var id = dataItem == null ? null : dataItem.id;\n\n      if (id == null && name != null) {\n        // Use name as id and add counter to avoid same name\n        nameRepeatCount[name] = nameRepeatCount[name] || 0;\n        id = name;\n\n        if (nameRepeatCount[name] > 0) {\n          id += '__ec__' + nameRepeatCount[name];\n        }\n\n        nameRepeatCount[name]++;\n      }\n\n      id != null && (idList[idx] = id);\n    }\n  }\n\n  if (!rawData.persistent && rawData.clean) {\n    // Clean unused data if data source is typed array.\n    rawData.clean();\n  }\n\n  this._rawCount = this._count = end; // Reset data extent\n\n  this._extent = {};\n  prepareInvertedIndex(this);\n};\n\nfunction prepareChunks(storage, dimInfo, chunkSize, chunkCount, end) {\n  var DataCtor = dataCtors[dimInfo.type];\n  var lastChunkIndex = chunkCount - 1;\n  var dim = dimInfo.name;\n  var resizeChunkArray = storage[dim][lastChunkIndex];\n\n  if (resizeChunkArray && resizeChunkArray.length < chunkSize) {\n    var newStore = new DataCtor(Math.min(end - lastChunkIndex * chunkSize, chunkSize)); // The cost of the copy is probably inconsiderable\n    // within the initial chunkSize.\n\n    for (var j = 0; j < resizeChunkArray.length; j++) {\n      newStore[j] = resizeChunkArray[j];\n    }\n\n    storage[dim][lastChunkIndex] = newStore;\n  } // Create new chunks.\n\n\n  for (var k = chunkCount * chunkSize; k < end; k += chunkSize) {\n    storage[dim].push(new DataCtor(Math.min(end - k, chunkSize)));\n  }\n}\n\nfunction prepareInvertedIndex(list) {\n  var invertedIndicesMap = list._invertedIndicesMap;\n  zrUtil.each(invertedIndicesMap, function (invertedIndices, dim) {\n    var dimInfo = list._dimensionInfos[dim]; // Currently, only dimensions that has ordinalMeta can create inverted indices.\n\n    var ordinalMeta = dimInfo.ordinalMeta;\n\n    if (ordinalMeta) {\n      invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length); // The default value of TypedArray is 0. To avoid miss\n      // mapping to 0, we should set it as INDEX_NOT_FOUND.\n\n      for (var i = 0; i < invertedIndices.length; i++) {\n        invertedIndices[i] = INDEX_NOT_FOUND;\n      }\n\n      for (var i = 0; i < list._count; i++) {\n        // Only support the case that all values are distinct.\n        invertedIndices[list.get(dim, i)] = i;\n      }\n    }\n  });\n}\n\nfunction getRawValueFromStore(list, dimIndex, rawIndex) {\n  var val;\n\n  if (dimIndex != null) {\n    var chunkSize = list._chunkSize;\n    var chunkIndex = Math.floor(rawIndex / chunkSize);\n    var chunkOffset = rawIndex % chunkSize;\n    var dim = list.dimensions[dimIndex];\n    var chunk = list._storage[dim][chunkIndex];\n\n    if (chunk) {\n      val = chunk[chunkOffset];\n      var ordinalMeta = list._dimensionInfos[dim].ordinalMeta;\n\n      if (ordinalMeta && ordinalMeta.categories.length) {\n        val = ordinalMeta.categories[val];\n      }\n    }\n  }\n\n  return val;\n}\n/**\n * @return {number}\n */\n\n\nlistProto.count = function () {\n  return this._count;\n};\n\nlistProto.getIndices = function () {\n  var newIndices;\n  var indices = this._indices;\n\n  if (indices) {\n    var Ctor = indices.constructor;\n    var thisCount = this._count; // `new Array(a, b, c)` is different from `new Uint32Array(a, b, c)`.\n\n    if (Ctor === Array) {\n      newIndices = new Ctor(thisCount);\n\n      for (var i = 0; i < thisCount; i++) {\n        newIndices[i] = indices[i];\n      }\n    } else {\n      newIndices = new Ctor(indices.buffer, 0, thisCount);\n    }\n  } else {\n    var Ctor = getIndicesCtor(this);\n    var newIndices = new Ctor(this.count());\n\n    for (var i = 0; i < newIndices.length; i++) {\n      newIndices[i] = i;\n    }\n  }\n\n  return newIndices;\n};\n/**\n * Get value. Return NaN if idx is out of range.\n * @param {string} dim Dim must be concrete name.\n * @param {number} idx\n * @param {boolean} stack\n * @return {number}\n */\n\n\nlistProto.get = function (dim, idx\n/*, stack */\n) {\n  if (!(idx >= 0 && idx < this._count)) {\n    return NaN;\n  }\n\n  var storage = this._storage;\n\n  if (!storage[dim]) {\n    // TODO Warn ?\n    return NaN;\n  }\n\n  idx = this.getRawIndex(idx);\n  var chunkIndex = Math.floor(idx / this._chunkSize);\n  var chunkOffset = idx % this._chunkSize;\n  var chunkStore = storage[dim][chunkIndex];\n  var value = chunkStore[chunkOffset]; // FIXME ordinal data type is not stackable\n  // if (stack) {\n  //     var dimensionInfo = this._dimensionInfos[dim];\n  //     if (dimensionInfo && dimensionInfo.stackable) {\n  //         var stackedOn = this.stackedOn;\n  //         while (stackedOn) {\n  //             // Get no stacked data of stacked on\n  //             var stackedValue = stackedOn.get(dim, idx);\n  //             // Considering positive stack, negative stack and empty data\n  //             if ((value >= 0 && stackedValue > 0)  // Positive stack\n  //                 || (value <= 0 && stackedValue < 0) // Negative stack\n  //             ) {\n  //                 value += stackedValue;\n  //             }\n  //             stackedOn = stackedOn.stackedOn;\n  //         }\n  //     }\n  // }\n\n  return value;\n};\n/**\n * @param {string} dim concrete dim\n * @param {number} rawIndex\n * @return {number|string}\n */\n\n\nlistProto.getByRawIndex = function (dim, rawIdx) {\n  if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\n    return NaN;\n  }\n\n  var dimStore = this._storage[dim];\n\n  if (!dimStore) {\n    // TODO Warn ?\n    return NaN;\n  }\n\n  var chunkIndex = Math.floor(rawIdx / this._chunkSize);\n  var chunkOffset = rawIdx % this._chunkSize;\n  var chunkStore = dimStore[chunkIndex];\n  return chunkStore[chunkOffset];\n};\n/**\n * FIXME Use `get` on chrome maybe slow(in filterSelf and selectRange).\n * Hack a much simpler _getFast\n * @private\n */\n\n\nlistProto._getFast = function (dim, rawIdx) {\n  var chunkIndex = Math.floor(rawIdx / this._chunkSize);\n  var chunkOffset = rawIdx % this._chunkSize;\n  var chunkStore = this._storage[dim][chunkIndex];\n  return chunkStore[chunkOffset];\n};\n/**\n * Get value for multi dimensions.\n * @param {Array.<string>} [dimensions] If ignored, using all dimensions.\n * @param {number} idx\n * @return {number}\n */\n\n\nlistProto.getValues = function (dimensions, idx\n/*, stack */\n) {\n  var values = [];\n\n  if (!zrUtil.isArray(dimensions)) {\n    // stack = idx;\n    idx = dimensions;\n    dimensions = this.dimensions;\n  }\n\n  for (var i = 0, len = dimensions.length; i < len; i++) {\n    values.push(this.get(dimensions[i], idx\n    /*, stack */\n    ));\n  }\n\n  return values;\n};\n/**\n * If value is NaN. Inlcuding '-'\n * Only check the coord dimensions.\n * @param {string} dim\n * @param {number} idx\n * @return {number}\n */\n\n\nlistProto.hasValue = function (idx) {\n  var dataDimsOnCoord = this._dimensionsSummary.dataDimsOnCoord;\n\n  for (var i = 0, len = dataDimsOnCoord.length; i < len; i++) {\n    // Ordinal type originally can be string or number.\n    // But when an ordinal type is used on coord, it can\n    // not be string but only number. So we can also use isNaN.\n    if (isNaN(this.get(dataDimsOnCoord[i], idx))) {\n      return false;\n    }\n  }\n\n  return true;\n};\n/**\n * Get extent of data in one dimension\n * @param {string} dim\n * @param {boolean} stack\n */\n\n\nlistProto.getDataExtent = function (dim\n/*, stack */\n) {\n  // Make sure use concrete dim as cache name.\n  dim = this.getDimension(dim);\n  var dimData = this._storage[dim];\n  var initialExtent = getInitialExtent(); // stack = !!((stack || false) && this.getCalculationInfo(dim));\n\n  if (!dimData) {\n    return initialExtent;\n  } // Make more strict checkings to ensure hitting cache.\n\n\n  var currEnd = this.count(); // var cacheName = [dim, !!stack].join('_');\n  // var cacheName = dim;\n  // Consider the most cases when using data zoom, `getDataExtent`\n  // happened before filtering. We cache raw extent, which is not\n  // necessary to be cleared and recalculated when restore data.\n\n  var useRaw = !this._indices; // && !stack;\n\n  var dimExtent;\n\n  if (useRaw) {\n    return this._rawExtent[dim].slice();\n  }\n\n  dimExtent = this._extent[dim];\n\n  if (dimExtent) {\n    return dimExtent.slice();\n  }\n\n  dimExtent = initialExtent;\n  var min = dimExtent[0];\n  var max = dimExtent[1];\n\n  for (var i = 0; i < currEnd; i++) {\n    // var value = stack ? this.get(dim, i, true) : this._getFast(dim, this.getRawIndex(i));\n    var value = this._getFast(dim, this.getRawIndex(i));\n\n    value < min && (min = value);\n    value > max && (max = value);\n  }\n\n  dimExtent = [min, max];\n  this._extent[dim] = dimExtent;\n  return dimExtent;\n};\n/**\n * Optimize for the scenario that data is filtered by a given extent.\n * Consider that if data amount is more than hundreds of thousand,\n * extent calculation will cost more than 10ms and the cache will\n * be erased because of the filtering.\n */\n\n\nlistProto.getApproximateExtent = function (dim\n/*, stack */\n) {\n  dim = this.getDimension(dim);\n  return this._approximateExtent[dim] || this.getDataExtent(dim\n  /*, stack */\n  );\n};\n\nlistProto.setApproximateExtent = function (extent, dim\n/*, stack */\n) {\n  dim = this.getDimension(dim);\n  this._approximateExtent[dim] = extent.slice();\n};\n/**\n * @param {string} key\n * @return {*}\n */\n\n\nlistProto.getCalculationInfo = function (key) {\n  return this._calculationInfo[key];\n};\n/**\n * @param {string|Object} key or k-v object\n * @param {*} [value]\n */\n\n\nlistProto.setCalculationInfo = function (key, value) {\n  isObject(key) ? zrUtil.extend(this._calculationInfo, key) : this._calculationInfo[key] = value;\n};\n/**\n * Get sum of data in one dimension\n * @param {string} dim\n */\n\n\nlistProto.getSum = function (dim\n/*, stack */\n) {\n  var dimData = this._storage[dim];\n  var sum = 0;\n\n  if (dimData) {\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var value = this.get(dim, i\n      /*, stack */\n      );\n\n      if (!isNaN(value)) {\n        sum += value;\n      }\n    }\n  }\n\n  return sum;\n};\n/**\n * Get median of data in one dimension\n * @param {string} dim\n */\n\n\nlistProto.getMedian = function (dim\n/*, stack */\n) {\n  var dimDataArray = []; // map all data of one dimension\n\n  this.each(dim, function (val, idx) {\n    if (!isNaN(val)) {\n      dimDataArray.push(val);\n    }\n  }); // TODO\n  // Use quick select?\n  // immutability & sort\n\n  var sortedDimDataArray = [].concat(dimDataArray).sort(function (a, b) {\n    return a - b;\n  });\n  var len = this.count(); // calculate median\n\n  return len === 0 ? 0 : len % 2 === 1 ? sortedDimDataArray[(len - 1) / 2] : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\n}; // /**\n//  * Retreive the index with given value\n//  * @param {string} dim Concrete dimension.\n//  * @param {number} value\n//  * @return {number}\n//  */\n// Currently incorrect: should return dataIndex but not rawIndex.\n// Do not fix it until this method is to be used somewhere.\n// FIXME Precision of float value\n// listProto.indexOf = function (dim, value) {\n//     var storage = this._storage;\n//     var dimData = storage[dim];\n//     var chunkSize = this._chunkSize;\n//     if (dimData) {\n//         for (var i = 0, len = this.count(); i < len; i++) {\n//             var chunkIndex = Math.floor(i / chunkSize);\n//             var chunkOffset = i % chunkSize;\n//             if (dimData[chunkIndex][chunkOffset] === value) {\n//                 return i;\n//             }\n//         }\n//     }\n//     return -1;\n// };\n\n/**\n * Only support the dimension which inverted index created.\n * Do not support other cases until required.\n * @param {string} concrete dim\n * @param {number|string} value\n * @return {number} rawIndex\n */\n\n\nlistProto.rawIndexOf = function (dim, value) {\n  var invertedIndices = dim && this._invertedIndicesMap[dim];\n  var rawIndex = invertedIndices[value];\n\n  if (rawIndex == null || isNaN(rawIndex)) {\n    return INDEX_NOT_FOUND;\n  }\n\n  return rawIndex;\n};\n/**\n * Retreive the index with given name\n * @param {number} idx\n * @param {number} name\n * @return {number}\n */\n\n\nlistProto.indexOfName = function (name) {\n  for (var i = 0, len = this.count(); i < len; i++) {\n    if (this.getName(i) === name) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n/**\n * Retreive the index with given raw data index\n * @param {number} idx\n * @param {number} name\n * @return {number}\n */\n\n\nlistProto.indexOfRawIndex = function (rawIndex) {\n  if (rawIndex >= this._rawCount || rawIndex < 0) {\n    return -1;\n  }\n\n  if (!this._indices) {\n    return rawIndex;\n  } // Indices are ascending\n\n\n  var indices = this._indices; // If rawIndex === dataIndex\n\n  var rawDataIndex = indices[rawIndex];\n\n  if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\n    return rawIndex;\n  }\n\n  var left = 0;\n  var right = this._count - 1;\n\n  while (left <= right) {\n    var mid = (left + right) / 2 | 0;\n\n    if (indices[mid] < rawIndex) {\n      left = mid + 1;\n    } else if (indices[mid] > rawIndex) {\n      right = mid - 1;\n    } else {\n      return mid;\n    }\n  }\n\n  return -1;\n};\n/**\n * Retreive the index of nearest value\n * @param {string} dim\n * @param {number} value\n * @param {number} [maxDistance=Infinity]\n * @return {Array.<number>} If and only if multiple indices has\n *        the same value, they are put to the result.\n */\n\n\nlistProto.indicesOfNearest = function (dim, value, maxDistance) {\n  var storage = this._storage;\n  var dimData = storage[dim];\n  var nearestIndices = [];\n\n  if (!dimData) {\n    return nearestIndices;\n  }\n\n  if (maxDistance == null) {\n    maxDistance = Infinity;\n  }\n\n  var minDist = Infinity;\n  var minDiff = -1;\n  var nearestIndicesLen = 0; // Check the test case of `test/ut/spec/data/List.js`.\n\n  for (var i = 0, len = this.count(); i < len; i++) {\n    var diff = value - this.get(dim, i);\n    var dist = Math.abs(diff);\n\n    if (dist <= maxDistance) {\n      // When the `value` is at the middle of `this.get(dim, i)` and `this.get(dim, i+1)`,\n      // we'd better not push both of them to `nearestIndices`, otherwise it is easy to\n      // get more than one item in `nearestIndices` (more specifically, in `tooltip`).\n      // So we chose the one that `diff >= 0` in this csae.\n      // But if `this.get(dim, i)` and `this.get(dim, j)` get the same value, both of them\n      // should be push to `nearestIndices`.\n      if (dist < minDist || dist === minDist && diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        nearestIndicesLen = 0;\n      }\n\n      if (diff === minDiff) {\n        nearestIndices[nearestIndicesLen++] = i;\n      }\n    }\n  }\n\n  nearestIndices.length = nearestIndicesLen;\n  return nearestIndices;\n};\n/**\n * Get raw data index\n * @param {number} idx\n * @return {number}\n */\n\n\nlistProto.getRawIndex = getRawIndexWithoutIndices;\n\nfunction getRawIndexWithoutIndices(idx) {\n  return idx;\n}\n\nfunction getRawIndexWithIndices(idx) {\n  if (idx < this._count && idx >= 0) {\n    return this._indices[idx];\n  }\n\n  return -1;\n}\n/**\n * Get raw data item\n * @param {number} idx\n * @return {number}\n */\n\n\nlistProto.getRawDataItem = function (idx) {\n  if (!this._rawData.persistent) {\n    var val = [];\n\n    for (var i = 0; i < this.dimensions.length; i++) {\n      var dim = this.dimensions[i];\n      val.push(this.get(dim, idx));\n    }\n\n    return val;\n  } else {\n    return this._rawData.getItem(this.getRawIndex(idx));\n  }\n};\n/**\n * @param {number} idx\n * @param {boolean} [notDefaultIdx=false]\n * @return {string}\n */\n\n\nlistProto.getName = function (idx) {\n  var rawIndex = this.getRawIndex(idx);\n  return this._nameList[rawIndex] || getRawValueFromStore(this, this._nameDimIdx, rawIndex) || '';\n};\n/**\n * @param {number} idx\n * @param {boolean} [notDefaultIdx=false]\n * @return {string}\n */\n\n\nlistProto.getId = function (idx) {\n  return getId(this, this.getRawIndex(idx));\n};\n\nfunction getId(list, rawIndex) {\n  var id = list._idList[rawIndex];\n\n  if (id == null) {\n    id = getRawValueFromStore(list, list._idDimIdx, rawIndex);\n  }\n\n  if (id == null) {\n    // FIXME Check the usage in graph, should not use prefix.\n    id = ID_PREFIX + rawIndex;\n  }\n\n  return id;\n}\n\nfunction normalizeDimensions(dimensions) {\n  if (!zrUtil.isArray(dimensions)) {\n    dimensions = [dimensions];\n  }\n\n  return dimensions;\n}\n\nfunction validateDimensions(list, dims) {\n  for (var i = 0; i < dims.length; i++) {\n    // stroage may be empty when no data, so use\n    // dimensionInfos to check.\n    if (!list._dimensionInfos[dims[i]]) {\n      console.error('Unkown dimension ' + dims[i]);\n    }\n  }\n}\n/**\n * Data iteration\n * @param {string|Array.<string>}\n * @param {Function} cb\n * @param {*} [context=this]\n *\n * @example\n *  list.each('x', function (x, idx) {});\n *  list.each(['x', 'y'], function (x, y, idx) {});\n *  list.each(function (idx) {})\n */\n\n\nlistProto.each = function (dims, cb, context, contextCompat) {\n  'use strict';\n\n  if (!this._count) {\n    return;\n  }\n\n  if (typeof dims === 'function') {\n    contextCompat = context;\n    context = cb;\n    cb = dims;\n    dims = [];\n  } // contextCompat just for compat echarts3\n\n\n  context = context || contextCompat || this;\n  dims = zrUtil.map(normalizeDimensions(dims), this.getDimension, this);\n  var dimSize = dims.length;\n\n  for (var i = 0; i < this.count(); i++) {\n    // Simple optimization\n    switch (dimSize) {\n      case 0:\n        cb.call(context, i);\n        break;\n\n      case 1:\n        cb.call(context, this.get(dims[0], i), i);\n        break;\n\n      case 2:\n        cb.call(context, this.get(dims[0], i), this.get(dims[1], i), i);\n        break;\n\n      default:\n        var k = 0;\n        var value = [];\n\n        for (; k < dimSize; k++) {\n          value[k] = this.get(dims[k], i);\n        } // Index\n\n\n        value[k] = i;\n        cb.apply(context, value);\n    }\n  }\n};\n/**\n * Data filter\n * @param {string|Array.<string>}\n * @param {Function} cb\n * @param {*} [context=this]\n */\n\n\nlistProto.filterSelf = function (dimensions, cb, context, contextCompat) {\n  'use strict';\n\n  if (!this._count) {\n    return;\n  }\n\n  if (typeof dimensions === 'function') {\n    contextCompat = context;\n    context = cb;\n    cb = dimensions;\n    dimensions = [];\n  } // contextCompat just for compat echarts3\n\n\n  context = context || contextCompat || this;\n  dimensions = zrUtil.map(normalizeDimensions(dimensions), this.getDimension, this);\n  var count = this.count();\n  var Ctor = getIndicesCtor(this);\n  var newIndices = new Ctor(count);\n  var value = [];\n  var dimSize = dimensions.length;\n  var offset = 0;\n  var dim0 = dimensions[0];\n\n  for (var i = 0; i < count; i++) {\n    var keep;\n    var rawIdx = this.getRawIndex(i); // Simple optimization\n\n    if (dimSize === 0) {\n      keep = cb.call(context, i);\n    } else if (dimSize === 1) {\n      var val = this._getFast(dim0, rawIdx);\n\n      keep = cb.call(context, val, i);\n    } else {\n      for (var k = 0; k < dimSize; k++) {\n        value[k] = this._getFast(dim0, rawIdx);\n      }\n\n      value[k] = i;\n      keep = cb.apply(context, value);\n    }\n\n    if (keep) {\n      newIndices[offset++] = rawIdx;\n    }\n  } // Set indices after filtered.\n\n\n  if (offset < count) {\n    this._indices = newIndices;\n  }\n\n  this._count = offset; // Reset data extent\n\n  this._extent = {};\n  this.getRawIndex = this._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\n  return this;\n};\n/**\n * Select data in range. (For optimization of filter)\n * (Manually inline code, support 5 million data filtering in data zoom.)\n */\n\n\nlistProto.selectRange = function (range) {\n  'use strict';\n\n  if (!this._count) {\n    return;\n  }\n\n  var dimensions = [];\n\n  for (var dim in range) {\n    if (range.hasOwnProperty(dim)) {\n      dimensions.push(dim);\n    }\n  }\n\n  var dimSize = dimensions.length;\n\n  if (!dimSize) {\n    return;\n  }\n\n  var originalCount = this.count();\n  var Ctor = getIndicesCtor(this);\n  var newIndices = new Ctor(originalCount);\n  var offset = 0;\n  var dim0 = dimensions[0];\n  var min = range[dim0][0];\n  var max = range[dim0][1];\n  var quickFinished = false;\n\n  if (!this._indices) {\n    // Extreme optimization for common case. About 2x faster in chrome.\n    var idx = 0;\n\n    if (dimSize === 1) {\n      var dimStorage = this._storage[dimensions[0]];\n\n      for (var k = 0; k < this._chunkCount; k++) {\n        var chunkStorage = dimStorage[k];\n        var len = Math.min(this._count - k * this._chunkSize, this._chunkSize);\n\n        for (var i = 0; i < len; i++) {\n          var val = chunkStorage[i]; // NaN will not be filtered. Consider the case, in line chart, empty\n          // value indicates the line should be broken. But for the case like\n          // scatter plot, a data item with empty value will not be rendered,\n          // but the axis extent may be effected if some other dim of the data\n          // item has value. Fortunately it is not a significant negative effect.\n\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = idx;\n          }\n\n          idx++;\n        }\n      }\n\n      quickFinished = true;\n    } else if (dimSize === 2) {\n      var dimStorage = this._storage[dim0];\n      var dimStorage2 = this._storage[dimensions[1]];\n      var min2 = range[dimensions[1]][0];\n      var max2 = range[dimensions[1]][1];\n\n      for (var k = 0; k < this._chunkCount; k++) {\n        var chunkStorage = dimStorage[k];\n        var chunkStorage2 = dimStorage2[k];\n        var len = Math.min(this._count - k * this._chunkSize, this._chunkSize);\n\n        for (var i = 0; i < len; i++) {\n          var val = chunkStorage[i];\n          var val2 = chunkStorage2[i]; // Do not filter NaN, see comment above.\n\n          if ((val >= min && val <= max || isNaN(val)) && (val2 >= min2 && val2 <= max2 || isNaN(val2))) {\n            newIndices[offset++] = idx;\n          }\n\n          idx++;\n        }\n      }\n\n      quickFinished = true;\n    }\n  }\n\n  if (!quickFinished) {\n    if (dimSize === 1) {\n      for (var i = 0; i < originalCount; i++) {\n        var rawIndex = this.getRawIndex(i);\n\n        var val = this._getFast(dim0, rawIndex); // Do not filter NaN, see comment above.\n\n\n        if (val >= min && val <= max || isNaN(val)) {\n          newIndices[offset++] = rawIndex;\n        }\n      }\n    } else {\n      for (var i = 0; i < originalCount; i++) {\n        var keep = true;\n        var rawIndex = this.getRawIndex(i);\n\n        for (var k = 0; k < dimSize; k++) {\n          var dimk = dimensions[k];\n\n          var val = this._getFast(dim, rawIndex); // Do not filter NaN, see comment above.\n\n\n          if (val < range[dimk][0] || val > range[dimk][1]) {\n            keep = false;\n          }\n        }\n\n        if (keep) {\n          newIndices[offset++] = this.getRawIndex(i);\n        }\n      }\n    }\n  } // Set indices after filtered.\n\n\n  if (offset < originalCount) {\n    this._indices = newIndices;\n  }\n\n  this._count = offset; // Reset data extent\n\n  this._extent = {};\n  this.getRawIndex = this._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\n  return this;\n};\n/**\n * Data mapping to a plain array\n * @param {string|Array.<string>} [dimensions]\n * @param {Function} cb\n * @param {*} [context=this]\n * @return {Array}\n */\n\n\nlistProto.mapArray = function (dimensions, cb, context, contextCompat) {\n  'use strict';\n\n  if (typeof dimensions === 'function') {\n    contextCompat = context;\n    context = cb;\n    cb = dimensions;\n    dimensions = [];\n  } // contextCompat just for compat echarts3\n\n\n  context = context || contextCompat || this;\n  var result = [];\n  this.each(dimensions, function () {\n    result.push(cb && cb.apply(this, arguments));\n  }, context);\n  return result;\n}; // Data in excludeDimensions is copied, otherwise transfered.\n\n\nfunction cloneListForMapAndSample(original, excludeDimensions) {\n  var allDimensions = original.dimensions;\n  var list = new List(zrUtil.map(allDimensions, original.getDimensionInfo, original), original.hostModel); // FIXME If needs stackedOn, value may already been stacked\n\n  transferProperties(list, original);\n  var storage = list._storage = {};\n  var originalStorage = original._storage; // Init storage\n\n  for (var i = 0; i < allDimensions.length; i++) {\n    var dim = allDimensions[i];\n\n    if (originalStorage[dim]) {\n      // Notice that we do not reset invertedIndicesMap here, becuase\n      // there is no scenario of mapping or sampling ordinal dimension.\n      if (zrUtil.indexOf(excludeDimensions, dim) >= 0) {\n        storage[dim] = cloneDimStore(originalStorage[dim]);\n        list._rawExtent[dim] = getInitialExtent();\n        list._extent[dim] = null;\n      } else {\n        // Direct reference for other dimensions\n        storage[dim] = originalStorage[dim];\n      }\n    }\n  }\n\n  return list;\n}\n\nfunction cloneDimStore(originalDimStore) {\n  var newDimStore = new Array(originalDimStore.length);\n\n  for (var j = 0; j < originalDimStore.length; j++) {\n    newDimStore[j] = cloneChunk(originalDimStore[j]);\n  }\n\n  return newDimStore;\n}\n\nfunction getInitialExtent() {\n  return [Infinity, -Infinity];\n}\n/**\n * Data mapping to a new List with given dimensions\n * @param {string|Array.<string>} dimensions\n * @param {Function} cb\n * @param {*} [context=this]\n * @return {Array}\n */\n\n\nlistProto.map = function (dimensions, cb, context, contextCompat) {\n  'use strict'; // contextCompat just for compat echarts3\n\n  context = context || contextCompat || this;\n  dimensions = zrUtil.map(normalizeDimensions(dimensions), this.getDimension, this);\n  var list = cloneListForMapAndSample(this, dimensions); // Following properties are all immutable.\n  // So we can reference to the same value\n\n  list._indices = this._indices;\n  list.getRawIndex = list._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\n  var storage = list._storage;\n  var tmpRetValue = [];\n  var chunkSize = this._chunkSize;\n  var dimSize = dimensions.length;\n  var dataCount = this.count();\n  var values = [];\n  var rawExtent = list._rawExtent;\n\n  for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\n    for (var dimIndex = 0; dimIndex < dimSize; dimIndex++) {\n      values[dimIndex] = this.get(dimensions[dimIndex], dataIndex\n      /*, stack */\n      );\n    }\n\n    values[dimSize] = dataIndex;\n    var retValue = cb && cb.apply(context, values);\n\n    if (retValue != null) {\n      // a number or string (in oridinal dimension)?\n      if (typeof retValue !== 'object') {\n        tmpRetValue[0] = retValue;\n        retValue = tmpRetValue;\n      }\n\n      var rawIndex = this.getRawIndex(dataIndex);\n      var chunkIndex = Math.floor(rawIndex / chunkSize);\n      var chunkOffset = rawIndex % chunkSize;\n\n      for (var i = 0; i < retValue.length; i++) {\n        var dim = dimensions[i];\n        var val = retValue[i];\n        var rawExtentOnDim = rawExtent[dim];\n        var dimStore = storage[dim];\n\n        if (dimStore) {\n          dimStore[chunkIndex][chunkOffset] = val;\n        }\n\n        if (val < rawExtentOnDim[0]) {\n          rawExtentOnDim[0] = val;\n        }\n\n        if (val > rawExtentOnDim[1]) {\n          rawExtentOnDim[1] = val;\n        }\n      }\n    }\n  }\n\n  return list;\n};\n/**\n * Large data down sampling on given dimension\n * @param {string} dimension\n * @param {number} rate\n * @param {Function} sampleValue\n * @param {Function} sampleIndex Sample index for name and id\n */\n\n\nlistProto.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n  var list = cloneListForMapAndSample(this, [dimension]);\n  var targetStorage = list._storage;\n  var frameValues = [];\n  var frameSize = Math.floor(1 / rate);\n  var dimStore = targetStorage[dimension];\n  var len = this.count();\n  var chunkSize = this._chunkSize;\n  var rawExtentOnDim = list._rawExtent[dimension];\n  var newIndices = new (getIndicesCtor(this))(len);\n  var offset = 0;\n\n  for (var i = 0; i < len; i += frameSize) {\n    // Last frame\n    if (frameSize > len - i) {\n      frameSize = len - i;\n      frameValues.length = frameSize;\n    }\n\n    for (var k = 0; k < frameSize; k++) {\n      var dataIdx = this.getRawIndex(i + k);\n      var originalChunkIndex = Math.floor(dataIdx / chunkSize);\n      var originalChunkOffset = dataIdx % chunkSize;\n      frameValues[k] = dimStore[originalChunkIndex][originalChunkOffset];\n    }\n\n    var value = sampleValue(frameValues);\n    var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1));\n    var sampleChunkIndex = Math.floor(sampleFrameIdx / chunkSize);\n    var sampleChunkOffset = sampleFrameIdx % chunkSize; // Only write value on the filtered data\n\n    dimStore[sampleChunkIndex][sampleChunkOffset] = value;\n\n    if (value < rawExtentOnDim[0]) {\n      rawExtentOnDim[0] = value;\n    }\n\n    if (value > rawExtentOnDim[1]) {\n      rawExtentOnDim[1] = value;\n    }\n\n    newIndices[offset++] = sampleFrameIdx;\n  }\n\n  list._count = offset;\n  list._indices = newIndices;\n  list.getRawIndex = getRawIndexWithIndices;\n  return list;\n};\n/**\n * Get model of one data item.\n *\n * @param {number} idx\n */\n// FIXME Model proxy ?\n\n\nlistProto.getItemModel = function (idx) {\n  var hostModel = this.hostModel;\n  return new Model(this.getRawDataItem(idx), hostModel, hostModel && hostModel.ecModel);\n};\n/**\n * Create a data differ\n * @param {module:echarts/data/List} otherList\n * @return {module:echarts/data/DataDiffer}\n */\n\n\nlistProto.diff = function (otherList) {\n  var thisList = this;\n  return new DataDiffer(otherList ? otherList.getIndices() : [], this.getIndices(), function (idx) {\n    return getId(otherList, idx);\n  }, function (idx) {\n    return getId(thisList, idx);\n  });\n};\n/**\n * Get visual property.\n * @param {string} key\n */\n\n\nlistProto.getVisual = function (key) {\n  var visual = this._visual;\n  return visual && visual[key];\n};\n/**\n * Set visual property\n * @param {string|Object} key\n * @param {*} [value]\n *\n * @example\n *  setVisual('color', color);\n *  setVisual({\n *      'color': color\n *  });\n */\n\n\nlistProto.setVisual = function (key, val) {\n  if (isObject(key)) {\n    for (var name in key) {\n      if (key.hasOwnProperty(name)) {\n        this.setVisual(name, key[name]);\n      }\n    }\n\n    return;\n  }\n\n  this._visual = this._visual || {};\n  this._visual[key] = val;\n};\n/**\n * Set layout property.\n * @param {string|Object} key\n * @param {*} [val]\n */\n\n\nlistProto.setLayout = function (key, val) {\n  if (isObject(key)) {\n    for (var name in key) {\n      if (key.hasOwnProperty(name)) {\n        this.setLayout(name, key[name]);\n      }\n    }\n\n    return;\n  }\n\n  this._layout[key] = val;\n};\n/**\n * Get layout property.\n * @param  {string} key.\n * @return {*}\n */\n\n\nlistProto.getLayout = function (key) {\n  return this._layout[key];\n};\n/**\n * Get layout of single data item\n * @param {number} idx\n */\n\n\nlistProto.getItemLayout = function (idx) {\n  return this._itemLayouts[idx];\n};\n/**\n * Set layout of single data item\n * @param {number} idx\n * @param {Object} layout\n * @param {boolean=} [merge=false]\n */\n\n\nlistProto.setItemLayout = function (idx, layout, merge) {\n  this._itemLayouts[idx] = merge ? zrUtil.extend(this._itemLayouts[idx] || {}, layout) : layout;\n};\n/**\n * Clear all layout of single data item\n */\n\n\nlistProto.clearItemLayouts = function () {\n  this._itemLayouts.length = 0;\n};\n/**\n * Get visual property of single data item\n * @param {number} idx\n * @param {string} key\n * @param {boolean} [ignoreParent=false]\n */\n\n\nlistProto.getItemVisual = function (idx, key, ignoreParent) {\n  var itemVisual = this._itemVisuals[idx];\n  var val = itemVisual && itemVisual[key];\n\n  if (val == null && !ignoreParent) {\n    // Use global visual property\n    return this.getVisual(key);\n  }\n\n  return val;\n};\n/**\n * Set visual property of single data item\n *\n * @param {number} idx\n * @param {string|Object} key\n * @param {*} [value]\n *\n * @example\n *  setItemVisual(0, 'color', color);\n *  setItemVisual(0, {\n *      'color': color\n *  });\n */\n\n\nlistProto.setItemVisual = function (idx, key, value) {\n  var itemVisual = this._itemVisuals[idx] || {};\n  var hasItemVisual = this.hasItemVisual;\n  this._itemVisuals[idx] = itemVisual;\n\n  if (isObject(key)) {\n    for (var name in key) {\n      if (key.hasOwnProperty(name)) {\n        itemVisual[name] = key[name];\n        hasItemVisual[name] = true;\n      }\n    }\n\n    return;\n  }\n\n  itemVisual[key] = value;\n  hasItemVisual[key] = true;\n};\n/**\n * Clear itemVisuals and list visual.\n */\n\n\nlistProto.clearAllVisual = function () {\n  this._visual = {};\n  this._itemVisuals = [];\n  this.hasItemVisual = {};\n};\n\nvar setItemDataAndSeriesIndex = function (child) {\n  child.seriesIndex = this.seriesIndex;\n  child.dataIndex = this.dataIndex;\n  child.dataType = this.dataType;\n};\n/**\n * Set graphic element relative to data. It can be set as null\n * @param {number} idx\n * @param {module:zrender/Element} [el]\n */\n\n\nlistProto.setItemGraphicEl = function (idx, el) {\n  var hostModel = this.hostModel;\n\n  if (el) {\n    // Add data index and series index for indexing the data by element\n    // Useful in tooltip\n    el.dataIndex = idx;\n    el.dataType = this.dataType;\n    el.seriesIndex = hostModel && hostModel.seriesIndex;\n\n    if (el.type === 'group') {\n      el.traverse(setItemDataAndSeriesIndex, el);\n    }\n  }\n\n  this._graphicEls[idx] = el;\n};\n/**\n * @param {number} idx\n * @return {module:zrender/Element}\n */\n\n\nlistProto.getItemGraphicEl = function (idx) {\n  return this._graphicEls[idx];\n};\n/**\n * @param {Function} cb\n * @param {*} context\n */\n\n\nlistProto.eachItemGraphicEl = function (cb, context) {\n  zrUtil.each(this._graphicEls, function (el, idx) {\n    if (el) {\n      cb && cb.call(context, el, idx);\n    }\n  });\n};\n/**\n * Shallow clone a new list except visual and layout properties, and graph elements.\n * New list only change the indices.\n */\n\n\nlistProto.cloneShallow = function (list) {\n  if (!list) {\n    var dimensionInfoList = zrUtil.map(this.dimensions, this.getDimensionInfo, this);\n    list = new List(dimensionInfoList, this.hostModel);\n  } // FIXME\n\n\n  list._storage = this._storage;\n  transferProperties(list, this); // Clone will not change the data extent and indices\n\n  if (this._indices) {\n    var Ctor = this._indices.constructor;\n    list._indices = new Ctor(this._indices);\n  } else {\n    list._indices = null;\n  }\n\n  list.getRawIndex = list._indices ? getRawIndexWithIndices : getRawIndexWithoutIndices;\n  return list;\n};\n/**\n * Wrap some method to add more feature\n * @param {string} methodName\n * @param {Function} injectFunction\n */\n\n\nlistProto.wrapMethod = function (methodName, injectFunction) {\n  var originalMethod = this[methodName];\n\n  if (typeof originalMethod !== 'function') {\n    return;\n  }\n\n  this.__wrappedMethods = this.__wrappedMethods || [];\n\n  this.__wrappedMethods.push(methodName);\n\n  this[methodName] = function () {\n    var res = originalMethod.apply(this, arguments);\n    return injectFunction.apply(this, [res].concat(zrUtil.slice(arguments)));\n  };\n}; // Methods that create a new list based on this list should be listed here.\n// Notice that those method should `RETURN` the new list.\n\n\nlistProto.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'map']; // Methods that change indices of this list should be listed here.\n\nlistProto.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\nvar _default = List;\nmodule.exports = _default;","/**\n * 3x2\n * @exports zrender/tool/matrix\n */\n\n/* global Float32Array */\nvar ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;\n/**\n * Create a identity matrix.\n * @return {Float32Array|Array.<number>}\n */\n\nfunction create() {\n  var out = new ArrayCtor(6);\n  identity(out);\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n */\n\n\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} m\n */\n\n\nfunction copy(out, m) {\n  out[0] = m[0];\n  out[1] = m[1];\n  out[2] = m[2];\n  out[3] = m[3];\n  out[4] = m[4];\n  out[5] = m[5];\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} m1\n * @param {Float32Array|Array.<number>} m2\n */\n\n\nfunction mul(out, m1, m2) {\n  // Consider matrix.mul(m, m2, m);\n  // where out is the same as m2.\n  // So use temp variable to escape error.\n  var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n  var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n  var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n  var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n  var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n  var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = out3;\n  out[4] = out4;\n  out[5] = out5;\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {Float32Array|Array.<number>} v\n */\n\n\nfunction translate(out, a, v) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4] + v[0];\n  out[5] = a[5] + v[1];\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {number} rad\n */\n\n\nfunction rotate(out, a, rad) {\n  var aa = a[0];\n  var ac = a[2];\n  var atx = a[4];\n  var ab = a[1];\n  var ad = a[3];\n  var aty = a[5];\n  var st = Math.sin(rad);\n  var ct = Math.cos(rad);\n  out[0] = aa * ct + ab * st;\n  out[1] = -aa * st + ab * ct;\n  out[2] = ac * ct + ad * st;\n  out[3] = -ac * st + ct * ad;\n  out[4] = ct * atx + st * aty;\n  out[5] = ct * aty - st * atx;\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {Float32Array|Array.<number>} v\n */\n\n\nfunction scale(out, a, v) {\n  var vx = v[0];\n  var vy = v[1];\n  out[0] = a[0] * vx;\n  out[1] = a[1] * vy;\n  out[2] = a[2] * vx;\n  out[3] = a[3] * vy;\n  out[4] = a[4] * vx;\n  out[5] = a[5] * vy;\n  return out;\n}\n/**\n * \n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n */\n\n\nfunction invert(out, a) {\n  var aa = a[0];\n  var ac = a[2];\n  var atx = a[4];\n  var ab = a[1];\n  var ad = a[3];\n  var aty = a[5];\n  var det = aa * ad - ab * ac;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n/**\n * Clone a new matrix.\n * @param {Float32Array|Array.<number>} a\n */\n\n\nfunction clone(a) {\n  var b = create();\n  copy(b, a);\n  return b;\n}\n\nexports.create = create;\nexports.identity = identity;\nexports.copy = copy;\nexports.mul = mul;\nexports.translate = translate;\nexports.rotate = rotate;\nexports.scale = scale;\nexports.invert = invert;\nexports.clone = clone;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"./graphic\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _text = require(\"zrender/lib/contain/text\");\n\nvar calculateTextPosition = _text.calculateTextPosition;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Symbol factory\n\n/**\n * Triangle shape\n * @inner\n */\nvar Triangle = graphic.extendShape({\n  type: 'triangle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy + height);\n    path.lineTo(cx - width, cy + height);\n    path.closePath();\n  }\n});\n/**\n * Diamond shape\n * @inner\n */\n\nvar Diamond = graphic.extendShape({\n  type: 'diamond',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy);\n    path.lineTo(cx, cy + height);\n    path.lineTo(cx - width, cy);\n    path.closePath();\n  }\n});\n/**\n * Pin shape\n * @inner\n */\n\nvar Pin = graphic.extendShape({\n  type: 'pin',\n  shape: {\n    // x, y on the cusp\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var w = shape.width / 5 * 3; // Height must be larger than width\n\n    var h = Math.max(w, shape.height);\n    var r = w / 2; // Dist on y with tangent point and circle center\n\n    var dy = r * r / (h - r);\n    var cy = y - h + r + dy;\n    var angle = Math.asin(dy / r); // Dist on x with tangent point and circle center\n\n    var dx = Math.cos(angle) * r;\n    var tanX = Math.sin(angle);\n    var tanY = Math.cos(angle);\n    var cpLen = r * 0.6;\n    var cpLen2 = r * 0.7;\n    path.moveTo(x - dx, cy + dy);\n    path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\n    path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\n    path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\n    path.closePath();\n  }\n});\n/**\n * Arrow shape\n * @inner\n */\n\nvar Arrow = graphic.extendShape({\n  type: 'arrow',\n  shape: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var height = shape.height;\n    var width = shape.width;\n    var x = shape.x;\n    var y = shape.y;\n    var dx = width / 3 * 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + dx, y + height);\n    ctx.lineTo(x, y + height / 4 * 3);\n    ctx.lineTo(x - dx, y + height);\n    ctx.lineTo(x, y);\n    ctx.closePath();\n  }\n});\n/**\n * Map of path contructors\n * @type {Object.<string, module:zrender/graphic/Path>}\n */\n\nvar symbolCtors = {\n  line: graphic.Line,\n  rect: graphic.Rect,\n  roundRect: graphic.Rect,\n  square: graphic.Rect,\n  circle: graphic.Circle,\n  diamond: Diamond,\n  pin: Pin,\n  arrow: Arrow,\n  triangle: Triangle\n};\nvar symbolShapeMakers = {\n  line: function (x, y, w, h, shape) {\n    // FIXME\n    shape.x1 = x;\n    shape.y1 = y + h / 2;\n    shape.x2 = x + w;\n    shape.y2 = y + h / 2;\n  },\n  rect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n  },\n  roundRect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n    shape.r = Math.min(w, h) / 4;\n  },\n  square: function (x, y, w, h, shape) {\n    var size = Math.min(w, h);\n    shape.x = x;\n    shape.y = y;\n    shape.width = size;\n    shape.height = size;\n  },\n  circle: function (x, y, w, h, shape) {\n    // Put circle in the center of square\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.r = Math.min(w, h) / 2;\n  },\n  diamond: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  pin: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  arrow: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  triangle: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  }\n};\nvar symbolBuildProxies = {};\nzrUtil.each(symbolCtors, function (Ctor, name) {\n  symbolBuildProxies[name] = new Ctor();\n});\nvar SymbolClz = graphic.extendShape({\n  type: 'symbol',\n  shape: {\n    symbolType: '',\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  calculateTextPosition: function (out, style, rect) {\n    var res = calculateTextPosition(out, style, rect);\n    var shape = this.shape;\n\n    if (shape && shape.symbolType === 'pin' && style.textPosition === 'inside') {\n      res.y = rect.y + rect.height * 0.4;\n    }\n\n    return res;\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    var symbolType = shape.symbolType;\n\n    if (symbolType !== 'none') {\n      var proxySymbol = symbolBuildProxies[symbolType];\n\n      if (!proxySymbol) {\n        // Default rect\n        symbolType = 'rect';\n        proxySymbol = symbolBuildProxies[symbolType];\n      }\n\n      symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\n      proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\n    }\n  }\n}); // Provide setColor helper method to avoid determine if set the fill or stroke outside\n\nfunction symbolPathSetColor(color, innerColor) {\n  if (this.type !== 'image') {\n    var symbolStyle = this.style;\n    var symbolShape = this.shape;\n\n    if (symbolShape && symbolShape.symbolType === 'line') {\n      symbolStyle.stroke = color;\n    } else if (this.__isEmptyBrush) {\n      symbolStyle.stroke = color;\n      symbolStyle.fill = innerColor || '#fff';\n    } else {\n      // FIXME  onlyStroke ?\n      symbolStyle.fill && (symbolStyle.fill = color);\n      symbolStyle.stroke && (symbolStyle.stroke = color);\n    }\n\n    this.dirty(false);\n  }\n}\n/**\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\n * @param {string} symbolType\n * @param {number} x\n * @param {number} y\n * @param {number} w\n * @param {number} h\n * @param {string} color\n * @param {boolean} [keepAspect=false] whether to keep the ratio of w/h,\n *                            for path and image only.\n */\n\n\nfunction createSymbol(symbolType, x, y, w, h, color, keepAspect) {\n  // TODO Support image object, DynamicImage.\n  var isEmpty = symbolType.indexOf('empty') === 0;\n\n  if (isEmpty) {\n    symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\n  }\n\n  var symbolPath;\n\n  if (symbolType.indexOf('image://') === 0) {\n    symbolPath = graphic.makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else if (symbolType.indexOf('path://') === 0) {\n    symbolPath = graphic.makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else {\n    symbolPath = new SymbolClz({\n      shape: {\n        symbolType: symbolType,\n        x: x,\n        y: y,\n        width: w,\n        height: h\n      }\n    });\n  }\n\n  symbolPath.__isEmptyBrush = isEmpty;\n  symbolPath.setColor = symbolPathSetColor;\n  symbolPath.setColor(color);\n  return symbolPath;\n}\n\nexports.createSymbol = createSymbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar coordinateSystemCreators = {};\n\nfunction CoordinateSystemManager() {\n  this._coordinateSystems = [];\n}\n\nCoordinateSystemManager.prototype = {\n  constructor: CoordinateSystemManager,\n  create: function (ecModel, api) {\n    var coordinateSystems = [];\n    zrUtil.each(coordinateSystemCreators, function (creater, type) {\n      var list = creater.create(ecModel, api);\n      coordinateSystems = coordinateSystems.concat(list || []);\n    });\n    this._coordinateSystems = coordinateSystems;\n  },\n  update: function (ecModel, api) {\n    zrUtil.each(this._coordinateSystems, function (coordSys) {\n      coordSys.update && coordSys.update(ecModel, api);\n    });\n  },\n  getCoordinateSystems: function () {\n    return this._coordinateSystems.slice();\n  }\n};\n\nCoordinateSystemManager.register = function (type, coordinateSystemCreator) {\n  coordinateSystemCreators[type] = coordinateSystemCreator;\n};\n\nCoordinateSystemManager.get = function (type) {\n  return coordinateSystemCreators[type];\n};\n\nvar _default = CoordinateSystemManager;\nmodule.exports = _default;","var Displayable = require(\"./Displayable\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar pathContain = require(\"../contain/path\");\n\nvar Pattern = require(\"./Pattern\");\n\nvar getCanvasPattern = Pattern.prototype.getCanvasPattern;\nvar abs = Math.abs;\nvar pathProxyForDraw = new PathProxy(true);\n/**\n * @alias module:zrender/graphic/Path\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\n\nfunction Path(opts) {\n  Displayable.call(this, opts);\n  /**\n   * @type {module:zrender/core/PathProxy}\n   * @readOnly\n   */\n\n  this.path = null;\n}\n\nPath.prototype = {\n  constructor: Path,\n  type: 'path',\n  __dirtyPath: true,\n  strokeContainThreshold: 5,\n  // This item default to be false. But in map series in echarts,\n  // in order to improve performance, it should be set to true,\n  // so the shorty segment won't draw.\n  segmentIgnoreThreshold: 0,\n\n  /**\n   * See `module:zrender/src/graphic/helper/subPixelOptimize`.\n   * @type {boolean}\n   */\n  subPixelOptimize: false,\n  brush: function (ctx, prevEl) {\n    var style = this.style;\n    var path = this.path || pathProxyForDraw;\n    var hasStroke = style.hasStroke();\n    var hasFill = style.hasFill();\n    var fill = style.fill;\n    var stroke = style.stroke;\n    var hasFillGradient = hasFill && !!fill.colorStops;\n    var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n    var hasFillPattern = hasFill && !!fill.image;\n    var hasStrokePattern = hasStroke && !!stroke.image;\n    style.bind(ctx, this, prevEl);\n    this.setTransform(ctx);\n\n    if (this.__dirty) {\n      var rect; // Update gradient because bounding rect may changed\n\n      if (hasFillGradient) {\n        rect = rect || this.getBoundingRect();\n        this._fillGradient = style.getGradient(ctx, fill, rect);\n      }\n\n      if (hasStrokeGradient) {\n        rect = rect || this.getBoundingRect();\n        this._strokeGradient = style.getGradient(ctx, stroke, rect);\n      }\n    } // Use the gradient or pattern\n\n\n    if (hasFillGradient) {\n      // PENDING If may have affect the state\n      ctx.fillStyle = this._fillGradient;\n    } else if (hasFillPattern) {\n      ctx.fillStyle = getCanvasPattern.call(fill, ctx);\n    }\n\n    if (hasStrokeGradient) {\n      ctx.strokeStyle = this._strokeGradient;\n    } else if (hasStrokePattern) {\n      ctx.strokeStyle = getCanvasPattern.call(stroke, ctx);\n    }\n\n    var lineDash = style.lineDash;\n    var lineDashOffset = style.lineDashOffset;\n    var ctxLineDash = !!ctx.setLineDash; // Update path sx, sy\n\n    var scale = this.getGlobalScale();\n    path.setScale(scale[0], scale[1], this.segmentIgnoreThreshold); // Proxy context\n    // Rebuild path in following 2 cases\n    // 1. Path is dirty\n    // 2. Path needs javascript implemented lineDash stroking.\n    //    In this case, lineDash information will not be saved in PathProxy\n\n    if (this.__dirtyPath || lineDash && !ctxLineDash && hasStroke) {\n      path.beginPath(ctx); // Setting line dash before build path\n\n      if (lineDash && !ctxLineDash) {\n        path.setLineDash(lineDash);\n        path.setLineDashOffset(lineDashOffset);\n      }\n\n      this.buildPath(path, this.shape, false); // Clear path dirty flag\n\n      if (this.path) {\n        this.__dirtyPath = false;\n      }\n    } else {\n      // Replay path building\n      ctx.beginPath();\n      this.path.rebuildPath(ctx);\n    }\n\n    if (hasFill) {\n      if (style.fillOpacity != null) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.fillOpacity * style.opacity;\n        path.fill(ctx);\n        ctx.globalAlpha = originalGlobalAlpha;\n      } else {\n        path.fill(ctx);\n      }\n    }\n\n    if (lineDash && ctxLineDash) {\n      ctx.setLineDash(lineDash);\n      ctx.lineDashOffset = lineDashOffset;\n    }\n\n    if (hasStroke) {\n      if (style.strokeOpacity != null) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.strokeOpacity * style.opacity;\n        path.stroke(ctx);\n        ctx.globalAlpha = originalGlobalAlpha;\n      } else {\n        path.stroke(ctx);\n      }\n    }\n\n    if (lineDash && ctxLineDash) {\n      // PENDING\n      // Remove lineDash\n      ctx.setLineDash([]);\n    } // Draw rect text\n\n\n    if (style.text != null) {\n      // Only restore transform when needs draw text.\n      this.restoreTransform(ctx);\n      this.drawRectText(ctx, this.getBoundingRect());\n    }\n  },\n  // When bundling path, some shape may decide if use moveTo to begin a new subpath or closePath\n  // Like in circle\n  buildPath: function (ctx, shapeCfg, inBundle) {},\n  createPathProxy: function () {\n    this.path = new PathProxy();\n  },\n  getBoundingRect: function () {\n    var rect = this._rect;\n    var style = this.style;\n    var needsUpdateRect = !rect;\n\n    if (needsUpdateRect) {\n      var path = this.path;\n\n      if (!path) {\n        // Create path on demand.\n        path = this.path = new PathProxy();\n      }\n\n      if (this.__dirtyPath) {\n        path.beginPath();\n        this.buildPath(path, this.shape, false);\n      }\n\n      rect = path.getBoundingRect();\n    }\n\n    this._rect = rect;\n\n    if (style.hasStroke()) {\n      // Needs update rect with stroke lineWidth when\n      // 1. Element changes scale or lineWidth\n      // 2. Shape is changed\n      var rectWithStroke = this._rectWithStroke || (this._rectWithStroke = rect.clone());\n\n      if (this.__dirty || needsUpdateRect) {\n        rectWithStroke.copy(rect); // FIXME Must after updateTransform\n\n        var w = style.lineWidth; // PENDING, Min line width is needed when line is horizontal or vertical\n\n        var lineScale = style.strokeNoScale ? this.getLineScale() : 1; // Only add extra hover lineWidth when there are no fill\n\n        if (!style.hasFill()) {\n          w = Math.max(w, this.strokeContainThreshold || 4);\n        } // Consider line width\n        // Line scale can't be 0;\n\n\n        if (lineScale > 1e-10) {\n          rectWithStroke.width += w / lineScale;\n          rectWithStroke.height += w / lineScale;\n          rectWithStroke.x -= w / lineScale / 2;\n          rectWithStroke.y -= w / lineScale / 2;\n        }\n      } // Return rect with stroke\n\n\n      return rectWithStroke;\n    }\n\n    return rect;\n  },\n  contain: function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    var style = this.style;\n    x = localPos[0];\n    y = localPos[1];\n\n    if (rect.contain(x, y)) {\n      var pathData = this.path.data;\n\n      if (style.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var lineScale = style.strokeNoScale ? this.getLineScale() : 1; // Line scale can't be 0;\n\n        if (lineScale > 1e-10) {\n          // Only add extra hover lineWidth when there are no fill\n          if (!style.hasFill()) {\n            lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n          }\n\n          if (pathContain.containStroke(pathData, lineWidth / lineScale, x, y)) {\n            return true;\n          }\n        }\n      }\n\n      if (style.hasFill()) {\n        return pathContain.contain(pathData, x, y);\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * @param  {boolean} dirtyPath\n   */\n  dirty: function (dirtyPath) {\n    if (dirtyPath == null) {\n      dirtyPath = true;\n    } // Only mark dirty, not mark clean\n\n\n    if (dirtyPath) {\n      this.__dirtyPath = dirtyPath;\n      this._rect = null;\n    }\n\n    this.__dirty = this.__dirtyText = true;\n    this.__zr && this.__zr.refresh(); // Used as a clipping path\n\n    if (this.__clipTarget) {\n      this.__clipTarget.dirty();\n    }\n  },\n\n  /**\n   * Alias for animate('shape')\n   * @param {boolean} loop\n   */\n  animateShape: function (loop) {\n    return this.animate('shape', loop);\n  },\n  // Overwrite attrKV\n  attrKV: function (key, value) {\n    // FIXME\n    if (key === 'shape') {\n      this.setShape(value);\n      this.__dirtyPath = true;\n      this._rect = null;\n    } else {\n      Displayable.prototype.attrKV.call(this, key, value);\n    }\n  },\n\n  /**\n   * @param {Object|string} key\n   * @param {*} value\n   */\n  setShape: function (key, value) {\n    var shape = this.shape; // Path from string may not have shape\n\n    if (shape) {\n      if (zrUtil.isObject(key)) {\n        for (var name in key) {\n          if (key.hasOwnProperty(name)) {\n            shape[name] = key[name];\n          }\n        }\n      } else {\n        shape[key] = value;\n      }\n\n      this.dirty(true);\n    }\n\n    return this;\n  },\n  getLineScale: function () {\n    var m = this.transform; // Get the line scale.\n    // Determinant of `m` means how much the area is enlarged by the\n    // transformation. So its square root can be used as a scale factor\n    // for width.\n\n    return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10 ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1])) : 1;\n  }\n};\n/**\n *  Path element, \n * Extend a path element\n * @param {Object} props\n * @param {string} props.type Path type\n * @param {Function} props.init Initialize\n * @param {Function} props.buildPath Overwrite buildPath method\n * @param {Object} [props.style] Extended default style config\n * @param {Object} [props.shape] Extended default shape config\n */\n\nPath.extend = function (defaults) {\n  var Sub = function (opts) {\n    Path.call(this, opts);\n\n    if (defaults.style) {\n      // Extend default style\n      this.style.extendFrom(defaults.style, false);\n    } // Extend default shape\n\n\n    var defaultShape = defaults.shape;\n\n    if (defaultShape) {\n      this.shape = this.shape || {};\n      var thisShape = this.shape;\n\n      for (var name in defaultShape) {\n        if (!thisShape.hasOwnProperty(name) && defaultShape.hasOwnProperty(name)) {\n          thisShape[name] = defaultShape[name];\n        }\n      }\n    }\n\n    defaults.init && defaults.init.call(this, opts);\n  };\n\n  zrUtil.inherits(Sub, Path); // FIXME  extend position, rotation \n\n  for (var name in defaults) {\n    // Extending prototype values and methods\n    if (name !== 'style' && name !== 'shape') {\n      Sub.prototype[name] = defaults[name];\n    }\n  }\n\n  return Sub;\n};\n\nzrUtil.inherits(Path, Displayable);\nvar _default = Path;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar clazzUtil = require(\"../util/clazz\");\n\nvar modelUtil = require(\"../util/model\");\n\nvar graphicUtil = require(\"../util/graphic\");\n\nvar _task = require(\"../stream/task\");\n\nvar createTask = _task.createTask;\n\nvar createRenderPlanner = require(\"../chart/helper/createRenderPlanner\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = modelUtil.makeInner();\nvar renderPlanner = createRenderPlanner();\n\nfunction Chart() {\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n  this.group = new Group();\n  /**\n   * @type {string}\n   * @readOnly\n   */\n\n  this.uid = componentUtil.getUID('viewChart');\n  this.renderTask = createTask({\n    plan: renderTaskPlan,\n    reset: renderTaskReset\n  });\n  this.renderTask.context = {\n    view: this\n  };\n}\n\nChart.prototype = {\n  type: 'chart',\n\n  /**\n   * Init the chart.\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  init: function (ecModel, api) {},\n\n  /**\n   * Render the chart.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  render: function (seriesModel, ecModel, api, payload) {},\n\n  /**\n   * Highlight series or specified data item.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  highlight: function (seriesModel, ecModel, api, payload) {\n    toggleHighlight(seriesModel.getData(), payload, 'emphasis');\n  },\n\n  /**\n   * Downplay series or specified data item.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  downplay: function (seriesModel, ecModel, api, payload) {\n    toggleHighlight(seriesModel.getData(), payload, 'normal');\n  },\n\n  /**\n   * Remove self.\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  remove: function (ecModel, api) {\n    this.group.removeAll();\n  },\n\n  /**\n   * Dispose self.\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  dispose: function () {},\n\n  /**\n   * Rendering preparation in progressive mode.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  incrementalPrepareRender: null,\n\n  /**\n   * Render in progressive mode.\n   * @param  {Object} params See taskParams in `stream/task.js`\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  incrementalRender: null,\n\n  /**\n   * Update transform directly.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   * @return {Object} {update: true}\n   */\n  updateTransform: null,\n\n  /**\n   * The view contains the given point.\n   * @interface\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  // containPoint: function () {}\n\n  /**\n   * @param {string} eventType\n   * @param {Object} query\n   * @param {module:zrender/Element} targetEl\n   * @param {Object} packedEvent\n   * @return {boolen} Pass only when return `true`.\n   */\n  filterForExposedEvent: null\n};\nvar chartProto = Chart.prototype;\n\nchartProto.updateView = chartProto.updateLayout = chartProto.updateVisual = function (seriesModel, ecModel, api, payload) {\n  this.render(seriesModel, ecModel, api, payload);\n};\n/**\n * Set state of single element\n * @param {module:zrender/Element} el\n * @param {string} state 'normal'|'emphasis'\n * @param {number} highlightDigit\n */\n\n\nfunction elSetState(el, state, highlightDigit) {\n  if (el) {\n    el.trigger(state, highlightDigit);\n\n    if (el.isGroup // Simple optimize.\n    && !graphicUtil.isHighDownDispatcher(el)) {\n      for (var i = 0, len = el.childCount(); i < len; i++) {\n        elSetState(el.childAt(i), state, highlightDigit);\n      }\n    }\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Object} payload\n * @param {string} state 'normal'|'emphasis'\n */\n\n\nfunction toggleHighlight(data, payload, state) {\n  var dataIndex = modelUtil.queryDataIndex(data, payload);\n  var highlightDigit = payload && payload.highlightKey != null ? graphicUtil.getHighlightDigit(payload.highlightKey) : null;\n\n  if (dataIndex != null) {\n    each(modelUtil.normalizeToArray(dataIndex), function (dataIdx) {\n      elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\n    });\n  } else {\n    data.eachItemGraphicEl(function (el) {\n      elSetState(el, state, highlightDigit);\n    });\n  }\n} // Enable Chart.extend.\n\n\nclazzUtil.enableClassExtend(Chart, ['dispose']); // Add capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nclazzUtil.enableClassManagement(Chart, {\n  registerWhenExtend: true\n});\n\nChart.markUpdateMethod = function (payload, methodName) {\n  inner(payload).updateMethod = methodName;\n};\n\nfunction renderTaskPlan(context) {\n  return renderPlanner(context.model);\n}\n\nfunction renderTaskReset(context) {\n  var seriesModel = context.model;\n  var ecModel = context.ecModel;\n  var api = context.api;\n  var payload = context.payload; // ???! remove updateView updateVisual\n\n  var progressiveRender = seriesModel.pipelineContext.progressiveRender;\n  var view = context.view;\n  var updateMethod = payload && inner(payload).updateMethod;\n  var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod // `appendData` is also supported when data amount\n  // is less than progressive threshold.\n  : 'render';\n\n  if (methodName !== 'render') {\n    view[methodName](seriesModel, ecModel, api, payload);\n  }\n\n  return progressMethodMap[methodName];\n}\n\nvar progressMethodMap = {\n  incrementalPrepareRender: {\n    progress: function (params, context) {\n      context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\n    }\n  },\n  render: {\n    // Put view.render in `progress` to support appendData. But in this case\n    // view.render should not be called in reset, otherwise it will be called\n    // twise. Use `forceFirstProgress` to make sure that view.render is called\n    // in any cases.\n    forceFirstProgress: true,\n    progress: function (params, context) {\n      context.view.render(context.model, context.ecModel, context.api, context.payload);\n    }\n  }\n};\nvar _default = Chart;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar List = require(\"../../data/List\");\n\nvar createDimensions = require(\"../../data/helper/createDimensions\");\n\nvar _sourceType = require(\"../../data/helper/sourceType\");\n\nvar SOURCE_FORMAT_ORIGINAL = _sourceType.SOURCE_FORMAT_ORIGINAL;\n\nvar _dimensionHelper = require(\"../../data/helper/dimensionHelper\");\n\nvar getDimensionTypeByAxis = _dimensionHelper.getDimensionTypeByAxis;\n\nvar _model = require(\"../../util/model\");\n\nvar getDataItemValue = _model.getDataItemValue;\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar _referHelper = require(\"../../model/referHelper\");\n\nvar getCoordSysInfoBySeries = _referHelper.getCoordSysInfoBySeries;\n\nvar Source = require(\"../../data/Source\");\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar enableDataStack = _dataStackHelper.enableDataStack;\n\nvar _sourceHelper = require(\"../../data/helper/sourceHelper\");\n\nvar makeSeriesEncodeForAxisCoordSys = _sourceHelper.makeSeriesEncodeForAxisCoordSys;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/data/Source|Array} source Or raw data.\n * @param {module:echarts/model/Series} seriesModel\n * @param {Object} [opt]\n * @param {string} [opt.generateCoord]\n * @param {boolean} [opt.useEncodeDefaulter]\n */\nfunction createListFromArray(source, seriesModel, opt) {\n  opt = opt || {};\n\n  if (!Source.isInstance(source)) {\n    source = Source.seriesDataToSource(source);\n  }\n\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n  var coordSysDimDefs;\n\n  if (coordSysInfo) {\n    coordSysDimDefs = zrUtil.map(coordSysInfo.coordSysDims, function (dim) {\n      var dimInfo = {\n        name: dim\n      };\n      var axisModel = coordSysInfo.axisMap.get(dim);\n\n      if (axisModel) {\n        var axisType = axisModel.get('type');\n        dimInfo.type = getDimensionTypeByAxis(axisType); // dimInfo.stackable = isStackable(axisType);\n      }\n\n      return dimInfo;\n    });\n  }\n\n  if (!coordSysDimDefs) {\n    // Get dimensions from registered coordinate system\n    coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n  }\n\n  var dimInfoList = createDimensions(source, {\n    coordDimensions: coordSysDimDefs,\n    generateCoord: opt.generateCoord,\n    encodeDefaulter: opt.useEncodeDefaulter ? zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null\n  });\n  var firstCategoryDimIndex;\n  var hasNameEncode;\n  coordSysInfo && zrUtil.each(dimInfoList, function (dimInfo, dimIndex) {\n    var coordDim = dimInfo.coordDim;\n    var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n\n    if (categoryAxisModel) {\n      if (firstCategoryDimIndex == null) {\n        firstCategoryDimIndex = dimIndex;\n      }\n\n      dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n    }\n\n    if (dimInfo.otherDims.itemName != null) {\n      hasNameEncode = true;\n    }\n  });\n\n  if (!hasNameEncode && firstCategoryDimIndex != null) {\n    dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n  }\n\n  var stackCalculationInfo = enableDataStack(seriesModel, dimInfoList);\n  var list = new List(dimInfoList, seriesModel);\n  list.setCalculationInfo(stackCalculationInfo);\n  var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source) ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // Use dataIndex as ordinal value in categoryAxis\n    return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n  } : null;\n  list.hasItemOption = false;\n  list.initData(source, null, dimValueGetter);\n  return list;\n}\n\nfunction isNeedCompleteOrdinalData(source) {\n  if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var sampleItem = firstDataNotNull(source.data || []);\n    return sampleItem != null && !zrUtil.isArray(getDataItemValue(sampleItem));\n  }\n}\n\nfunction firstDataNotNull(data) {\n  var i = 0;\n\n  while (i < data.length && data[i] == null) {\n    i++;\n  }\n\n  return data[i];\n}\n\nvar _default = createListFromArray;\nmodule.exports = _default;","/**\n * echarts\n *\n * @desc echartsCanvasJavascript\n * @author firede[firede@firede.us]\n * @desc thanks zepto.\n */\n\n/* global wx */\nvar env = {};\n\nif (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n  // In Weixin Application\n  env = {\n    browser: {},\n    os: {},\n    node: false,\n    wxa: true,\n    // Weixin Application\n    canvasSupported: true,\n    svgSupported: false,\n    touchEventsSupported: true,\n    domSupported: false\n  };\n} else if (typeof document === 'undefined' && typeof self !== 'undefined') {\n  // In worker\n  env = {\n    browser: {},\n    os: {},\n    node: false,\n    worker: true,\n    canvasSupported: true,\n    domSupported: false\n  };\n} else if (typeof navigator === 'undefined') {\n  // In node\n  env = {\n    browser: {},\n    os: {},\n    node: true,\n    worker: false,\n    // Assume canvas is supported\n    canvasSupported: true,\n    svgSupported: true,\n    domSupported: false\n  };\n} else {\n  env = detect(navigator.userAgent);\n}\n\nvar _default = env; // Zepto.js\n// (c) 2010-2013 Thomas Fuchs\n// Zepto.js may be freely distributed under the MIT license.\n\nfunction detect(ua) {\n  var os = {};\n  var browser = {}; // var webkit = ua.match(/Web[kK]it[\\/]{0,1}([\\d.]+)/);\n  // var android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n  // var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n  // var ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n  // var iphone = !ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n  // var webos = ua.match(/(webOS|hpwOS)[\\s\\/]([\\d.]+)/);\n  // var touchpad = webos && ua.match(/TouchPad/);\n  // var kindle = ua.match(/Kindle\\/([\\d.]+)/);\n  // var silk = ua.match(/Silk\\/([\\d._]+)/);\n  // var blackberry = ua.match(/(BlackBerry).*Version\\/([\\d.]+)/);\n  // var bb10 = ua.match(/(BB10).*Version\\/([\\d.]+)/);\n  // var rimtabletos = ua.match(/(RIM\\sTablet\\sOS)\\s([\\d.]+)/);\n  // var playbook = ua.match(/PlayBook/);\n  // var chrome = ua.match(/Chrome\\/([\\d.]+)/) || ua.match(/CriOS\\/([\\d.]+)/);\n\n  var firefox = ua.match(/Firefox\\/([\\d.]+)/); // var safari = webkit && ua.match(/Mobile\\//) && !chrome;\n  // var webview = ua.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/) && !chrome;\n\n  var ie = ua.match(/MSIE\\s([\\d.]+)/) // IE 11 Trident/7.0; rv:11.0\n  || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n  var edge = ua.match(/Edge\\/([\\d.]+)/); // IE 12 and 12+\n\n  var weChat = /micromessenger/i.test(ua); // Todo: clean this up with a better OS/browser seperation:\n  // - discern (more) between multiple browsers on android\n  // - decide if kindle fire in silk mode is android or not\n  // - Firefox on Android doesn't specify the Android version\n  // - possibly devide in os, device and browser hashes\n  // if (browser.webkit = !!webkit) browser.version = webkit[1];\n  // if (android) os.android = true, os.version = android[2];\n  // if (iphone && !ipod) os.ios = os.iphone = true, os.version = iphone[2].replace(/_/g, '.');\n  // if (ipad) os.ios = os.ipad = true, os.version = ipad[2].replace(/_/g, '.');\n  // if (ipod) os.ios = os.ipod = true, os.version = ipod[3] ? ipod[3].replace(/_/g, '.') : null;\n  // if (webos) os.webos = true, os.version = webos[2];\n  // if (touchpad) os.touchpad = true;\n  // if (blackberry) os.blackberry = true, os.version = blackberry[2];\n  // if (bb10) os.bb10 = true, os.version = bb10[2];\n  // if (rimtabletos) os.rimtabletos = true, os.version = rimtabletos[2];\n  // if (playbook) browser.playbook = true;\n  // if (kindle) os.kindle = true, os.version = kindle[1];\n  // if (silk) browser.silk = true, browser.version = silk[1];\n  // if (!silk && os.android && ua.match(/Kindle Fire/)) browser.silk = true;\n  // if (chrome) browser.chrome = true, browser.version = chrome[1];\n\n  if (firefox) {\n    browser.firefox = true;\n    browser.version = firefox[1];\n  } // if (safari && (ua.match(/Safari/) || !!os.ios)) browser.safari = true;\n  // if (webview) browser.webview = true;\n\n\n  if (ie) {\n    browser.ie = true;\n    browser.version = ie[1];\n  }\n\n  if (edge) {\n    browser.edge = true;\n    browser.version = edge[1];\n  } // It is difficult to detect WeChat in Win Phone precisely, because ua can\n  // not be set on win phone. So we do not consider Win Phone.\n\n\n  if (weChat) {\n    browser.weChat = true;\n  } // os.tablet = !!(ipad || playbook || (android && !ua.match(/Mobile/)) ||\n  //     (firefox && ua.match(/Tablet/)) || (ie && !ua.match(/Phone/) && ua.match(/Touch/)));\n  // os.phone  = !!(!os.tablet && !os.ipod && (android || iphone || webos ||\n  //     (chrome && ua.match(/Android/)) || (chrome && ua.match(/CriOS\\/([\\d.]+)/)) ||\n  //     (firefox && ua.match(/Mobile/)) || (ie && ua.match(/Touch/))));\n\n\n  return {\n    browser: browser,\n    os: os,\n    node: false,\n    // canvas\n    // canvasSupported : !(browser.ie && parseFloat(browser.version) < 9)\n    canvasSupported: !!document.createElement('canvas').getContext,\n    svgSupported: typeof SVGRect !== 'undefined',\n    // works on most browsers\n    // IE10/11 does not support touch event, and MS Edge supports them but not by\n    // default, so we dont check navigator.maxTouchPoints for them here.\n    touchEventsSupported: 'ontouchstart' in window && !browser.ie && !browser.edge,\n    // <http://caniuse.com/#search=pointer%20event>.\n    pointerEventsSupported: // (1) Firefox supports pointer but not by default, only MS browsers are reliable on pointer\n    // events currently. So we dont use that on other browsers unless tested sufficiently.\n    // For example, in iOS 13 Mobile Chromium 78, if the touching behavior starts page\n    // scroll, the `pointermove` event can not be fired any more. That will break some\n    // features like \"pan horizontally to move something and pan vertically to page scroll\".\n    // The horizontal pan probably be interrupted by the casually triggered page scroll.\n    // (2) Although IE 10 supports pointer event, it use old style and is different from the\n    // standard. So we exclude that. (IE 10 is hardly used on touch device)\n    'onpointerdown' in window && (browser.edge || browser.ie && browser.version >= 11),\n    // passiveSupported: detectPassiveSupport()\n    domSupported: typeof document !== 'undefined'\n  };\n} // See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\n// function detectPassiveSupport() {\n//     // Test via a getter in the options object to see if the passive property is accessed\n//     var supportsPassive = false;\n//     try {\n//         var opts = Object.defineProperty({}, 'passive', {\n//             get: function() {\n//                 supportsPassive = true;\n//             }\n//         });\n//         window.addEventListener('testPassive', function() {}, opts);\n//     } catch (e) {\n//     }\n//     return supportsPassive;\n// }\n\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Language: (Simplified) Chinese.\n */\nvar _default = {\n  legend: {\n    selector: {\n      all: '',\n      inverse: ''\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: '',\n        polygon: '',\n        lineX: '',\n        lineY: '',\n        keep: '',\n        clear: ''\n      }\n    },\n    dataView: {\n      title: '',\n      lang: ['', '', '']\n    },\n    dataZoom: {\n      title: {\n        zoom: '',\n        back: ''\n      }\n    },\n    magicType: {\n      title: {\n        line: '',\n        bar: '',\n        stack: '',\n        tiled: ''\n      }\n    },\n    restore: {\n      title: ''\n    },\n    saveAsImage: {\n      title: '',\n      lang: ['']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: '',\n      bar: '',\n      line: '',\n      scatter: '',\n      effectScatter: '',\n      radar: '',\n      tree: '',\n      treemap: '',\n      boxplot: '',\n      candlestick: 'K',\n      k: 'K',\n      heatmap: '',\n      map: '',\n      parallel: '',\n      lines: '',\n      graph: '',\n      sankey: '',\n      funnel: '',\n      gauge: '',\n      pictorialBar: '',\n      themeRiver: '',\n      sunburst: ''\n    }\n  },\n  aria: {\n    general: {\n      withTitle: '{title}',\n      withoutTitle: ''\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: '{seriesType}{seriesName}',\n        withoutName: '{seriesType}'\n      },\n      multiple: {\n        prefix: '{seriesCount}',\n        withName: '{seriesId}{seriesName}{seriesType}',\n        withoutName: '{seriesId}{seriesType}',\n        separator: {\n          middle: '',\n          end: ''\n        }\n      }\n    },\n    data: {\n      allData: '',\n      partialData: '{displayCnt}',\n      withName: '{name}{value}',\n      withoutName: '{value}',\n      separator: {\n        middle: '',\n        end: ''\n      }\n    }\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar map = _util.map;\n\nvar _number = require(\"../util/number\");\n\nvar linearMap = _number.linearMap;\nvar getPixelPrecision = _number.getPixelPrecision;\nvar round = _number.round;\n\nvar _axisTickLabelBuilder = require(\"./axisTickLabelBuilder\");\n\nvar createAxisTicks = _axisTickLabelBuilder.createAxisTicks;\nvar createAxisLabels = _axisTickLabelBuilder.createAxisLabels;\nvar calculateCategoryInterval = _axisTickLabelBuilder.calculateCategoryInterval;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar NORMALIZED_EXTENT = [0, 1];\n/**\n * Base class of Axis.\n * @constructor\n */\n\nvar Axis = function (dim, scale, extent) {\n  /**\n   * Axis dimension. Such as 'x', 'y', 'z', 'angle', 'radius'.\n   * @type {string}\n   */\n  this.dim = dim;\n  /**\n   * Axis scale\n   * @type {module:echarts/coord/scale/*}\n   */\n\n  this.scale = scale;\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n\n  this._extent = extent || [0, 0];\n  /**\n   * @type {boolean}\n   */\n\n  this.inverse = false;\n  /**\n   * Usually true when axis has a ordinal scale\n   * @type {boolean}\n   */\n\n  this.onBand = false;\n};\n\nAxis.prototype = {\n  constructor: Axis,\n\n  /**\n   * If axis extent contain given coord\n   * @param {number} coord\n   * @return {boolean}\n   */\n  contain: function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  },\n\n  /**\n   * If axis extent contain given data\n   * @param {number} data\n   * @return {boolean}\n   */\n  containData: function (data) {\n    return this.scale.contain(data);\n  },\n\n  /**\n   * Get coord extent.\n   * @return {Array.<number>}\n   */\n  getExtent: function () {\n    return this._extent.slice();\n  },\n\n  /**\n   * Get precision used for formatting\n   * @param {Array.<number>} [dataExtent]\n   * @return {number}\n   */\n  getPixelPrecision: function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  },\n\n  /**\n   * Set coord extent\n   * @param {number} start\n   * @param {number} end\n   */\n  setExtent: function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  },\n\n  /**\n   * Convert data to coord. Data is the rank if it has an ordinal scale\n   * @param {number} data\n   * @param  {boolean} clamp\n   * @return {number}\n   */\n  dataToCoord: function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(data);\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  },\n\n  /**\n   * Convert coord to data. Data is the rank if it has an ordinal scale\n   * @param {number} coord\n   * @param  {boolean} clamp\n   * @return {number}\n   */\n  coordToData: function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  },\n\n  /**\n   * Convert pixel point to data in axis\n   * @param {Array.<number>} point\n   * @param  {boolean} clamp\n   * @return {number} data\n   */\n  pointToData: function (point, clamp) {// Should be implemented in derived class if necessary.\n  },\n\n  /**\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n   * `axis.getTicksCoords` considers `onBand`, which is used by\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\n   * @param {Object} [opt]\n   * @param {Model} [opt.tickModel=axis.model.getModel('axisTick')]\n   * @param {boolean} [opt.clamp] If `true`, the first and the last\n   *        tick must be at the axis end points. Otherwise, clip ticks\n   *        that outside the axis extent.\n   * @return {Array.<Object>} [{\n   *     coord: ...,\n   *     tickValue: ...\n   * }, ...]\n   */\n  getTicksCoords: function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel);\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickValue) {\n      return {\n        coord: this.dataToCoord(tickValue),\n        tickValue: tickValue\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  },\n\n  /**\n   * @return {Array.<Array.<Object>>} [{ coord: ..., tickValue: ...}]\n   */\n  getMinorTicksCoords: function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber'); // Protection.\n\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  },\n\n  /**\n   * @return {Array.<Object>} [{\n   *     formattedLabel: string,\n   *     rawLabel: axis.scale.getLabel(tickValue)\n   *     tickValue: number\n   * }, ...]\n   */\n  getViewLabels: function () {\n    return createAxisLabels(this).labels;\n  },\n\n  /**\n   * @return {module:echarts/coord/model/Model}\n   */\n  getLabelModel: function () {\n    return this.model.getModel('axisLabel');\n  },\n\n  /**\n   * Notice here we only get the default tick model. For splitLine\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\n   * manually when calling `getTicksCoords`.\n   * In GL, this method may be overrided to:\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n   * @return {module:echarts/coord/model/Model}\n   */\n  getTickModel: function () {\n    return this.model.getModel('axisTick');\n  },\n\n  /**\n   * Get width of band\n   * @return {number}\n   */\n  getBandWidth: function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0); // Fix #2728, avoid NaN when only one data.\n\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  },\n\n  /**\n   * @abstract\n   * @return {boolean} Is horizontal\n   */\n  isHorizontal: null,\n\n  /**\n   * @abstract\n   * @return {number} Get axis rotate, by degree.\n   */\n  getRotate: null,\n\n  /**\n   * Only be called in category axis.\n   * Can be overrided, consider other axes like in 3D.\n   * @return {number} Auto interval for cateogry axis tick and label\n   */\n  calculateCategoryInterval: function () {\n    return calculateCategoryInterval(this);\n  }\n};\n\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n} // If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\n\n\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    last = ticksCoords[1] = {\n      coord: axisExtent[0]\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift / 2;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift * diffSize\n    };\n    ticksCoords.push(last);\n  }\n\n  var inverse = axisExtent[0] > axisExtent[1]; // Handling clamp.\n\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0]\n    });\n  }\n\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1]\n    });\n  }\n\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\n\nvar _default = Axis;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar retrieve = _util.retrieve;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar each = _util.each;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _number = require(\"../../util/number\");\n\nvar isRadianAroundZero = _number.isRadianAroundZero;\nvar remRadian = _number.remRadian;\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar matrixUtil = require(\"zrender/lib/core/matrix\");\n\nvar _vector = require(\"zrender/lib/core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar shouldShowAllLabels = _axisHelper.shouldShowAllLabels;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n *\n * @param {module:zrender/container/Group} group\n * @param {Object} axisModel\n * @param {Object} opt Standard axis parameters.\n * @param {Array.<number>} opt.position [x, y]\n * @param {number} opt.rotation by radian\n * @param {number} [opt.nameDirection=1] 1 or -1 Used when nameLocation is 'middle' or 'center'.\n * @param {number} [opt.tickDirection=1] 1 or -1\n * @param {number} [opt.labelDirection=1] 1 or -1\n * @param {number} [opt.labelOffset=0] Usefull when onZero.\n * @param {string} [opt.axisLabelShow] default get from axisModel.\n * @param {string} [opt.axisName] default get from axisModel.\n * @param {number} [opt.axisNameAvailableWidth]\n * @param {number} [opt.labelRotate] by degree, default get from axisModel.\n * @param {number} [opt.strokeContainThreshold] Default label interval when label\n * @param {number} [opt.nameTruncateMaxWidth]\n */\n\nvar AxisBuilder = function (axisModel, opt) {\n  /**\n   * @readOnly\n   */\n  this.opt = opt;\n  /**\n   * @readOnly\n   */\n\n  this.axisModel = axisModel; // Default value\n\n  defaults(opt, {\n    labelOffset: 0,\n    nameDirection: 1,\n    tickDirection: 1,\n    labelDirection: 1,\n    silent: true\n  });\n  /**\n   * @readOnly\n   */\n\n  this.group = new graphic.Group(); // FIXME Not use a seperate text group?\n\n  var dumbGroup = new graphic.Group({\n    position: opt.position.slice(),\n    rotation: opt.rotation\n  }); // this.group.add(dumbGroup);\n  // this._dumbGroup = dumbGroup;\n\n  dumbGroup.updateTransform();\n  this._transform = dumbGroup.transform;\n  this._dumbGroup = dumbGroup;\n};\n\nAxisBuilder.prototype = {\n  constructor: AxisBuilder,\n  hasBuilder: function (name) {\n    return !!builders[name];\n  },\n  add: function (name) {\n    builders[name].call(this);\n  },\n  getGroup: function () {\n    return this.group;\n  }\n};\nvar builders = {\n  /**\n   * @private\n   */\n  axisLine: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n\n    if (!axisModel.get('axisLine.show')) {\n      return;\n    }\n\n    var extent = this.axisModel.axis.getExtent();\n    var matrix = this._transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel('axisLine.lineStyle').getLineStyle());\n    this.group.add(new graphic.Line({\n      // Id for animation\n      anid: 'line',\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    }));\n    var arrows = axisModel.get('axisLine.symbol');\n    var arrowSize = axisModel.get('axisLine.symbolSize');\n    var arrowOffset = axisModel.get('axisLine.symbolOffset') || 0;\n\n    if (typeof arrowOffset === 'number') {\n      arrowOffset = [arrowOffset, arrowOffset];\n    }\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth = arrowSize[0];\n      var symbolHeight = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pos = [pt1[0] + r * Math.cos(opt.rotation), pt1[1] - r * Math.sin(opt.rotation)];\n          symbol.attr({\n            rotation: point.rotate,\n            position: pos,\n            silent: true,\n            z2: 11\n          });\n          this.group.add(symbol);\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  axisTickLabel: function () {\n    var axisModel = this.axisModel;\n    var opt = this.opt;\n    var ticksEls = buildAxisMajorTicks(this, axisModel, opt);\n    var labelEls = buildAxisLabel(this, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(this, axisModel, opt);\n  },\n\n  /**\n   * @private\n   */\n  axisName: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = this.axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // 'middle'\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth); // FIXME\n    // truncate rich text? (consider performance)\n\n    var truncatedText = ellipsis != null && maxWidth != null ? formatUtil.truncateText(name, maxWidth, textFont, ellipsis, {\n      minChar: 2,\n      placeholder: truncateOpt.placeholder\n    }) : name;\n    var tooltipOpt = axisModel.get('tooltip', true);\n    var mainType = axisModel.mainType;\n    var formatterParams = {\n      componentType: mainType,\n      name: name,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = axisModel.componentIndex;\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'name',\n      __fullText: name,\n      __truncatedText: truncatedText,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: isLabelSilent(axisModel),\n      z2: 1,\n      tooltip: tooltipOpt && tooltipOpt.show ? extend({\n        content: name,\n        formatter: function () {\n          return name;\n        },\n        formatterParams: formatterParams\n      }, tooltipOpt) : null\n    });\n    graphic.setTextStyle(textEl.style, textStyleModel, {\n      text: truncatedText,\n      textFont: textFont,\n      textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'),\n      textAlign: textStyleModel.get('align') || labelLayout.textAlign,\n      textVerticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n    });\n\n    if (axisModel.get('triggerEvent')) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisName';\n      textEl.eventData.name = name;\n    } // FIXME\n\n\n    this._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    this.group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nvar makeAxisEventDataBase = AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n  var eventData = {\n    componentType: axisModel.mainType,\n    componentIndex: axisModel.componentIndex\n  };\n  eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n  return eventData;\n};\n/**\n * @public\n * @static\n * @param {Object} opt\n * @param {number} axisRotation in radian\n * @param {number} textRotation in radian\n * @param {number} direction\n * @return {Object} {\n *  rotation, // according to axis\n *  textAlign,\n *  textVerticalAlign\n * }\n */\n\n\nvar innerTextLayout = AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n  var rotationDiff = remRadian(textRotation - axisRotation);\n  var textAlign;\n  var textVerticalAlign;\n\n  if (isRadianAroundZero(rotationDiff)) {\n    // Label is parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI)) {\n    // Label is inverse parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff > 0 && rotationDiff < PI) {\n      textAlign = direction > 0 ? 'right' : 'left';\n    } else {\n      textAlign = direction > 0 ? 'left' : 'right';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n};\n\nfunction endTextLayout(opt, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - opt.rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nvar isLabelSilent = AxisBuilder.isLabelSilent = function (axisModel) {\n  var tooltipOpt = axisModel.get('tooltip');\n  return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n  || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n};\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel'); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next, labelLayout) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, aniid) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      // Id for animation\n      anid: aniid + '_' + ticksCoords[i].tickValue,\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      silent: true\n    });\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisMajorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, axisBuilder._transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }), 'ticks');\n\n  for (var i = 0; i < ticksEls.length; i++) {\n    axisBuilder.group.add(ticksEls[i]);\n  }\n\n  return ticksEls;\n}\n\nfunction buildAxisMinorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var minorTicksCoords = axis.getMinorTicksCoords();\n\n  if (!minorTicksCoords.length) {\n    return;\n  }\n\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }));\n\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], axisBuilder._transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      axisBuilder.group.add(minorTicksEls[k]);\n    }\n  }\n}\n\nfunction buildAxisLabel(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get('axisLabel.show'));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue] && rawCategoryData[tickValue].textStyle) {\n      itemLabelModel = new Model(rawCategoryData[tickValue].textStyle, labelModel, axisModel.ecModel);\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get('axisLine.lineStyle.color');\n    var tickCoord = axis.dataToCoord(tickValue);\n    var pos = [tickCoord, opt.labelOffset + opt.labelDirection * labelMargin];\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'label_' + tickValue,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10\n    });\n    graphic.setTextStyle(textEl.style, itemLabelModel, {\n      text: formattedLabel,\n      textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n      textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n      textFill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n      // index of axis.data. So tick should not be exposed to user\n      // in category axis.\n      // (2) Compatible with previous version, which always use formatted label as\n      // input. But in interval scale the formatted label is like '223,445', which\n      // maked user repalce ','. So we modify it to return original val but remain\n      // it as 'string' to avoid error in replacing.\n      axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n    }); // Pack data for mouse event\n\n    if (triggerEvent) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisLabel';\n      textEl.eventData.value = rawLabel;\n    } // FIXME\n\n\n    axisBuilder._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    axisBuilder.group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nvar _default = AxisBuilder;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction defaultKeyGetter(item) {\n  return item;\n}\n/**\n * @param {Array} oldArr\n * @param {Array} newArr\n * @param {Function} oldKeyGetter\n * @param {Function} newKeyGetter\n * @param {Object} [context] Can be visited by this.context in callback.\n */\n\n\nfunction DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context) {\n  this._old = oldArr;\n  this._new = newArr;\n  this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\n  this._newKeyGetter = newKeyGetter || defaultKeyGetter;\n  this.context = context;\n}\n\nDataDiffer.prototype = {\n  constructor: DataDiffer,\n\n  /**\n   * Callback function when add a data\n   */\n  add: function (func) {\n    this._add = func;\n    return this;\n  },\n\n  /**\n   * Callback function when update a data\n   */\n  update: function (func) {\n    this._update = func;\n    return this;\n  },\n\n  /**\n   * Callback function when remove a data\n   */\n  remove: function (func) {\n    this._remove = func;\n    return this;\n  },\n  execute: function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var oldDataIndexMap = {};\n    var newDataIndexMap = {};\n    var oldDataKeyArr = [];\n    var newDataKeyArr = [];\n    var i;\n    initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter', this);\n    initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter', this);\n\n    for (i = 0; i < oldArr.length; i++) {\n      var key = oldDataKeyArr[i];\n      var idx = newDataIndexMap[key]; // idx can never be empty array here. see 'set null' logic below.\n\n      if (idx != null) {\n        // Consider there is duplicate key (for example, use dataItem.name as key).\n        // We should make sure every item in newArr and oldArr can be visited.\n        var len = idx.length;\n\n        if (len) {\n          len === 1 && (newDataIndexMap[key] = null);\n          idx = idx.shift();\n        } else {\n          newDataIndexMap[key] = null;\n        }\n\n        this._update && this._update(idx, i);\n      } else {\n        this._remove && this._remove(i);\n      }\n    }\n\n    for (var i = 0; i < newDataKeyArr.length; i++) {\n      var key = newDataKeyArr[i];\n\n      if (newDataIndexMap.hasOwnProperty(key)) {\n        var idx = newDataIndexMap[key];\n\n        if (idx == null) {\n          continue;\n        } // idx can never be empty array here. see 'set null' logic above.\n\n\n        if (!idx.length) {\n          this._add && this._add(idx);\n        } else {\n          for (var j = 0, len = idx.length; j < len; j++) {\n            this._add && this._add(idx[j]);\n          }\n        }\n      }\n    }\n  }\n};\n\nfunction initIndexMap(arr, map, keyArr, keyGetterName, dataDiffer) {\n  for (var i = 0; i < arr.length; i++) {\n    // Add prefix to avoid conflict with Object.prototype.\n    var key = '_ec_' + dataDiffer[keyGetterName](arr[i], i);\n    var existence = map[key];\n\n    if (existence == null) {\n      keyArr.push(key);\n      map[key] = i;\n    } else {\n      if (!existence.length) {\n        map[key] = existence = [existence];\n      }\n\n      existence.push(i);\n    }\n  }\n}\n\nvar _default = DataDiffer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar OrdinalScale = require(\"../scale/Ordinal\");\n\nvar IntervalScale = require(\"../scale/Interval\");\n\nvar Scale = require(\"../scale/Scale\");\n\nvar numberUtil = require(\"../util/number\");\n\nvar _barGrid = require(\"../layout/barGrid\");\n\nvar prepareLayoutBarSeries = _barGrid.prepareLayoutBarSeries;\nvar makeColumnLayout = _barGrid.makeColumnLayout;\nvar retrieveColumnLayout = _barGrid.retrieveColumnLayout;\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nrequire(\"../scale/Time\");\n\nrequire(\"../scale/Log\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Get axis scale extent before niced.\n * Item of returned array can only be number (including Infinity and NaN).\n */\nfunction getScaleExtent(scale, model) {\n  var scaleType = scale.type;\n  var min = model.getMin();\n  var max = model.getMax();\n  var originalExtent = scale.getExtent();\n  var axisDataLen;\n  var boundaryGap;\n  var span;\n\n  if (scaleType === 'ordinal') {\n    axisDataLen = model.getCategories().length;\n  } else {\n    boundaryGap = model.get('boundaryGap');\n\n    if (!zrUtil.isArray(boundaryGap)) {\n      boundaryGap = [boundaryGap || 0, boundaryGap || 0];\n    }\n\n    if (typeof boundaryGap[0] === 'boolean') {\n      boundaryGap = [0, 0];\n    }\n\n    boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], 1);\n    boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], 1);\n    span = originalExtent[1] - originalExtent[0] || Math.abs(originalExtent[0]);\n  } // Notice: When min/max is not set (that is, when there are null/undefined,\n  // which is the most common case), these cases should be ensured:\n  // (1) For 'ordinal', show all axis.data.\n  // (2) For others:\n  //      + `boundaryGap` is applied (if min/max set, boundaryGap is\n  //      disabled).\n  //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\n  //      be the result that originalExtent enlarged by boundaryGap.\n  // (3) If no data, it should be ensured that `scale.setBlank` is set.\n  // FIXME\n  // (1) When min/max is 'dataMin' or 'dataMax', should boundaryGap be able to used?\n  // (2) When `needCrossZero` and all data is positive/negative, should it be ensured\n  // that the results processed by boundaryGap are positive/negative?\n\n\n  if (min === 'dataMin') {\n    min = originalExtent[0];\n  } else if (typeof min === 'function') {\n    min = min({\n      min: originalExtent[0],\n      max: originalExtent[1]\n    });\n  }\n\n  if (max === 'dataMax') {\n    max = originalExtent[1];\n  } else if (typeof max === 'function') {\n    max = max({\n      min: originalExtent[0],\n      max: originalExtent[1]\n    });\n  }\n\n  var fixMin = min != null;\n  var fixMax = max != null;\n\n  if (min == null) {\n    min = scaleType === 'ordinal' ? axisDataLen ? 0 : NaN : originalExtent[0] - boundaryGap[0] * span;\n  }\n\n  if (max == null) {\n    max = scaleType === 'ordinal' ? axisDataLen ? axisDataLen - 1 : NaN : originalExtent[1] + boundaryGap[1] * span;\n  }\n\n  (min == null || !isFinite(min)) && (min = NaN);\n  (max == null || !isFinite(max)) && (max = NaN);\n  scale.setBlank(zrUtil.eqNaN(min) || zrUtil.eqNaN(max) || scaleType === 'ordinal' && !scale.getOrdinalMeta().categories.length); // Evaluate if axis needs cross zero\n\n  if (model.getNeedCrossZero()) {\n    // Axis is over zero and min is not set\n    if (min > 0 && max > 0 && !fixMin) {\n      min = 0;\n    } // Axis is under zero and max is not set\n\n\n    if (min < 0 && max < 0 && !fixMax) {\n      max = 0;\n    }\n  } // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\n  // is base axis\n  // FIXME\n  // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\n  // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\n  //     Should not depend on series type `bar`?\n  // (3) Fix that might overlap when using dataZoom.\n  // (4) Consider other chart types using `barGrid`?\n  // See #6728, #4862, `test/bar-overflow-time-plot.html`\n\n\n  var ecModel = model.ecModel;\n\n  if (ecModel && scaleType === 'time'\n  /*|| scaleType === 'interval' */\n  ) {\n    var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\n    var isBaseAxisAndHasBarSeries;\n    zrUtil.each(barSeriesModels, function (seriesModel) {\n      isBaseAxisAndHasBarSeries |= seriesModel.getBaseAxis() === model.axis;\n    });\n\n    if (isBaseAxisAndHasBarSeries) {\n      // Calculate placement of bars on axis\n      var barWidthAndOffset = makeColumnLayout(barSeriesModels); // Adjust axis min and max to account for overflow\n\n      var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\n      min = adjustedScale.min;\n      max = adjustedScale.max;\n    }\n  }\n\n  return {\n    extent: [min, max],\n    // \"fix\" means \"fixed\", the value should not be\n    // changed in the subsequent steps.\n    fixMin: fixMin,\n    fixMax: fixMax\n  };\n}\n\nfunction adjustScaleForOverflow(min, max, model, barWidthAndOffset) {\n  // Get Axis Length\n  var axisExtent = model.axis.getExtent();\n  var axisLength = axisExtent[1] - axisExtent[0]; // Get bars on current base axis and calculate min and max overflow\n\n  var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\n\n  if (barsOnCurrentAxis === undefined) {\n    return {\n      min: min,\n      max: max\n    };\n  }\n\n  var minOverflow = Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    minOverflow = Math.min(item.offset, minOverflow);\n  });\n  var maxOverflow = -Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    maxOverflow = Math.max(item.offset + item.width, maxOverflow);\n  });\n  minOverflow = Math.abs(minOverflow);\n  maxOverflow = Math.abs(maxOverflow);\n  var totalOverFlow = minOverflow + maxOverflow; // Calulate required buffer based on old range and overflow\n\n  var oldRange = max - min;\n  var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\n  var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\n  max += overflowBuffer * (maxOverflow / totalOverFlow);\n  min -= overflowBuffer * (minOverflow / totalOverFlow);\n  return {\n    min: min,\n    max: max\n  };\n}\n\nfunction niceScaleExtent(scale, model) {\n  var extentInfo = getScaleExtent(scale, model);\n  var extent = extentInfo.extent;\n  var splitNumber = model.get('splitNumber');\n\n  if (scale.type === 'log') {\n    scale.base = model.get('logBase');\n  }\n\n  var scaleType = scale.type;\n  scale.setExtent(extent[0], extent[1]);\n  scale.niceExtent({\n    splitNumber: splitNumber,\n    fixMin: extentInfo.fixMin,\n    fixMax: extentInfo.fixMax,\n    minInterval: scaleType === 'interval' || scaleType === 'time' ? model.get('minInterval') : null,\n    maxInterval: scaleType === 'interval' || scaleType === 'time' ? model.get('maxInterval') : null\n  }); // If some one specified the min, max. And the default calculated interval\n  // is not good enough. He can specify the interval. It is often appeared\n  // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\n  // to be 60.\n  // FIXME\n\n  var interval = model.get('interval');\n\n  if (interval != null) {\n    scale.setInterval && scale.setInterval(interval);\n  }\n}\n/**\n * @param {module:echarts/model/Model} model\n * @param {string} [axisType] Default retrieve from model.type\n * @return {module:echarts/scale/*}\n */\n\n\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale(model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(), [Infinity, -Infinity]);\n\n      case 'value':\n        return new IntervalScale();\n      // Extended scale, like time and log\n\n      default:\n        return (Scale.getClass(axisType) || IntervalScale).create(model);\n    }\n  }\n}\n/**\n * Check if the axis corss 0\n */\n\n\nfunction ifAxisCrossZero(axis) {\n  var dataExtent = axis.scale.getExtent();\n  var min = dataExtent[0];\n  var max = dataExtent[1];\n  return !(min > 0 && max > 0 || min < 0 && max < 0);\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @return {Function} Label formatter function.\n *         param: {number} tickValue,\n *         param: {number} idx, the index in all ticks.\n *                         If category axis, this param is not requied.\n *         return: {string} label string.\n */\n\n\nfunction makeLabelFormatter(axis) {\n  var labelFormatter = axis.getLabelModel().get('formatter');\n  var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\n\n  if (typeof labelFormatter === 'string') {\n    labelFormatter = function (tpl) {\n      return function (val) {\n        // For category axis, get raw value; for numeric axis,\n        // get foramtted label like '1,333,444'.\n        val = axis.scale.getLabel(val);\n        return tpl.replace('{value}', val != null ? val : '');\n      };\n    }(labelFormatter); // Consider empty array\n\n\n    return labelFormatter;\n  } else if (typeof labelFormatter === 'function') {\n    return function (tickValue, idx) {\n      // The original intention of `idx` is \"the index of the tick in all ticks\".\n      // But the previous implementation of category axis do not consider the\n      // `axisLabel.interval`, which cause that, for example, the `interval` is\n      // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\n      // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\n      // the definition here for back compatibility.\n      if (categoryTickStart != null) {\n        idx = tickValue - categoryTickStart;\n      }\n\n      return labelFormatter(getAxisRawValue(axis, tickValue), idx);\n    };\n  } else {\n    return function (tick) {\n      return axis.scale.getLabel(tick);\n    };\n  }\n}\n\nfunction getAxisRawValue(axis, value) {\n  // In category axis with data zoom, tick is not the original\n  // index of axis.data. So tick should not be exposed to user\n  // in category axis.\n  return axis.type === 'category' ? axis.scale.getLabel(value) : value;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @return {module:zrender/core/BoundingRect} Be null/undefined if no labels.\n */\n\n\nfunction estimateLabelUnionRect(axis) {\n  var axisModel = axis.model;\n  var scale = axis.scale;\n\n  if (!axisModel.get('axisLabel.show') || scale.isBlank()) {\n    return;\n  }\n\n  var isCategory = axis.type === 'category';\n  var realNumberScaleTicks;\n  var tickCount;\n  var categoryScaleExtent = scale.getExtent(); // Optimize for large category data, avoid call `getTicks()`.\n\n  if (isCategory) {\n    tickCount = scale.count();\n  } else {\n    realNumberScaleTicks = scale.getTicks();\n    tickCount = realNumberScaleTicks.length;\n  }\n\n  var axisLabelModel = axis.getLabelModel();\n  var labelFormatter = makeLabelFormatter(axis);\n  var rect;\n  var step = 1; // Simple optimization for large amount of labels\n\n  if (tickCount > 40) {\n    step = Math.ceil(tickCount / 40);\n  }\n\n  for (var i = 0; i < tickCount; i += step) {\n    var tickValue = realNumberScaleTicks ? realNumberScaleTicks[i] : categoryScaleExtent[0] + i;\n    var label = labelFormatter(tickValue);\n    var unrotatedSingleRect = axisLabelModel.getTextRect(label);\n    var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\n    rect ? rect.union(singleRect) : rect = singleRect;\n  }\n\n  return rect;\n}\n\nfunction rotateTextRect(textRect, rotate) {\n  var rotateRadians = rotate * Math.PI / 180;\n  var boundingBox = textRect.plain();\n  var beforeWidth = boundingBox.width;\n  var beforeHeight = boundingBox.height;\n  var afterWidth = beforeWidth * Math.cos(rotateRadians) + beforeHeight * Math.sin(rotateRadians);\n  var afterHeight = beforeWidth * Math.sin(rotateRadians) + beforeHeight * Math.cos(rotateRadians);\n  var rotatedRect = new BoundingRect(boundingBox.x, boundingBox.y, afterWidth, afterHeight);\n  return rotatedRect;\n}\n/**\n * @param {module:echarts/src/model/Model} model axisLabelModel or axisTickModel\n * @return {number|String} Can be null|'auto'|number|function\n */\n\n\nfunction getOptionCategoryInterval(model) {\n  var interval = model.get('interval');\n  return interval == null ? 'auto' : interval;\n}\n/**\n * Set `categoryInterval` as 0 implicitly indicates that\n * show all labels reguardless of overlap.\n * @param {Object} axis axisModel.axis\n * @return {boolean}\n */\n\n\nfunction shouldShowAllLabels(axis) {\n  return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\n}\n\nexports.getScaleExtent = getScaleExtent;\nexports.niceScaleExtent = niceScaleExtent;\nexports.createScaleByModel = createScaleByModel;\nexports.ifAxisCrossZero = ifAxisCrossZero;\nexports.makeLabelFormatter = makeLabelFormatter;\nexports.getAxisRawValue = getAxisRawValue;\nexports.estimateLabelUnionRect = estimateLabelUnionRect;\nexports.getOptionCategoryInterval = getOptionCategoryInterval;\nexports.shouldShowAllLabels = shouldShowAllLabels;","var LRU = require(\"../core/LRU\");\n\nvar kCSSColorTable = {\n  'transparent': [0, 0, 0, 0],\n  'aliceblue': [240, 248, 255, 1],\n  'antiquewhite': [250, 235, 215, 1],\n  'aqua': [0, 255, 255, 1],\n  'aquamarine': [127, 255, 212, 1],\n  'azure': [240, 255, 255, 1],\n  'beige': [245, 245, 220, 1],\n  'bisque': [255, 228, 196, 1],\n  'black': [0, 0, 0, 1],\n  'blanchedalmond': [255, 235, 205, 1],\n  'blue': [0, 0, 255, 1],\n  'blueviolet': [138, 43, 226, 1],\n  'brown': [165, 42, 42, 1],\n  'burlywood': [222, 184, 135, 1],\n  'cadetblue': [95, 158, 160, 1],\n  'chartreuse': [127, 255, 0, 1],\n  'chocolate': [210, 105, 30, 1],\n  'coral': [255, 127, 80, 1],\n  'cornflowerblue': [100, 149, 237, 1],\n  'cornsilk': [255, 248, 220, 1],\n  'crimson': [220, 20, 60, 1],\n  'cyan': [0, 255, 255, 1],\n  'darkblue': [0, 0, 139, 1],\n  'darkcyan': [0, 139, 139, 1],\n  'darkgoldenrod': [184, 134, 11, 1],\n  'darkgray': [169, 169, 169, 1],\n  'darkgreen': [0, 100, 0, 1],\n  'darkgrey': [169, 169, 169, 1],\n  'darkkhaki': [189, 183, 107, 1],\n  'darkmagenta': [139, 0, 139, 1],\n  'darkolivegreen': [85, 107, 47, 1],\n  'darkorange': [255, 140, 0, 1],\n  'darkorchid': [153, 50, 204, 1],\n  'darkred': [139, 0, 0, 1],\n  'darksalmon': [233, 150, 122, 1],\n  'darkseagreen': [143, 188, 143, 1],\n  'darkslateblue': [72, 61, 139, 1],\n  'darkslategray': [47, 79, 79, 1],\n  'darkslategrey': [47, 79, 79, 1],\n  'darkturquoise': [0, 206, 209, 1],\n  'darkviolet': [148, 0, 211, 1],\n  'deeppink': [255, 20, 147, 1],\n  'deepskyblue': [0, 191, 255, 1],\n  'dimgray': [105, 105, 105, 1],\n  'dimgrey': [105, 105, 105, 1],\n  'dodgerblue': [30, 144, 255, 1],\n  'firebrick': [178, 34, 34, 1],\n  'floralwhite': [255, 250, 240, 1],\n  'forestgreen': [34, 139, 34, 1],\n  'fuchsia': [255, 0, 255, 1],\n  'gainsboro': [220, 220, 220, 1],\n  'ghostwhite': [248, 248, 255, 1],\n  'gold': [255, 215, 0, 1],\n  'goldenrod': [218, 165, 32, 1],\n  'gray': [128, 128, 128, 1],\n  'green': [0, 128, 0, 1],\n  'greenyellow': [173, 255, 47, 1],\n  'grey': [128, 128, 128, 1],\n  'honeydew': [240, 255, 240, 1],\n  'hotpink': [255, 105, 180, 1],\n  'indianred': [205, 92, 92, 1],\n  'indigo': [75, 0, 130, 1],\n  'ivory': [255, 255, 240, 1],\n  'khaki': [240, 230, 140, 1],\n  'lavender': [230, 230, 250, 1],\n  'lavenderblush': [255, 240, 245, 1],\n  'lawngreen': [124, 252, 0, 1],\n  'lemonchiffon': [255, 250, 205, 1],\n  'lightblue': [173, 216, 230, 1],\n  'lightcoral': [240, 128, 128, 1],\n  'lightcyan': [224, 255, 255, 1],\n  'lightgoldenrodyellow': [250, 250, 210, 1],\n  'lightgray': [211, 211, 211, 1],\n  'lightgreen': [144, 238, 144, 1],\n  'lightgrey': [211, 211, 211, 1],\n  'lightpink': [255, 182, 193, 1],\n  'lightsalmon': [255, 160, 122, 1],\n  'lightseagreen': [32, 178, 170, 1],\n  'lightskyblue': [135, 206, 250, 1],\n  'lightslategray': [119, 136, 153, 1],\n  'lightslategrey': [119, 136, 153, 1],\n  'lightsteelblue': [176, 196, 222, 1],\n  'lightyellow': [255, 255, 224, 1],\n  'lime': [0, 255, 0, 1],\n  'limegreen': [50, 205, 50, 1],\n  'linen': [250, 240, 230, 1],\n  'magenta': [255, 0, 255, 1],\n  'maroon': [128, 0, 0, 1],\n  'mediumaquamarine': [102, 205, 170, 1],\n  'mediumblue': [0, 0, 205, 1],\n  'mediumorchid': [186, 85, 211, 1],\n  'mediumpurple': [147, 112, 219, 1],\n  'mediumseagreen': [60, 179, 113, 1],\n  'mediumslateblue': [123, 104, 238, 1],\n  'mediumspringgreen': [0, 250, 154, 1],\n  'mediumturquoise': [72, 209, 204, 1],\n  'mediumvioletred': [199, 21, 133, 1],\n  'midnightblue': [25, 25, 112, 1],\n  'mintcream': [245, 255, 250, 1],\n  'mistyrose': [255, 228, 225, 1],\n  'moccasin': [255, 228, 181, 1],\n  'navajowhite': [255, 222, 173, 1],\n  'navy': [0, 0, 128, 1],\n  'oldlace': [253, 245, 230, 1],\n  'olive': [128, 128, 0, 1],\n  'olivedrab': [107, 142, 35, 1],\n  'orange': [255, 165, 0, 1],\n  'orangered': [255, 69, 0, 1],\n  'orchid': [218, 112, 214, 1],\n  'palegoldenrod': [238, 232, 170, 1],\n  'palegreen': [152, 251, 152, 1],\n  'paleturquoise': [175, 238, 238, 1],\n  'palevioletred': [219, 112, 147, 1],\n  'papayawhip': [255, 239, 213, 1],\n  'peachpuff': [255, 218, 185, 1],\n  'peru': [205, 133, 63, 1],\n  'pink': [255, 192, 203, 1],\n  'plum': [221, 160, 221, 1],\n  'powderblue': [176, 224, 230, 1],\n  'purple': [128, 0, 128, 1],\n  'red': [255, 0, 0, 1],\n  'rosybrown': [188, 143, 143, 1],\n  'royalblue': [65, 105, 225, 1],\n  'saddlebrown': [139, 69, 19, 1],\n  'salmon': [250, 128, 114, 1],\n  'sandybrown': [244, 164, 96, 1],\n  'seagreen': [46, 139, 87, 1],\n  'seashell': [255, 245, 238, 1],\n  'sienna': [160, 82, 45, 1],\n  'silver': [192, 192, 192, 1],\n  'skyblue': [135, 206, 235, 1],\n  'slateblue': [106, 90, 205, 1],\n  'slategray': [112, 128, 144, 1],\n  'slategrey': [112, 128, 144, 1],\n  'snow': [255, 250, 250, 1],\n  'springgreen': [0, 255, 127, 1],\n  'steelblue': [70, 130, 180, 1],\n  'tan': [210, 180, 140, 1],\n  'teal': [0, 128, 128, 1],\n  'thistle': [216, 191, 216, 1],\n  'tomato': [255, 99, 71, 1],\n  'turquoise': [64, 224, 208, 1],\n  'violet': [238, 130, 238, 1],\n  'wheat': [245, 222, 179, 1],\n  'white': [255, 255, 255, 1],\n  'whitesmoke': [245, 245, 245, 1],\n  'yellow': [255, 255, 0, 1],\n  'yellowgreen': [154, 205, 50, 1]\n};\n\nfunction clampCssByte(i) {\n  // Clamp to integer 0 .. 255.\n  i = Math.round(i); // Seems to be what Chrome does (vs truncation).\n\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampCssAngle(i) {\n  // Clamp to integer 0 .. 360.\n  i = Math.round(i); // Seems to be what Chrome does (vs truncation).\n\n  return i < 0 ? 0 : i > 360 ? 360 : i;\n}\n\nfunction clampCssFloat(f) {\n  // Clamp to float 0.0 .. 1.0.\n  return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parseCssInt(str) {\n  // int or percentage.\n  if (str.length && str.charAt(str.length - 1) === '%') {\n    return clampCssByte(parseFloat(str) / 100 * 255);\n  }\n\n  return clampCssByte(parseInt(str, 10));\n}\n\nfunction parseCssFloat(str) {\n  // float or percentage.\n  if (str.length && str.charAt(str.length - 1) === '%') {\n    return clampCssFloat(parseFloat(str) / 100);\n  }\n\n  return clampCssFloat(parseFloat(str));\n}\n\nfunction cssHueToRgb(m1, m2, h) {\n  if (h < 0) {\n    h += 1;\n  } else if (h > 1) {\n    h -= 1;\n  }\n\n  if (h * 6 < 1) {\n    return m1 + (m2 - m1) * h * 6;\n  }\n\n  if (h * 2 < 1) {\n    return m2;\n  }\n\n  if (h * 3 < 2) {\n    return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n  }\n\n  return m1;\n}\n\nfunction lerpNumber(a, b, p) {\n  return a + (b - a) * p;\n}\n\nfunction setRgba(out, r, g, b, a) {\n  out[0] = r;\n  out[1] = g;\n  out[2] = b;\n  out[3] = a;\n  return out;\n}\n\nfunction copyRgba(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\nvar colorCache = new LRU(20);\nvar lastRemovedArr = null;\n\nfunction putToCache(colorStr, rgbaArr) {\n  // Reuse removed array\n  if (lastRemovedArr) {\n    copyRgba(lastRemovedArr, rgbaArr);\n  }\n\n  lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || rgbaArr.slice());\n}\n/**\n * @param {string} colorStr\n * @param {Array.<number>} out\n * @return {Array.<number>}\n * @memberOf module:zrender/util/color\n */\n\n\nfunction parse(colorStr, rgbaArr) {\n  if (!colorStr) {\n    return;\n  }\n\n  rgbaArr = rgbaArr || [];\n  var cached = colorCache.get(colorStr);\n\n  if (cached) {\n    return copyRgba(rgbaArr, cached);\n  } // colorStr may be not string\n\n\n  colorStr = colorStr + ''; // Remove all whitespace, not compliant, but should just be more accepting.\n\n  var str = colorStr.replace(/ /g, '').toLowerCase(); // Color keywords (and transparent) lookup.\n\n  if (str in kCSSColorTable) {\n    copyRgba(rgbaArr, kCSSColorTable[str]);\n    putToCache(colorStr, rgbaArr);\n    return rgbaArr;\n  } // #abc and #abc123 syntax.\n\n\n  if (str.charAt(0) === '#') {\n    if (str.length === 4) {\n      var iv = parseInt(str.substr(1), 16); // TODO(deanm): Stricter parsing.\n\n      if (!(iv >= 0 && iv <= 0xfff)) {\n        setRgba(rgbaArr, 0, 0, 0, 1);\n        return; // Covers NaN.\n      }\n\n      setRgba(rgbaArr, (iv & 0xf00) >> 4 | (iv & 0xf00) >> 8, iv & 0xf0 | (iv & 0xf0) >> 4, iv & 0xf | (iv & 0xf) << 4, 1);\n      putToCache(colorStr, rgbaArr);\n      return rgbaArr;\n    } else if (str.length === 7) {\n      var iv = parseInt(str.substr(1), 16); // TODO(deanm): Stricter parsing.\n\n      if (!(iv >= 0 && iv <= 0xffffff)) {\n        setRgba(rgbaArr, 0, 0, 0, 1);\n        return; // Covers NaN.\n      }\n\n      setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, 1);\n      putToCache(colorStr, rgbaArr);\n      return rgbaArr;\n    }\n\n    return;\n  }\n\n  var op = str.indexOf('(');\n  var ep = str.indexOf(')');\n\n  if (op !== -1 && ep + 1 === str.length) {\n    var fname = str.substr(0, op);\n    var params = str.substr(op + 1, ep - (op + 1)).split(',');\n    var alpha = 1; // To allow case fallthrough.\n\n    switch (fname) {\n      case 'rgba':\n        if (params.length !== 4) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        alpha = parseCssFloat(params.pop());\n      // jshint ignore:line\n      // Fall through.\n\n      case 'rgb':\n        if (params.length !== 3) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), alpha);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n\n      case 'hsla':\n        if (params.length !== 4) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        params[3] = parseCssFloat(params[3]);\n        hsla2rgba(params, rgbaArr);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n\n      case 'hsl':\n        if (params.length !== 3) {\n          setRgba(rgbaArr, 0, 0, 0, 1);\n          return;\n        }\n\n        hsla2rgba(params, rgbaArr);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n\n      default:\n        return;\n    }\n  }\n\n  setRgba(rgbaArr, 0, 0, 0, 1);\n  return;\n}\n/**\n * @param {Array.<number>} hsla\n * @param {Array.<number>} rgba\n * @return {Array.<number>} rgba\n */\n\n\nfunction hsla2rgba(hsla, rgba) {\n  var h = (parseFloat(hsla[0]) % 360 + 360) % 360 / 360; // 0 .. 1\n  // NOTE(deanm): According to the CSS spec s/l should only be\n  // percentages, but we don't bother and let float or percentage.\n\n  var s = parseCssFloat(hsla[1]);\n  var l = parseCssFloat(hsla[2]);\n  var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n  var m1 = l * 2 - m2;\n  rgba = rgba || [];\n  setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n\n  if (hsla.length === 4) {\n    rgba[3] = hsla[3];\n  }\n\n  return rgba;\n}\n/**\n * @param {Array.<number>} rgba\n * @return {Array.<number>} hsla\n */\n\n\nfunction rgba2hsla(rgba) {\n  if (!rgba) {\n    return;\n  } // RGB from 0 to 255\n\n\n  var R = rgba[0] / 255;\n  var G = rgba[1] / 255;\n  var B = rgba[2] / 255;\n  var vMin = Math.min(R, G, B); // Min. value of RGB\n\n  var vMax = Math.max(R, G, B); // Max. value of RGB\n\n  var delta = vMax - vMin; // Delta RGB value\n\n  var L = (vMax + vMin) / 2;\n  var H;\n  var S; // HSL results from 0 to 1\n\n  if (delta === 0) {\n    H = 0;\n    S = 0;\n  } else {\n    if (L < 0.5) {\n      S = delta / (vMax + vMin);\n    } else {\n      S = delta / (2 - vMax - vMin);\n    }\n\n    var deltaR = ((vMax - R) / 6 + delta / 2) / delta;\n    var deltaG = ((vMax - G) / 6 + delta / 2) / delta;\n    var deltaB = ((vMax - B) / 6 + delta / 2) / delta;\n\n    if (R === vMax) {\n      H = deltaB - deltaG;\n    } else if (G === vMax) {\n      H = 1 / 3 + deltaR - deltaB;\n    } else if (B === vMax) {\n      H = 2 / 3 + deltaG - deltaR;\n    }\n\n    if (H < 0) {\n      H += 1;\n    }\n\n    if (H > 1) {\n      H -= 1;\n    }\n  }\n\n  var hsla = [H * 360, S, L];\n\n  if (rgba[3] != null) {\n    hsla.push(rgba[3]);\n  }\n\n  return hsla;\n}\n/**\n * @param {string} color\n * @param {number} level\n * @return {string}\n * @memberOf module:zrender/util/color\n */\n\n\nfunction lift(color, level) {\n  var colorArr = parse(color);\n\n  if (colorArr) {\n    for (var i = 0; i < 3; i++) {\n      if (level < 0) {\n        colorArr[i] = colorArr[i] * (1 - level) | 0;\n      } else {\n        colorArr[i] = (255 - colorArr[i]) * level + colorArr[i] | 0;\n      }\n\n      if (colorArr[i] > 255) {\n        colorArr[i] = 255;\n      } else if (color[i] < 0) {\n        colorArr[i] = 0;\n      }\n    }\n\n    return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n  }\n}\n/**\n * @param {string} color\n * @return {string}\n * @memberOf module:zrender/util/color\n */\n\n\nfunction toHex(color) {\n  var colorArr = parse(color);\n\n  if (colorArr) {\n    return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + +colorArr[2]).toString(16).slice(1);\n  }\n}\n/**\n * Map value to color. Faster than lerp methods because color is represented by rgba array.\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<Array.<number>>} colors List of rgba color array\n * @param {Array.<number>} [out] Mapped gba color array\n * @return {Array.<number>} will be null/undefined if input illegal.\n */\n\n\nfunction fastLerp(normalizedValue, colors, out) {\n  if (!(colors && colors.length) || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n    return;\n  }\n\n  out = out || [];\n  var value = normalizedValue * (colors.length - 1);\n  var leftIndex = Math.floor(value);\n  var rightIndex = Math.ceil(value);\n  var leftColor = colors[leftIndex];\n  var rightColor = colors[rightIndex];\n  var dv = value - leftIndex;\n  out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n  out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n  out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n  out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n  return out;\n}\n/**\n * @deprecated\n */\n\n\nvar fastMapToColor = fastLerp;\n/**\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<string>} colors Color list.\n * @param {boolean=} fullOutput Default false.\n * @return {(string|Object)} Result color. If fullOutput,\n *                           return {color: ..., leftIndex: ..., rightIndex: ..., value: ...},\n * @memberOf module:zrender/util/color\n */\n\nfunction lerp(normalizedValue, colors, fullOutput) {\n  if (!(colors && colors.length) || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n    return;\n  }\n\n  var value = normalizedValue * (colors.length - 1);\n  var leftIndex = Math.floor(value);\n  var rightIndex = Math.ceil(value);\n  var leftColor = parse(colors[leftIndex]);\n  var rightColor = parse(colors[rightIndex]);\n  var dv = value - leftIndex;\n  var color = stringify([clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)), clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)), clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)), clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))], 'rgba');\n  return fullOutput ? {\n    color: color,\n    leftIndex: leftIndex,\n    rightIndex: rightIndex,\n    value: value\n  } : color;\n}\n/**\n * @deprecated\n */\n\n\nvar mapToColor = lerp;\n/**\n * @param {string} color\n * @param {number=} h 0 ~ 360, ignore when null.\n * @param {number=} s 0 ~ 1, ignore when null.\n * @param {number=} l 0 ~ 1, ignore when null.\n * @return {string} Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\n\nfunction modifyHSL(color, h, s, l) {\n  color = parse(color);\n\n  if (color) {\n    color = rgba2hsla(color);\n    h != null && (color[0] = clampCssAngle(h));\n    s != null && (color[1] = parseCssFloat(s));\n    l != null && (color[2] = parseCssFloat(l));\n    return stringify(hsla2rgba(color), 'rgba');\n  }\n}\n/**\n * @param {string} color\n * @param {number=} alpha 0 ~ 1\n * @return {string} Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\n\n\nfunction modifyAlpha(color, alpha) {\n  color = parse(color);\n\n  if (color && alpha != null) {\n    color[3] = clampCssFloat(alpha);\n    return stringify(color, 'rgba');\n  }\n}\n/**\n * @param {Array.<number>} arrColor like [12,33,44,0.4]\n * @param {string} type 'rgba', 'hsva', ...\n * @return {string} Result color. (If input illegal, return undefined).\n */\n\n\nfunction stringify(arrColor, type) {\n  if (!arrColor || !arrColor.length) {\n    return;\n  }\n\n  var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n\n  if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n    colorStr += ',' + arrColor[3];\n  }\n\n  return type + '(' + colorStr + ')';\n}\n\nexports.parse = parse;\nexports.lift = lift;\nexports.toHex = toHex;\nexports.fastLerp = fastLerp;\nexports.fastMapToColor = fastMapToColor;\nexports.lerp = lerp;\nexports.mapToColor = mapToColor;\nexports.modifyHSL = modifyHSL;\nexports.modifyAlpha = modifyAlpha;\nexports.stringify = stringify;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ORIGIN_METHOD = '\\0__throttleOriginMethod';\nvar RATE = '\\0__throttleRate';\nvar THROTTLE_TYPE = '\\0__throttleType';\n/**\n * @public\n * @param {(Function)} fn\n * @param {number} [delay=0] Unit: ms.\n * @param {boolean} [debounce=false]\n *        true: If call interval less than `delay`, only the last call works.\n *        false: If call interval less than `delay, call works on fixed rate.\n * @return {(Function)} throttled fn.\n */\n\nfunction throttle(fn, delay, debounce) {\n  var currCall;\n  var lastCall = 0;\n  var lastExec = 0;\n  var timer = null;\n  var diff;\n  var scope;\n  var args;\n  var debounceNextCall;\n  delay = delay || 0;\n\n  function exec() {\n    lastExec = new Date().getTime();\n    timer = null;\n    fn.apply(scope, args || []);\n  }\n\n  var cb = function () {\n    currCall = new Date().getTime();\n    scope = this;\n    args = arguments;\n    var thisDelay = debounceNextCall || delay;\n    var thisDebounce = debounceNextCall || debounce;\n    debounceNextCall = null;\n    diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\n    clearTimeout(timer); // Here we should make sure that: the `exec` SHOULD NOT be called later\n    // than a new call of `cb`, that is, preserving the command order. Consider\n    // calculating \"scale rate\" when roaming as an example. When a call of `cb`\n    // happens, either the `exec` is called dierectly, or the call is delayed.\n    // But the delayed call should never be later than next call of `cb`. Under\n    // this assurance, we can simply update view state each time `dispatchAction`\n    // triggered by user roaming, but not need to add extra code to avoid the\n    // state being \"rolled-back\".\n\n    if (thisDebounce) {\n      timer = setTimeout(exec, thisDelay);\n    } else {\n      if (diff >= 0) {\n        exec();\n      } else {\n        timer = setTimeout(exec, -diff);\n      }\n    }\n\n    lastCall = currCall;\n  };\n  /**\n   * Clear throttle.\n   * @public\n   */\n\n\n  cb.clear = function () {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  };\n  /**\n   * Enable debounce once.\n   */\n\n\n  cb.debounceNextCall = function (debounceDelay) {\n    debounceNextCall = debounceDelay;\n  };\n\n  return cb;\n}\n/**\n * Create throttle method or update throttle rate.\n *\n * @example\n * ComponentView.prototype.render = function () {\n *     ...\n *     throttle.createOrUpdate(\n *         this,\n *         '_dispatchAction',\n *         this.model.get('throttle'),\n *         'fixRate'\n *     );\n * };\n * ComponentView.prototype.remove = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n * ComponentView.prototype.dispose = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n *\n * @public\n * @param {Object} obj\n * @param {string} fnAttr\n * @param {number} [rate]\n * @param {string} [throttleType='fixRate'] 'fixRate' or 'debounce'\n * @return {Function} throttled function.\n */\n\n\nfunction createOrUpdate(obj, fnAttr, rate, throttleType) {\n  var fn = obj[fnAttr];\n\n  if (!fn) {\n    return;\n  }\n\n  var originFn = fn[ORIGIN_METHOD] || fn;\n  var lastThrottleType = fn[THROTTLE_TYPE];\n  var lastRate = fn[RATE];\n\n  if (lastRate !== rate || lastThrottleType !== throttleType) {\n    if (rate == null || !throttleType) {\n      return obj[fnAttr] = originFn;\n    }\n\n    fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\n    fn[ORIGIN_METHOD] = originFn;\n    fn[THROTTLE_TYPE] = throttleType;\n    fn[RATE] = rate;\n  }\n\n  return fn;\n}\n/**\n * Clear throttle. Example see throttle.createOrUpdate.\n *\n * @public\n * @param {Object} obj\n * @param {string} fnAttr\n */\n\n\nfunction clear(obj, fnAttr) {\n  var fn = obj[fnAttr];\n\n  if (fn && fn[ORIGIN_METHOD]) {\n    obj[fnAttr] = fn[ORIGIN_METHOD];\n  }\n}\n\nexports.throttle = throttle;\nexports.createOrUpdate = createOrUpdate;\nexports.clear = clear;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar axisPointerModelHelper = require(\"../axisPointer/modelHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Base class of AxisView.\n */\nvar AxisView = echarts.extendComponentView({\n  type: 'axis',\n\n  /**\n   * @private\n   */\n  _axisPointer: null,\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  axisPointerClass: null,\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    AxisView.superApply(this, 'render', arguments);\n    updateAxisPointer(this, axisModel, ecModel, api, payload, true);\n  },\n\n  /**\n   * Action handler.\n   * @public\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/model/Global} ecModel\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} payload\n   */\n  updateAxisPointer: function (axisModel, ecModel, api, payload, force) {\n    updateAxisPointer(this, axisModel, ecModel, api, payload, false);\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n    AxisView.superApply(this, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    disposeAxisPointer(this, api);\n    AxisView.superApply(this, 'dispose', arguments);\n  }\n});\n\nfunction updateAxisPointer(axisView, axisModel, ecModel, api, payload, forceRender) {\n  var Clazz = AxisView.getAxisPointerClass(axisView.axisPointerClass);\n\n  if (!Clazz) {\n    return;\n  }\n\n  var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n  axisPointerModel ? (axisView._axisPointer || (axisView._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : disposeAxisPointer(axisView, api);\n}\n\nfunction disposeAxisPointer(axisView, ecModel, api) {\n  var axisPointer = axisView._axisPointer;\n  axisPointer && axisPointer.dispose(ecModel, api);\n  axisView._axisPointer = null;\n}\n\nvar axisPointerClazz = [];\n\nAxisView.registerAxisPointerClass = function (type, clazz) {\n  axisPointerClazz[type] = clazz;\n};\n\nAxisView.getAxisPointerClass = function (type) {\n  return type && axisPointerClazz[type];\n};\n\nvar _default = AxisView;\nmodule.exports = _default;","var BoundingRect = require(\"../core/BoundingRect\");\n\nvar imageHelper = require(\"../graphic/helper/image\");\n\nvar _util = require(\"../core/util\");\n\nvar getContext = _util.getContext;\nvar extend = _util.extend;\nvar retrieve2 = _util.retrieve2;\nvar retrieve3 = _util.retrieve3;\nvar trim = _util.trim;\nvar textWidthCache = {};\nvar textWidthCacheCounter = 0;\nvar TEXT_CACHE_MAX = 5000;\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nvar DEFAULT_FONT = '12px sans-serif'; // Avoid assign to an exported variable, for transforming to cjs.\n\nvar methods = {};\n\nfunction $override(name, fn) {\n  methods[name] = fn;\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @return {number} width\n */\n\n\nfunction getWidth(text, font) {\n  font = font || DEFAULT_FONT;\n  var key = text + ':' + font;\n\n  if (textWidthCache[key]) {\n    return textWidthCache[key];\n  }\n\n  var textLines = (text + '').split('\\n');\n  var width = 0;\n\n  for (var i = 0, l = textLines.length; i < l; i++) {\n    // textContain.measureText may be overrided in SVG or VML\n    width = Math.max(measureText(textLines[i], font).width, width);\n  }\n\n  if (textWidthCacheCounter > TEXT_CACHE_MAX) {\n    textWidthCacheCounter = 0;\n    textWidthCache = {};\n  }\n\n  textWidthCacheCounter++;\n  textWidthCache[key] = width;\n  return width;\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @param {string} [textAlign='left']\n * @param {string} [textVerticalAlign='top']\n * @param {Array.<number>} [textPadding]\n * @param {Object} [rich]\n * @param {Object} [truncate]\n * @return {Object} {x, y, width, height, lineHeight}\n */\n\n\nfunction getBoundingRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate) {\n  return rich ? getRichTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate) : getPlainTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, truncate);\n}\n\nfunction getPlainTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, truncate) {\n  var contentBlock = parsePlainText(text, font, textPadding, textLineHeight, truncate);\n  var outerWidth = getWidth(text, font);\n\n  if (textPadding) {\n    outerWidth += textPadding[1] + textPadding[3];\n  }\n\n  var outerHeight = contentBlock.outerHeight;\n  var x = adjustTextX(0, outerWidth, textAlign);\n  var y = adjustTextY(0, outerHeight, textVerticalAlign);\n  var rect = new BoundingRect(x, y, outerWidth, outerHeight);\n  rect.lineHeight = contentBlock.lineHeight;\n  return rect;\n}\n\nfunction getRichTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate) {\n  var contentBlock = parseRichText(text, {\n    rich: rich,\n    truncate: truncate,\n    font: font,\n    textAlign: textAlign,\n    textPadding: textPadding,\n    textLineHeight: textLineHeight\n  });\n  var outerWidth = contentBlock.outerWidth;\n  var outerHeight = contentBlock.outerHeight;\n  var x = adjustTextX(0, outerWidth, textAlign);\n  var y = adjustTextY(0, outerHeight, textVerticalAlign);\n  return new BoundingRect(x, y, outerWidth, outerHeight);\n}\n/**\n * @public\n * @param {number} x\n * @param {number} width\n * @param {string} [textAlign='left']\n * @return {number} Adjusted x.\n */\n\n\nfunction adjustTextX(x, width, textAlign) {\n  // FIXME Right to left language\n  if (textAlign === 'right') {\n    x -= width;\n  } else if (textAlign === 'center') {\n    x -= width / 2;\n  }\n\n  return x;\n}\n/**\n * @public\n * @param {number} y\n * @param {number} height\n * @param {string} [textVerticalAlign='top']\n * @return {number} Adjusted y.\n */\n\n\nfunction adjustTextY(y, height, textVerticalAlign) {\n  if (textVerticalAlign === 'middle') {\n    y -= height / 2;\n  } else if (textVerticalAlign === 'bottom') {\n    y -= height;\n  }\n\n  return y;\n}\n/**\n * Follow same interface to `Displayable.prototype.calculateTextPosition`.\n * @public\n * @param {Obejct} [out] Prepared out object. If not input, auto created in the method.\n * @param {module:zrender/graphic/Style} style where `textPosition` and `textDistance` are visited.\n * @param {Object} rect {x, y, width, height} Rect of the host elment, according to which the text positioned.\n * @return {Object} The input `out`. Set: {x, y, textAlign, textVerticalAlign}\n */\n\n\nfunction calculateTextPosition(out, style, rect) {\n  var textPosition = style.textPosition;\n  var distance = style.textDistance;\n  var x = rect.x;\n  var y = rect.y;\n  distance = distance || 0;\n  var height = rect.height;\n  var width = rect.width;\n  var halfHeight = height / 2;\n  var textAlign = 'left';\n  var textVerticalAlign = 'top';\n\n  switch (textPosition) {\n    case 'left':\n      x -= distance;\n      y += halfHeight;\n      textAlign = 'right';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'right':\n      x += distance + width;\n      y += halfHeight;\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'top':\n      x += width / 2;\n      y -= distance;\n      textAlign = 'center';\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'bottom':\n      x += width / 2;\n      y += height + distance;\n      textAlign = 'center';\n      break;\n\n    case 'inside':\n      x += width / 2;\n      y += halfHeight;\n      textAlign = 'center';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideLeft':\n      x += distance;\n      y += halfHeight;\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideRight':\n      x += width - distance;\n      y += halfHeight;\n      textAlign = 'right';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideTop':\n      x += width / 2;\n      y += distance;\n      textAlign = 'center';\n      break;\n\n    case 'insideBottom':\n      x += width / 2;\n      y += height - distance;\n      textAlign = 'center';\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'insideTopLeft':\n      x += distance;\n      y += distance;\n      break;\n\n    case 'insideTopRight':\n      x += width - distance;\n      y += distance;\n      textAlign = 'right';\n      break;\n\n    case 'insideBottomLeft':\n      x += distance;\n      y += height - distance;\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'insideBottomRight':\n      x += width - distance;\n      y += height - distance;\n      textAlign = 'right';\n      textVerticalAlign = 'bottom';\n      break;\n  }\n\n  out = out || {};\n  out.x = x;\n  out.y = y;\n  out.textAlign = textAlign;\n  out.textVerticalAlign = textVerticalAlign;\n  return out;\n}\n/**\n * To be removed. But still do not remove in case that some one has imported it.\n * @deprecated\n * @public\n * @param {stirng} textPosition\n * @param {Object} rect {x, y, width, height}\n * @param {number} distance\n * @return {Object} {x, y, textAlign, textVerticalAlign}\n */\n\n\nfunction adjustTextPositionOnRect(textPosition, rect, distance) {\n  var dummyStyle = {\n    textPosition: textPosition,\n    textDistance: distance\n  };\n  return calculateTextPosition({}, dummyStyle, rect);\n}\n/**\n * Show ellipsis if overflow.\n *\n * @public\n * @param  {string} text\n * @param  {string} containerWidth\n * @param  {string} font\n * @param  {number} [ellipsis='...']\n * @param  {Object} [options]\n * @param  {number} [options.maxIterations=3]\n * @param  {number} [options.minChar=0] If truncate result are less\n *                  then minChar, ellipsis will not show, which is\n *                  better for user hint in some cases.\n * @param  {number} [options.placeholder=''] When all truncated, use the placeholder.\n * @return {string}\n */\n\n\nfunction truncateText(text, containerWidth, font, ellipsis, options) {\n  if (!containerWidth) {\n    return '';\n  }\n\n  var textLines = (text + '').split('\\n');\n  options = prepareTruncateOptions(containerWidth, font, ellipsis, options); // FIXME\n  // It is not appropriate that every line has '...' when truncate multiple lines.\n\n  for (var i = 0, len = textLines.length; i < len; i++) {\n    textLines[i] = truncateSingleLine(textLines[i], options);\n  }\n\n  return textLines.join('\\n');\n}\n\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n  options = extend({}, options);\n  options.font = font;\n  var ellipsis = retrieve2(ellipsis, '...');\n  options.maxIterations = retrieve2(options.maxIterations, 2);\n  var minChar = options.minChar = retrieve2(options.minChar, 0); // FIXME\n  // Other languages?\n\n  options.cnCharWidth = getWidth('', font); // FIXME\n  // Consider proportional font?\n\n  var ascCharWidth = options.ascCharWidth = getWidth('a', font);\n  options.placeholder = retrieve2(options.placeholder, ''); // Example 1: minChar: 3, text: 'asdfzxcv', truncate result: 'asdf', but not: 'a...'.\n  // Example 2: minChar: 3, text: '', truncate result: '', but not: '...'.\n\n  var contentWidth = containerWidth = Math.max(0, containerWidth - 1); // Reserve some gap.\n\n  for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n    contentWidth -= ascCharWidth;\n  }\n\n  var ellipsisWidth = getWidth(ellipsis, font);\n\n  if (ellipsisWidth > contentWidth) {\n    ellipsis = '';\n    ellipsisWidth = 0;\n  }\n\n  contentWidth = containerWidth - ellipsisWidth;\n  options.ellipsis = ellipsis;\n  options.ellipsisWidth = ellipsisWidth;\n  options.contentWidth = contentWidth;\n  options.containerWidth = containerWidth;\n  return options;\n}\n\nfunction truncateSingleLine(textLine, options) {\n  var containerWidth = options.containerWidth;\n  var font = options.font;\n  var contentWidth = options.contentWidth;\n\n  if (!containerWidth) {\n    return '';\n  }\n\n  var lineWidth = getWidth(textLine, font);\n\n  if (lineWidth <= containerWidth) {\n    return textLine;\n  }\n\n  for (var j = 0;; j++) {\n    if (lineWidth <= contentWidth || j >= options.maxIterations) {\n      textLine += options.ellipsis;\n      break;\n    }\n\n    var subLength = j === 0 ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth) : lineWidth > 0 ? Math.floor(textLine.length * contentWidth / lineWidth) : 0;\n    textLine = textLine.substr(0, subLength);\n    lineWidth = getWidth(textLine, font);\n  }\n\n  if (textLine === '') {\n    textLine = options.placeholder;\n  }\n\n  return textLine;\n}\n\nfunction estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n  var width = 0;\n  var i = 0;\n\n  for (var len = text.length; i < len && width < contentWidth; i++) {\n    var charCode = text.charCodeAt(i);\n    width += 0 <= charCode && charCode <= 127 ? ascCharWidth : cnCharWidth;\n  }\n\n  return i;\n}\n/**\n * @public\n * @param {string} font\n * @return {number} line height\n */\n\n\nfunction getLineHeight(font) {\n  // FIXME A rough approach.\n  return getWidth('', font);\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @return {Object} width\n */\n\n\nfunction measureText(text, font) {\n  return methods.measureText(text, font);\n} // Avoid assign to an exported variable, for transforming to cjs.\n\n\nmethods.measureText = function (text, font) {\n  var ctx = getContext();\n  ctx.font = font || DEFAULT_FONT;\n  return ctx.measureText(text);\n};\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @param {Object} [truncate]\n * @return {Object} block: {lineHeight, lines, height, outerHeight, canCacheByTextString}\n *  Notice: for performance, do not calculate outerWidth util needed.\n *  `canCacheByTextString` means the result `lines` is only determined by the input `text`.\n *  Thus we can simply comparing the `input` text to determin whether the result changed,\n *  without travel the result `lines`.\n */\n\n\nfunction parsePlainText(text, font, padding, textLineHeight, truncate) {\n  text != null && (text += '');\n  var lineHeight = retrieve2(textLineHeight, getLineHeight(font));\n  var lines = text ? text.split('\\n') : [];\n  var height = lines.length * lineHeight;\n  var outerHeight = height;\n  var canCacheByTextString = true;\n\n  if (padding) {\n    outerHeight += padding[0] + padding[2];\n  }\n\n  if (text && truncate) {\n    canCacheByTextString = false;\n    var truncOuterHeight = truncate.outerHeight;\n    var truncOuterWidth = truncate.outerWidth;\n\n    if (truncOuterHeight != null && outerHeight > truncOuterHeight) {\n      text = '';\n      lines = [];\n    } else if (truncOuterWidth != null) {\n      var options = prepareTruncateOptions(truncOuterWidth - (padding ? padding[1] + padding[3] : 0), font, truncate.ellipsis, {\n        minChar: truncate.minChar,\n        placeholder: truncate.placeholder\n      }); // FIXME\n      // It is not appropriate that every line has '...' when truncate multiple lines.\n\n      for (var i = 0, len = lines.length; i < len; i++) {\n        lines[i] = truncateSingleLine(lines[i], options);\n      }\n    }\n  }\n\n  return {\n    lines: lines,\n    height: height,\n    outerHeight: outerHeight,\n    lineHeight: lineHeight,\n    canCacheByTextString: canCacheByTextString\n  };\n}\n/**\n * For example: 'some text {a|some text}other text{b|some text}xxx{c|}xxx'\n * Also consider 'bbbb{a|xxx\\nzzz}xxxx\\naaaa'.\n *\n * @public\n * @param {string} text\n * @param {Object} style\n * @return {Object} block\n * {\n *      width,\n *      height,\n *      lines: [{\n *          lineHeight,\n *          width,\n *          tokens: [[{\n *              styleName,\n *              text,\n *              width,      // include textPadding\n *              height,     // include textPadding\n *              textWidth, // pure text width\n *              textHeight, // pure text height\n *              lineHeihgt,\n *              font,\n *              textAlign,\n *              textVerticalAlign\n *          }], [...], ...]\n *      }, ...]\n * }\n * If styleName is undefined, it is plain text.\n */\n\n\nfunction parseRichText(text, style) {\n  var contentBlock = {\n    lines: [],\n    width: 0,\n    height: 0\n  };\n  text != null && (text += '');\n\n  if (!text) {\n    return contentBlock;\n  }\n\n  var lastIndex = STYLE_REG.lastIndex = 0;\n  var result;\n\n  while ((result = STYLE_REG.exec(text)) != null) {\n    var matchedIndex = result.index;\n\n    if (matchedIndex > lastIndex) {\n      pushTokens(contentBlock, text.substring(lastIndex, matchedIndex));\n    }\n\n    pushTokens(contentBlock, result[2], result[1]);\n    lastIndex = STYLE_REG.lastIndex;\n  }\n\n  if (lastIndex < text.length) {\n    pushTokens(contentBlock, text.substring(lastIndex, text.length));\n  }\n\n  var lines = contentBlock.lines;\n  var contentHeight = 0;\n  var contentWidth = 0; // For `textWidth: 100%`\n\n  var pendingList = [];\n  var stlPadding = style.textPadding;\n  var truncate = style.truncate;\n  var truncateWidth = truncate && truncate.outerWidth;\n  var truncateHeight = truncate && truncate.outerHeight;\n\n  if (stlPadding) {\n    truncateWidth != null && (truncateWidth -= stlPadding[1] + stlPadding[3]);\n    truncateHeight != null && (truncateHeight -= stlPadding[0] + stlPadding[2]);\n  } // Calculate layout info of tokens.\n\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n    var lineHeight = 0;\n    var lineWidth = 0;\n\n    for (var j = 0; j < line.tokens.length; j++) {\n      var token = line.tokens[j];\n      var tokenStyle = token.styleName && style.rich[token.styleName] || {}; // textPadding should not inherit from style.\n\n      var textPadding = token.textPadding = tokenStyle.textPadding; // textFont has been asigned to font by `normalizeStyle`.\n\n      var font = token.font = tokenStyle.font || style.font; // textHeight can be used when textVerticalAlign is specified in token.\n\n      var tokenHeight = token.textHeight = retrieve2( // textHeight should not be inherited, consider it can be specified\n      // as box height of the block.\n      tokenStyle.textHeight, getLineHeight(font));\n      textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n      token.height = tokenHeight;\n      token.lineHeight = retrieve3(tokenStyle.textLineHeight, style.textLineHeight, tokenHeight);\n      token.textAlign = tokenStyle && tokenStyle.textAlign || style.textAlign;\n      token.textVerticalAlign = tokenStyle && tokenStyle.textVerticalAlign || 'middle';\n\n      if (truncateHeight != null && contentHeight + token.lineHeight > truncateHeight) {\n        return {\n          lines: [],\n          width: 0,\n          height: 0\n        };\n      }\n\n      token.textWidth = getWidth(token.text, font);\n      var tokenWidth = tokenStyle.textWidth;\n      var tokenWidthNotSpecified = tokenWidth == null || tokenWidth === 'auto'; // Percent width, can be `100%`, can be used in drawing separate\n      // line when box width is needed to be auto.\n\n      if (typeof tokenWidth === 'string' && tokenWidth.charAt(tokenWidth.length - 1) === '%') {\n        token.percentWidth = tokenWidth;\n        pendingList.push(token);\n        tokenWidth = 0; // Do not truncate in this case, because there is no user case\n        // and it is too complicated.\n      } else {\n        if (tokenWidthNotSpecified) {\n          tokenWidth = token.textWidth; // FIXME: If image is not loaded and textWidth is not specified, calling\n          // `getBoundingRect()` will not get correct result.\n\n          var textBackgroundColor = tokenStyle.textBackgroundColor;\n          var bgImg = textBackgroundColor && textBackgroundColor.image; // Use cases:\n          // (1) If image is not loaded, it will be loaded at render phase and call\n          // `dirty()` and `textBackgroundColor.image` will be replaced with the loaded\n          // image, and then the right size will be calculated here at the next tick.\n          // See `graphic/helper/text.js`.\n          // (2) If image loaded, and `textBackgroundColor.image` is image src string,\n          // use `imageHelper.findExistImage` to find cached image.\n          // `imageHelper.findExistImage` will always be called here before\n          // `imageHelper.createOrUpdateImage` in `graphic/helper/text.js#renderRichText`\n          // which ensures that image will not be rendered before correct size calcualted.\n\n          if (bgImg) {\n            bgImg = imageHelper.findExistImage(bgImg);\n\n            if (imageHelper.isImageReady(bgImg)) {\n              tokenWidth = Math.max(tokenWidth, bgImg.width * tokenHeight / bgImg.height);\n            }\n          }\n        }\n\n        var paddingW = textPadding ? textPadding[1] + textPadding[3] : 0;\n        tokenWidth += paddingW;\n        var remianTruncWidth = truncateWidth != null ? truncateWidth - lineWidth : null;\n\n        if (remianTruncWidth != null && remianTruncWidth < tokenWidth) {\n          if (!tokenWidthNotSpecified || remianTruncWidth < paddingW) {\n            token.text = '';\n            token.textWidth = tokenWidth = 0;\n          } else {\n            token.text = truncateText(token.text, remianTruncWidth - paddingW, font, truncate.ellipsis, {\n              minChar: truncate.minChar\n            });\n            token.textWidth = getWidth(token.text, font);\n            tokenWidth = token.textWidth + paddingW;\n          }\n        }\n      }\n\n      lineWidth += token.width = tokenWidth;\n      tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n    }\n\n    line.width = lineWidth;\n    line.lineHeight = lineHeight;\n    contentHeight += lineHeight;\n    contentWidth = Math.max(contentWidth, lineWidth);\n  }\n\n  contentBlock.outerWidth = contentBlock.width = retrieve2(style.textWidth, contentWidth);\n  contentBlock.outerHeight = contentBlock.height = retrieve2(style.textHeight, contentHeight);\n\n  if (stlPadding) {\n    contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n    contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n  }\n\n  for (var i = 0; i < pendingList.length; i++) {\n    var token = pendingList[i];\n    var percentWidth = token.percentWidth; // Should not base on outerWidth, because token can not be placed out of padding.\n\n    token.width = parseInt(percentWidth, 10) / 100 * contentWidth;\n  }\n\n  return contentBlock;\n}\n\nfunction pushTokens(block, str, styleName) {\n  var isEmptyStr = str === '';\n  var strs = str.split('\\n');\n  var lines = block.lines;\n\n  for (var i = 0; i < strs.length; i++) {\n    var text = strs[i];\n    var token = {\n      styleName: styleName,\n      text: text,\n      isLineHolder: !text && !isEmptyStr\n    }; // The first token should be appended to the last line.\n\n    if (!i) {\n      var tokens = (lines[lines.length - 1] || (lines[0] = {\n        tokens: []\n      })).tokens; // Consider cases:\n      // (1) ''.split('\\n') => ['', '\\n', ''], the '' at the first item\n      // (which is a placeholder) should be replaced by new token.\n      // (2) A image backage, where token likes {a|}.\n      // (3) A redundant '' will affect textAlign in line.\n      // (4) tokens with the same tplName should not be merged, because\n      // they should be displayed in different box (with border and padding).\n\n      var tokensLen = tokens.length;\n      tokensLen === 1 && tokens[0].isLineHolder ? tokens[0] = token : // Consider text is '', only insert when it is the \"lineHolder\" or\n      // \"emptyStr\". Otherwise a redundant '' will affect textAlign in line.\n      (text || !tokensLen || isEmptyStr) && tokens.push(token);\n    } // Other tokens always start a new line.\n    else {\n        // If there is '', insert it as a placeholder.\n        lines.push({\n          tokens: [token]\n        });\n      }\n  }\n}\n\nfunction makeFont(style) {\n  // FIXME in node-canvas fontWeight is before fontStyle\n  // Use `fontSize` `fontFamily` to check whether font properties are defined.\n  var font = (style.fontSize || style.fontFamily) && [style.fontStyle, style.fontWeight, (style.fontSize || 12) + 'px', // If font properties are defined, `fontFamily` should not be ignored.\n  style.fontFamily || 'sans-serif'].join(' ');\n  return font && trim(font) || style.textFont || style.font;\n}\n\nexports.DEFAULT_FONT = DEFAULT_FONT;\nexports.$override = $override;\nexports.getWidth = getWidth;\nexports.getBoundingRect = getBoundingRect;\nexports.adjustTextX = adjustTextX;\nexports.adjustTextY = adjustTextY;\nexports.calculateTextPosition = calculateTextPosition;\nexports.adjustTextPositionOnRect = adjustTextPositionOnRect;\nexports.truncateText = truncateText;\nexports.getLineHeight = getLineHeight;\nexports.measureText = measureText;\nexports.parsePlainText = parsePlainText;\nexports.parseRichText = parseRichText;\nexports.makeFont = makeFont;","var Eventful = require(\"../mixin/Eventful\");\n\nexports.Dispatcher = Eventful;\n\nvar env = require(\"./env\");\n\nvar _dom = require(\"./dom\");\n\nvar isCanvasEl = _dom.isCanvasEl;\nvar transformCoordWithViewport = _dom.transformCoordWithViewport;\n\n/**\n * Utilities for mouse or touch events.\n */\nvar isDomLevel2 = typeof window !== 'undefined' && !!window.addEventListener;\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\nvar _calcOut = [];\n/**\n * Get the `zrX` and `zrY`, which are relative to the top-left of\n * the input `el`.\n * CSS transform (2D & 3D) is supported.\n *\n * The strategy to fetch the coords:\n * + If `calculate` is not set as `true`, users of this method should\n * ensure that `el` is the same or the same size & location as `e.target`.\n * Otherwise the result coords are probably not expected. Because we\n * firstly try to get coords from e.offsetX/e.offsetY.\n * + If `calculate` is set as `true`, the input `el` can be any element\n * and we force to calculate the coords based on `el`.\n * + The input `el` should be positionable (not position:static).\n *\n * The force `calculate` can be used in case like:\n * When mousemove event triggered on ec tooltip, `e.target` is not `el`(zr painter.dom).\n *\n * @param {HTMLElement} el DOM element.\n * @param {Event} e Mouse event or touch event.\n * @param {Object} out Get `out.zrX` and `out.zrY` as the result.\n * @param {boolean} [calculate=false] Whether to force calculate\n *        the coordinates but not use ones provided by browser.\n */\n\nfunction clientToLocal(el, e, out, calculate) {\n  out = out || {}; // According to the W3C Working Draft, offsetX and offsetY should be relative\n  // to the padding edge of the target element. The only browser using this convention\n  // is IE. Webkit uses the border edge, Opera uses the content edge, and FireFox does\n  // not support the properties.\n  // (see http://www.jacklmoore.com/notes/mouse-position/)\n  // In zr painter.dom, padding edge equals to border edge.\n\n  if (calculate || !env.canvasSupported) {\n    calculateZrXY(el, e, out);\n  } // Caution: In FireFox, layerX/layerY Mouse position relative to the closest positioned\n  // ancestor element, so we should make sure el is positioned (e.g., not position:static).\n  // BTW1, Webkit don't return the same results as FF in non-simple cases (like add\n  // zoom-factor, overflow / opacity layers, transforms ...)\n  // BTW2, (ev.offsetY || ev.pageY - $(ev.target).offset().top) is not correct in preserve-3d.\n  // <https://bugs.jquery.com/ticket/8523#comment:14>\n  // BTW3, In ff, offsetX/offsetY is always 0.\n  else if (env.browser.firefox && e.layerX != null && e.layerX !== e.offsetX) {\n      out.zrX = e.layerX;\n      out.zrY = e.layerY;\n    } // For IE6+, chrome, safari, opera. (When will ff support offsetX?)\n    else if (e.offsetX != null) {\n        out.zrX = e.offsetX;\n        out.zrY = e.offsetY;\n      } // For some other device, e.g., IOS safari.\n      else {\n          calculateZrXY(el, e, out);\n        }\n\n  return out;\n}\n\nfunction calculateZrXY(el, e, out) {\n  // BlackBerry 5, iOS 3 (original iPhone) don't have getBoundingRect.\n  if (env.domSupported && el.getBoundingClientRect) {\n    var ex = e.clientX;\n    var ey = e.clientY;\n\n    if (isCanvasEl(el)) {\n      // Original approach, which do not support CSS transform.\n      // marker can not be locationed in a canvas container\n      // (getBoundingClientRect is always 0). We do not support\n      // that input a pre-created canvas to zr while using css\n      // transform in iOS.\n      var box = el.getBoundingClientRect();\n      out.zrX = ex - box.left;\n      out.zrY = ey - box.top;\n      return;\n    } else {\n      if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n        out.zrX = _calcOut[0];\n        out.zrY = _calcOut[1];\n        return;\n      }\n    }\n  }\n\n  out.zrX = out.zrY = 0;\n}\n/**\n * Find native event compat for legency IE.\n * Should be called at the begining of a native event listener.\n *\n * @param {Event} [e] Mouse event or touch event or pointer event.\n *        For lagency IE, we use `window.event` is used.\n * @return {Event} The native event.\n */\n\n\nfunction getNativeEvent(e) {\n  return e || window.event;\n}\n/**\n * Normalize the coordinates of the input event.\n *\n * Get the `e.zrX` and `e.zrY`, which are relative to the top-left of\n * the input `el`.\n * Get `e.zrDelta` if using mouse wheel.\n * Get `e.which`, see the comment inside this function.\n *\n * Do not calculate repeatly if `zrX` and `zrY` already exist.\n *\n * Notice: see comments in `clientToLocal`. check the relationship\n * between the result coords and the parameters `el` and `calculate`.\n *\n * @param {HTMLElement} el DOM element.\n * @param {Event} [e] See `getNativeEvent`.\n * @param {boolean} [calculate=false] Whether to force calculate\n *        the coordinates but not use ones provided by browser.\n * @return {UIEvent} The normalized native UIEvent.\n */\n\n\nfunction normalizeEvent(el, e, calculate) {\n  e = getNativeEvent(e);\n\n  if (e.zrX != null) {\n    return e;\n  }\n\n  var eventType = e.type;\n  var isTouch = eventType && eventType.indexOf('touch') >= 0;\n\n  if (!isTouch) {\n    clientToLocal(el, e, e, calculate);\n    e.zrDelta = e.wheelDelta ? e.wheelDelta / 120 : -(e.detail || 0) / 3;\n  } else {\n    var touch = eventType !== 'touchend' ? e.targetTouches[0] : e.changedTouches[0];\n    touch && clientToLocal(el, touch, e, calculate);\n  } // Add which for click: 1 === left; 2 === middle; 3 === right; otherwise: 0;\n  // See jQuery: https://github.com/jquery/jquery/blob/master/src/event.js\n  // If e.which has been defined, it may be readonly,\n  // see: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\n\n\n  var button = e.button;\n\n  if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n    e.which = button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;\n  } // [Caution]: `e.which` from browser is not always reliable. For example,\n  // when press left button and `mousemove (pointermove)` in Edge, the `e.which`\n  // is 65536 and the `e.button` is -1. But the `mouseup (pointerup)` and\n  // `mousedown (pointerdown)` is the same as Chrome does.\n\n\n  return e;\n}\n/**\n * @param {HTMLElement} el\n * @param {string} name\n * @param {Function} handler\n * @param {Object|boolean} opt If boolean, means `opt.capture`\n * @param {boolean} [opt.capture=false]\n * @param {boolean} [opt.passive=false]\n */\n\n\nfunction addEventListener(el, name, handler, opt) {\n  if (isDomLevel2) {\n    // Reproduct the console warning:\n    // [Violation] Added non-passive event listener to a scroll-blocking <some> event.\n    // Consider marking event handler as 'passive' to make the page more responsive.\n    // Just set console log level: verbose in chrome dev tool.\n    // then the warning log will be printed when addEventListener called.\n    // See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n    // We have not yet found a neat way to using passive. Because in zrender the dom event\n    // listener delegate all of the upper events of element. Some of those events need\n    // to prevent default. For example, the feature `preventDefaultMouseMove` of echarts.\n    // Before passive can be adopted, these issues should be considered:\n    // (1) Whether and how a zrender user specifies an event listener passive. And by default,\n    // passive or not.\n    // (2) How to tread that some zrender event listener is passive, and some is not. If\n    // we use other way but not preventDefault of mousewheel and touchmove, browser\n    // compatibility should be handled.\n    // var opts = (env.passiveSupported && name === 'mousewheel')\n    //     ? {passive: true}\n    //     // By default, the third param of el.addEventListener is `capture: false`.\n    //     : void 0;\n    // el.addEventListener(name, handler /* , opts */);\n    el.addEventListener(name, handler, opt);\n  } else {\n    // For simplicity, do not implement `setCapture` for IE9-.\n    el.attachEvent('on' + name, handler);\n  }\n}\n/**\n * Parameter are the same as `addEventListener`.\n *\n * Notice that if a listener is registered twice, one with capture and one without,\n * remove each one separately. Removal of a capturing listener does not affect a\n * non-capturing version of the same listener, and vice versa.\n */\n\n\nfunction removeEventListener(el, name, handler, opt) {\n  if (isDomLevel2) {\n    el.removeEventListener(name, handler, opt);\n  } else {\n    el.detachEvent('on' + name, handler);\n  }\n}\n/**\n * preventDefault and stopPropagation.\n * Notice: do not use this method in zrender. It can only be\n * used by upper applications if necessary.\n *\n * @param {Event} e A mouse or touch event.\n */\n\n\nvar stop = isDomLevel2 ? function (e) {\n  e.preventDefault();\n  e.stopPropagation();\n  e.cancelBubble = true;\n} : function (e) {\n  e.returnValue = false;\n  e.cancelBubble = true;\n};\n/**\n * This method only works for mouseup and mousedown. The functionality is restricted\n * for fault tolerance, See the `e.which` compatibility above.\n *\n * @param {MouseEvent} e\n * @return {boolean}\n */\n\nfunction isMiddleOrRightButtonOnMouseUpDown(e) {\n  return e.which === 2 || e.which === 3;\n}\n/**\n * To be removed.\n * @deprecated\n */\n\n\nfunction notLeftMouse(e) {\n  // If e.which is undefined, considered as left mouse event.\n  return e.which > 1;\n} // For backward compatibility\n\n\nexports.clientToLocal = clientToLocal;\nexports.getNativeEvent = getNativeEvent;\nexports.normalizeEvent = normalizeEvent;\nexports.addEventListener = addEventListener;\nexports.removeEventListener = removeEventListener;\nexports.stop = stop;\nexports.isMiddleOrRightButtonOnMouseUpDown = isMiddleOrRightButtonOnMouseUpDown;\nexports.notLeftMouse = notLeftMouse;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar isString = _util.isString;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Note that it is too complicated to support 3d stack by value\n * (have to create two-dimension inverted index), so in 3d case\n * we just support that stacked by index.\n *\n * @param {module:echarts/model/Series} seriesModel\n * @param {Array.<string|Object>} dimensionInfoList The same as the input of <module:echarts/data/List>.\n *        The input dimensionInfoList will be modified.\n * @param {Object} [opt]\n * @param {boolean} [opt.stackedCoordDimension=''] Specify a coord dimension if needed.\n * @param {boolean} [opt.byIndex=false]\n * @return {Object} calculationInfo\n * {\n *     stackedDimension: string\n *     stackedByDimension: string\n *     isStackedByIndex: boolean\n *     stackedOverDimension: string\n *     stackResultDimension: string\n * }\n */\nfunction enableDataStack(seriesModel, dimensionInfoList, opt) {\n  opt = opt || {};\n  var byIndex = opt.byIndex;\n  var stackedCoordDimension = opt.stackedCoordDimension; // Compatibal: when `stack` is set as '', do not stack.\n\n  var mayStack = !!(seriesModel && seriesModel.get('stack'));\n  var stackedByDimInfo;\n  var stackedDimInfo;\n  var stackResultDimension;\n  var stackedOverDimension;\n  each(dimensionInfoList, function (dimensionInfo, index) {\n    if (isString(dimensionInfo)) {\n      dimensionInfoList[index] = dimensionInfo = {\n        name: dimensionInfo\n      };\n    }\n\n    if (mayStack && !dimensionInfo.isExtraCoord) {\n      // Find the first ordinal dimension as the stackedByDimInfo.\n      if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\n        stackedByDimInfo = dimensionInfo;\n      } // Find the first stackable dimension as the stackedDimInfo.\n\n\n      if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\n        stackedDimInfo = dimensionInfo;\n      }\n    }\n  });\n\n  if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\n    // Compatible with previous design, value axis (time axis) only stack by index.\n    // It may make sense if the user provides elaborately constructed data.\n    byIndex = true;\n  } // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\n  // That put stack logic in List is for using conveniently in echarts extensions, but it\n  // might not be a good way.\n\n\n  if (stackedDimInfo) {\n    // Use a weird name that not duplicated with other names.\n    stackResultDimension = '__\\0ecstackresult';\n    stackedOverDimension = '__\\0ecstackedover'; // Create inverted index to fast query index by value.\n\n    if (stackedByDimInfo) {\n      stackedByDimInfo.createInvertedIndices = true;\n    }\n\n    var stackedDimCoordDim = stackedDimInfo.coordDim;\n    var stackedDimType = stackedDimInfo.type;\n    var stackedDimCoordIndex = 0;\n    each(dimensionInfoList, function (dimensionInfo) {\n      if (dimensionInfo.coordDim === stackedDimCoordDim) {\n        stackedDimCoordIndex++;\n      }\n    });\n    dimensionInfoList.push({\n      name: stackResultDimension,\n      coordDim: stackedDimCoordDim,\n      coordDimIndex: stackedDimCoordIndex,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true\n    });\n    stackedDimCoordIndex++;\n    dimensionInfoList.push({\n      name: stackedOverDimension,\n      // This dimension contains stack base (generally, 0), so do not set it as\n      // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\n      coordDim: stackedOverDimension,\n      coordDimIndex: stackedDimCoordIndex,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true\n    });\n  }\n\n  return {\n    stackedDimension: stackedDimInfo && stackedDimInfo.name,\n    stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\n    isStackedByIndex: byIndex,\n    stackedOverDimension: stackedOverDimension,\n    stackResultDimension: stackResultDimension\n  };\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {string} stackedDim\n */\n\n\nfunction isDimensionStacked(data, stackedDim\n/*, stackedByDim*/\n) {\n  // Each single series only maps to one pair of axis. So we do not need to\n  // check stackByDim, whatever stacked by a dimension or stacked by index.\n  return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension'); // && (\n  //     stackedByDim != null\n  //         ? stackedByDim === data.getCalculationInfo('stackedByDimension')\n  //         : data.getCalculationInfo('isStackedByIndex')\n  // );\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {string} targetDim\n * @param {string} [stackedByDim] If not input this parameter, check whether\n *                                stacked by index.\n * @return {string} dimension\n */\n\n\nfunction getStackedDimension(data, targetDim) {\n  return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\n}\n\nexports.enableDataStack = enableDataStack;\nexports.isDimensionStacked = isDimensionStacked;\nexports.getStackedDimension = getStackedDimension;","var Displayable = require(\"./Displayable\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"./helper/text\");\n\nvar _constant = require(\"./constant\");\n\nvar ContextCachedBy = _constant.ContextCachedBy;\n\n/**\n * @alias zrender/graphic/Text\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\nvar Text = function (opts) {\n  // jshint ignore:line\n  Displayable.call(this, opts);\n};\n\nText.prototype = {\n  constructor: Text,\n  type: 'text',\n  brush: function (ctx, prevEl) {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true); // Use props with prefix 'text'.\n\n    style.fill = style.stroke = style.shadowBlur = style.shadowColor = style.shadowOffsetX = style.shadowOffsetY = null;\n    var text = style.text; // Convert to string\n\n    text != null && (text += ''); // Do not apply style.bind in Text node. Because the real bind job\n    // is in textHelper.renderText, and performance of text render should\n    // be considered.\n    // style.bind(ctx, this, prevEl);\n\n    if (!textHelper.needDrawText(text, style)) {\n      // The current el.style is not applied\n      // and should not be used as cache.\n      ctx.__attrCachedBy = ContextCachedBy.NONE;\n      return;\n    }\n\n    this.setTransform(ctx);\n    textHelper.renderText(this, ctx, text, style, null, prevEl);\n    this.restoreTransform(ctx);\n  },\n  getBoundingRect: function () {\n    var style = this.style; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n\n    if (!this._rect) {\n      var text = style.text;\n      text != null ? text += '' : text = '';\n      var rect = textContain.getBoundingRect(style.text + '', style.font, style.textAlign, style.textVerticalAlign, style.textPadding, style.textLineHeight, style.rich);\n      rect.x += style.x || 0;\n      rect.y += style.y || 0;\n\n      if (textHelper.getStroke(style.textStroke, style.textStrokeWidth)) {\n        var w = style.textStrokeWidth;\n        rect.x -= w / 2;\n        rect.y -= w / 2;\n        rect.width += w;\n        rect.height += w;\n      }\n\n      this._rect = rect;\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(Text, Displayable);\nvar _default = Text;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import * as axisHelper from './axisHelper';\nvar _default = {\n  /**\n   * @param {boolean} origin\n   * @return {number|string} min value or 'dataMin' or null/undefined (means auto) or NaN\n   */\n  getMin: function (origin) {\n    var option = this.option;\n    var min = !origin && option.rangeStart != null ? option.rangeStart : option.min;\n\n    if (this.axis && min != null && min !== 'dataMin' && typeof min !== 'function' && !zrUtil.eqNaN(min)) {\n      min = this.axis.scale.parse(min);\n    }\n\n    return min;\n  },\n\n  /**\n   * @param {boolean} origin\n   * @return {number|string} max value or 'dataMax' or null/undefined (means auto) or NaN\n   */\n  getMax: function (origin) {\n    var option = this.option;\n    var max = !origin && option.rangeEnd != null ? option.rangeEnd : option.max;\n\n    if (this.axis && max != null && max !== 'dataMax' && typeof max !== 'function' && !zrUtil.eqNaN(max)) {\n      max = this.axis.scale.parse(max);\n    }\n\n    return max;\n  },\n\n  /**\n   * @return {boolean}\n   */\n  getNeedCrossZero: function () {\n    var option = this.option;\n    return option.rangeStart != null || option.rangeEnd != null ? false : !option.scale;\n  },\n\n  /**\n   * Should be implemented by each axis model if necessary.\n   * @return {module:echarts/model/Component} coordinate system model\n   */\n  getCoordSysModel: zrUtil.noop,\n\n  /**\n   * @param {number} rangeStart Can only be finite number or null/undefined or NaN.\n   * @param {number} rangeEnd Can only be finite number or null/undefined or NaN.\n   */\n  setRange: function (rangeStart, rangeEnd) {\n    this.option.rangeStart = rangeStart;\n    this.option.rangeEnd = rangeEnd;\n  },\n\n  /**\n   * Reset range\n   */\n  resetRange: function () {\n    // rangeStart and rangeEnd is readonly.\n    this.option.rangeStart = this.option.rangeEnd = null;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\nvar getDataItemValue = _model.getDataItemValue;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar each = _util.each;\nvar map = _util.map;\nvar isArray = _util.isArray;\nvar isString = _util.isString;\nvar isObject = _util.isObject;\nvar isTypedArray = _util.isTypedArray;\nvar isArrayLike = _util.isArrayLike;\nvar extend = _util.extend;\nvar assert = _util.assert;\n\nvar Source = require(\"../Source\");\n\nvar _sourceType = require(\"./sourceType\");\n\nvar SOURCE_FORMAT_ORIGINAL = _sourceType.SOURCE_FORMAT_ORIGINAL;\nvar SOURCE_FORMAT_ARRAY_ROWS = _sourceType.SOURCE_FORMAT_ARRAY_ROWS;\nvar SOURCE_FORMAT_OBJECT_ROWS = _sourceType.SOURCE_FORMAT_OBJECT_ROWS;\nvar SOURCE_FORMAT_KEYED_COLUMNS = _sourceType.SOURCE_FORMAT_KEYED_COLUMNS;\nvar SOURCE_FORMAT_UNKNOWN = _sourceType.SOURCE_FORMAT_UNKNOWN;\nvar SOURCE_FORMAT_TYPED_ARRAY = _sourceType.SOURCE_FORMAT_TYPED_ARRAY;\nvar SERIES_LAYOUT_BY_ROW = _sourceType.SERIES_LAYOUT_BY_ROW;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// The result of `guessOrdinal`.\nvar BE_ORDINAL = {\n  Must: 1,\n  // Encounter string but not '-' and not number-like.\n  Might: 2,\n  // Encounter string but number-like.\n  Not: 3 // Other cases\n\n};\nvar inner = makeInner();\n/**\n * @see {module:echarts/data/Source}\n * @param {module:echarts/component/dataset/DatasetModel} datasetModel\n * @return {string} sourceFormat\n */\n\nfunction detectSourceFormat(datasetModel) {\n  var data = datasetModel.option.source;\n  var sourceFormat = SOURCE_FORMAT_UNKNOWN;\n\n  if (isTypedArray(data)) {\n    sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\n  } else if (isArray(data)) {\n    // FIXME Whether tolerate null in top level array?\n    if (data.length === 0) {\n      sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n    }\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      var item = data[i];\n\n      if (item == null) {\n        continue;\n      } else if (isArray(item)) {\n        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n        break;\n      } else if (isObject(item)) {\n        sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\n        break;\n      }\n    }\n  } else if (isObject(data)) {\n    for (var key in data) {\n      if (data.hasOwnProperty(key) && isArrayLike(data[key])) {\n        sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\n        break;\n      }\n    }\n  } else if (data != null) {\n    throw new Error('Invalid data');\n  }\n\n  inner(datasetModel).sourceFormat = sourceFormat;\n}\n/**\n * [Scenarios]:\n * (1) Provide source data directly:\n *     series: {\n *         encode: {...},\n *         dimensions: [...]\n *         seriesLayoutBy: 'row',\n *         data: [[...]]\n *     }\n * (2) Refer to datasetModel.\n *     series: [{\n *         encode: {...}\n *         // Ignore datasetIndex means `datasetIndex: 0`\n *         // and the dimensions defination in dataset is used\n *     }, {\n *         encode: {...},\n *         seriesLayoutBy: 'column',\n *         datasetIndex: 1\n *     }]\n *\n * Get data from series itself or datset.\n * @return {module:echarts/data/Source} source\n */\n\n\nfunction getSource(seriesModel) {\n  return inner(seriesModel).source;\n}\n/**\n * MUST be called before mergeOption of all series.\n * @param {module:echarts/model/Global} ecModel\n */\n\n\nfunction resetSourceDefaulter(ecModel) {\n  // `datasetMap` is used to make default encode.\n  inner(ecModel).datasetMap = createHashMap();\n}\n/**\n * [Caution]:\n * MUST be called after series option merged and\n * before \"series.getInitailData()\" called.\n *\n * [The rule of making default encode]:\n * Category axis (if exists) alway map to the first dimension.\n * Each other axis occupies a subsequent dimension.\n *\n * [Why make default encode]:\n * Simplify the typing of encode in option, avoiding the case like that:\n * series: [{encode: {x: 0, y: 1}}, {encode: {x: 0, y: 2}}, {encode: {x: 0, y: 3}}],\n * where the \"y\" have to be manually typed as \"1, 2, 3, ...\".\n *\n * @param {module:echarts/model/Series} seriesModel\n */\n\n\nfunction prepareSource(seriesModel) {\n  var seriesOption = seriesModel.option;\n  var data = seriesOption.data;\n  var sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\n  var fromDataset = false;\n  var seriesLayoutBy = seriesOption.seriesLayoutBy;\n  var sourceHeader = seriesOption.sourceHeader;\n  var dimensionsDefine = seriesOption.dimensions;\n  var datasetModel = getDatasetModel(seriesModel);\n\n  if (datasetModel) {\n    var datasetOption = datasetModel.option;\n    data = datasetOption.source;\n    sourceFormat = inner(datasetModel).sourceFormat;\n    fromDataset = true; // These settings from series has higher priority.\n\n    seriesLayoutBy = seriesLayoutBy || datasetOption.seriesLayoutBy;\n    sourceHeader == null && (sourceHeader = datasetOption.sourceHeader);\n    dimensionsDefine = dimensionsDefine || datasetOption.dimensions;\n  }\n\n  var completeResult = completeBySourceData(data, sourceFormat, seriesLayoutBy, sourceHeader, dimensionsDefine);\n  inner(seriesModel).source = new Source({\n    data: data,\n    fromDataset: fromDataset,\n    seriesLayoutBy: seriesLayoutBy,\n    sourceFormat: sourceFormat,\n    dimensionsDefine: completeResult.dimensionsDefine,\n    startIndex: completeResult.startIndex,\n    dimensionsDetectCount: completeResult.dimensionsDetectCount,\n    // Note: dataset option does not have `encode`.\n    encodeDefine: seriesOption.encode\n  });\n} // return {startIndex, dimensionsDefine, dimensionsCount}\n\n\nfunction completeBySourceData(data, sourceFormat, seriesLayoutBy, sourceHeader, dimensionsDefine) {\n  if (!data) {\n    return {\n      dimensionsDefine: normalizeDimensionsDefine(dimensionsDefine)\n    };\n  }\n\n  var dimensionsDetectCount;\n  var startIndex;\n\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    // Rule: Most of the first line are string: it is header.\n    // Caution: consider a line with 5 string and 1 number,\n    // it still can not be sure it is a head, because the\n    // 5 string may be 5 values of category columns.\n    if (sourceHeader === 'auto' || sourceHeader == null) {\n      arrayRowsTravelFirst(function (val) {\n        // '-' is regarded as null/undefined.\n        if (val != null && val !== '-') {\n          if (isString(val)) {\n            startIndex == null && (startIndex = 1);\n          } else {\n            startIndex = 0;\n          }\n        } // 10 is an experience number, avoid long loop.\n\n      }, seriesLayoutBy, data, 10);\n    } else {\n      startIndex = sourceHeader ? 1 : 0;\n    }\n\n    if (!dimensionsDefine && startIndex === 1) {\n      dimensionsDefine = [];\n      arrayRowsTravelFirst(function (val, index) {\n        dimensionsDefine[index] = val != null ? val : '';\n      }, seriesLayoutBy, data);\n    }\n\n    dimensionsDetectCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? data.length : data[0] ? data[0].length : null;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = objectRowsCollectDimensions(data);\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = [];\n      each(data, function (colArr, key) {\n        dimensionsDefine.push(key);\n      });\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var value0 = getDataItemValue(data[0]);\n    dimensionsDetectCount = isArray(value0) && value0.length || 1;\n  } else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {}\n\n  return {\n    startIndex: startIndex,\n    dimensionsDefine: normalizeDimensionsDefine(dimensionsDefine),\n    dimensionsDetectCount: dimensionsDetectCount\n  };\n} // Consider dimensions defined like ['A', 'price', 'B', 'price', 'C', 'price'],\n// which is reasonable. But dimension name is duplicated.\n// Returns undefined or an array contains only object without null/undefiend or string.\n\n\nfunction normalizeDimensionsDefine(dimensionsDefine) {\n  if (!dimensionsDefine) {\n    // The meaning of null/undefined is different from empty array.\n    return;\n  }\n\n  var nameMap = createHashMap();\n  return map(dimensionsDefine, function (item, index) {\n    item = extend({}, isObject(item) ? item : {\n      name: item\n    }); // User can set null in dimensions.\n    // We dont auto specify name, othewise a given name may\n    // cause it be refered unexpectedly.\n\n    if (item.name == null) {\n      return item;\n    } // Also consider number form like 2012.\n\n\n    item.name += ''; // User may also specify displayName.\n    // displayName will always exists except user not\n    // specified or dim name is not specified or detected.\n    // (A auto generated dim name will not be used as\n    // displayName).\n\n    if (item.displayName == null) {\n      item.displayName = item.name;\n    }\n\n    var exist = nameMap.get(item.name);\n\n    if (!exist) {\n      nameMap.set(item.name, {\n        count: 1\n      });\n    } else {\n      item.name += '-' + exist.count++;\n    }\n\n    return item;\n  });\n}\n\nfunction arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\n  maxLoop == null && (maxLoop = Infinity);\n\n  if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      cb(data[i] ? data[i][0] : null, i);\n    }\n  } else {\n    var value0 = data[0] || [];\n\n    for (var i = 0; i < value0.length && i < maxLoop; i++) {\n      cb(value0[i], i);\n    }\n  }\n}\n\nfunction objectRowsCollectDimensions(data) {\n  var firstIndex = 0;\n  var obj;\n\n  while (firstIndex < data.length && !(obj = data[firstIndex++])) {} // jshint ignore: line\n\n\n  if (obj) {\n    var dimensions = [];\n    each(obj, function (value, key) {\n      dimensions.push(key);\n    });\n    return dimensions;\n  }\n}\n/**\n * [The strategy of the arrengment of data dimensions for dataset]:\n * \"value way\": all axes are non-category axes. So series one by one take\n *     several (the number is coordSysDims.length) dimensions from dataset.\n *     The result of data arrengment of data dimensions like:\n *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\n * \"category way\": at least one axis is category axis. So the the first data\n *     dimension is always mapped to the first category axis and shared by\n *     all of the series. The other data dimensions are taken by series like\n *     \"value way\" does.\n *     The result of data arrengment of data dimensions like:\n *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\n *\n * @param {Array.<Object|string>} coordDimensions [{name: <string>, type: <string>, dimsDef: <Array>}, ...]\n * @param {module:model/Series} seriesModel\n * @param {module:data/Source} source\n * @return {Object} encode Never be `null/undefined`.\n */\n\n\nfunction makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\n  var encode = {};\n  var datasetModel = getDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n  if (!datasetModel || !coordDimensions) {\n    return encode;\n  }\n\n  var encodeItemName = [];\n  var encodeSeriesName = [];\n  var ecModel = seriesModel.ecModel;\n  var datasetMap = inner(ecModel).datasetMap;\n  var key = datasetModel.uid + '_' + source.seriesLayoutBy;\n  var baseCategoryDimIndex;\n  var categoryWayValueDimStart;\n  coordDimensions = coordDimensions.slice();\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n    !isObject(coordDimInfo) && (coordDimensions[coordDimIdx] = {\n      name: coordDimInfo\n    });\n\n    if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\n      baseCategoryDimIndex = coordDimIdx;\n      categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimensions[coordDimIdx]);\n    }\n\n    encode[coordDimInfo.name] = [];\n  });\n  var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\n    categoryWayDim: categoryWayValueDimStart,\n    valueWayDim: 0\n  }); // TODO\n  // Auto detect first time axis and do arrangement.\n\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n    var coordDimName = coordDimInfo.name;\n    var count = getDataDimCountOnCoordDim(coordDimInfo); // In value way.\n\n    if (baseCategoryDimIndex == null) {\n      var start = datasetRecord.valueWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.valueWayDim += count; // ??? TODO give a better default series name rule?\n      // especially when encode x y specified.\n      // consider: when mutiple series share one dimension\n      // category axis, series name should better use\n      // the other dimsion name. On the other hand, use\n      // both dimensions name.\n    } // In category way, the first category axis.\n    else if (baseCategoryDimIndex === coordDimIdx) {\n        pushDim(encode[coordDimName], 0, count);\n        pushDim(encodeItemName, 0, count);\n      } // In category way, the other axis.\n      else {\n          var start = datasetRecord.categoryWayDim;\n          pushDim(encode[coordDimName], start, count);\n          pushDim(encodeSeriesName, start, count);\n          datasetRecord.categoryWayDim += count;\n        }\n  });\n\n  function pushDim(dimIdxArr, idxFrom, idxCount) {\n    for (var i = 0; i < idxCount; i++) {\n      dimIdxArr.push(idxFrom + i);\n    }\n  }\n\n  function getDataDimCountOnCoordDim(coordDimInfo) {\n    var dimsDef = coordDimInfo.dimsDef;\n    return dimsDef ? dimsDef.length : 1;\n  }\n\n  encodeItemName.length && (encode.itemName = encodeItemName);\n  encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\n  return encode;\n}\n/**\n * Work for data like [{name: ..., value: ...}, ...].\n *\n * @param {module:model/Series} seriesModel\n * @param {module:data/Source} source\n * @return {Object} encode Never be `null/undefined`.\n */\n\n\nfunction makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\n  var encode = {};\n  var datasetModel = getDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n  if (!datasetModel) {\n    return encode;\n  }\n\n  var sourceFormat = source.sourceFormat;\n  var dimensionsDefine = source.dimensionsDefine;\n  var potentialNameDimIndex;\n\n  if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    each(dimensionsDefine, function (dim, idx) {\n      if ((isObject(dim) ? dim.name : dim) === 'name') {\n        potentialNameDimIndex = idx;\n      }\n    });\n  } // idxResult: {v, n}.\n\n\n  var idxResult = function () {\n    var idxRes0 = {};\n    var idxRes1 = {};\n    var guessRecords = []; // 5 is an experience value.\n\n    for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\n      var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\n      guessRecords.push(guessResult);\n      var isPureNumber = guessResult === BE_ORDINAL.Not; // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\n      // and then find a name dim with the priority:\n      // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\n\n      if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\n        idxRes0.v = i;\n      }\n\n      if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\n        idxRes0.n = i;\n      }\n\n      if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\n        return idxRes0;\n      } // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\n      // find the first BE_ORDINAL.Might as the value dim,\n      // and then find a name dim with the priority:\n      // \"other dim\" > \"the value dim itself\".\n      // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\n      // treated as number.\n\n\n      if (!isPureNumber) {\n        if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\n          idxRes1.v = i;\n        }\n\n        if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\n          idxRes1.n = i;\n        }\n      }\n    }\n\n    function fulfilled(idxResult) {\n      return idxResult.v != null && idxResult.n != null;\n    }\n\n    return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\n  }();\n\n  if (idxResult) {\n    encode.value = idxResult.v; // `potentialNameDimIndex` has highest priority.\n\n    var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n; // By default, label use itemName in charts.\n    // So we dont set encodeLabel here.\n\n    encode.itemName = [nameDimIndex];\n    encode.seriesName = [nameDimIndex];\n  }\n\n  return encode;\n}\n/**\n * If return null/undefined, indicate that should not use datasetModel.\n */\n\n\nfunction getDatasetModel(seriesModel) {\n  var option = seriesModel.option; // Caution: consider the scenario:\n  // A dataset is declared and a series is not expected to use the dataset,\n  // and at the beginning `setOption({series: { noData })` (just prepare other\n  // option but no data), then `setOption({series: {data: [...]}); In this case,\n  // the user should set an empty array to avoid that dataset is used by default.\n\n  var thisData = option.data;\n\n  if (!thisData) {\n    return seriesModel.ecModel.getComponent('dataset', option.datasetIndex || 0);\n  }\n}\n/**\n * The rule should not be complex, otherwise user might not\n * be able to known where the data is wrong.\n * The code is ugly, but how to make it neat?\n *\n * @param {module:echars/data/Source} source\n * @param {number} dimIndex\n * @return {BE_ORDINAL} guess result.\n */\n\n\nfunction guessOrdinal(source, dimIndex) {\n  return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\n} // dimIndex may be overflow source data.\n// return {BE_ORDINAL}\n\n\nfunction doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\n  var result; // Experience value.\n\n  var maxLoop = 5;\n\n  if (isTypedArray(data)) {\n    return BE_ORDINAL.Not;\n  } // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\n  // always exists in source.\n\n\n  var dimName;\n  var dimType;\n\n  if (dimensionsDefine) {\n    var dimDefItem = dimensionsDefine[dimIndex];\n\n    if (isObject(dimDefItem)) {\n      dimName = dimDefItem.name;\n      dimType = dimDefItem.type;\n    } else if (isString(dimDefItem)) {\n      dimName = dimDefItem;\n    }\n  }\n\n  if (dimType != null) {\n    return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\n  }\n\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n      var sample = data[dimIndex];\n\n      for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\n        if ((result = detectValue(sample[startIndex + i])) != null) {\n          return result;\n        }\n      }\n    } else {\n      for (var i = 0; i < data.length && i < maxLoop; i++) {\n        var row = data[startIndex + i];\n\n        if (row && (result = detectValue(row[dimIndex])) != null) {\n          return result;\n        }\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      var item = data[i];\n\n      if (item && (result = detectValue(item[dimName])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n\n    var sample = data[dimName];\n\n    if (!sample || isTypedArray(sample)) {\n      return BE_ORDINAL.Not;\n    }\n\n    for (var i = 0; i < sample.length && i < maxLoop; i++) {\n      if ((result = detectValue(sample[i])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      var item = data[i];\n      var val = getDataItemValue(item);\n\n      if (!isArray(val)) {\n        return BE_ORDINAL.Not;\n      }\n\n      if ((result = detectValue(val[dimIndex])) != null) {\n        return result;\n      }\n    }\n  }\n\n  function detectValue(val) {\n    var beStr = isString(val); // Consider usage convenience, '1', '2' will be treated as \"number\".\n    // `isFinit('')` get `true`.\n\n    if (val != null && isFinite(val) && val !== '') {\n      return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\n    } else if (beStr && val !== '-') {\n      return BE_ORDINAL.Must;\n    }\n  }\n\n  return BE_ORDINAL.Not;\n}\n\nexports.BE_ORDINAL = BE_ORDINAL;\nexports.detectSourceFormat = detectSourceFormat;\nexports.getSource = getSource;\nexports.resetSourceDefaulter = resetSourceDefaulter;\nexports.prepareSource = prepareSource;\nexports.makeSeriesEncodeForAxisCoordSys = makeSeriesEncodeForAxisCoordSys;\nexports.makeSeriesEncodeForNameBased = makeSeriesEncodeForNameBased;\nexports.guessOrdinal = guessOrdinal;","var Displayable = require(\"./Displayable\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar zrUtil = require(\"../core/util\");\n\nvar imageHelper = require(\"./helper/image\");\n\n/**\n * @alias zrender/graphic/Image\n * @extends module:zrender/graphic/Displayable\n * @constructor\n * @param {Object} opts\n */\nfunction ZImage(opts) {\n  Displayable.call(this, opts);\n}\n\nZImage.prototype = {\n  constructor: ZImage,\n  type: 'image',\n  brush: function (ctx, prevEl) {\n    var style = this.style;\n    var src = style.image; // Must bind each time\n\n    style.bind(ctx, this, prevEl);\n    var image = this._image = imageHelper.createOrUpdateImage(src, this._image, this, this.onload);\n\n    if (!image || !imageHelper.isImageReady(image)) {\n      return;\n    } // \n    // if (image.nodeName.toUpperCase() == 'IMG') {\n    //     if (!image.complete) {\n    //         return;\n    //     }\n    // }\n    // Else is canvas\n\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = style.width;\n    var height = style.height;\n    var aspect = image.width / image.height;\n\n    if (width == null && height != null) {\n      // Keep image/height ratio\n      width = height * aspect;\n    } else if (height == null && width != null) {\n      height = width / aspect;\n    } else if (width == null && height == null) {\n      width = image.width;\n      height = image.height;\n    } // transform\n\n\n    this.setTransform(ctx);\n\n    if (style.sWidth && style.sHeight) {\n      var sx = style.sx || 0;\n      var sy = style.sy || 0;\n      ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    } else if (style.sx && style.sy) {\n      var sx = style.sx;\n      var sy = style.sy;\n      var sWidth = width - sx;\n      var sHeight = height - sy;\n      ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    } else {\n      ctx.drawImage(image, x, y, width, height);\n    } // Draw rect text\n\n\n    if (style.text != null) {\n      // Only restore transform when needs draw text.\n      this.restoreTransform(ctx);\n      this.drawRectText(ctx, this.getBoundingRect());\n    }\n  },\n  getBoundingRect: function () {\n    var style = this.style;\n\n    if (!this._rect) {\n      this._rect = new BoundingRect(style.x || 0, style.y || 0, style.width || 0, style.height || 0);\n    }\n\n    return this._rect;\n  }\n};\nzrUtil.inherits(ZImage, Displayable);\nvar _default = ZImage;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO Parse shadow style\n// TODO Only shallow path support\nfunction _default(properties) {\n  // Normalize\n  for (var i = 0; i < properties.length; i++) {\n    if (!properties[i][1]) {\n      properties[i][1] = properties[i][0];\n    }\n  }\n\n  return function (model, excludes, includes) {\n    var style = {};\n\n    for (var i = 0; i < properties.length; i++) {\n      var propName = properties[i][1];\n\n      if (excludes && zrUtil.indexOf(excludes, propName) >= 0 || includes && zrUtil.indexOf(includes, propName) < 0) {\n        continue;\n      }\n\n      var val = model.getShallow(propName);\n\n      if (val != null) {\n        style[properties[i][0]] = val;\n      }\n    }\n\n    return style;\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @return {string} If large mode changed, return string 'reset';\n */\nfunction _default() {\n  var inner = makeInner();\n  return function (seriesModel) {\n    var fields = inner(seriesModel);\n    var pipelineContext = seriesModel.pipelineContext;\n    var originalLarge = fields.large;\n    var originalProgressive = fields.progressiveRender; // FIXME: if the planner works on a filtered series, `pipelineContext` does not\n    // exists. See #11611 . Probably we need to modify this structure, see the comment\n    // on `performRawSeries` in `Schedular.js`.\n\n    var large = fields.large = pipelineContext && pipelineContext.large;\n    var progressive = fields.progressiveRender = pipelineContext && pipelineContext.progressiveRender;\n    return !!(originalLarge ^ large || originalProgressive ^ progressive) && 'reset';\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar completeDimensions = require(\"./completeDimensions\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Substitute `completeDimensions`.\n * `completeDimensions` is to be deprecated.\n */\n\n/**\n * @param {module:echarts/data/Source|module:echarts/data/List} source or data.\n * @param {Object|Array} [opt]\n * @param {Array.<string|Object>} [opt.coordDimensions=[]]\n * @param {number} [opt.dimensionsCount]\n * @param {string} [opt.generateCoord]\n * @param {string} [opt.generateCoordCount]\n * @param {Array.<string|Object>} [opt.dimensionsDefine=source.dimensionsDefine] Overwrite source define.\n * @param {Object|HashMap} [opt.encodeDefine=source.encodeDefine] Overwrite source define.\n * @param {Function} [opt.encodeDefaulter] Make default encode if user not specified.\n * @return {Array.<Object>} dimensionsInfo\n */\nfunction _default(source, opt) {\n  opt = opt || {};\n  return completeDimensions(opt.coordDimensions || [], source, {\n    dimsDef: opt.dimensionsDefine || source.dimensionsDefine,\n    encodeDef: opt.encodeDefine || source.encodeDefine,\n    dimCount: opt.dimensionsCount,\n    encodeDefaulter: opt.encodeDefaulter,\n    generateCoord: opt.generateCoord,\n    generateCoordCount: opt.generateCoordCount\n  });\n}\n\nmodule.exports = _default;","var _config = require(\"../config\");\n\nvar debugMode = _config.debugMode;\n\nvar logError = function () {};\n\nif (debugMode === 1) {\n  logError = console.error;\n}\n\nvar _default = logError;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _number = require(\"../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _dataStackHelper = require(\"../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\nvar createRenderPlanner = require(\"../chart/helper/createRenderPlanner\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nvar STACK_PREFIX = '__ec_stack_';\nvar LARGE_BAR_MIN_WIDTH = 0.5;\nvar LargeArr = typeof Float32Array !== 'undefined' ? Float32Array : Array;\n\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n}\n\nfunction getAxisKey(axis) {\n  return axis.dim + axis.index;\n}\n/**\n * @param {Object} opt\n * @param {module:echarts/coord/Axis} opt.axis Only support category axis currently.\n * @param {number} opt.count Positive interger.\n * @param {number} [opt.barWidth]\n * @param {number} [opt.barMaxWidth]\n * @param {number} [opt.barMinWidth]\n * @param {number} [opt.barGap]\n * @param {number} [opt.barCategoryGap]\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\n */\n\n\nfunction getLayoutOnAxis(opt) {\n  var params = [];\n  var baseAxis = opt.axis;\n  var axisKey = 'axis0';\n\n  if (baseAxis.type !== 'category') {\n    return;\n  }\n\n  var bandWidth = baseAxis.getBandWidth();\n\n  for (var i = 0; i < opt.count || 0; i++) {\n    params.push(zrUtil.defaults({\n      bandWidth: bandWidth,\n      axisKey: axisKey,\n      stackId: STACK_PREFIX + i\n    }, opt));\n  }\n\n  var widthAndOffsets = doCalBarWidthAndOffset(params);\n  var result = [];\n\n  for (var i = 0; i < opt.count; i++) {\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\n    item.offsetCenter = item.offset + item.width / 2;\n    result.push(item);\n  }\n\n  return result;\n}\n\nfunction prepareLayoutBarSeries(seriesType, ecModel) {\n  var seriesModels = [];\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for cartesian2d only\n    if (isOnCartesian(seriesModel) && !isInLargeMode(seriesModel)) {\n      seriesModels.push(seriesModel);\n    }\n  });\n  return seriesModels;\n}\n/**\n * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\n * values.\n * This works for time axes, value axes, and log axes.\n * For a single time axis, return value is in the form like\n * {'x_0': [1000000]}.\n * The value of 1000000 is in milliseconds.\n */\n\n\nfunction getValueAxesMinGaps(barSeries) {\n  /**\n   * Map from axis.index to values.\n   * For a single time axis, axisValues is in the form like\n   * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\n   * Items in axisValues[x], e.g. 1495555200000, are time values of all\n   * series.\n   */\n  var axisValues = {};\n  zrUtil.each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n\n    if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var key = baseAxis.dim + '_' + baseAxis.index;\n    var dim = data.mapDimension(baseAxis.dim);\n\n    for (var i = 0, cnt = data.count(); i < cnt; ++i) {\n      var value = data.get(dim, i);\n\n      if (!axisValues[key]) {\n        // No previous data for the axis\n        axisValues[key] = [value];\n      } else {\n        // No value in previous series\n        axisValues[key].push(value);\n      } // Ignore duplicated time values in the same axis\n\n    }\n  });\n  var axisMinGaps = [];\n\n  for (var key in axisValues) {\n    if (axisValues.hasOwnProperty(key)) {\n      var valuesInAxis = axisValues[key];\n\n      if (valuesInAxis) {\n        // Sort axis values into ascending order to calculate gaps\n        valuesInAxis.sort(function (a, b) {\n          return a - b;\n        });\n        var min = null;\n\n        for (var j = 1; j < valuesInAxis.length; ++j) {\n          var delta = valuesInAxis[j] - valuesInAxis[j - 1];\n\n          if (delta > 0) {\n            // Ignore 0 delta because they are of the same axis value\n            min = min === null ? delta : Math.min(min, delta);\n          }\n        } // Set to null if only have one data\n\n\n        axisMinGaps[key] = min;\n      }\n    }\n  }\n\n  return axisMinGaps;\n}\n\nfunction makeColumnLayout(barSeries) {\n  var axisMinGaps = getValueAxesMinGaps(barSeries);\n  var seriesInfoList = [];\n  zrUtil.each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth;\n\n    if (baseAxis.type === 'category') {\n      bandWidth = baseAxis.getBandWidth();\n    } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\n      var key = baseAxis.dim + '_' + baseAxis.index;\n      var minGap = axisMinGaps[key];\n      var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\n      var scale = baseAxis.scale.getExtent();\n      var scaleSpan = Math.abs(scale[1] - scale[0]);\n      bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\n    } else {\n      var data = seriesModel.getData();\n      bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    }\n\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barMinWidth = parsePercent( // barMinWidth by default is 1 in cartesian. Because in value axis,\n    // the auto-calculated bar width might be less than 1.\n    seriesModel.get('barMinWidth') || 1, bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    seriesInfoList.push({\n      bandWidth: bandWidth,\n      barWidth: barWidth,\n      barMaxWidth: barMaxWidth,\n      barMinWidth: barMinWidth,\n      barGap: barGap,\n      barCategoryGap: barCategoryGap,\n      axisKey: getAxisKey(baseAxis),\n      stackId: getSeriesStackId(seriesModel)\n    });\n  });\n  return doCalBarWidthAndOffset(seriesInfoList);\n}\n\nfunction doCalBarWidthAndOffset(seriesInfoList) {\n  // Columns info on each category axis. Key is cartesian name\n  var columnsMap = {};\n  zrUtil.each(seriesInfoList, function (seriesInfo, idx) {\n    var axisKey = seriesInfo.axisKey;\n    var bandWidth = seriesInfo.bandWidth;\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: '20%',\n      gap: '30%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = seriesInfo.stackId;\n\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    }; // Caution: In a single coordinate system, these barGrid attributes\n    // will be shared by series. Consider that they have default values,\n    // only the attributes set on the last series will work.\n    // Do not change this fact unless there will be a break change.\n\n    var barWidth = seriesInfo.barWidth;\n\n    if (barWidth && !stacks[stackId].width) {\n      // See #6312, do not restrict width.\n      stacks[stackId].width = barWidth;\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n\n    var barMaxWidth = seriesInfo.barMaxWidth;\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    var barMinWidth = seriesInfo.barMinWidth;\n    barMinWidth && (stacks[stackId].minWidth = barMinWidth);\n    var barGap = seriesInfo.barGap;\n    barGap != null && (columnsOnAxis.gap = barGap);\n    var barCategoryGap = seriesInfo.barCategoryGap;\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  zrUtil.each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGap = parsePercent(columnsOnAxis.categoryGap, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0); // Find if any auto calculated bar exceeded maxBarWidth\n\n    zrUtil.each(stacks, function (column) {\n      var maxWidth = column.maxWidth;\n      var minWidth = column.minWidth;\n\n      if (!column.width) {\n        var finalWidth = autoWidth;\n\n        if (maxWidth && maxWidth < finalWidth) {\n          finalWidth = Math.min(maxWidth, remainedWidth);\n        } // `minWidth` has higher priority. `minWidth` decide that wheter the\n        // bar is able to be visible. So `minWidth` should not be restricted\n        // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\n        // the extreme cases for `value` axis, bars are allowed to overlap\n        // with each other if `minWidth` specified.\n\n\n        if (minWidth && minWidth > finalWidth) {\n          finalWidth = minWidth;\n        }\n\n        if (finalWidth !== autoWidth) {\n          column.width = finalWidth;\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\n          autoWidthCount--;\n        }\n      } else {\n        // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\n        // CSS does. Becuase barWidth can be a percent value, where\n        // `barMaxWidth` can be used to restrict the final width.\n        var finalWidth = column.width;\n\n        if (maxWidth) {\n          finalWidth = Math.min(finalWidth, maxWidth);\n        } // `minWidth` has higher priority, as described above\n\n\n        if (minWidth) {\n          finalWidth = Math.max(finalWidth, minWidth);\n        }\n\n        column.width = finalWidth;\n        remainedWidth -= finalWidth + barGapPercent * finalWidth;\n        autoWidthCount--;\n      }\n    }); // Recalculate width again\n\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    zrUtil.each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n\n    var offset = -widthSum / 2;\n    zrUtil.each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        bandWidth: bandWidth,\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\n/**\n * @param {Object} barWidthAndOffset The result of makeColumnLayout\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Series} [seriesModel] If not provided, return all.\n * @return {Object} {stackId: {offset, width}} or {offset, width} if seriesModel provided.\n */\n\n\nfunction retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\n  if (barWidthAndOffset && axis) {\n    var result = barWidthAndOffset[getAxisKey(axis)];\n\n    if (result != null && seriesModel != null) {\n      result = result[getSeriesStackId(seriesModel)];\n    }\n\n    return result;\n  }\n}\n/**\n * @param {string} seriesType\n * @param {module:echarts/model/Global} ecModel\n */\n\n\nfunction layout(seriesType, ecModel) {\n  var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\n  var barWidthAndOffset = makeColumnLayout(seriesModels);\n  var lastStackCoords = {};\n  var lastStackCoordsOrigin = {};\n  zrUtil.each(seriesModels, function (seriesModel) {\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    var valueAxis = cartesian.getOtherAxis(baseAxis);\n    var barMinHeight = seriesModel.get('barMinHeight') || 0;\n    lastStackCoords[stackId] = lastStackCoords[stackId] || [];\n    lastStackCoordsOrigin[stackId] = lastStackCoordsOrigin[stackId] || []; // Fix #4243\n\n    data.setLayout({\n      bandWidth: columnLayoutInfo.bandWidth,\n      offset: columnOffset,\n      size: columnWidth\n    });\n    var valueDim = data.mapDimension(valueAxis.dim);\n    var baseDim = data.mapDimension(baseAxis.dim);\n    var stacked = isDimensionStacked(data, valueDim\n    /*, baseDim*/\n    );\n    var isValueAxisH = valueAxis.isHorizontal();\n    var valueAxisStart = getValueAxisStart(baseAxis, valueAxis, stacked);\n\n    for (var idx = 0, len = data.count(); idx < len; idx++) {\n      var value = data.get(valueDim, idx);\n      var baseValue = data.get(baseDim, idx);\n      var sign = value >= 0 ? 'p' : 'n';\n      var baseCoord = valueAxisStart; // Because of the barMinHeight, we can not use the value in\n      // stackResultDimension directly.\n\n      if (stacked) {\n        // Only ordinal axis can be stacked.\n        if (!lastStackCoords[stackId][baseValue]) {\n          lastStackCoords[stackId][baseValue] = {\n            p: valueAxisStart,\n            // Positive stack\n            n: valueAxisStart // Negative stack\n\n          };\n        } // Should also consider #4243\n\n\n        baseCoord = lastStackCoords[stackId][baseValue][sign];\n      }\n\n      var x;\n      var y;\n      var width;\n      var height;\n\n      if (isValueAxisH) {\n        var coord = cartesian.dataToPoint([value, baseValue]);\n        x = baseCoord;\n        y = coord[1] + columnOffset;\n        width = coord[0] - valueAxisStart;\n        height = columnWidth;\n\n        if (Math.abs(width) < barMinHeight) {\n          width = (width < 0 ? -1 : 1) * barMinHeight;\n        } // Ignore stack from NaN value\n\n\n        if (!isNaN(width)) {\n          stacked && (lastStackCoords[stackId][baseValue][sign] += width);\n        }\n      } else {\n        var coord = cartesian.dataToPoint([baseValue, value]);\n        x = coord[0] + columnOffset;\n        y = baseCoord;\n        width = columnWidth;\n        height = coord[1] - valueAxisStart;\n\n        if (Math.abs(height) < barMinHeight) {\n          // Include zero to has a positive bar\n          height = (height <= 0 ? -1 : 1) * barMinHeight;\n        } // Ignore stack from NaN value\n\n\n        if (!isNaN(height)) {\n          stacked && (lastStackCoords[stackId][baseValue][sign] += height);\n        }\n      }\n\n      data.setItemLayout(idx, {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      });\n    }\n  }, this);\n} // TODO: Do not support stack in large mode yet.\n\n\nvar largeLayout = {\n  seriesType: 'bar',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    if (!isOnCartesian(seriesModel) || !isInLargeMode(seriesModel)) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var coordLayout = cartesian.grid.getRect();\n    var baseAxis = cartesian.getBaseAxis();\n    var valueAxis = cartesian.getOtherAxis(baseAxis);\n    var valueDim = data.mapDimension(valueAxis.dim);\n    var baseDim = data.mapDimension(baseAxis.dim);\n    var valueAxisHorizontal = valueAxis.isHorizontal();\n    var valueDimIdx = valueAxisHorizontal ? 0 : 1;\n    var barWidth = retrieveColumnLayout(makeColumnLayout([seriesModel]), baseAxis, seriesModel).width;\n\n    if (!(barWidth > LARGE_BAR_MIN_WIDTH)) {\n      // jshint ignore:line\n      barWidth = LARGE_BAR_MIN_WIDTH;\n    }\n\n    return {\n      progress: progress\n    };\n\n    function progress(params, data) {\n      var count = params.count;\n      var largePoints = new LargeArr(count * 2);\n      var largeBackgroundPoints = new LargeArr(count * 2);\n      var largeDataIndices = new LargeArr(count);\n      var dataIndex;\n      var coord = [];\n      var valuePair = [];\n      var pointsOffset = 0;\n      var idxOffset = 0;\n\n      while ((dataIndex = params.next()) != null) {\n        valuePair[valueDimIdx] = data.get(valueDim, dataIndex);\n        valuePair[1 - valueDimIdx] = data.get(baseDim, dataIndex);\n        coord = cartesian.dataToPoint(valuePair, null, coord); // Data index might not be in order, depends on `progressiveChunkMode`.\n\n        largeBackgroundPoints[pointsOffset] = valueAxisHorizontal ? coordLayout.x + coordLayout.width : coord[0];\n        largePoints[pointsOffset++] = coord[0];\n        largeBackgroundPoints[pointsOffset] = valueAxisHorizontal ? coord[1] : coordLayout.y + coordLayout.height;\n        largePoints[pointsOffset++] = coord[1];\n        largeDataIndices[idxOffset++] = dataIndex;\n      }\n\n      data.setLayout({\n        largePoints: largePoints,\n        largeDataIndices: largeDataIndices,\n        largeBackgroundPoints: largeBackgroundPoints,\n        barWidth: barWidth,\n        valueAxisStart: getValueAxisStart(baseAxis, valueAxis, false),\n        backgroundStart: valueAxisHorizontal ? coordLayout.x : coordLayout.y,\n        valueAxisHorizontal: valueAxisHorizontal\n      });\n    }\n  }\n};\n\nfunction isOnCartesian(seriesModel) {\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n}\n\nfunction isInLargeMode(seriesModel) {\n  return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\n} // See cases in `test/bar-start.html` and `#7412`, `#8747`.\n\n\nfunction getValueAxisStart(baseAxis, valueAxis, stacked) {\n  return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? 1 : 0));\n}\n\nexports.getLayoutOnAxis = getLayoutOnAxis;\nexports.prepareLayoutBarSeries = prepareLayoutBarSeries;\nexports.makeColumnLayout = makeColumnLayout;\nexports.retrieveColumnLayout = retrieveColumnLayout;\nexports.layout = layout;\nexports.largeLayout = largeLayout;","var _vector = require(\"./vector\");\n\nvar v2Create = _vector.create;\nvar v2DistSquare = _vector.distSquare;\n\n/**\n * \n * @module zrender/core/curve\n * @author pissang(https://www.github.com/pissang)\n */\nvar mathPow = Math.pow;\nvar mathSqrt = Math.sqrt;\nvar EPSILON = 1e-8;\nvar EPSILON_NUMERIC = 1e-4;\nvar THREE_SQRT = mathSqrt(3);\nvar ONE_THIRD = 1 / 3; // \n\nvar _v0 = v2Create();\n\nvar _v1 = v2Create();\n\nvar _v2 = v2Create();\n\nfunction isAroundZero(val) {\n  return val > -EPSILON && val < EPSILON;\n}\n\nfunction isNotAroundZero(val) {\n  return val > EPSILON || val < -EPSILON;\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction cubicAt(p0, p1, p2, p3, t) {\n  var onet = 1 - t;\n  return onet * onet * (onet * p0 + 3 * t * p1) + t * t * (t * p3 + 3 * onet * p2);\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction cubicDerivativeAt(p0, p1, p2, p3, t) {\n  var onet = 1 - t;\n  return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet + (p3 - p2) * t * t);\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} val\n * @param  {Array.<number>} roots\n * @return {number} \n */\n\n\nfunction cubicRootAt(p0, p1, p2, p3, val, roots) {\n  // Evaluate roots of cubic functions\n  var a = p3 + 3 * (p1 - p2) - p0;\n  var b = 3 * (p2 - p1 * 2 + p0);\n  var c = 3 * (p1 - p0);\n  var d = p0 - val;\n  var A = b * b - 3 * a * c;\n  var B = b * c - 9 * a * d;\n  var C = c * c - 3 * b * d;\n  var n = 0;\n\n  if (isAroundZero(A) && isAroundZero(B)) {\n    if (isAroundZero(b)) {\n      roots[0] = 0;\n    } else {\n      var t1 = -c / b; //t1, t2, t3, b is not zero\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    }\n  } else {\n    var disc = B * B - 4 * A * C;\n\n    if (isAroundZero(disc)) {\n      var K = B / A;\n      var t1 = -b / a + K; // t1, a is not zero\n\n      var t2 = -K / 2; // t2, t3\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        roots[n++] = t2;\n      }\n    } else if (disc > 0) {\n      var discSqrt = mathSqrt(disc);\n      var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n      var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n\n      if (Y1 < 0) {\n        Y1 = -mathPow(-Y1, ONE_THIRD);\n      } else {\n        Y1 = mathPow(Y1, ONE_THIRD);\n      }\n\n      if (Y2 < 0) {\n        Y2 = -mathPow(-Y2, ONE_THIRD);\n      } else {\n        Y2 = mathPow(Y2, ONE_THIRD);\n      }\n\n      var t1 = (-b - (Y1 + Y2)) / (3 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    } else {\n      var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n      var theta = Math.acos(T) / 3;\n      var ASqrt = mathSqrt(A);\n      var tmp = Math.cos(theta);\n      var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n      var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n      var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        roots[n++] = t2;\n      }\n\n      if (t3 >= 0 && t3 <= 1) {\n        roots[n++] = t3;\n      }\n    }\n  }\n\n  return n;\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {Array.<number>} extrema\n * @return {number} \n */\n\n\nfunction cubicExtrema(p0, p1, p2, p3, extrema) {\n  var b = 6 * p2 - 12 * p1 + 6 * p0;\n  var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n  var c = 3 * p1 - 3 * p0;\n  var n = 0;\n\n  if (isAroundZero(a)) {\n    if (isNotAroundZero(b)) {\n      var t1 = -c / b;\n\n      if (t1 >= 0 && t1 <= 1) {\n        extrema[n++] = t1;\n      }\n    }\n  } else {\n    var disc = b * b - 4 * a * c;\n\n    if (isAroundZero(disc)) {\n      extrema[0] = -b / (2 * a);\n    } else if (disc > 0) {\n      var discSqrt = mathSqrt(disc);\n      var t1 = (-b + discSqrt) / (2 * a);\n      var t2 = (-b - discSqrt) / (2 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        extrema[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        extrema[n++] = t2;\n      }\n    }\n  }\n\n  return n;\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @param  {Array.<number>} out\n */\n\n\nfunction cubicSubdivide(p0, p1, p2, p3, t, out) {\n  var p01 = (p1 - p0) * t + p0;\n  var p12 = (p2 - p1) * t + p1;\n  var p23 = (p3 - p2) * t + p2;\n  var p012 = (p12 - p01) * t + p01;\n  var p123 = (p23 - p12) * t + p12;\n  var p0123 = (p123 - p012) * t + p012; // Seg0\n\n  out[0] = p0;\n  out[1] = p01;\n  out[2] = p012;\n  out[3] = p0123; // Seg1\n\n  out[4] = p0123;\n  out[5] = p123;\n  out[6] = p23;\n  out[7] = p3;\n}\n/**\n * \n * \n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {number} x3\n * @param {number} y3\n * @param {number} x\n * @param {number} y\n * @param {Array.<number>} [out] \n * @return {number}\n */\n\n\nfunction cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n  // http://pomax.github.io/bezierinfo/#projections\n  var t;\n  var interval = 0.005;\n  var d = Infinity;\n  var prev;\n  var next;\n  var d1;\n  var d2;\n  _v0[0] = x;\n  _v0[1] = y; //  t \n  // PENDING\n\n  for (var _t = 0; _t < 1; _t += 0.05) {\n    _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n    _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n    d1 = v2DistSquare(_v0, _v1);\n\n    if (d1 < d) {\n      t = _t;\n      d = d1;\n    }\n  }\n\n  d = Infinity; // At most 32 iteration\n\n  for (var i = 0; i < 32; i++) {\n    if (interval < EPSILON_NUMERIC) {\n      break;\n    }\n\n    prev = t - interval;\n    next = t + interval; // t - interval\n\n    _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n    _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n    d1 = v2DistSquare(_v1, _v0);\n\n    if (prev >= 0 && d1 < d) {\n      t = prev;\n      d = d1;\n    } else {\n      // t + interval\n      _v2[0] = cubicAt(x0, x1, x2, x3, next);\n      _v2[1] = cubicAt(y0, y1, y2, y3, next);\n      d2 = v2DistSquare(_v2, _v0);\n\n      if (next <= 1 && d2 < d) {\n        t = next;\n        d = d2;\n      } else {\n        interval *= 0.5;\n      }\n    }\n  } // t\n\n\n  if (out) {\n    out[0] = cubicAt(x0, x1, x2, x3, t);\n    out[1] = cubicAt(y0, y1, y2, y3, t);\n  } // console.log(interval, i);\n\n\n  return mathSqrt(d);\n}\n/**\n * \n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction quadraticAt(p0, p1, p2, t) {\n  var onet = 1 - t;\n  return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n}\n/**\n * \n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @return {number}\n */\n\n\nfunction quadraticDerivativeAt(p0, p1, p2, t) {\n  return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n}\n/**\n * \n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @param  {Array.<number>} roots\n * @return {number} \n */\n\n\nfunction quadraticRootAt(p0, p1, p2, val, roots) {\n  var a = p0 - 2 * p1 + p2;\n  var b = 2 * (p1 - p0);\n  var c = p0 - val;\n  var n = 0;\n\n  if (isAroundZero(a)) {\n    if (isNotAroundZero(b)) {\n      var t1 = -c / b;\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    }\n  } else {\n    var disc = b * b - 4 * a * c;\n\n    if (isAroundZero(disc)) {\n      var t1 = -b / (2 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n    } else if (disc > 0) {\n      var discSqrt = mathSqrt(disc);\n      var t1 = (-b + discSqrt) / (2 * a);\n      var t2 = (-b - discSqrt) / (2 * a);\n\n      if (t1 >= 0 && t1 <= 1) {\n        roots[n++] = t1;\n      }\n\n      if (t2 >= 0 && t2 <= 1) {\n        roots[n++] = t2;\n      }\n    }\n  }\n\n  return n;\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @return {number}\n */\n\n\nfunction quadraticExtremum(p0, p1, p2) {\n  var divider = p0 + p2 - 2 * p1;\n\n  if (divider === 0) {\n    // p1 is center of p0 and p2\n    return 0.5;\n  } else {\n    return (p0 - p1) / divider;\n  }\n}\n/**\n * \n * @memberOf module:zrender/core/curve\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} t\n * @param  {Array.<number>} out\n */\n\n\nfunction quadraticSubdivide(p0, p1, p2, t, out) {\n  var p01 = (p1 - p0) * t + p0;\n  var p12 = (p2 - p1) * t + p1;\n  var p012 = (p12 - p01) * t + p01; // Seg0\n\n  out[0] = p0;\n  out[1] = p01;\n  out[2] = p012; // Seg1\n\n  out[3] = p012;\n  out[4] = p12;\n  out[5] = p2;\n}\n/**\n * \n * \n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {number} x\n * @param {number} y\n * @param {Array.<number>} out \n * @return {number}\n */\n\n\nfunction quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n  // http://pomax.github.io/bezierinfo/#projections\n  var t;\n  var interval = 0.005;\n  var d = Infinity;\n  _v0[0] = x;\n  _v0[1] = y; //  t \n  // PENDING\n\n  for (var _t = 0; _t < 1; _t += 0.05) {\n    _v1[0] = quadraticAt(x0, x1, x2, _t);\n    _v1[1] = quadraticAt(y0, y1, y2, _t);\n    var d1 = v2DistSquare(_v0, _v1);\n\n    if (d1 < d) {\n      t = _t;\n      d = d1;\n    }\n  }\n\n  d = Infinity; // At most 32 iteration\n\n  for (var i = 0; i < 32; i++) {\n    if (interval < EPSILON_NUMERIC) {\n      break;\n    }\n\n    var prev = t - interval;\n    var next = t + interval; // t - interval\n\n    _v1[0] = quadraticAt(x0, x1, x2, prev);\n    _v1[1] = quadraticAt(y0, y1, y2, prev);\n    var d1 = v2DistSquare(_v1, _v0);\n\n    if (prev >= 0 && d1 < d) {\n      t = prev;\n      d = d1;\n    } else {\n      // t + interval\n      _v2[0] = quadraticAt(x0, x1, x2, next);\n      _v2[1] = quadraticAt(y0, y1, y2, next);\n      var d2 = v2DistSquare(_v2, _v0);\n\n      if (next <= 1 && d2 < d) {\n        t = next;\n        d = d2;\n      } else {\n        interval *= 0.5;\n      }\n    }\n  } // t\n\n\n  if (out) {\n    out[0] = quadraticAt(x0, x1, x2, t);\n    out[1] = quadraticAt(y0, y1, y2, t);\n  } // console.log(interval, i);\n\n\n  return mathSqrt(d);\n}\n\nexports.cubicAt = cubicAt;\nexports.cubicDerivativeAt = cubicDerivativeAt;\nexports.cubicRootAt = cubicRootAt;\nexports.cubicExtrema = cubicExtrema;\nexports.cubicSubdivide = cubicSubdivide;\nexports.cubicProjectPoint = cubicProjectPoint;\nexports.quadraticAt = quadraticAt;\nexports.quadraticDerivativeAt = quadraticDerivativeAt;\nexports.quadraticRootAt = quadraticRootAt;\nexports.quadraticExtremum = quadraticExtremum;\nexports.quadraticSubdivide = quadraticSubdivide;\nexports.quadraticProjectPoint = quadraticProjectPoint;","/**\n * Event Mixin\n * @module zrender/mixin/Eventful\n * @author Kener (@Kener-, kener.linfeng@gmail.com)\n *         pissang (https://www.github.com/pissang)\n */\nvar arrySlice = Array.prototype.slice;\n/**\n * Event dispatcher.\n *\n * @alias module:zrender/mixin/Eventful\n * @constructor\n * @param {Object} [eventProcessor] The object eventProcessor is the scope when\n *        `eventProcessor.xxx` called.\n * @param {Function} [eventProcessor.normalizeQuery]\n *        param: {string|Object} Raw query.\n *        return: {string|Object} Normalized query.\n * @param {Function} [eventProcessor.filter] Event will be dispatched only\n *        if it returns `true`.\n *        param: {string} eventType\n *        param: {string|Object} query\n *        return: {boolean}\n * @param {Function} [eventProcessor.afterTrigger] Called after all handlers called.\n *        param: {string} eventType\n */\n\nvar Eventful = function (eventProcessor) {\n  this._$handlers = {};\n  this._$eventProcessor = eventProcessor;\n};\n\nEventful.prototype = {\n  constructor: Eventful,\n\n  /**\n   * The handler can only be triggered once, then removed.\n   *\n   * @param {string} event The event name.\n   * @param {string|Object} [query] Condition used on event filter.\n   * @param {Function} handler The event handler.\n   * @param {Object} context\n   */\n  one: function (event, query, handler, context) {\n    return on(this, event, query, handler, context, true);\n  },\n\n  /**\n   * Bind a handler.\n   *\n   * @param {string} event The event name.\n   * @param {string|Object} [query] Condition used on event filter.\n   * @param {Function} handler The event handler.\n   * @param {Object} [context]\n   */\n  on: function (event, query, handler, context) {\n    return on(this, event, query, handler, context, false);\n  },\n\n  /**\n   * Whether any handler has bound.\n   *\n   * @param  {string}  event\n   * @return {boolean}\n   */\n  isSilent: function (event) {\n    var _h = this._$handlers;\n    return !_h[event] || !_h[event].length;\n  },\n\n  /**\n   * Unbind a event.\n   *\n   * @param {string} [event] The event name.\n   *        If no `event` input, \"off\" all listeners.\n   * @param {Function} [handler] The event handler.\n   *        If no `handler` input, \"off\" all listeners of the `event`.\n   */\n  off: function (event, handler) {\n    var _h = this._$handlers;\n\n    if (!event) {\n      this._$handlers = {};\n      return this;\n    }\n\n    if (handler) {\n      if (_h[event]) {\n        var newList = [];\n\n        for (var i = 0, l = _h[event].length; i < l; i++) {\n          if (_h[event][i].h !== handler) {\n            newList.push(_h[event][i]);\n          }\n        }\n\n        _h[event] = newList;\n      }\n\n      if (_h[event] && _h[event].length === 0) {\n        delete _h[event];\n      }\n    } else {\n      delete _h[event];\n    }\n\n    return this;\n  },\n\n  /**\n   * Dispatch a event.\n   *\n   * @param {string} type The event name.\n   */\n  trigger: function (type) {\n    var _h = this._$handlers[type];\n    var eventProcessor = this._$eventProcessor;\n\n    if (_h) {\n      var args = arguments;\n      var argLen = args.length;\n\n      if (argLen > 3) {\n        args = arrySlice.call(args, 1);\n      }\n\n      var len = _h.length;\n\n      for (var i = 0; i < len;) {\n        var hItem = _h[i];\n\n        if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(type, hItem.query)) {\n          i++;\n          continue;\n        } // Optimize advise from backbone\n\n\n        switch (argLen) {\n          case 1:\n            hItem.h.call(hItem.ctx);\n            break;\n\n          case 2:\n            hItem.h.call(hItem.ctx, args[1]);\n            break;\n\n          case 3:\n            hItem.h.call(hItem.ctx, args[1], args[2]);\n            break;\n\n          default:\n            // have more than 2 given arguments\n            hItem.h.apply(hItem.ctx, args);\n            break;\n        }\n\n        if (hItem.one) {\n          _h.splice(i, 1);\n\n          len--;\n        } else {\n          i++;\n        }\n      }\n    }\n\n    eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(type);\n    return this;\n  },\n\n  /**\n   * Dispatch a event with context, which is specified at the last parameter.\n   *\n   * @param {string} type The event name.\n   */\n  triggerWithContext: function (type) {\n    var _h = this._$handlers[type];\n    var eventProcessor = this._$eventProcessor;\n\n    if (_h) {\n      var args = arguments;\n      var argLen = args.length;\n\n      if (argLen > 4) {\n        args = arrySlice.call(args, 1, args.length - 1);\n      }\n\n      var ctx = args[args.length - 1];\n      var len = _h.length;\n\n      for (var i = 0; i < len;) {\n        var hItem = _h[i];\n\n        if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(type, hItem.query)) {\n          i++;\n          continue;\n        } // Optimize advise from backbone\n\n\n        switch (argLen) {\n          case 1:\n            hItem.h.call(ctx);\n            break;\n\n          case 2:\n            hItem.h.call(ctx, args[1]);\n            break;\n\n          case 3:\n            hItem.h.call(ctx, args[1], args[2]);\n            break;\n\n          default:\n            // have more than 2 given arguments\n            hItem.h.apply(ctx, args);\n            break;\n        }\n\n        if (hItem.one) {\n          _h.splice(i, 1);\n\n          len--;\n        } else {\n          i++;\n        }\n      }\n    }\n\n    eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(type);\n    return this;\n  }\n};\n\nfunction normalizeQuery(host, query) {\n  var eventProcessor = host._$eventProcessor;\n\n  if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n    query = eventProcessor.normalizeQuery(query);\n  }\n\n  return query;\n}\n\nfunction on(eventful, event, query, handler, context, isOnce) {\n  var _h = eventful._$handlers;\n\n  if (typeof query === 'function') {\n    context = handler;\n    handler = query;\n    query = null;\n  }\n\n  if (!handler || !event) {\n    return eventful;\n  }\n\n  query = normalizeQuery(eventful, query);\n\n  if (!_h[event]) {\n    _h[event] = [];\n  }\n\n  for (var i = 0; i < _h[event].length; i++) {\n    if (_h[event][i].h === handler) {\n      return eventful;\n    }\n  }\n\n  var wrap = {\n    h: handler,\n    one: isOnce,\n    query: query,\n    ctx: context || eventful,\n    // FIXME\n    // Do not publish this feature util it is proved that it makes sense.\n    callAtLast: handler.zrEventfulCallAtLast\n  };\n  var lastIndex = _h[event].length - 1;\n  var lastWrap = _h[event][lastIndex];\n  lastWrap && lastWrap.callAtLast ? _h[event].splice(lastIndex, 0, wrap) : _h[event].push(wrap);\n  return eventful;\n} // ----------------------\n// The events in zrender\n// ----------------------\n\n/**\n * @event module:zrender/mixin/Eventful#onclick\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmouseover\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmouseout\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmousemove\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmousewheel\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmousedown\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#onmouseup\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondrag\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragstart\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragend\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragenter\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragleave\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondragover\n * @type {Function}\n * @default null\n */\n\n/**\n * @event module:zrender/mixin/Eventful#ondrop\n * @type {Function}\n * @default null\n */\n\n\nvar _default = Eventful;\nmodule.exports = _default;","var zrUtil = require(\"../core/util\");\n\nvar Element = require(\"../Element\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\n/**\n * GroupGroup\n * @module zrender/graphic/Group\n * @example\n *     var Group = require('zrender/container/Group');\n *     var Circle = require('zrender/graphic/shape/Circle');\n *     var g = new Group();\n *     g.position[0] = 100;\n *     g.position[1] = 100;\n *     g.add(new Circle({\n *         style: {\n *             x: 100,\n *             y: 100,\n *             r: 20,\n *         }\n *     }));\n *     zr.add(g);\n */\n\n/**\n * @alias module:zrender/graphic/Group\n * @constructor\n * @extends module:zrender/mixin/Transformable\n * @extends module:zrender/mixin/Eventful\n */\nvar Group = function (opts) {\n  opts = opts || {};\n  Element.call(this, opts);\n\n  for (var key in opts) {\n    if (opts.hasOwnProperty(key)) {\n      this[key] = opts[key];\n    }\n  }\n\n  this._children = [];\n  this.__storage = null;\n  this.__dirty = true;\n};\n\nGroup.prototype = {\n  constructor: Group,\n  isGroup: true,\n\n  /**\n   * @type {string}\n   */\n  type: 'group',\n\n  /**\n   * \n   * @name module:/zrender/container/Group#silent\n   * @type {boolean}\n   * @default false\n   */\n  silent: false,\n\n  /**\n   * @return {Array.<module:zrender/Element>}\n   */\n  children: function () {\n    return this._children.slice();\n  },\n\n  /**\n   *  index \n   * @param  {number} idx\n   * @return {module:zrender/Element}\n   */\n  childAt: function (idx) {\n    return this._children[idx];\n  },\n\n  /**\n   * \n   * @param  {string} name\n   * @return {module:zrender/Element}\n   */\n  childOfName: function (name) {\n    var children = this._children;\n\n    for (var i = 0; i < children.length; i++) {\n      if (children[i].name === name) {\n        return children[i];\n      }\n    }\n  },\n\n  /**\n   * @return {number}\n   */\n  childCount: function () {\n    return this._children.length;\n  },\n\n  /**\n   * \n   * @param {module:zrender/Element} child\n   */\n  add: function (child) {\n    if (child && child !== this && child.parent !== this) {\n      this._children.push(child);\n\n      this._doAdd(child);\n    }\n\n    return this;\n  },\n\n  /**\n   *  nextSibling \n   * @param {module:zrender/Element} child\n   * @param {module:zrender/Element} nextSibling\n   */\n  addBefore: function (child, nextSibling) {\n    if (child && child !== this && child.parent !== this && nextSibling && nextSibling.parent === this) {\n      var children = this._children;\n      var idx = children.indexOf(nextSibling);\n\n      if (idx >= 0) {\n        children.splice(idx, 0, child);\n\n        this._doAdd(child);\n      }\n    }\n\n    return this;\n  },\n  _doAdd: function (child) {\n    if (child.parent) {\n      child.parent.remove(child);\n    }\n\n    child.parent = this;\n    var storage = this.__storage;\n    var zr = this.__zr;\n\n    if (storage && storage !== child.__storage) {\n      storage.addToStorage(child);\n\n      if (child instanceof Group) {\n        child.addChildrenToStorage(storage);\n      }\n    }\n\n    zr && zr.refresh();\n  },\n\n  /**\n   * \n   * @param {module:zrender/Element} child\n   */\n  remove: function (child) {\n    var zr = this.__zr;\n    var storage = this.__storage;\n    var children = this._children;\n    var idx = zrUtil.indexOf(children, child);\n\n    if (idx < 0) {\n      return this;\n    }\n\n    children.splice(idx, 1);\n    child.parent = null;\n\n    if (storage) {\n      storage.delFromStorage(child);\n\n      if (child instanceof Group) {\n        child.delChildrenFromStorage(storage);\n      }\n    }\n\n    zr && zr.refresh();\n    return this;\n  },\n\n  /**\n   * \n   */\n  removeAll: function () {\n    var children = this._children;\n    var storage = this.__storage;\n    var child;\n    var i;\n\n    for (i = 0; i < children.length; i++) {\n      child = children[i];\n\n      if (storage) {\n        storage.delFromStorage(child);\n\n        if (child instanceof Group) {\n          child.delChildrenFromStorage(storage);\n        }\n      }\n\n      child.parent = null;\n    }\n\n    children.length = 0;\n    return this;\n  },\n\n  /**\n   * \n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  eachChild: function (cb, context) {\n    var children = this._children;\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n      cb.call(context, child, i);\n    }\n\n    return this;\n  },\n\n  /**\n   * \n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  traverse: function (cb, context) {\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      cb.call(context, child);\n\n      if (child.type === 'group') {\n        child.traverse(cb, context);\n      }\n    }\n\n    return this;\n  },\n  addChildrenToStorage: function (storage) {\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      storage.addToStorage(child);\n\n      if (child instanceof Group) {\n        child.addChildrenToStorage(storage);\n      }\n    }\n  },\n  delChildrenFromStorage: function (storage) {\n    for (var i = 0; i < this._children.length; i++) {\n      var child = this._children[i];\n      storage.delFromStorage(child);\n\n      if (child instanceof Group) {\n        child.delChildrenFromStorage(storage);\n      }\n    }\n  },\n  dirty: function () {\n    this.__dirty = true;\n    this.__zr && this.__zr.refresh();\n    return this;\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getBoundingRect: function (includeChildren) {\n    // TODO Caching\n    var rect = null;\n    var tmpRect = new BoundingRect(0, 0, 0, 0);\n    var children = includeChildren || this._children;\n    var tmpMat = [];\n\n    for (var i = 0; i < children.length; i++) {\n      var child = children[i];\n\n      if (child.ignore || child.invisible) {\n        continue;\n      }\n\n      var childRect = child.getBoundingRect();\n      var transform = child.getLocalTransform(tmpMat); // TODO\n      // The boundingRect cacluated by transforming original\n      // rect may be bigger than the actual bundingRect when rotation\n      // is used. (Consider a circle rotated aginst its center, where\n      // the actual boundingRect should be the same as that not be\n      // rotated.) But we can not find better approach to calculate\n      // actual boundingRect yet, considering performance.\n\n      if (transform) {\n        tmpRect.copy(childRect);\n        tmpRect.applyTransform(transform);\n        rect = rect || tmpRect.clone();\n        rect.union(tmpRect);\n      } else {\n        rect = rect || childRect.clone();\n        rect.union(childRect);\n      }\n    }\n\n    return rect || tmpRect;\n  }\n};\nzrUtil.inherits(Group, Element);\nvar _default = Group;\nmodule.exports = _default;","var curve = require(\"./curve\");\n\nvar vec2 = require(\"./vector\");\n\nvar bbox = require(\"./bbox\");\n\nvar BoundingRect = require(\"./BoundingRect\");\n\nvar _config = require(\"../config\");\n\nvar dpr = _config.devicePixelRatio;\n\n/**\n * Path `buildPath``ctx`, pathpathCommands\n *  isInsidePath boundingRect\n *\n * @module zrender/core/PathProxy\n * @author Yi Shen (http://www.github.com/pissang)\n */\n// TODO getTotalLength, getPointAtLength\n\n/* global Float32Array */\nvar CMD = {\n  M: 1,\n  L: 2,\n  C: 3,\n  Q: 4,\n  A: 5,\n  Z: 6,\n  // Rect\n  R: 7\n}; // var CMD_MEM_SIZE = {\n//     M: 3,\n//     L: 3,\n//     C: 7,\n//     Q: 5,\n//     A: 9,\n//     R: 5,\n//     Z: 1\n// };\n\nvar min = [];\nvar max = [];\nvar min2 = [];\nvar max2 = [];\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathCos = Math.cos;\nvar mathSin = Math.sin;\nvar mathSqrt = Math.sqrt;\nvar mathAbs = Math.abs;\nvar hasTypedArray = typeof Float32Array !== 'undefined';\n/**\n * @alias module:zrender/core/PathProxy\n * @constructor\n */\n\nvar PathProxy = function (notSaveData) {\n  this._saveData = !(notSaveData || false);\n\n  if (this._saveData) {\n    /**\n     * Path data. Stored as flat array\n     * @type {Array.<Object>}\n     */\n    this.data = [];\n  }\n\n  this._ctx = null;\n};\n/**\n * Path\n * @return {Object}\n */\n\n\nPathProxy.prototype = {\n  constructor: PathProxy,\n  _xi: 0,\n  _yi: 0,\n  _x0: 0,\n  _y0: 0,\n  // Unit x, Unit y. Provide for avoiding drawing that too short line segment\n  _ux: 0,\n  _uy: 0,\n  _len: 0,\n  _lineDash: null,\n  _dashOffset: 0,\n  _dashIdx: 0,\n  _dashSum: 0,\n\n  /**\n   * @readOnly\n   */\n  setScale: function (sx, sy, segmentIgnoreThreshold) {\n    // Compat. Previously there is no segmentIgnoreThreshold.\n    segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\n    this._ux = mathAbs(segmentIgnoreThreshold / dpr / sx) || 0;\n    this._uy = mathAbs(segmentIgnoreThreshold / dpr / sy) || 0;\n  },\n  getContext: function () {\n    return this._ctx;\n  },\n\n  /**\n   * @param  {CanvasRenderingContext2D} ctx\n   * @return {module:zrender/core/PathProxy}\n   */\n  beginPath: function (ctx) {\n    this._ctx = ctx;\n    ctx && ctx.beginPath();\n    ctx && (this.dpr = ctx.dpr); // Reset\n\n    if (this._saveData) {\n      this._len = 0;\n    }\n\n    if (this._lineDash) {\n      this._lineDash = null;\n      this._dashOffset = 0;\n    }\n\n    return this;\n  },\n\n  /**\n   * @param  {number} x\n   * @param  {number} y\n   * @return {module:zrender/core/PathProxy}\n   */\n  moveTo: function (x, y) {\n    this.addData(CMD.M, x, y);\n    this._ctx && this._ctx.moveTo(x, y); // x0, y0, xi, yi  _dashedXXXXTo \n    // xi, yi , x0, y0  closePath \n    //  beginPath  lineTo x0, y0 \n    //  lineTo dashed line  IE10- \n\n    this._x0 = x;\n    this._y0 = y;\n    this._xi = x;\n    this._yi = y;\n    return this;\n  },\n\n  /**\n   * @param  {number} x\n   * @param  {number} y\n   * @return {module:zrender/core/PathProxy}\n   */\n  lineTo: function (x, y) {\n    var exceedUnit = mathAbs(x - this._xi) > this._ux || mathAbs(y - this._yi) > this._uy // Force draw the first segment\n    || this._len < 5;\n    this.addData(CMD.L, x, y);\n\n    if (this._ctx && exceedUnit) {\n      this._needsDash() ? this._dashedLineTo(x, y) : this._ctx.lineTo(x, y);\n    }\n\n    if (exceedUnit) {\n      this._xi = x;\n      this._yi = y;\n    }\n\n    return this;\n  },\n\n  /**\n   * @param  {number} x1\n   * @param  {number} y1\n   * @param  {number} x2\n   * @param  {number} y2\n   * @param  {number} x3\n   * @param  {number} y3\n   * @return {module:zrender/core/PathProxy}\n   */\n  bezierCurveTo: function (x1, y1, x2, y2, x3, y3) {\n    this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n\n    if (this._ctx) {\n      this._needsDash() ? this._dashedBezierTo(x1, y1, x2, y2, x3, y3) : this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n    }\n\n    this._xi = x3;\n    this._yi = y3;\n    return this;\n  },\n\n  /**\n   * @param  {number} x1\n   * @param  {number} y1\n   * @param  {number} x2\n   * @param  {number} y2\n   * @return {module:zrender/core/PathProxy}\n   */\n  quadraticCurveTo: function (x1, y1, x2, y2) {\n    this.addData(CMD.Q, x1, y1, x2, y2);\n\n    if (this._ctx) {\n      this._needsDash() ? this._dashedQuadraticTo(x1, y1, x2, y2) : this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n    }\n\n    this._xi = x2;\n    this._yi = y2;\n    return this;\n  },\n\n  /**\n   * @param  {number} cx\n   * @param  {number} cy\n   * @param  {number} r\n   * @param  {number} startAngle\n   * @param  {number} endAngle\n   * @param  {boolean} anticlockwise\n   * @return {module:zrender/core/PathProxy}\n   */\n  arc: function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n    this.addData(CMD.A, cx, cy, r, r, startAngle, endAngle - startAngle, 0, anticlockwise ? 0 : 1);\n    this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n    this._xi = mathCos(endAngle) * r + cx;\n    this._yi = mathSin(endAngle) * r + cy;\n    return this;\n  },\n  // TODO\n  arcTo: function (x1, y1, x2, y2, radius) {\n    if (this._ctx) {\n      this._ctx.arcTo(x1, y1, x2, y2, radius);\n    }\n\n    return this;\n  },\n  // TODO\n  rect: function (x, y, w, h) {\n    this._ctx && this._ctx.rect(x, y, w, h);\n    this.addData(CMD.R, x, y, w, h);\n    return this;\n  },\n\n  /**\n   * @return {module:zrender/core/PathProxy}\n   */\n  closePath: function () {\n    this.addData(CMD.Z);\n    var ctx = this._ctx;\n    var x0 = this._x0;\n    var y0 = this._y0;\n\n    if (ctx) {\n      this._needsDash() && this._dashedLineTo(x0, y0);\n      ctx.closePath();\n    }\n\n    this._xi = x0;\n    this._yi = y0;\n    return this;\n  },\n\n  /**\n   * Context  rebuildPath  fill\n   * stroke \n   * @param {CanvasRenderingContext2D} ctx\n   * @return {module:zrender/core/PathProxy}\n   */\n  fill: function (ctx) {\n    ctx && ctx.fill();\n    this.toStatic();\n  },\n\n  /**\n   * @param {CanvasRenderingContext2D} ctx\n   * @return {module:zrender/core/PathProxy}\n   */\n  stroke: function (ctx) {\n    ctx && ctx.stroke();\n    this.toStatic();\n  },\n\n  /**\n   * \n   * Must be invoked before all other path drawing methods\n   * @return {module:zrender/core/PathProxy}\n   */\n  setLineDash: function (lineDash) {\n    if (lineDash instanceof Array) {\n      this._lineDash = lineDash;\n      this._dashIdx = 0;\n      var lineDashSum = 0;\n\n      for (var i = 0; i < lineDash.length; i++) {\n        lineDashSum += lineDash[i];\n      }\n\n      this._dashSum = lineDashSum;\n    }\n\n    return this;\n  },\n\n  /**\n   * \n   * Must be invoked before all other path drawing methods\n   * @return {module:zrender/core/PathProxy}\n   */\n  setLineDashOffset: function (offset) {\n    this._dashOffset = offset;\n    return this;\n  },\n\n  /**\n   *\n   * @return {boolean}\n   */\n  len: function () {\n    return this._len;\n  },\n\n  /**\n   *  Path \n   */\n  setData: function (data) {\n    var len = data.length;\n\n    if (!(this.data && this.data.length === len) && hasTypedArray) {\n      this.data = new Float32Array(len);\n    }\n\n    for (var i = 0; i < len; i++) {\n      this.data[i] = data[i];\n    }\n\n    this._len = len;\n  },\n\n  /**\n   * \n   * @param {module:zrender/core/PathProxy|Array.<module:zrender/core/PathProxy>} path\n   */\n  appendPath: function (path) {\n    if (!(path instanceof Array)) {\n      path = [path];\n    }\n\n    var len = path.length;\n    var appendSize = 0;\n    var offset = this._len;\n\n    for (var i = 0; i < len; i++) {\n      appendSize += path[i].len();\n    }\n\n    if (hasTypedArray && this.data instanceof Float32Array) {\n      this.data = new Float32Array(offset + appendSize);\n    }\n\n    for (var i = 0; i < len; i++) {\n      var appendPathData = path[i].data;\n\n      for (var k = 0; k < appendPathData.length; k++) {\n        this.data[offset++] = appendPathData[k];\n      }\n    }\n\n    this._len = offset;\n  },\n\n  /**\n   *  Path \n   * \n   */\n  addData: function (cmd) {\n    if (!this._saveData) {\n      return;\n    }\n\n    var data = this.data;\n\n    if (this._len + arguments.length > data.length) {\n      //  Float32Array\n      // \n      this._expandData();\n\n      data = this.data;\n    }\n\n    for (var i = 0; i < arguments.length; i++) {\n      data[this._len++] = arguments[i];\n    }\n\n    this._prevCmd = cmd;\n  },\n  _expandData: function () {\n    // Only if data is Float32Array\n    if (!(this.data instanceof Array)) {\n      var newData = [];\n\n      for (var i = 0; i < this._len; i++) {\n        newData[i] = this.data[i];\n      }\n\n      this.data = newData;\n    }\n  },\n\n  /**\n   * If needs js implemented dashed line\n   * @return {boolean}\n   * @private\n   */\n  _needsDash: function () {\n    return this._lineDash;\n  },\n  _dashedLineTo: function (x1, y1) {\n    var dashSum = this._dashSum;\n    var offset = this._dashOffset;\n    var lineDash = this._lineDash;\n    var ctx = this._ctx;\n    var x0 = this._xi;\n    var y0 = this._yi;\n    var dx = x1 - x0;\n    var dy = y1 - y0;\n    var dist = mathSqrt(dx * dx + dy * dy);\n    var x = x0;\n    var y = y0;\n    var dash;\n    var nDash = lineDash.length;\n    var idx;\n    dx /= dist;\n    dy /= dist;\n\n    if (offset < 0) {\n      // Convert to positive offset\n      offset = dashSum + offset;\n    }\n\n    offset %= dashSum;\n    x -= offset * dx;\n    y -= offset * dy;\n\n    while (dx > 0 && x <= x1 || dx < 0 && x >= x1 || dx === 0 && (dy > 0 && y <= y1 || dy < 0 && y >= y1)) {\n      idx = this._dashIdx;\n      dash = lineDash[idx];\n      x += dx * dash;\n      y += dy * dash;\n      this._dashIdx = (idx + 1) % nDash; // Skip positive offset\n\n      if (dx > 0 && x < x0 || dx < 0 && x > x0 || dy > 0 && y < y0 || dy < 0 && y > y0) {\n        continue;\n      }\n\n      ctx[idx % 2 ? 'moveTo' : 'lineTo'](dx >= 0 ? mathMin(x, x1) : mathMax(x, x1), dy >= 0 ? mathMin(y, y1) : mathMax(y, y1));\n    } // Offset for next lineTo\n\n\n    dx = x - x1;\n    dy = y - y1;\n    this._dashOffset = -mathSqrt(dx * dx + dy * dy);\n  },\n  // Not accurate dashed line to\n  _dashedBezierTo: function (x1, y1, x2, y2, x3, y3) {\n    var dashSum = this._dashSum;\n    var offset = this._dashOffset;\n    var lineDash = this._lineDash;\n    var ctx = this._ctx;\n    var x0 = this._xi;\n    var y0 = this._yi;\n    var t;\n    var dx;\n    var dy;\n    var cubicAt = curve.cubicAt;\n    var bezierLen = 0;\n    var idx = this._dashIdx;\n    var nDash = lineDash.length;\n    var x;\n    var y;\n    var tmpLen = 0;\n\n    if (offset < 0) {\n      // Convert to positive offset\n      offset = dashSum + offset;\n    }\n\n    offset %= dashSum; // Bezier approx length\n\n    for (t = 0; t < 1; t += 0.1) {\n      dx = cubicAt(x0, x1, x2, x3, t + 0.1) - cubicAt(x0, x1, x2, x3, t);\n      dy = cubicAt(y0, y1, y2, y3, t + 0.1) - cubicAt(y0, y1, y2, y3, t);\n      bezierLen += mathSqrt(dx * dx + dy * dy);\n    } // Find idx after add offset\n\n\n    for (; idx < nDash; idx++) {\n      tmpLen += lineDash[idx];\n\n      if (tmpLen > offset) {\n        break;\n      }\n    }\n\n    t = (tmpLen - offset) / bezierLen;\n\n    while (t <= 1) {\n      x = cubicAt(x0, x1, x2, x3, t);\n      y = cubicAt(y0, y1, y2, y3, t); // Use line to approximate dashed bezier\n      // Bad result if dash is long\n\n      idx % 2 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);\n      t += lineDash[idx] / bezierLen;\n      idx = (idx + 1) % nDash;\n    } // Finish the last segment and calculate the new offset\n\n\n    idx % 2 !== 0 && ctx.lineTo(x3, y3);\n    dx = x3 - x;\n    dy = y3 - y;\n    this._dashOffset = -mathSqrt(dx * dx + dy * dy);\n  },\n  _dashedQuadraticTo: function (x1, y1, x2, y2) {\n    // Convert quadratic to cubic using degree elevation\n    var x3 = x2;\n    var y3 = y2;\n    x2 = (x2 + 2 * x1) / 3;\n    y2 = (y2 + 2 * y1) / 3;\n    x1 = (this._xi + 2 * x1) / 3;\n    y1 = (this._yi + 2 * y1) / 3;\n\n    this._dashedBezierTo(x1, y1, x2, y2, x3, y3);\n  },\n\n  /**\n   *  Float32Array \n   * Convert dynamic array to static Float32Array\n   */\n  toStatic: function () {\n    var data = this.data;\n\n    if (data instanceof Array) {\n      data.length = this._len;\n\n      if (hasTypedArray) {\n        this.data = new Float32Array(data);\n      }\n    }\n  },\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getBoundingRect: function () {\n    min[0] = min[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n    max[0] = max[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n    var data = this.data;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n\n      if (i === 1) {\n        //  L, C, Q\n        //  previous point  point\n        //\n        //  Arc \n        xi = data[i];\n        yi = data[i + 1];\n        x0 = xi;\n        y0 = yi;\n      }\n\n      switch (cmd) {\n        case CMD.M:\n          // moveTo  subpath, \n          //  closePath \n          x0 = data[i++];\n          y0 = data[i++];\n          xi = x0;\n          yi = y0;\n          min2[0] = x0;\n          min2[1] = y0;\n          max2[0] = x0;\n          max2[1] = y0;\n          break;\n\n        case CMD.L:\n          bbox.fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD.C:\n          bbox.fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD.Q:\n          bbox.fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n          xi = data[i++];\n          yi = data[i++];\n          break;\n\n        case CMD.A:\n          // TODO Arc \n          var cx = data[i++];\n          var cy = data[i++];\n          var rx = data[i++];\n          var ry = data[i++];\n          var startAngle = data[i++];\n          var endAngle = data[i++] + startAngle; // TODO Arc \n\n          i += 1;\n          var anticlockwise = 1 - data[i++];\n\n          if (i === 1) {\n            //  arc \n            // \n            x0 = mathCos(startAngle) * rx + cx;\n            y0 = mathSin(startAngle) * ry + cy;\n          }\n\n          bbox.fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n          xi = mathCos(endAngle) * rx + cx;\n          yi = mathSin(endAngle) * ry + cy;\n          break;\n\n        case CMD.R:\n          x0 = xi = data[i++];\n          y0 = yi = data[i++];\n          var width = data[i++];\n          var height = data[i++]; // Use fromLine\n\n          bbox.fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n          break;\n\n        case CMD.Z:\n          xi = x0;\n          yi = y0;\n          break;\n      } // Union\n\n\n      vec2.min(min, min, min2);\n      vec2.max(max, max, max2);\n    } // No data\n\n\n    if (i === 0) {\n      min[0] = min[1] = max[0] = max[1] = 0;\n    }\n\n    return new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n  },\n\n  /**\n   * Rebuild path from current data\n   * Rebuild path will not consider javascript implemented line dash.\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  rebuildPath: function (ctx) {\n    var d = this.data;\n    var x0;\n    var y0;\n    var xi;\n    var yi;\n    var x;\n    var y;\n    var ux = this._ux;\n    var uy = this._uy;\n    var len = this._len;\n\n    for (var i = 0; i < len;) {\n      var cmd = d[i++];\n\n      if (i === 1) {\n        //  L, C, Q\n        //  previous point  point\n        //\n        //  Arc \n        xi = d[i];\n        yi = d[i + 1];\n        x0 = xi;\n        y0 = yi;\n      }\n\n      switch (cmd) {\n        case CMD.M:\n          x0 = xi = d[i++];\n          y0 = yi = d[i++];\n          ctx.moveTo(xi, yi);\n          break;\n\n        case CMD.L:\n          x = d[i++];\n          y = d[i++]; // Not draw too small seg between\n\n          if (mathAbs(x - xi) > ux || mathAbs(y - yi) > uy || i === len - 1) {\n            ctx.lineTo(x, y);\n            xi = x;\n            yi = y;\n          }\n\n          break;\n\n        case CMD.C:\n          ctx.bezierCurveTo(d[i++], d[i++], d[i++], d[i++], d[i++], d[i++]);\n          xi = d[i - 2];\n          yi = d[i - 1];\n          break;\n\n        case CMD.Q:\n          ctx.quadraticCurveTo(d[i++], d[i++], d[i++], d[i++]);\n          xi = d[i - 2];\n          yi = d[i - 1];\n          break;\n\n        case CMD.A:\n          var cx = d[i++];\n          var cy = d[i++];\n          var rx = d[i++];\n          var ry = d[i++];\n          var theta = d[i++];\n          var dTheta = d[i++];\n          var psi = d[i++];\n          var fs = d[i++];\n          var r = rx > ry ? rx : ry;\n          var scaleX = rx > ry ? 1 : rx / ry;\n          var scaleY = rx > ry ? ry / rx : 1;\n          var isEllipse = Math.abs(rx - ry) > 1e-3;\n          var endAngle = theta + dTheta;\n\n          if (isEllipse) {\n            ctx.translate(cx, cy);\n            ctx.rotate(psi);\n            ctx.scale(scaleX, scaleY);\n            ctx.arc(0, 0, r, theta, endAngle, 1 - fs);\n            ctx.scale(1 / scaleX, 1 / scaleY);\n            ctx.rotate(-psi);\n            ctx.translate(-cx, -cy);\n          } else {\n            ctx.arc(cx, cy, r, theta, endAngle, 1 - fs);\n          }\n\n          if (i === 1) {\n            //  arc \n            // \n            x0 = mathCos(theta) * rx + cx;\n            y0 = mathSin(theta) * ry + cy;\n          }\n\n          xi = mathCos(endAngle) * rx + cx;\n          yi = mathSin(endAngle) * ry + cy;\n          break;\n\n        case CMD.R:\n          x0 = xi = d[i];\n          y0 = yi = d[i + 1];\n          ctx.rect(d[i++], d[i++], d[i++], d[i++]);\n          break;\n\n        case CMD.Z:\n          ctx.closePath();\n          xi = x0;\n          yi = y0;\n      }\n    }\n  }\n};\nPathProxy.CMD = CMD;\nvar _default = PathProxy;\nmodule.exports = _default;","var vec2 = require(\"./vector\");\n\nvar curve = require(\"./curve\");\n\n/**\n * @author Yi Shen(https://github.com/pissang)\n */\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI2 = Math.PI * 2;\nvar start = vec2.create();\nvar end = vec2.create();\nvar extremity = vec2.create();\n/**\n * `min``max`\n * @module zrender/core/bbox\n * @param {Array<Object>} points \n * @param {number} min\n * @param {number} max\n */\n\nfunction fromPoints(points, min, max) {\n  if (points.length === 0) {\n    return;\n  }\n\n  var p = points[0];\n  var left = p[0];\n  var right = p[0];\n  var top = p[1];\n  var bottom = p[1];\n  var i;\n\n  for (i = 1; i < points.length; i++) {\n    p = points[i];\n    left = mathMin(left, p[0]);\n    right = mathMax(right, p[0]);\n    top = mathMin(top, p[1]);\n    bottom = mathMax(bottom, p[1]);\n  }\n\n  min[0] = left;\n  min[1] = top;\n  max[0] = right;\n  max[1] = bottom;\n}\n/**\n * @memberOf module:zrender/core/bbox\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\n\nfunction fromLine(x0, y0, x1, y1, min, max) {\n  min[0] = mathMin(x0, x1);\n  min[1] = mathMin(y0, y1);\n  max[0] = mathMax(x0, x1);\n  max[1] = mathMax(y0, y1);\n}\n\nvar xDim = [];\nvar yDim = [];\n/**\n * (p0, p1, p2, p3)`min``max`\n * @memberOf module:zrender/core/bbox\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {number} x3\n * @param {number} y3\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\nfunction fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\n  var cubicExtrema = curve.cubicExtrema;\n  var cubicAt = curve.cubicAt;\n  var i;\n  var n = cubicExtrema(x0, x1, x2, x3, xDim);\n  min[0] = Infinity;\n  min[1] = Infinity;\n  max[0] = -Infinity;\n  max[1] = -Infinity;\n\n  for (i = 0; i < n; i++) {\n    var x = cubicAt(x0, x1, x2, x3, xDim[i]);\n    min[0] = mathMin(x, min[0]);\n    max[0] = mathMax(x, max[0]);\n  }\n\n  n = cubicExtrema(y0, y1, y2, y3, yDim);\n\n  for (i = 0; i < n; i++) {\n    var y = cubicAt(y0, y1, y2, y3, yDim[i]);\n    min[1] = mathMin(y, min[1]);\n    max[1] = mathMax(y, max[1]);\n  }\n\n  min[0] = mathMin(x0, min[0]);\n  max[0] = mathMax(x0, max[0]);\n  min[0] = mathMin(x3, min[0]);\n  max[0] = mathMax(x3, max[0]);\n  min[1] = mathMin(y0, min[1]);\n  max[1] = mathMax(y0, max[1]);\n  min[1] = mathMin(y3, min[1]);\n  max[1] = mathMax(y3, max[1]);\n}\n/**\n * (p0, p1, p2)`min``max`\n * @memberOf module:zrender/core/bbox\n * @param {number} x0\n * @param {number} y0\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\n\nfunction fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\n  var quadraticExtremum = curve.quadraticExtremum;\n  var quadraticAt = curve.quadraticAt; // Find extremities, where derivative in x dim or y dim is zero\n\n  var tx = mathMax(mathMin(quadraticExtremum(x0, x1, x2), 1), 0);\n  var ty = mathMax(mathMin(quadraticExtremum(y0, y1, y2), 1), 0);\n  var x = quadraticAt(x0, x1, x2, tx);\n  var y = quadraticAt(y0, y1, y2, ty);\n  min[0] = mathMin(x0, x2, x);\n  min[1] = mathMin(y0, y2, y);\n  max[0] = mathMax(x0, x2, x);\n  max[1] = mathMax(y0, y2, y);\n}\n/**\n * `min``max`\n * @method\n * @memberOf module:zrender/core/bbox\n * @param {number} x\n * @param {number} y\n * @param {number} rx\n * @param {number} ry\n * @param {number} startAngle\n * @param {number} endAngle\n * @param {number} anticlockwise\n * @param {Array.<number>} min\n * @param {Array.<number>} max\n */\n\n\nfunction fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min, max) {\n  var vec2Min = vec2.min;\n  var vec2Max = vec2.max;\n  var diff = Math.abs(startAngle - endAngle);\n\n  if (diff % PI2 < 1e-4 && diff > 1e-4) {\n    // Is a circle\n    min[0] = x - rx;\n    min[1] = y - ry;\n    max[0] = x + rx;\n    max[1] = y + ry;\n    return;\n  }\n\n  start[0] = mathCos(startAngle) * rx + x;\n  start[1] = mathSin(startAngle) * ry + y;\n  end[0] = mathCos(endAngle) * rx + x;\n  end[1] = mathSin(endAngle) * ry + y;\n  vec2Min(min, start, end);\n  vec2Max(max, start, end); // Thresh to [0, Math.PI * 2]\n\n  startAngle = startAngle % PI2;\n\n  if (startAngle < 0) {\n    startAngle = startAngle + PI2;\n  }\n\n  endAngle = endAngle % PI2;\n\n  if (endAngle < 0) {\n    endAngle = endAngle + PI2;\n  }\n\n  if (startAngle > endAngle && !anticlockwise) {\n    endAngle += PI2;\n  } else if (startAngle < endAngle && anticlockwise) {\n    startAngle += PI2;\n  }\n\n  if (anticlockwise) {\n    var tmp = endAngle;\n    endAngle = startAngle;\n    startAngle = tmp;\n  } // var number = 0;\n  // var step = (anticlockwise ? -Math.PI : Math.PI) / 2;\n\n\n  for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n    if (angle > startAngle) {\n      extremity[0] = mathCos(angle) * rx + x;\n      extremity[1] = mathSin(angle) * ry + y;\n      vec2Min(min, extremity, min);\n      vec2Max(max, extremity, max);\n    }\n  }\n}\n\nexports.fromPoints = fromPoints;\nexports.fromLine = fromLine;\nexports.fromCubic = fromCubic;\nexports.fromQuadratic = fromQuadratic;\nexports.fromArc = fromArc;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar createHashMap = _util.createHashMap;\nvar assert = _util.assert;\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar OTHER_DIMENSIONS = createHashMap(['tooltip', 'label', 'itemName', 'itemId', 'seriesName']);\n\nfunction summarizeDimensions(data) {\n  var summary = {};\n  var encode = summary.encode = {};\n  var notExtraCoordDimMap = createHashMap();\n  var defaultedLabel = [];\n  var defaultedTooltip = []; // See the comment of `List.js#userOutput`.\n\n  var userOutput = summary.userOutput = {\n    dimensionNames: data.dimensions.slice(),\n    encode: {}\n  };\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n    var coordDim = dimItem.coordDim;\n\n    if (coordDim) {\n      var coordDimIndex = dimItem.coordDimIndex;\n      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n\n      if (!dimItem.isExtraCoord) {\n        notExtraCoordDimMap.set(coordDim, 1); // Use the last coord dim (and label friendly) as default label,\n        // because when dataset is used, it is hard to guess which dimension\n        // can be value dimension. If both show x, y on label is not look good,\n        // and conventionally y axis is focused more.\n\n        if (mayLabelDimType(dimItem.type)) {\n          defaultedLabel[0] = dimName;\n        } // User output encode do not contain generated coords.\n        // And it only has index. User can use index to retrieve value from the raw item array.\n\n\n        getOrCreateEncodeArr(userOutput.encode, coordDim)[coordDimIndex] = dimItem.index;\n      }\n\n      if (dimItem.defaultTooltip) {\n        defaultedTooltip.push(dimName);\n      }\n    }\n\n    OTHER_DIMENSIONS.each(function (v, otherDim) {\n      var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n      var dimIndex = dimItem.otherDims[otherDim];\n\n      if (dimIndex != null && dimIndex !== false) {\n        encodeArr[dimIndex] = dimItem.name;\n      }\n    });\n  });\n  var dataDimsOnCoord = [];\n  var encodeFirstDimNotExtra = {};\n  notExtraCoordDimMap.each(function (v, coordDim) {\n    var dimArr = encode[coordDim]; // ??? FIXME extra coord should not be set in dataDimsOnCoord.\n    // But should fix the case that radar axes: simplify the logic\n    // of `completeDimension`, remove `extraPrefix`.\n\n    encodeFirstDimNotExtra[coordDim] = dimArr[0]; // Not necessary to remove duplicate, because a data\n    // dim canot on more than one coordDim.\n\n    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n  });\n  summary.dataDimsOnCoord = dataDimsOnCoord;\n  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n  var encodeLabel = encode.label; // FIXME `encode.label` is not recommanded, because formatter can not be set\n  // in this way. Use label.formatter instead. May be remove this approach someday.\n\n  if (encodeLabel && encodeLabel.length) {\n    defaultedLabel = encodeLabel.slice();\n  }\n\n  var encodeTooltip = encode.tooltip;\n\n  if (encodeTooltip && encodeTooltip.length) {\n    defaultedTooltip = encodeTooltip.slice();\n  } else if (!defaultedTooltip.length) {\n    defaultedTooltip = defaultedLabel.slice();\n  }\n\n  encode.defaultedLabel = defaultedLabel;\n  encode.defaultedTooltip = defaultedTooltip;\n  return summary;\n}\n\nfunction getOrCreateEncodeArr(encode, dim) {\n  if (!encode.hasOwnProperty(dim)) {\n    encode[dim] = [];\n  }\n\n  return encode[dim];\n}\n\nfunction getDimensionTypeByAxis(axisType) {\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n}\n\nfunction mayLabelDimType(dimType) {\n  // In most cases, ordinal and time do not suitable for label.\n  // Ordinal info can be displayed on axis. Time is too long.\n  return !(dimType === 'ordinal' || dimType === 'time');\n} // function findTheLastDimMayLabel(data) {\n//     // Get last value dim\n//     var dimensions = data.dimensions.slice();\n//     var valueType;\n//     var valueDim;\n//     while (dimensions.length && (\n//         valueDim = dimensions.pop(),\n//         valueType = data.getDimensionInfo(valueDim).type,\n//         valueType === 'ordinal' || valueType === 'time'\n//     )) {} // jshint ignore:line\n//     return valueDim;\n// }\n\n\nexports.OTHER_DIMENSIONS = OTHER_DIMENSIONS;\nexports.summarizeDimensions = summarizeDimensions;\nexports.getDimensionTypeByAxis = getDimensionTypeByAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar echarts = require(\"../echarts\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar _format = require(\"../util/format\");\n\nvar windowOpen = _format.windowOpen;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Model\necharts.extendComponentModel({\n  type: 'title',\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 6,\n    show: true,\n    text: '',\n    // \n    // link: null,\n    // self | blank\n    target: 'blank',\n    subtext: '',\n    // \n    // sublink: null,\n    // self | blank\n    subtarget: 'blank',\n    // 'center'  'left'  'right'\n    //  {number}xpx\n    left: 0,\n    // 'top'  'bottom'  'center'\n    //  {number}ypx\n    top: 0,\n    // \n    // 'auto' | 'left' | 'right' | 'center'\n    //  left \n    // textAlign: null\n    //\n    // \n    // 'auto' | 'top' | 'bottom' | 'middle'\n    //  top \n    // textVerticalAlign: null\n    // textBaseline: null // The same as textVerticalAlign.\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // px10\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bolder',\n      color: '#333'\n    },\n    subtextStyle: {\n      color: '#aaa'\n    }\n  }\n}); // View\n\necharts.extendComponentView({\n  type: 'title',\n  render: function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: titleModel.get('text'),\n        textFill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: graphic.setTextStyle({}, subtextStyleModel, {\n        text: subText,\n        textFill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        textVerticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    textEl.eventData = subTextEl.eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.attr('position', [layoutRect.x, layoutRect.y]);\n    var alignStyle = {\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  }\n});","var guid = require(\"./core/guid\");\n\nvar env = require(\"./core/env\");\n\nvar zrUtil = require(\"./core/util\");\n\nvar Handler = require(\"./Handler\");\n\nvar Storage = require(\"./Storage\");\n\nvar Painter = require(\"./Painter\");\n\nvar Animation = require(\"./animation/Animation\");\n\nvar HandlerProxy = require(\"./dom/HandlerProxy\");\n\n/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nvar useVML = !env.canvasSupported;\nvar painterCtors = {\n  canvas: Painter\n};\nvar instances = {}; // ZRendermap\n\n/**\n * @type {string}\n */\n\nvar version = '4.3.1';\n/**\n * Initializing a zrender instance\n * @param {HTMLElement} dom\n * @param {Object} [opts]\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\n * @param {number} [opts.devicePixelRatio]\n * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\n * @return {module:zrender/ZRender}\n */\n\nfunction init(dom, opts) {\n  var zr = new ZRender(guid(), dom, opts);\n  instances[zr.id] = zr;\n  return zr;\n}\n/**\n * Dispose zrender instance\n * @param {module:zrender/ZRender} zr\n */\n\n\nfunction dispose(zr) {\n  if (zr) {\n    zr.dispose();\n  } else {\n    for (var key in instances) {\n      if (instances.hasOwnProperty(key)) {\n        instances[key].dispose();\n      }\n    }\n\n    instances = {};\n  }\n\n  return this;\n}\n/**\n * Get zrender instance by id\n * @param {string} id zrender instance id\n * @return {module:zrender/ZRender}\n */\n\n\nfunction getInstance(id) {\n  return instances[id];\n}\n\nfunction registerPainter(name, Ctor) {\n  painterCtors[name] = Ctor;\n}\n\nfunction delInstance(id) {\n  delete instances[id];\n}\n/**\n * @module zrender/ZRender\n */\n\n/**\n * @constructor\n * @alias module:zrender/ZRender\n * @param {string} id\n * @param {HTMLElement} dom\n * @param {Object} opts\n * @param {string} [opts.renderer='canvas'] 'canvas' or 'svg'\n * @param {number} [opts.devicePixelRatio]\n * @param {number} [opts.width] Can be 'auto' (the same as null/undefined)\n * @param {number} [opts.height] Can be 'auto' (the same as null/undefined)\n */\n\n\nvar ZRender = function (id, dom, opts) {\n  opts = opts || {};\n  /**\n   * @type {HTMLDomElement}\n   */\n\n  this.dom = dom;\n  /**\n   * @type {string}\n   */\n\n  this.id = id;\n  var self = this;\n  var storage = new Storage();\n  var rendererType = opts.renderer; // TODO WebGL\n\n  if (useVML) {\n    if (!painterCtors.vml) {\n      throw new Error('You need to require \\'zrender/vml/vml\\' to support IE8');\n    }\n\n    rendererType = 'vml';\n  } else if (!rendererType || !painterCtors[rendererType]) {\n    rendererType = 'canvas';\n  }\n\n  var painter = new painterCtors[rendererType](dom, storage, opts, id);\n  this.storage = storage;\n  this.painter = painter;\n  var handerProxy = !env.node && !env.worker ? new HandlerProxy(painter.getViewportRoot(), painter.root) : null;\n  this.handler = new Handler(storage, painter, handerProxy, painter.root);\n  /**\n   * @type {module:zrender/animation/Animation}\n   */\n\n  this.animation = new Animation({\n    stage: {\n      update: zrUtil.bind(this.flush, this)\n    }\n  });\n  this.animation.start();\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._needsRefresh; //  storage.delFromStorage, \n  // FIXME ugly\n\n  var oldDelFromStorage = storage.delFromStorage;\n  var oldAddToStorage = storage.addToStorage;\n\n  storage.delFromStorage = function (el) {\n    oldDelFromStorage.call(storage, el);\n    el && el.removeSelfFromZr(self);\n  };\n\n  storage.addToStorage = function (el) {\n    oldAddToStorage.call(storage, el);\n    el.addSelfToZr(self);\n  };\n};\n\nZRender.prototype = {\n  constructor: ZRender,\n\n  /**\n   * \n   * @return {string}\n   */\n  getId: function () {\n    return this.id;\n  },\n\n  /**\n   * \n   * @param  {module:zrender/Element} el\n   */\n  add: function (el) {\n    this.storage.addRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * \n   * @param  {module:zrender/Element} el\n   */\n  remove: function (el) {\n    this.storage.delRoot(el);\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Change configuration of layer\n   * @param {string} zLevel\n   * @param {Object} config\n   * @param {string} [config.clearColor=0] Clear color\n   * @param {string} [config.motionBlur=false] If enable motion blur\n   * @param {number} [config.lastFrameAlpha=0.7] Motion blur factor. Larger value cause longer trailer\n  */\n  configLayer: function (zLevel, config) {\n    if (this.painter.configLayer) {\n      this.painter.configLayer(zLevel, config);\n    }\n\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Set background color\n   * @param {string} backgroundColor\n   */\n  setBackgroundColor: function (backgroundColor) {\n    if (this.painter.setBackgroundColor) {\n      this.painter.setBackgroundColor(backgroundColor);\n    }\n\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Repaint the canvas immediately\n   */\n  refreshImmediately: function () {\n    // var start = new Date();\n    // Clear needsRefresh ahead to avoid something wrong happens in refresh\n    // Or it will cause zrender refreshes again and again.\n    this._needsRefresh = this._needsRefreshHover = false;\n    this.painter.refresh(); // Avoid trigger zr.refresh in Element#beforeUpdate hook\n\n    this._needsRefresh = this._needsRefreshHover = false; // var end = new Date();\n    // var log = document.getElementById('log');\n    // if (log) {\n    //     log.innerHTML = log.innerHTML + '<br>' + (end - start);\n    // }\n  },\n\n  /**\n   * Mark and repaint the canvas in the next frame of browser\n   */\n  refresh: function () {\n    this._needsRefresh = true;\n  },\n\n  /**\n   * Perform all refresh\n   */\n  flush: function () {\n    var triggerRendered;\n\n    if (this._needsRefresh) {\n      triggerRendered = true;\n      this.refreshImmediately();\n    }\n\n    if (this._needsRefreshHover) {\n      triggerRendered = true;\n      this.refreshHoverImmediately();\n    }\n\n    triggerRendered && this.trigger('rendered');\n  },\n\n  /**\n   * Add element to hover layer\n   * @param  {module:zrender/Element} el\n   * @param {Object} style\n   */\n  addHover: function (el, style) {\n    if (this.painter.addHover) {\n      var elMirror = this.painter.addHover(el, style);\n      this.refreshHover();\n      return elMirror;\n    }\n  },\n\n  /**\n   * Add element from hover layer\n   * @param  {module:zrender/Element} el\n   */\n  removeHover: function (el) {\n    if (this.painter.removeHover) {\n      this.painter.removeHover(el);\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Clear all hover elements in hover layer\n   * @param  {module:zrender/Element} el\n   */\n  clearHover: function () {\n    if (this.painter.clearHover) {\n      this.painter.clearHover();\n      this.refreshHover();\n    }\n  },\n\n  /**\n   * Refresh hover in next frame\n   */\n  refreshHover: function () {\n    this._needsRefreshHover = true;\n  },\n\n  /**\n   * Refresh hover immediately\n   */\n  refreshHoverImmediately: function () {\n    this._needsRefreshHover = false;\n    this.painter.refreshHover && this.painter.refreshHover();\n  },\n\n  /**\n   * Resize the canvas.\n   * Should be invoked when container size is changed\n   * @param {Object} [opts]\n   * @param {number|string} [opts.width] Can be 'auto' (the same as null/undefined)\n   * @param {number|string} [opts.height] Can be 'auto' (the same as null/undefined)\n   */\n  resize: function (opts) {\n    opts = opts || {};\n    this.painter.resize(opts.width, opts.height);\n    this.handler.resize();\n  },\n\n  /**\n   * Stop and clear all animation immediately\n   */\n  clearAnimation: function () {\n    this.animation.clear();\n  },\n\n  /**\n   * Get container width\n   */\n  getWidth: function () {\n    return this.painter.getWidth();\n  },\n\n  /**\n   * Get container height\n   */\n  getHeight: function () {\n    return this.painter.getHeight();\n  },\n\n  /**\n   * Export the canvas as Base64 URL\n   * @param {string} type\n   * @param {string} [backgroundColor='#fff']\n   * @return {string} Base64 URL\n   */\n  // toDataURL: function(type, backgroundColor) {\n  //     return this.painter.getRenderedCanvas({\n  //         backgroundColor: backgroundColor\n  //     }).toDataURL(type);\n  // },\n\n  /**\n   * Converting a path to image.\n   * It has much better performance of drawing image rather than drawing a vector path.\n   * @param {module:zrender/graphic/Path} e\n   * @param {number} width\n   * @param {number} height\n   */\n  pathToImage: function (e, dpr) {\n    return this.painter.pathToImage(e, dpr);\n  },\n\n  /**\n   * Set default cursor\n   * @param {string} [cursorStyle='default']  crosshair\n   */\n  setCursorStyle: function (cursorStyle) {\n    this.handler.setCursorStyle(cursorStyle);\n  },\n\n  /**\n   * Find hovered element\n   * @param {number} x\n   * @param {number} y\n   * @return {Object} {target, topTarget}\n   */\n  findHover: function (x, y) {\n    return this.handler.findHover(x, y);\n  },\n\n  /**\n   * Bind event\n   *\n   * @param {string} eventName Event name\n   * @param {Function} eventHandler Handler function\n   * @param {Object} [context] Context object\n   */\n  on: function (eventName, eventHandler, context) {\n    this.handler.on(eventName, eventHandler, context);\n  },\n\n  /**\n   * Unbind event\n   * @param {string} eventName Event name\n   * @param {Function} [eventHandler] Handler function\n   */\n  off: function (eventName, eventHandler) {\n    this.handler.off(eventName, eventHandler);\n  },\n\n  /**\n   * Trigger event manually\n   *\n   * @param {string} eventName Event name\n   * @param {event=} event Event object\n   */\n  trigger: function (eventName, event) {\n    this.handler.trigger(eventName, event);\n  },\n\n  /**\n   * Clear all objects and the canvas.\n   */\n  clear: function () {\n    this.storage.delRoot();\n    this.painter.clear();\n  },\n\n  /**\n   * Dispose self.\n   */\n  dispose: function () {\n    this.animation.stop();\n    this.clear();\n    this.storage.dispose();\n    this.painter.dispose();\n    this.handler.dispose();\n    this.animation = this.storage = this.painter = this.handler = null;\n    delInstance(this.id);\n  }\n};\nexports.version = version;\nexports.init = init;\nexports.dispose = dispose;\nexports.getInstance = getInstance;\nexports.registerPainter = registerPainter;","var matrix = require(\"../core/matrix\");\n\nvar vector = require(\"../core/vector\");\n\n/**\n * \n * @module zrender/mixin/Transformable\n * @author pissang (https://www.github.com/pissang)\n */\nvar mIdentity = matrix.identity;\nvar EPSILON = 5e-5;\n\nfunction isNotAroundZero(val) {\n  return val > EPSILON || val < -EPSILON;\n}\n/**\n * @alias module:zrender/mixin/Transformable\n * @constructor\n */\n\n\nvar Transformable = function (opts) {\n  opts = opts || {}; // If there are no given position, rotation, scale\n\n  if (!opts.position) {\n    /**\n     * \n     * @type {Array.<number>}\n     * @default [0, 0]\n     */\n    this.position = [0, 0];\n  }\n\n  if (opts.rotation == null) {\n    /**\n     * \n     * @type {Array.<number>}\n     * @default 0\n     */\n    this.rotation = 0;\n  }\n\n  if (!opts.scale) {\n    /**\n     * \n     * @type {Array.<number>}\n     * @default [1, 1]\n     */\n    this.scale = [1, 1];\n  }\n  /**\n   * \n   * @type {Array.<number>}\n   * @default null\n   */\n\n\n  this.origin = this.origin || null;\n};\n\nvar transformableProto = Transformable.prototype;\ntransformableProto.transform = null;\n/**\n * \n * , position, rotation, scaletransformtransform\n */\n\ntransformableProto.needLocalTransform = function () {\n  return isNotAroundZero(this.rotation) || isNotAroundZero(this.position[0]) || isNotAroundZero(this.position[1]) || isNotAroundZero(this.scale[0] - 1) || isNotAroundZero(this.scale[1] - 1);\n};\n\nvar scaleTmp = [];\n\ntransformableProto.updateTransform = function () {\n  var parent = this.parent;\n  var parentHasTransform = parent && parent.transform;\n  var needLocalTransform = this.needLocalTransform();\n  var m = this.transform;\n\n  if (!(needLocalTransform || parentHasTransform)) {\n    m && mIdentity(m);\n    return;\n  }\n\n  m = m || matrix.create();\n\n  if (needLocalTransform) {\n    this.getLocalTransform(m);\n  } else {\n    mIdentity(m);\n  } // \n\n\n  if (parentHasTransform) {\n    if (needLocalTransform) {\n      matrix.mul(m, parent.transform, m);\n    } else {\n      matrix.copy(m, parent.transform);\n    }\n  } // \n\n\n  this.transform = m;\n  var globalScaleRatio = this.globalScaleRatio;\n\n  if (globalScaleRatio != null && globalScaleRatio !== 1) {\n    this.getGlobalScale(scaleTmp);\n    var relX = scaleTmp[0] < 0 ? -1 : 1;\n    var relY = scaleTmp[1] < 0 ? -1 : 1;\n    var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n    var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n    m[0] *= sx;\n    m[1] *= sx;\n    m[2] *= sy;\n    m[3] *= sy;\n  }\n\n  this.invTransform = this.invTransform || matrix.create();\n  matrix.invert(this.invTransform, m);\n};\n\ntransformableProto.getLocalTransform = function (m) {\n  return Transformable.getLocalTransform(this, m);\n};\n/**\n * transformcontext\n * @param {CanvasRenderingContext2D} ctx\n */\n\n\ntransformableProto.setTransform = function (ctx) {\n  var m = this.transform;\n  var dpr = ctx.dpr || 1;\n\n  if (m) {\n    ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n  } else {\n    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n  }\n};\n\ntransformableProto.restoreTransform = function (ctx) {\n  var dpr = ctx.dpr || 1;\n  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n};\n\nvar tmpTransform = [];\nvar originTransform = matrix.create();\n\ntransformableProto.setLocalTransform = function (m) {\n  if (!m) {\n    // TODO return or set identity?\n    return;\n  }\n\n  var sx = m[0] * m[0] + m[1] * m[1];\n  var sy = m[2] * m[2] + m[3] * m[3];\n  var position = this.position;\n  var scale = this.scale;\n\n  if (isNotAroundZero(sx - 1)) {\n    sx = Math.sqrt(sx);\n  }\n\n  if (isNotAroundZero(sy - 1)) {\n    sy = Math.sqrt(sy);\n  }\n\n  if (m[0] < 0) {\n    sx = -sx;\n  }\n\n  if (m[3] < 0) {\n    sy = -sy;\n  }\n\n  position[0] = m[4];\n  position[1] = m[5];\n  scale[0] = sx;\n  scale[1] = sy;\n  this.rotation = Math.atan2(-m[1] / sy, m[0] / sx);\n};\n/**\n * `transform``position`, `rotation`, `scale`\n */\n\n\ntransformableProto.decomposeTransform = function () {\n  if (!this.transform) {\n    return;\n  }\n\n  var parent = this.parent;\n  var m = this.transform;\n\n  if (parent && parent.transform) {\n    // Get local transform and decompose them to position, scale, rotation\n    matrix.mul(tmpTransform, parent.invTransform, m);\n    m = tmpTransform;\n  }\n\n  var origin = this.origin;\n\n  if (origin && (origin[0] || origin[1])) {\n    originTransform[4] = origin[0];\n    originTransform[5] = origin[1];\n    matrix.mul(tmpTransform, m, originTransform);\n    tmpTransform[4] -= origin[0];\n    tmpTransform[5] -= origin[1];\n    m = tmpTransform;\n  }\n\n  this.setLocalTransform(m);\n};\n/**\n * Get global scale\n * @return {Array.<number>}\n */\n\n\ntransformableProto.getGlobalScale = function (out) {\n  var m = this.transform;\n  out = out || [];\n\n  if (!m) {\n    out[0] = 1;\n    out[1] = 1;\n    return out;\n  }\n\n  out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n  out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n\n  if (m[0] < 0) {\n    out[0] = -out[0];\n  }\n\n  if (m[3] < 0) {\n    out[1] = -out[1];\n  }\n\n  return out;\n};\n/**\n *  shape \n * @method\n * @param {number} x\n * @param {number} y\n * @return {Array.<number>}\n */\n\n\ntransformableProto.transformCoordToLocal = function (x, y) {\n  var v2 = [x, y];\n  var invTransform = this.invTransform;\n\n  if (invTransform) {\n    vector.applyTransform(v2, v2, invTransform);\n  }\n\n  return v2;\n};\n/**\n * \n * @method\n * @param {number} x\n * @param {number} y\n * @return {Array.<number>}\n */\n\n\ntransformableProto.transformCoordToGlobal = function (x, y) {\n  var v2 = [x, y];\n  var transform = this.transform;\n\n  if (transform) {\n    vector.applyTransform(v2, v2, transform);\n  }\n\n  return v2;\n};\n/**\n * @static\n * @param {Object} target\n * @param {Array.<number>} target.origin\n * @param {number} target.rotation\n * @param {Array.<number>} target.position\n * @param {Array.<number>} [m]\n */\n\n\nTransformable.getLocalTransform = function (target, m) {\n  m = m || [];\n  mIdentity(m);\n  var origin = target.origin;\n  var scale = target.scale || [1, 1];\n  var rotation = target.rotation || 0;\n  var position = target.position || [0, 0];\n\n  if (origin) {\n    // Translate to origin\n    m[4] -= origin[0];\n    m[5] -= origin[1];\n  }\n\n  matrix.scale(m, m, scale);\n\n  if (rotation) {\n    matrix.rotate(m, m, rotation);\n  }\n\n  if (origin) {\n    // Translate back from origin\n    m[4] += origin[0];\n    m[5] += origin[1];\n  }\n\n  m[4] += position[0];\n  m[5] += position[1];\n  return m;\n};\n\nvar _default = Transformable;\nmodule.exports = _default;","var _util = require(\"../../core/util\");\n\nvar retrieve2 = _util.retrieve2;\nvar retrieve3 = _util.retrieve3;\nvar each = _util.each;\nvar normalizeCssArray = _util.normalizeCssArray;\nvar isString = _util.isString;\nvar isObject = _util.isObject;\n\nvar textContain = require(\"../../contain/text\");\n\nvar roundRectHelper = require(\"./roundRect\");\n\nvar imageHelper = require(\"./image\");\n\nvar fixShadow = require(\"./fixShadow\");\n\nvar _constant = require(\"../constant\");\n\nvar ContextCachedBy = _constant.ContextCachedBy;\nvar WILL_BE_RESTORED = _constant.WILL_BE_RESTORED;\nvar DEFAULT_FONT = textContain.DEFAULT_FONT; // TODO: Have not support 'start', 'end' yet.\n\nvar VALID_TEXT_ALIGN = {\n  left: 1,\n  right: 1,\n  center: 1\n};\nvar VALID_TEXT_VERTICAL_ALIGN = {\n  top: 1,\n  bottom: 1,\n  middle: 1\n}; // Different from `STYLE_COMMON_PROPS` of `graphic/Style`,\n// the default value of shadowColor is `'transparent'`.\n\nvar SHADOW_STYLE_COMMON_PROPS = [['textShadowBlur', 'shadowBlur', 0], ['textShadowOffsetX', 'shadowOffsetX', 0], ['textShadowOffsetY', 'shadowOffsetY', 0], ['textShadowColor', 'shadowColor', 'transparent']];\nvar _tmpTextPositionResult = {};\nvar _tmpBoxPositionResult = {};\n/**\n * @param {module:zrender/graphic/Style} style\n * @return {module:zrender/graphic/Style} The input style.\n */\n\nfunction normalizeTextStyle(style) {\n  normalizeStyle(style);\n  each(style.rich, normalizeStyle);\n  return style;\n}\n\nfunction normalizeStyle(style) {\n  if (style) {\n    style.font = textContain.makeFont(style);\n    var textAlign = style.textAlign;\n    textAlign === 'middle' && (textAlign = 'center');\n    style.textAlign = textAlign == null || VALID_TEXT_ALIGN[textAlign] ? textAlign : 'left'; // Compatible with textBaseline.\n\n    var textVerticalAlign = style.textVerticalAlign || style.textBaseline;\n    textVerticalAlign === 'center' && (textVerticalAlign = 'middle');\n    style.textVerticalAlign = textVerticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[textVerticalAlign] ? textVerticalAlign : 'top';\n    var textPadding = style.textPadding;\n\n    if (textPadding) {\n      style.textPadding = normalizeCssArray(style.textPadding);\n    }\n  }\n}\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {string} text\n * @param {module:zrender/graphic/Style} style\n * @param {Object|boolean} [rect] {x, y, width, height}\n *                  If set false, rect text is not used.\n * @param {Element|module:zrender/graphic/helper/constant.WILL_BE_RESTORED} [prevEl] For ctx prop cache.\n */\n\n\nfunction renderText(hostEl, ctx, text, style, rect, prevEl) {\n  style.rich ? renderRichText(hostEl, ctx, text, style, rect, prevEl) : renderPlainText(hostEl, ctx, text, style, rect, prevEl);\n} // Avoid setting to ctx according to prevEl if possible for\n// performance in scenarios of large amount text.\n\n\nfunction renderPlainText(hostEl, ctx, text, style, rect, prevEl) {\n  'use strict';\n\n  var needDrawBg = needDrawBackground(style);\n  var prevStyle;\n  var checkCache = false;\n  var cachedByMe = ctx.__attrCachedBy === ContextCachedBy.PLAIN_TEXT; // Only take and check cache for `Text` el, but not RectText.\n\n  if (prevEl !== WILL_BE_RESTORED) {\n    if (prevEl) {\n      prevStyle = prevEl.style;\n      checkCache = !needDrawBg && cachedByMe && prevStyle;\n    } // Prevent from using cache in `Style::bind`, because of the case:\n    // ctx property is modified by other properties than `Style::bind`\n    // used, and Style::bind is called next.\n\n\n    ctx.__attrCachedBy = needDrawBg ? ContextCachedBy.NONE : ContextCachedBy.PLAIN_TEXT;\n  } // Since this will be restored, prevent from using these props to check cache in the next\n  // entering of this method. But do not need to clear other cache like `Style::bind`.\n  else if (cachedByMe) {\n      ctx.__attrCachedBy = ContextCachedBy.NONE;\n    }\n\n  var styleFont = style.font || DEFAULT_FONT; // PENDING\n  // Only `Text` el set `font` and keep it (`RectText` will restore). So theoretically\n  // we can make font cache on ctx, which can cache for text el that are discontinuous.\n  // But layer save/restore needed to be considered.\n  // if (styleFont !== ctx.__fontCache) {\n  //     ctx.font = styleFont;\n  //     if (prevEl !== WILL_BE_RESTORED) {\n  //         ctx.__fontCache = styleFont;\n  //     }\n  // }\n\n  if (!checkCache || styleFont !== (prevStyle.font || DEFAULT_FONT)) {\n    ctx.font = styleFont;\n  } // Use the final font from context-2d, because the final\n  // font might not be the style.font when it is illegal.\n  // But get `ctx.font` might be time consuming.\n\n\n  var computedFont = hostEl.__computedFont;\n\n  if (hostEl.__styleFont !== styleFont) {\n    hostEl.__styleFont = styleFont;\n    computedFont = hostEl.__computedFont = ctx.font;\n  }\n\n  var textPadding = style.textPadding;\n  var textLineHeight = style.textLineHeight;\n  var contentBlock = hostEl.__textCotentBlock;\n\n  if (!contentBlock || hostEl.__dirtyText) {\n    contentBlock = hostEl.__textCotentBlock = textContain.parsePlainText(text, computedFont, textPadding, textLineHeight, style.truncate);\n  }\n\n  var outerHeight = contentBlock.outerHeight;\n  var textLines = contentBlock.lines;\n  var lineHeight = contentBlock.lineHeight;\n  var boxPos = getBoxPosition(_tmpBoxPositionResult, hostEl, style, rect);\n  var baseX = boxPos.baseX;\n  var baseY = boxPos.baseY;\n  var textAlign = boxPos.textAlign || 'left';\n  var textVerticalAlign = boxPos.textVerticalAlign; // Origin of textRotation should be the base point of text drawing.\n\n  applyTextRotation(ctx, style, rect, baseX, baseY);\n  var boxY = textContain.adjustTextY(baseY, outerHeight, textVerticalAlign);\n  var textX = baseX;\n  var textY = boxY;\n\n  if (needDrawBg || textPadding) {\n    // Consider performance, do not call getTextWidth util necessary.\n    var textWidth = textContain.getWidth(text, computedFont);\n    var outerWidth = textWidth;\n    textPadding && (outerWidth += textPadding[1] + textPadding[3]);\n    var boxX = textContain.adjustTextX(baseX, outerWidth, textAlign);\n    needDrawBg && drawBackground(hostEl, ctx, style, boxX, boxY, outerWidth, outerHeight);\n\n    if (textPadding) {\n      textX = getTextXForPadding(baseX, textAlign, textPadding);\n      textY += textPadding[0];\n    }\n  } // Always set textAlign and textBase line, because it is difficute to calculate\n  // textAlign from prevEl, and we dont sure whether textAlign will be reset if\n  // font set happened.\n\n\n  ctx.textAlign = textAlign; // Force baseline to be \"middle\". Otherwise, if using \"top\", the\n  // text will offset downward a little bit in font \"Microsoft YaHei\".\n\n  ctx.textBaseline = 'middle'; // Set text opacity\n\n  ctx.globalAlpha = style.opacity || 1; // Always set shadowBlur and shadowOffset to avoid leak from displayable.\n\n  for (var i = 0; i < SHADOW_STYLE_COMMON_PROPS.length; i++) {\n    var propItem = SHADOW_STYLE_COMMON_PROPS[i];\n    var styleProp = propItem[0];\n    var ctxProp = propItem[1];\n    var val = style[styleProp];\n\n    if (!checkCache || val !== prevStyle[styleProp]) {\n      ctx[ctxProp] = fixShadow(ctx, ctxProp, val || propItem[2]);\n    }\n  } // `textBaseline` is set as 'middle'.\n\n\n  textY += lineHeight / 2;\n  var textStrokeWidth = style.textStrokeWidth;\n  var textStrokeWidthPrev = checkCache ? prevStyle.textStrokeWidth : null;\n  var strokeWidthChanged = !checkCache || textStrokeWidth !== textStrokeWidthPrev;\n  var strokeChanged = !checkCache || strokeWidthChanged || style.textStroke !== prevStyle.textStroke;\n  var textStroke = getStroke(style.textStroke, textStrokeWidth);\n  var textFill = getFill(style.textFill);\n\n  if (textStroke) {\n    if (strokeWidthChanged) {\n      ctx.lineWidth = textStrokeWidth;\n    }\n\n    if (strokeChanged) {\n      ctx.strokeStyle = textStroke;\n    }\n  }\n\n  if (textFill) {\n    if (!checkCache || style.textFill !== prevStyle.textFill) {\n      ctx.fillStyle = textFill;\n    }\n  } // Optimize simply, in most cases only one line exists.\n\n\n  if (textLines.length === 1) {\n    // Fill after stroke so the outline will not cover the main part.\n    textStroke && ctx.strokeText(textLines[0], textX, textY);\n    textFill && ctx.fillText(textLines[0], textX, textY);\n  } else {\n    for (var i = 0; i < textLines.length; i++) {\n      // Fill after stroke so the outline will not cover the main part.\n      textStroke && ctx.strokeText(textLines[i], textX, textY);\n      textFill && ctx.fillText(textLines[i], textX, textY);\n      textY += lineHeight;\n    }\n  }\n}\n\nfunction renderRichText(hostEl, ctx, text, style, rect, prevEl) {\n  // Do not do cache for rich text because of the complexity.\n  // But `RectText` this will be restored, do not need to clear other cache like `Style::bind`.\n  if (prevEl !== WILL_BE_RESTORED) {\n    ctx.__attrCachedBy = ContextCachedBy.NONE;\n  }\n\n  var contentBlock = hostEl.__textCotentBlock;\n\n  if (!contentBlock || hostEl.__dirtyText) {\n    contentBlock = hostEl.__textCotentBlock = textContain.parseRichText(text, style);\n  }\n\n  drawRichText(hostEl, ctx, contentBlock, style, rect);\n}\n\nfunction drawRichText(hostEl, ctx, contentBlock, style, rect) {\n  var contentWidth = contentBlock.width;\n  var outerWidth = contentBlock.outerWidth;\n  var outerHeight = contentBlock.outerHeight;\n  var textPadding = style.textPadding;\n  var boxPos = getBoxPosition(_tmpBoxPositionResult, hostEl, style, rect);\n  var baseX = boxPos.baseX;\n  var baseY = boxPos.baseY;\n  var textAlign = boxPos.textAlign;\n  var textVerticalAlign = boxPos.textVerticalAlign; // Origin of textRotation should be the base point of text drawing.\n\n  applyTextRotation(ctx, style, rect, baseX, baseY);\n  var boxX = textContain.adjustTextX(baseX, outerWidth, textAlign);\n  var boxY = textContain.adjustTextY(baseY, outerHeight, textVerticalAlign);\n  var xLeft = boxX;\n  var lineTop = boxY;\n\n  if (textPadding) {\n    xLeft += textPadding[3];\n    lineTop += textPadding[0];\n  }\n\n  var xRight = xLeft + contentWidth;\n  needDrawBackground(style) && drawBackground(hostEl, ctx, style, boxX, boxY, outerWidth, outerHeight);\n\n  for (var i = 0; i < contentBlock.lines.length; i++) {\n    var line = contentBlock.lines[i];\n    var tokens = line.tokens;\n    var tokenCount = tokens.length;\n    var lineHeight = line.lineHeight;\n    var usedWidth = line.width;\n    var leftIndex = 0;\n    var lineXLeft = xLeft;\n    var lineXRight = xRight;\n    var rightIndex = tokenCount - 1;\n    var token;\n\n    while (leftIndex < tokenCount && (token = tokens[leftIndex], !token.textAlign || token.textAlign === 'left')) {\n      placeToken(hostEl, ctx, token, style, lineHeight, lineTop, lineXLeft, 'left');\n      usedWidth -= token.width;\n      lineXLeft += token.width;\n      leftIndex++;\n    }\n\n    while (rightIndex >= 0 && (token = tokens[rightIndex], token.textAlign === 'right')) {\n      placeToken(hostEl, ctx, token, style, lineHeight, lineTop, lineXRight, 'right');\n      usedWidth -= token.width;\n      lineXRight -= token.width;\n      rightIndex--;\n    } // The other tokens are placed as textAlign 'center' if there is enough space.\n\n\n    lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - usedWidth) / 2;\n\n    while (leftIndex <= rightIndex) {\n      token = tokens[leftIndex]; // Consider width specified by user, use 'center' rather than 'left'.\n\n      placeToken(hostEl, ctx, token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center');\n      lineXLeft += token.width;\n      leftIndex++;\n    }\n\n    lineTop += lineHeight;\n  }\n}\n\nfunction applyTextRotation(ctx, style, rect, x, y) {\n  // textRotation only apply in RectText.\n  if (rect && style.textRotation) {\n    var origin = style.textOrigin;\n\n    if (origin === 'center') {\n      x = rect.width / 2 + rect.x;\n      y = rect.height / 2 + rect.y;\n    } else if (origin) {\n      x = origin[0] + rect.x;\n      y = origin[1] + rect.y;\n    }\n\n    ctx.translate(x, y); // Positive: anticlockwise\n\n    ctx.rotate(-style.textRotation);\n    ctx.translate(-x, -y);\n  }\n}\n\nfunction placeToken(hostEl, ctx, token, style, lineHeight, lineTop, x, textAlign) {\n  var tokenStyle = style.rich[token.styleName] || {};\n  tokenStyle.text = token.text; // 'ctx.textBaseline' is always set as 'middle', for sake of\n  // the bias of \"Microsoft YaHei\".\n\n  var textVerticalAlign = token.textVerticalAlign;\n  var y = lineTop + lineHeight / 2;\n\n  if (textVerticalAlign === 'top') {\n    y = lineTop + token.height / 2;\n  } else if (textVerticalAlign === 'bottom') {\n    y = lineTop + lineHeight - token.height / 2;\n  }\n\n  !token.isLineHolder && needDrawBackground(tokenStyle) && drawBackground(hostEl, ctx, tokenStyle, textAlign === 'right' ? x - token.width : textAlign === 'center' ? x - token.width / 2 : x, y - token.height / 2, token.width, token.height);\n  var textPadding = token.textPadding;\n\n  if (textPadding) {\n    x = getTextXForPadding(x, textAlign, textPadding);\n    y -= token.height / 2 - textPadding[2] - token.textHeight / 2;\n  }\n\n  setCtx(ctx, 'shadowBlur', retrieve3(tokenStyle.textShadowBlur, style.textShadowBlur, 0));\n  setCtx(ctx, 'shadowColor', tokenStyle.textShadowColor || style.textShadowColor || 'transparent');\n  setCtx(ctx, 'shadowOffsetX', retrieve3(tokenStyle.textShadowOffsetX, style.textShadowOffsetX, 0));\n  setCtx(ctx, 'shadowOffsetY', retrieve3(tokenStyle.textShadowOffsetY, style.textShadowOffsetY, 0));\n  setCtx(ctx, 'textAlign', textAlign); // Force baseline to be \"middle\". Otherwise, if using \"top\", the\n  // text will offset downward a little bit in font \"Microsoft YaHei\".\n\n  setCtx(ctx, 'textBaseline', 'middle');\n  setCtx(ctx, 'font', token.font || DEFAULT_FONT);\n  var textStroke = getStroke(tokenStyle.textStroke || style.textStroke, textStrokeWidth);\n  var textFill = getFill(tokenStyle.textFill || style.textFill);\n  var textStrokeWidth = retrieve2(tokenStyle.textStrokeWidth, style.textStrokeWidth); // Fill after stroke so the outline will not cover the main part.\n\n  if (textStroke) {\n    setCtx(ctx, 'lineWidth', textStrokeWidth);\n    setCtx(ctx, 'strokeStyle', textStroke);\n    ctx.strokeText(token.text, x, y);\n  }\n\n  if (textFill) {\n    setCtx(ctx, 'fillStyle', textFill);\n    ctx.fillText(token.text, x, y);\n  }\n}\n\nfunction needDrawBackground(style) {\n  return !!(style.textBackgroundColor || style.textBorderWidth && style.textBorderColor);\n} // style: {textBackgroundColor, textBorderWidth, textBorderColor, textBorderRadius, text}\n// shape: {x, y, width, height}\n\n\nfunction drawBackground(hostEl, ctx, style, x, y, width, height) {\n  var textBackgroundColor = style.textBackgroundColor;\n  var textBorderWidth = style.textBorderWidth;\n  var textBorderColor = style.textBorderColor;\n  var isPlainBg = isString(textBackgroundColor);\n  setCtx(ctx, 'shadowBlur', style.textBoxShadowBlur || 0);\n  setCtx(ctx, 'shadowColor', style.textBoxShadowColor || 'transparent');\n  setCtx(ctx, 'shadowOffsetX', style.textBoxShadowOffsetX || 0);\n  setCtx(ctx, 'shadowOffsetY', style.textBoxShadowOffsetY || 0);\n\n  if (isPlainBg || textBorderWidth && textBorderColor) {\n    ctx.beginPath();\n    var textBorderRadius = style.textBorderRadius;\n\n    if (!textBorderRadius) {\n      ctx.rect(x, y, width, height);\n    } else {\n      roundRectHelper.buildPath(ctx, {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        r: textBorderRadius\n      });\n    }\n\n    ctx.closePath();\n  }\n\n  if (isPlainBg) {\n    setCtx(ctx, 'fillStyle', textBackgroundColor);\n\n    if (style.fillOpacity != null) {\n      var originalGlobalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = style.fillOpacity * style.opacity;\n      ctx.fill();\n      ctx.globalAlpha = originalGlobalAlpha;\n    } else {\n      ctx.fill();\n    }\n  } else if (isObject(textBackgroundColor)) {\n    var image = textBackgroundColor.image;\n    image = imageHelper.createOrUpdateImage(image, null, hostEl, onBgImageLoaded, textBackgroundColor);\n\n    if (image && imageHelper.isImageReady(image)) {\n      ctx.drawImage(image, x, y, width, height);\n    }\n  }\n\n  if (textBorderWidth && textBorderColor) {\n    setCtx(ctx, 'lineWidth', textBorderWidth);\n    setCtx(ctx, 'strokeStyle', textBorderColor);\n\n    if (style.strokeOpacity != null) {\n      var originalGlobalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = style.strokeOpacity * style.opacity;\n      ctx.stroke();\n      ctx.globalAlpha = originalGlobalAlpha;\n    } else {\n      ctx.stroke();\n    }\n  }\n}\n\nfunction onBgImageLoaded(image, textBackgroundColor) {\n  // Replace image, so that `contain/text.js#parseRichText`\n  // will get correct result in next tick.\n  textBackgroundColor.image = image;\n}\n\nfunction getBoxPosition(out, hostEl, style, rect) {\n  var baseX = style.x || 0;\n  var baseY = style.y || 0;\n  var textAlign = style.textAlign;\n  var textVerticalAlign = style.textVerticalAlign; // Text position represented by coord\n\n  if (rect) {\n    var textPosition = style.textPosition;\n\n    if (textPosition instanceof Array) {\n      // Percent\n      baseX = rect.x + parsePercent(textPosition[0], rect.width);\n      baseY = rect.y + parsePercent(textPosition[1], rect.height);\n    } else {\n      var res = hostEl && hostEl.calculateTextPosition ? hostEl.calculateTextPosition(_tmpTextPositionResult, style, rect) : textContain.calculateTextPosition(_tmpTextPositionResult, style, rect);\n      baseX = res.x;\n      baseY = res.y; // Default align and baseline when has textPosition\n\n      textAlign = textAlign || res.textAlign;\n      textVerticalAlign = textVerticalAlign || res.textVerticalAlign;\n    } // textOffset is only support in RectText, otherwise\n    // we have to adjust boundingRect for textOffset.\n\n\n    var textOffset = style.textOffset;\n\n    if (textOffset) {\n      baseX += textOffset[0];\n      baseY += textOffset[1];\n    }\n  }\n\n  out = out || {};\n  out.baseX = baseX;\n  out.baseY = baseY;\n  out.textAlign = textAlign;\n  out.textVerticalAlign = textVerticalAlign;\n  return out;\n}\n\nfunction setCtx(ctx, prop, value) {\n  ctx[prop] = fixShadow(ctx, prop, value);\n  return ctx[prop];\n}\n/**\n * @param {string} [stroke] If specified, do not check style.textStroke.\n * @param {string} [lineWidth] If specified, do not check style.textStroke.\n * @param {number} style\n */\n\n\nfunction getStroke(stroke, lineWidth) {\n  return stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none' ? null // TODO pattern and gradient?\n  : stroke.image || stroke.colorStops ? '#000' : stroke;\n}\n\nfunction getFill(fill) {\n  return fill == null || fill === 'none' ? null // TODO pattern and gradient?\n  : fill.image || fill.colorStops ? '#000' : fill;\n}\n\nfunction parsePercent(value, maxValue) {\n  if (typeof value === 'string') {\n    if (value.lastIndexOf('%') >= 0) {\n      return parseFloat(value) / 100 * maxValue;\n    }\n\n    return parseFloat(value);\n  }\n\n  return value;\n}\n\nfunction getTextXForPadding(x, textAlign, textPadding) {\n  return textAlign === 'right' ? x - textPadding[1] : textAlign === 'center' ? x + textPadding[3] / 2 - textPadding[1] / 2 : x + textPadding[3];\n}\n/**\n * @param {string} text\n * @param {module:zrender/Style} style\n * @return {boolean}\n */\n\n\nfunction needDrawText(text, style) {\n  return text != null && (text || style.textBackgroundColor || style.textBorderWidth && style.textBorderColor || style.textPadding);\n}\n\nexports.normalizeTextStyle = normalizeTextStyle;\nexports.renderText = renderText;\nexports.getBoxPosition = getBoxPosition;\nexports.getStroke = getStroke;\nexports.getFill = getFill;\nexports.parsePercent = parsePercent;\nexports.needDrawText = needDrawText;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar clazzUtil = require(\"../util/clazz\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar Component = function () {\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n  this.group = new Group();\n  /**\n   * @type {string}\n   * @readOnly\n   */\n\n  this.uid = componentUtil.getUID('viewComponent');\n};\n\nComponent.prototype = {\n  constructor: Component,\n  init: function (ecModel, api) {},\n  render: function (componentModel, ecModel, api, payload) {},\n  dispose: function () {},\n\n  /**\n   * @param {string} eventType\n   * @param {Object} query\n   * @param {module:zrender/Element} targetEl\n   * @param {Object} packedEvent\n   * @return {boolen} Pass only when return `true`.\n   */\n  filterForExposedEvent: null\n};\nvar componentProto = Component.prototype;\n\ncomponentProto.updateView = componentProto.updateLayout = componentProto.updateVisual = function (seriesModel, ecModel, api, payload) {// Do nothing;\n}; // Enable Component.extend.\n\n\nclazzUtil.enableClassExtend(Component); // Enable capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nclazzUtil.enableClassManagement(Component, {\n  registerWhenExtend: true\n});\nvar _default = Component;\nmodule.exports = _default;","var _util = require(\"../core/util\");\n\nvar inherits = _util.inherits;\n\nvar Displayble = require(\"./Displayable\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\n/**\n * Displayable for incremental rendering. It will be rendered in a separate layer\n * IncrementalDisplay have two main methods. `clearDisplayables` and `addDisplayables`\n * addDisplayables will render the added displayables incremetally.\n *\n * It use a not clearFlag to tell the painter don't clear the layer if it's the first element.\n */\n// TODO Style override ?\nfunction IncrementalDisplayble(opts) {\n  Displayble.call(this, opts);\n  this._displayables = [];\n  this._temporaryDisplayables = [];\n  this._cursor = 0;\n  this.notClear = true;\n}\n\nIncrementalDisplayble.prototype.incremental = true;\n\nIncrementalDisplayble.prototype.clearDisplaybles = function () {\n  this._displayables = [];\n  this._temporaryDisplayables = [];\n  this._cursor = 0;\n  this.dirty();\n  this.notClear = false;\n};\n\nIncrementalDisplayble.prototype.addDisplayable = function (displayable, notPersistent) {\n  if (notPersistent) {\n    this._temporaryDisplayables.push(displayable);\n  } else {\n    this._displayables.push(displayable);\n  }\n\n  this.dirty();\n};\n\nIncrementalDisplayble.prototype.addDisplayables = function (displayables, notPersistent) {\n  notPersistent = notPersistent || false;\n\n  for (var i = 0; i < displayables.length; i++) {\n    this.addDisplayable(displayables[i], notPersistent);\n  }\n};\n\nIncrementalDisplayble.prototype.eachPendingDisplayable = function (cb) {\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    cb && cb(this._displayables[i]);\n  }\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    cb && cb(this._temporaryDisplayables[i]);\n  }\n};\n\nIncrementalDisplayble.prototype.update = function () {\n  this.updateTransform();\n\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    var displayable = this._displayables[i]; // PENDING\n\n    displayable.parent = this;\n    displayable.update();\n    displayable.parent = null;\n  }\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    var displayable = this._temporaryDisplayables[i]; // PENDING\n\n    displayable.parent = this;\n    displayable.update();\n    displayable.parent = null;\n  }\n};\n\nIncrementalDisplayble.prototype.brush = function (ctx, prevEl) {\n  // Render persistant displayables.\n  for (var i = this._cursor; i < this._displayables.length; i++) {\n    var displayable = this._displayables[i];\n    displayable.beforeBrush && displayable.beforeBrush(ctx);\n    displayable.brush(ctx, i === this._cursor ? null : this._displayables[i - 1]);\n    displayable.afterBrush && displayable.afterBrush(ctx);\n  }\n\n  this._cursor = i; // Render temporary displayables.\n\n  for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n    var displayable = this._temporaryDisplayables[i];\n    displayable.beforeBrush && displayable.beforeBrush(ctx);\n    displayable.brush(ctx, i === 0 ? null : this._temporaryDisplayables[i - 1]);\n    displayable.afterBrush && displayable.afterBrush(ctx);\n  }\n\n  this._temporaryDisplayables = [];\n  this.notClear = true;\n};\n\nvar m = [];\n\nIncrementalDisplayble.prototype.getBoundingRect = function () {\n  if (!this._rect) {\n    var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n\n    for (var i = 0; i < this._displayables.length; i++) {\n      var displayable = this._displayables[i];\n      var childRect = displayable.getBoundingRect().clone();\n\n      if (displayable.needLocalTransform()) {\n        childRect.applyTransform(displayable.getLocalTransform(m));\n      }\n\n      rect.union(childRect);\n    }\n\n    this._rect = rect;\n  }\n\n  return this._rect;\n};\n\nIncrementalDisplayble.prototype.contain = function (x, y) {\n  var localPos = this.transformCoordToLocal(x, y);\n  var rect = this.getBoundingRect();\n\n  if (rect.contain(localPos[0], localPos[1])) {\n    for (var i = 0; i < this._displayables.length; i++) {\n      var displayable = this._displayables[i];\n\n      if (displayable.contain(x, y)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\ninherits(IncrementalDisplayble, Displayble);\nvar _default = IncrementalDisplayble;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\nvar _format = require(\"../../util/format\");\n\nvar getTooltipMarker = _format.getTooltipMarker;\nvar formatTpl = _format.formatTpl;\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g; // PENDING A little ugly\n\nvar _default = {\n  /**\n   * Get params for formatter\n   * @param {number} dataIndex\n   * @param {string} [dataType]\n   * @return {Object}\n   */\n  getDataParams: function (dataIndex, dataType) {\n    var data = this.getData(dataType);\n    var rawValue = this.getRawValue(dataIndex, dataType);\n    var rawDataIndex = data.getRawIndex(dataIndex);\n    var name = data.getName(dataIndex);\n    var itemOpt = data.getRawDataItem(dataIndex);\n    var color = data.getItemVisual(dataIndex, 'color');\n    var borderColor = data.getItemVisual(dataIndex, 'borderColor');\n    var tooltipModel = this.ecModel.getComponent('tooltip');\n    var renderModeOption = tooltipModel && tooltipModel.get('renderMode');\n    var renderMode = getTooltipRenderMode(renderModeOption);\n    var mainType = this.mainType;\n    var isSeries = mainType === 'series';\n    var userOutput = data.userOutput;\n    return {\n      componentType: mainType,\n      componentSubType: this.subType,\n      componentIndex: this.componentIndex,\n      seriesType: isSeries ? this.subType : null,\n      seriesIndex: this.seriesIndex,\n      seriesId: isSeries ? this.id : null,\n      seriesName: isSeries ? this.name : null,\n      name: name,\n      dataIndex: rawDataIndex,\n      data: itemOpt,\n      dataType: dataType,\n      value: rawValue,\n      color: color,\n      borderColor: borderColor,\n      dimensionNames: userOutput ? userOutput.dimensionNames : null,\n      encode: userOutput ? userOutput.encode : null,\n      marker: getTooltipMarker({\n        color: color,\n        renderMode: renderMode\n      }),\n      // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n      $vars: ['seriesName', 'name', 'value']\n    };\n  },\n\n  /**\n   * Format label\n   * @param {number} dataIndex\n   * @param {string} [status='normal'] 'normal' or 'emphasis'\n   * @param {string} [dataType]\n   * @param {number} [dimIndex] Only used in some chart that\n   *        use formatter in different dimensions, like radar.\n   * @param {string} [labelProp='label']\n   * @return {string} If not formatter, return null/undefined\n   */\n  getFormattedLabel: function (dataIndex, status, dataType, dimIndex, labelProp) {\n    status = status || 'normal';\n    var data = this.getData(dataType);\n    var itemModel = data.getItemModel(dataIndex);\n    var params = this.getDataParams(dataIndex, dataType);\n\n    if (dimIndex != null && params.value instanceof Array) {\n      params.value = params.value[dimIndex];\n    }\n\n    var formatter = itemModel.get(status === 'normal' ? [labelProp || 'label', 'formatter'] : [status, labelProp || 'label', 'formatter']);\n\n    if (typeof formatter === 'function') {\n      params.status = status;\n      params.dimensionIndex = dimIndex;\n      return formatter(params);\n    } else if (typeof formatter === 'string') {\n      var str = formatTpl(formatter, params); // Support 'aaa{@[3]}bbb{@product}ccc'.\n      // Do not support '}' in dim name util have to.\n\n      return str.replace(DIMENSION_LABEL_REG, function (origin, dim) {\n        var len = dim.length;\n\n        if (dim.charAt(0) === '[' && dim.charAt(len - 1) === ']') {\n          dim = +dim.slice(1, len - 1); // Also: '[]' => 0\n        }\n\n        return retrieveRawValue(data, dataIndex, dim);\n      });\n    }\n  },\n\n  /**\n   * Get raw value in option\n   * @param {number} idx\n   * @param {string} [dataType]\n   * @return {Array|number|string}\n   */\n  getRawValue: function (idx, dataType) {\n    return retrieveRawValue(this.getData(dataType), idx);\n  },\n\n  /**\n   * Should be implemented.\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {number} [dataType]\n   * @return {string} tooltip string\n   */\n  formatTooltip: function () {// Empty function\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar isString = _util.isString;\nvar isArray = _util.isArray;\nvar each = _util.each;\nvar assert = _util.assert;\n\nvar _parseSVG = require(\"zrender/lib/tool/parseSVG\");\n\nvar parseXML = _parseSVG.parseXML;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar storage = createHashMap(); // For minimize the code size of common echarts package,\n// do not put too much logic in this module.\n\nvar _default = {\n  // The format of record: see `echarts.registerMap`.\n  // Compatible with previous `echarts.registerMap`.\n  registerMap: function (mapName, rawGeoJson, rawSpecialAreas) {\n    var records;\n\n    if (isArray(rawGeoJson)) {\n      records = rawGeoJson;\n    } else if (rawGeoJson.svg) {\n      records = [{\n        type: 'svg',\n        source: rawGeoJson.svg,\n        specialAreas: rawGeoJson.specialAreas\n      }];\n    } else {\n      // Backward compatibility.\n      if (rawGeoJson.geoJson && !rawGeoJson.features) {\n        rawSpecialAreas = rawGeoJson.specialAreas;\n        rawGeoJson = rawGeoJson.geoJson;\n      }\n\n      records = [{\n        type: 'geoJSON',\n        source: rawGeoJson,\n        specialAreas: rawSpecialAreas\n      }];\n    }\n\n    each(records, function (record) {\n      var type = record.type;\n      type === 'geoJson' && (type = record.type = 'geoJSON');\n      var parse = parsers[type];\n      parse(record);\n    });\n    return storage.set(mapName, records);\n  },\n  retrieveMap: function (mapName) {\n    return storage.get(mapName);\n  }\n};\nvar parsers = {\n  geoJSON: function (record) {\n    var source = record.source;\n    record.geoJSON = !isString(source) ? source : typeof JSON !== 'undefined' && JSON.parse ? JSON.parse(source) : new Function('return (' + source + ');')();\n  },\n  // Only perform parse to XML object here, which might be time\n  // consiming for large SVG.\n  // Although convert XML to zrender element is also time consiming,\n  // if we do it here, the clone of zrender elements has to be\n  // required. So we do it once for each geo instance, util real\n  // performance issues call for optimizing it.\n  svg: function (record) {\n    record.svgXML = parseXML(record.source);\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar TYPE_DELIMITER = '.';\nvar IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\n/**\n * Notice, parseClassType('') should returns {main: '', sub: ''}\n * @public\n */\n\nfunction parseClassType(componentType) {\n  var ret = {\n    main: '',\n    sub: ''\n  };\n\n  if (componentType) {\n    componentType = componentType.split(TYPE_DELIMITER);\n    ret.main = componentType[0] || '';\n    ret.sub = componentType[1] || '';\n  }\n\n  return ret;\n}\n/**\n * @public\n */\n\n\nfunction checkClassType(componentType) {\n  zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n}\n/**\n * @public\n */\n\n\nfunction enableClassExtend(RootClass, mandatoryMethods) {\n  RootClass.$constructor = RootClass;\n\n  RootClass.extend = function (proto) {\n    var superClass = this;\n\n    var ExtendedClass = function () {\n      if (!proto.$constructor) {\n        superClass.apply(this, arguments);\n      } else {\n        proto.$constructor.apply(this, arguments);\n      }\n    };\n\n    zrUtil.extend(ExtendedClass.prototype, proto);\n    ExtendedClass.extend = this.extend;\n    ExtendedClass.superCall = superCall;\n    ExtendedClass.superApply = superApply;\n    zrUtil.inherits(ExtendedClass, this);\n    ExtendedClass.superClass = superClass;\n    return ExtendedClass;\n  };\n}\n\nvar classBase = 0;\n/**\n * Can not use instanceof, consider different scope by\n * cross domain or es module import in ec extensions.\n * Mount a method \"isInstance()\" to Clz.\n */\n\nfunction enableClassCheck(Clz) {\n  var classAttr = ['__\\0is_clz', classBase++, Math.random().toFixed(3)].join('_');\n  Clz.prototype[classAttr] = true;\n\n  Clz.isInstance = function (obj) {\n    return !!(obj && obj[classAttr]);\n  };\n} // superCall should have class info, which can not be fetch from 'this'.\n// Consider this case:\n// class A has method f,\n// class B inherits class A, overrides method f, f call superApply('f'),\n// class C inherits class B, do not overrides method f,\n// then when method of class C is called, dead loop occured.\n\n\nfunction superCall(context, methodName) {\n  var args = zrUtil.slice(arguments, 2);\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n\nfunction superApply(context, methodName, args) {\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n/**\n * @param {Object} entity\n * @param {Object} options\n * @param {boolean} [options.registerWhenExtend]\n * @public\n */\n\n\nfunction enableClassManagement(entity, options) {\n  options = options || {};\n  /**\n   * Component model classes\n   * key: componentType,\n   * value:\n   *     componentClass, when componentType is 'xxx'\n   *     or Object.<subKey, componentClass>, when componentType is 'xxx.yy'\n   * @type {Object}\n   */\n\n  var storage = {};\n\n  entity.registerClass = function (Clazz, componentType) {\n    if (componentType) {\n      checkClassType(componentType);\n      componentType = parseClassType(componentType);\n\n      if (!componentType.sub) {\n        storage[componentType.main] = Clazz;\n      } else if (componentType.sub !== IS_CONTAINER) {\n        var container = makeContainer(componentType);\n        container[componentType.sub] = Clazz;\n      }\n    }\n\n    return Clazz;\n  };\n\n  entity.getClass = function (componentMainType, subType, throwWhenNotFound) {\n    var Clazz = storage[componentMainType];\n\n    if (Clazz && Clazz[IS_CONTAINER]) {\n      Clazz = subType ? Clazz[subType] : null;\n    }\n\n    if (throwWhenNotFound && !Clazz) {\n      throw new Error(!subType ? componentMainType + '.' + 'type should be specified.' : 'Component ' + componentMainType + '.' + (subType || '') + ' not exists. Load it first.');\n    }\n\n    return Clazz;\n  };\n\n  entity.getClassesByMainType = function (componentType) {\n    componentType = parseClassType(componentType);\n    var result = [];\n    var obj = storage[componentType.main];\n\n    if (obj && obj[IS_CONTAINER]) {\n      zrUtil.each(obj, function (o, type) {\n        type !== IS_CONTAINER && result.push(o);\n      });\n    } else {\n      result.push(obj);\n    }\n\n    return result;\n  };\n\n  entity.hasClass = function (componentType) {\n    // Just consider componentType.main.\n    componentType = parseClassType(componentType);\n    return !!storage[componentType.main];\n  };\n  /**\n   * @return {Array.<string>} Like ['aa', 'bb'], but can not be ['aa.xx']\n   */\n\n\n  entity.getAllClassMainTypes = function () {\n    var types = [];\n    zrUtil.each(storage, function (obj, type) {\n      types.push(type);\n    });\n    return types;\n  };\n  /**\n   * If a main type is container and has sub types\n   * @param  {string}  mainType\n   * @return {boolean}\n   */\n\n\n  entity.hasSubTypes = function (componentType) {\n    componentType = parseClassType(componentType);\n    var obj = storage[componentType.main];\n    return obj && obj[IS_CONTAINER];\n  };\n\n  entity.parseClassType = parseClassType;\n\n  function makeContainer(componentType) {\n    var container = storage[componentType.main];\n\n    if (!container || !container[IS_CONTAINER]) {\n      container = storage[componentType.main] = {};\n      container[IS_CONTAINER] = true;\n    }\n\n    return container;\n  }\n\n  if (options.registerWhenExtend) {\n    var originalExtend = entity.extend;\n\n    if (originalExtend) {\n      entity.extend = function (proto) {\n        var ExtendedClass = originalExtend.call(this, proto);\n        return entity.registerClass(ExtendedClass, proto.type);\n      };\n    }\n  }\n\n  return entity;\n}\n/**\n * @param {string|Array.<string>} properties\n */\n\n\nfunction setReadOnly(obj, properties) {// FIXME It seems broken in IE8 simulation of IE11\n  // if (!zrUtil.isArray(properties)) {\n  //     properties = properties != null ? [properties] : [];\n  // }\n  // zrUtil.each(properties, function (prop) {\n  //     var value = obj[prop];\n  //     Object.defineProperty\n  //         && Object.defineProperty(obj, prop, {\n  //             value: value, writable: false\n  //         });\n  //     zrUtil.isArray(obj[prop])\n  //         && Object.freeze\n  //         && Object.freeze(obj[prop]);\n  // });\n}\n\nexports.parseClassType = parseClassType;\nexports.enableClassExtend = enableClassExtend;\nexports.enableClassCheck = enableClassCheck;\nexports.enableClassManagement = enableClassManagement;\nexports.setReadOnly = setReadOnly;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isTypedArray = _util.isTypedArray;\nvar extend = _util.extend;\nvar assert = _util.assert;\nvar each = _util.each;\nvar isObject = _util.isObject;\n\nvar _model = require(\"../../util/model\");\n\nvar getDataItemValue = _model.getDataItemValue;\nvar isDataItemOption = _model.isDataItemOption;\n\nvar _number = require(\"../../util/number\");\n\nvar parseDate = _number.parseDate;\n\nvar Source = require(\"../Source\");\n\nvar _sourceType = require(\"./sourceType\");\n\nvar SOURCE_FORMAT_TYPED_ARRAY = _sourceType.SOURCE_FORMAT_TYPED_ARRAY;\nvar SOURCE_FORMAT_ARRAY_ROWS = _sourceType.SOURCE_FORMAT_ARRAY_ROWS;\nvar SOURCE_FORMAT_ORIGINAL = _sourceType.SOURCE_FORMAT_ORIGINAL;\nvar SOURCE_FORMAT_OBJECT_ROWS = _sourceType.SOURCE_FORMAT_OBJECT_ROWS;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO\n// ??? refactor? check the outer usage of data provider.\n// merge with defaultDimValueGetter?\n\n/**\n * If normal array used, mutable chunk size is supported.\n * If typed array used, chunk size must be fixed.\n */\nfunction DefaultDataProvider(source, dimSize) {\n  if (!Source.isInstance(source)) {\n    source = Source.seriesDataToSource(source);\n  }\n\n  this._source = source;\n  var data = this._data = source.data;\n  var sourceFormat = source.sourceFormat; // Typed array. TODO IE10+?\n\n  if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n    this._offset = 0;\n    this._dimSize = dimSize;\n    this._data = data;\n  }\n\n  var methods = providerMethods[sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + '_' + source.seriesLayoutBy : sourceFormat];\n  extend(this, methods);\n}\n\nvar providerProto = DefaultDataProvider.prototype; // If data is pure without style configuration\n\nproviderProto.pure = false; // If data is persistent and will not be released after use.\n\nproviderProto.persistent = true; // ???! FIXME legacy data provider do not has method getSource\n\nproviderProto.getSource = function () {\n  return this._source;\n};\n\nvar providerMethods = {\n  'arrayRows_column': {\n    pure: true,\n    count: function () {\n      return Math.max(0, this._data.length - this._source.startIndex);\n    },\n    getItem: function (idx) {\n      return this._data[idx + this._source.startIndex];\n    },\n    appendData: appendDataSimply\n  },\n  'arrayRows_row': {\n    pure: true,\n    count: function () {\n      var row = this._data[0];\n      return row ? Math.max(0, row.length - this._source.startIndex) : 0;\n    },\n    getItem: function (idx) {\n      idx += this._source.startIndex;\n      var item = [];\n      var data = this._data;\n\n      for (var i = 0; i < data.length; i++) {\n        var row = data[i];\n        item.push(row ? row[idx] : null);\n      }\n\n      return item;\n    },\n    appendData: function () {\n      throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\n    }\n  },\n  'objectRows': {\n    pure: true,\n    count: countSimply,\n    getItem: getItemSimply,\n    appendData: appendDataSimply\n  },\n  'keyedColumns': {\n    pure: true,\n    count: function () {\n      var dimName = this._source.dimensionsDefine[0].name;\n      var col = this._data[dimName];\n      return col ? col.length : 0;\n    },\n    getItem: function (idx) {\n      var item = [];\n      var dims = this._source.dimensionsDefine;\n\n      for (var i = 0; i < dims.length; i++) {\n        var col = this._data[dims[i].name];\n        item.push(col ? col[idx] : null);\n      }\n\n      return item;\n    },\n    appendData: function (newData) {\n      var data = this._data;\n      each(newData, function (newCol, key) {\n        var oldCol = data[key] || (data[key] = []);\n\n        for (var i = 0; i < (newCol || []).length; i++) {\n          oldCol.push(newCol[i]);\n        }\n      });\n    }\n  },\n  'original': {\n    count: countSimply,\n    getItem: getItemSimply,\n    appendData: appendDataSimply\n  },\n  'typedArray': {\n    persistent: false,\n    pure: true,\n    count: function () {\n      return this._data ? this._data.length / this._dimSize : 0;\n    },\n    getItem: function (idx, out) {\n      idx = idx - this._offset;\n      out = out || [];\n      var offset = this._dimSize * idx;\n\n      for (var i = 0; i < this._dimSize; i++) {\n        out[i] = this._data[offset + i];\n      }\n\n      return out;\n    },\n    appendData: function (newData) {\n      this._data = newData;\n    },\n    // Clean self if data is already used.\n    clean: function () {\n      // PENDING\n      this._offset += this.count();\n      this._data = null;\n    }\n  }\n};\n\nfunction countSimply() {\n  return this._data.length;\n}\n\nfunction getItemSimply(idx) {\n  return this._data[idx];\n}\n\nfunction appendDataSimply(newData) {\n  for (var i = 0; i < newData.length; i++) {\n    this._data.push(newData[i]);\n  }\n}\n\nvar rawValueGetters = {\n  arrayRows: getRawValueSimply,\n  objectRows: function (dataItem, dataIndex, dimIndex, dimName) {\n    return dimIndex != null ? dataItem[dimName] : dataItem;\n  },\n  keyedColumns: getRawValueSimply,\n  original: function (dataItem, dataIndex, dimIndex, dimName) {\n    // FIXME\n    // In some case (markpoint in geo (geo-map.html)), dataItem\n    // is {coord: [...]}\n    var value = getDataItemValue(dataItem);\n    return dimIndex == null || !(value instanceof Array) ? value : value[dimIndex];\n  },\n  typedArray: getRawValueSimply\n};\n\nfunction getRawValueSimply(dataItem, dataIndex, dimIndex, dimName) {\n  return dimIndex != null ? dataItem[dimIndex] : dataItem;\n}\n\nvar defaultDimValueGetters = {\n  arrayRows: getDimValueSimply,\n  objectRows: function (dataItem, dimName, dataIndex, dimIndex) {\n    return converDataValue(dataItem[dimName], this._dimensionInfos[dimName]);\n  },\n  keyedColumns: getDimValueSimply,\n  original: function (dataItem, dimName, dataIndex, dimIndex) {\n    // Performance sensitive, do not use modelUtil.getDataItemValue.\n    // If dataItem is an plain object with no value field, the var `value`\n    // will be assigned with the object, but it will be tread correctly\n    // in the `convertDataValue`.\n    var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value); // If any dataItem is like { value: 10 }\n\n    if (!this._rawData.pure && isDataItemOption(dataItem)) {\n      this.hasItemOption = true;\n    }\n\n    return converDataValue(value instanceof Array ? value[dimIndex] // If value is a single number or something else not array.\n    : value, this._dimensionInfos[dimName]);\n  },\n  typedArray: function (dataItem, dimName, dataIndex, dimIndex) {\n    return dataItem[dimIndex];\n  }\n};\n\nfunction getDimValueSimply(dataItem, dimName, dataIndex, dimIndex) {\n  return converDataValue(dataItem[dimIndex], this._dimensionInfos[dimName]);\n}\n/**\n * This helper method convert value in data.\n * @param {string|number|Date} value\n * @param {Object|string} [dimInfo] If string (like 'x'), dimType defaults 'number'.\n *        If \"dimInfo.ordinalParseAndSave\", ordinal value can be parsed.\n */\n\n\nfunction converDataValue(value, dimInfo) {\n  // Performance sensitive.\n  var dimType = dimInfo && dimInfo.type;\n\n  if (dimType === 'ordinal') {\n    // If given value is a category string\n    var ordinalMeta = dimInfo && dimInfo.ordinalMeta;\n    return ordinalMeta ? ordinalMeta.parseAndCollect(value) : value;\n  }\n\n  if (dimType === 'time' // spead up when using timestamp\n  && typeof value !== 'number' && value != null && value !== '-') {\n    value = +parseDate(value);\n  } // dimType defaults 'number'.\n  // If dimType is not ordinal and value is null or undefined or NaN or '-',\n  // parse to NaN.\n\n\n  return value == null || value === '' ? NaN // If string (like '-'), using '+' parse to NaN\n  // If object, also parse to NaN\n  : +value;\n} // ??? FIXME can these logic be more neat: getRawValue, getRawDataItem,\n// Consider persistent.\n// Caution: why use raw value to display on label or tooltip?\n// A reason is to avoid format. For example time value we do not know\n// how to format is expected. More over, if stack is used, calculated\n// value may be 0.91000000001, which have brings trouble to display.\n// TODO: consider how to treat null/undefined/NaN when display?\n\n/**\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @param {string|number} [dim] dimName or dimIndex\n * @return {Array.<number>|string|number} can be null/undefined.\n */\n\n\nfunction retrieveRawValue(data, dataIndex, dim) {\n  if (!data) {\n    return;\n  } // Consider data may be not persistent.\n\n\n  var dataItem = data.getRawDataItem(dataIndex);\n\n  if (dataItem == null) {\n    return;\n  }\n\n  var sourceFormat = data.getProvider().getSource().sourceFormat;\n  var dimName;\n  var dimIndex;\n  var dimInfo = data.getDimensionInfo(dim);\n\n  if (dimInfo) {\n    dimName = dimInfo.name;\n    dimIndex = dimInfo.index;\n  }\n\n  return rawValueGetters[sourceFormat](dataItem, dataIndex, dimIndex, dimName);\n}\n/**\n * Compatible with some cases (in pie, map) like:\n * data: [{name: 'xx', value: 5, selected: true}, ...]\n * where only sourceFormat is 'original' and 'objectRows' supported.\n *\n * ??? TODO\n * Supported detail options in data item when using 'arrayRows'.\n *\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @param {string} attr like 'selected'\n */\n\n\nfunction retrieveRawAttr(data, dataIndex, attr) {\n  if (!data) {\n    return;\n  }\n\n  var sourceFormat = data.getProvider().getSource().sourceFormat;\n\n  if (sourceFormat !== SOURCE_FORMAT_ORIGINAL && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n    return;\n  }\n\n  var dataItem = data.getRawDataItem(dataIndex);\n\n  if (sourceFormat === SOURCE_FORMAT_ORIGINAL && !isObject(dataItem)) {\n    dataItem = null;\n  }\n\n  if (dataItem) {\n    return dataItem[attr];\n  }\n}\n\nexports.DefaultDataProvider = DefaultDataProvider;\nexports.defaultDimValueGetters = defaultDimValueGetters;\nexports.retrieveRawValue = retrieveRawValue;\nexports.retrieveRawAttr = retrieveRawAttr;","var zrUtil = require(\"../core/util\");\n\nvar Style = require(\"./Style\");\n\nvar Element = require(\"../Element\");\n\nvar RectText = require(\"./mixin/RectText\");\n\n/**\n * Base class of all displayable graphic objects\n * @module zrender/graphic/Displayable\n */\n\n/**\n * @alias module:zrender/graphic/Displayable\n * @extends module:zrender/Element\n * @extends module:zrender/graphic/mixin/RectText\n */\nfunction Displayable(opts) {\n  opts = opts || {};\n  Element.call(this, opts); // Extend properties\n\n  for (var name in opts) {\n    if (opts.hasOwnProperty(name) && name !== 'style') {\n      this[name] = opts[name];\n    }\n  }\n  /**\n   * @type {module:zrender/graphic/Style}\n   */\n\n\n  this.style = new Style(opts.style, this);\n  this._rect = null; // Shapes for cascade clipping.\n  // Can only be `null`/`undefined` or an non-empty array, MUST NOT be an empty array.\n  // because it is easy to only using null to check whether clipPaths changed.\n\n  this.__clipPaths = null; // FIXME Stateful must be mixined after style is setted\n  // Stateful.call(this, opts);\n}\n\nDisplayable.prototype = {\n  constructor: Displayable,\n  type: 'displayable',\n\n  /**\n   * Dirty flag. From which painter will determine if this displayable object needs brush.\n   * @name module:zrender/graphic/Displayable#__dirty\n   * @type {boolean}\n   */\n  __dirty: true,\n\n  /**\n   * Whether the displayable object is visible. when it is true, the displayable object\n   * is not drawn, but the mouse event can still trigger the object.\n   * @name module:/zrender/graphic/Displayable#invisible\n   * @type {boolean}\n   * @default false\n   */\n  invisible: false,\n\n  /**\n   * @name module:/zrender/graphic/Displayable#z\n   * @type {number}\n   * @default 0\n   */\n  z: 0,\n\n  /**\n   * @name module:/zrender/graphic/Displayable#z\n   * @type {number}\n   * @default 0\n   */\n  z2: 0,\n\n  /**\n   * The z level determines the displayable object can be drawn in which layer canvas.\n   * @name module:/zrender/graphic/Displayable#zlevel\n   * @type {number}\n   * @default 0\n   */\n  zlevel: 0,\n\n  /**\n   * Whether it can be dragged.\n   * @name module:/zrender/graphic/Displayable#draggable\n   * @type {boolean}\n   * @default false\n   */\n  draggable: false,\n\n  /**\n   * Whether is it dragging.\n   * @name module:/zrender/graphic/Displayable#draggable\n   * @type {boolean}\n   * @default false\n   */\n  dragging: false,\n\n  /**\n   * Whether to respond to mouse events.\n   * @name module:/zrender/graphic/Displayable#silent\n   * @type {boolean}\n   * @default false\n   */\n  silent: false,\n\n  /**\n   * If enable culling\n   * @type {boolean}\n   * @default false\n   */\n  culling: false,\n\n  /**\n   * Mouse cursor when hovered\n   * @name module:/zrender/graphic/Displayable#cursor\n   * @type {string}\n   */\n  cursor: 'pointer',\n\n  /**\n   * If hover area is bounding rect\n   * @name module:/zrender/graphic/Displayable#rectHover\n   * @type {string}\n   */\n  rectHover: false,\n\n  /**\n   * Render the element progressively when the value >= 0,\n   * usefull for large data.\n   * @type {boolean}\n   */\n  progressive: false,\n\n  /**\n   * @type {boolean}\n   */\n  incremental: false,\n\n  /**\n   * Scale ratio for global scale.\n   * @type {boolean}\n   */\n  globalScaleRatio: 1,\n  beforeBrush: function (ctx) {},\n  afterBrush: function (ctx) {},\n\n  /**\n   * Graphic drawing method.\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  // Interface\n  brush: function (ctx, prevEl) {},\n\n  /**\n   * Get the minimum bounding box.\n   * @return {module:zrender/core/BoundingRect}\n   */\n  // Interface\n  getBoundingRect: function () {},\n\n  /**\n   * If displayable element contain coord x, y\n   * @param  {number} x\n   * @param  {number} y\n   * @return {boolean}\n   */\n  contain: function (x, y) {\n    return this.rectContain(x, y);\n  },\n\n  /**\n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  traverse: function (cb, context) {\n    cb.call(context, this);\n  },\n\n  /**\n   * If bounding rect of element contain coord x, y\n   * @param  {number} x\n   * @param  {number} y\n   * @return {boolean}\n   */\n  rectContain: function (x, y) {\n    var coord = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    return rect.contain(coord[0], coord[1]);\n  },\n\n  /**\n   * Mark displayable element dirty and refresh next frame\n   */\n  dirty: function () {\n    this.__dirty = this.__dirtyText = true;\n    this._rect = null;\n    this.__zr && this.__zr.refresh();\n  },\n\n  /**\n   * If displayable object binded any event\n   * @return {boolean}\n   */\n  // TODO, events bound by bind\n  // isSilent: function () {\n  //     return !(\n  //         this.hoverable || this.draggable\n  //         || this.onmousemove || this.onmouseover || this.onmouseout\n  //         || this.onmousedown || this.onmouseup || this.onclick\n  //         || this.ondragenter || this.ondragover || this.ondragleave\n  //         || this.ondrop\n  //     );\n  // },\n\n  /**\n   * Alias for animate('style')\n   * @param {boolean} loop\n   */\n  animateStyle: function (loop) {\n    return this.animate('style', loop);\n  },\n  attrKV: function (key, value) {\n    if (key !== 'style') {\n      Element.prototype.attrKV.call(this, key, value);\n    } else {\n      this.style.set(value);\n    }\n  },\n\n  /**\n   * @param {Object|string} key\n   * @param {*} value\n   */\n  setStyle: function (key, value) {\n    this.style.set(key, value);\n    this.dirty(false);\n    return this;\n  },\n\n  /**\n   * Use given style object\n   * @param  {Object} obj\n   */\n  useStyle: function (obj) {\n    this.style = new Style(obj, this);\n    this.dirty(false);\n    return this;\n  },\n\n  /**\n   * The string value of `textPosition` needs to be calculated to a real postion.\n   * For example, `'inside'` is calculated to `[rect.width/2, rect.height/2]`\n   * by default. See `contain/text.js#calculateTextPosition` for more details.\n   * But some coutom shapes like \"pin\", \"flag\" have center that is not exactly\n   * `[width/2, height/2]`. So we provide this hook to customize the calculation\n   * for those shapes. It will be called if the `style.textPosition` is a string.\n   * @param {Obejct} [out] Prepared out object. If not provided, this method should\n   *        be responsible for creating one.\n   * @param {module:zrender/graphic/Style} style\n   * @param {Object} rect {x, y, width, height}\n   * @return {Obejct} out The same as the input out.\n   *         {\n   *             x: number. mandatory.\n   *             y: number. mandatory.\n   *             textAlign: string. optional. use style.textAlign by default.\n   *             textVerticalAlign: string. optional. use style.textVerticalAlign by default.\n   *         }\n   */\n  calculateTextPosition: null\n};\nzrUtil.inherits(Displayable, Element);\nzrUtil.mixin(Displayable, RectText); // zrUtil.mixin(Displayable, Stateful);\n\nvar _default = Displayable;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _clazz = require(\"./clazz\");\n\nvar parseClassType = _clazz.parseClassType;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar base = 0;\n/**\n * @public\n * @param {string} type\n * @return {string}\n */\n\nfunction getUID(type) {\n  // Considering the case of crossing js context,\n  // use Math.random to make id as unique as possible.\n  return [type || '', base++, Math.random().toFixed(5)].join('_');\n}\n/**\n * @inner\n */\n\n\nfunction enableSubTypeDefaulter(entity) {\n  var subTypeDefaulters = {};\n\n  entity.registerSubTypeDefaulter = function (componentType, defaulter) {\n    componentType = parseClassType(componentType);\n    subTypeDefaulters[componentType.main] = defaulter;\n  };\n\n  entity.determineSubType = function (componentType, option) {\n    var type = option.type;\n\n    if (!type) {\n      var componentTypeMain = parseClassType(componentType).main;\n\n      if (entity.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n        type = subTypeDefaulters[componentTypeMain](option);\n      }\n    }\n\n    return type;\n  };\n\n  return entity;\n}\n/**\n * Topological travel on Activity Network (Activity On Vertices).\n * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\n *\n * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\n *\n * If there is circle dependencey, Error will be thrown.\n *\n */\n\n\nfunction enableTopologicalTravel(entity, dependencyGetter) {\n  /**\n   * @public\n   * @param {Array.<string>} targetNameList Target Component type list.\n   *                                           Can be ['aa', 'bb', 'aa.xx']\n   * @param {Array.<string>} fullNameList By which we can build dependency graph.\n   * @param {Function} callback Params: componentType, dependencies.\n   * @param {Object} context Scope of callback.\n   */\n  entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n    if (!targetNameList.length) {\n      return;\n    }\n\n    var result = makeDepndencyGraph(fullNameList);\n    var graph = result.graph;\n    var stack = result.noEntryList;\n    var targetNameSet = {};\n    zrUtil.each(targetNameList, function (name) {\n      targetNameSet[name] = true;\n    });\n\n    while (stack.length) {\n      var currComponentType = stack.pop();\n      var currVertex = graph[currComponentType];\n      var isInTargetNameSet = !!targetNameSet[currComponentType];\n\n      if (isInTargetNameSet) {\n        callback.call(context, currComponentType, currVertex.originalDeps.slice());\n        delete targetNameSet[currComponentType];\n      }\n\n      zrUtil.each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n    }\n\n    zrUtil.each(targetNameSet, function () {\n      throw new Error('Circle dependency may exists');\n    });\n\n    function removeEdge(succComponentType) {\n      graph[succComponentType].entryCount--;\n\n      if (graph[succComponentType].entryCount === 0) {\n        stack.push(succComponentType);\n      }\n    } // Consider this case: legend depends on series, and we call\n    // chart.setOption({series: [...]}), where only series is in option.\n    // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n    // not be called, but only sereis.mergeOption is called. Thus legend\n    // have no chance to update its local record about series (like which\n    // name of series is available in legend).\n\n\n    function removeEdgeAndAdd(succComponentType) {\n      targetNameSet[succComponentType] = true;\n      removeEdge(succComponentType);\n    }\n  };\n  /**\n   * DepndencyGraph: {Object}\n   * key: conponentType,\n   * value: {\n   *     successor: [conponentTypes...],\n   *     originalDeps: [conponentTypes...],\n   *     entryCount: {number}\n   * }\n   */\n\n\n  function makeDepndencyGraph(fullNameList) {\n    var graph = {};\n    var noEntryList = [];\n    zrUtil.each(fullNameList, function (name) {\n      var thisItem = createDependencyGraphItem(graph, name);\n      var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n      thisItem.entryCount = availableDeps.length;\n\n      if (thisItem.entryCount === 0) {\n        noEntryList.push(name);\n      }\n\n      zrUtil.each(availableDeps, function (dependentName) {\n        if (zrUtil.indexOf(thisItem.predecessor, dependentName) < 0) {\n          thisItem.predecessor.push(dependentName);\n        }\n\n        var thatItem = createDependencyGraphItem(graph, dependentName);\n\n        if (zrUtil.indexOf(thatItem.successor, dependentName) < 0) {\n          thatItem.successor.push(name);\n        }\n      });\n    });\n    return {\n      graph: graph,\n      noEntryList: noEntryList\n    };\n  }\n\n  function createDependencyGraphItem(graph, name) {\n    if (!graph[name]) {\n      graph[name] = {\n        predecessor: [],\n        successor: []\n      };\n    }\n\n    return graph[name];\n  }\n\n  function getAvailableDependencies(originalDeps, fullNameList) {\n    var availableDeps = [];\n    zrUtil.each(originalDeps, function (dep) {\n      zrUtil.indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n    });\n    return availableDeps;\n  }\n}\n\nexports.getUID = getUID;\nexports.enableSubTypeDefaulter = enableSubTypeDefaulter;\nexports.enableTopologicalTravel = enableTopologicalTravel;","/**\n * @param {Array.<Object>} colorStops\n */\nvar Gradient = function (colorStops) {\n  this.colorStops = colorStops || [];\n};\n\nGradient.prototype = {\n  constructor: Gradient,\n  addColorStop: function (offset, color) {\n    this.colorStops.push({\n      offset: offset,\n      color: color\n    });\n  }\n};\nvar _default = Gradient;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar numberUtil = require(\"../util/number\");\n\nvar formatUtil = require(\"../util/format\");\n\nvar Scale = require(\"./Scale\");\n\nvar helper = require(\"./helper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Interval scale\n * @module echarts/scale/Interval\n */\nvar roundNumber = numberUtil.round;\n/**\n * @alias module:echarts/coord/scale/Interval\n * @constructor\n */\n\nvar IntervalScale = Scale.extend({\n  type: 'interval',\n  _interval: 0,\n  _intervalPrecision: 2,\n  setExtent: function (start, end) {\n    var thisExtent = this._extent; //start,end may be a Number like '25',so...\n\n    if (!isNaN(start)) {\n      thisExtent[0] = parseFloat(start);\n    }\n\n    if (!isNaN(end)) {\n      thisExtent[1] = parseFloat(end);\n    }\n  },\n  unionExtent: function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]); // unionExtent may called by it's sub classes\n\n    IntervalScale.prototype.setExtent.call(this, extent[0], extent[1]);\n  },\n\n  /**\n   * Get interval\n   */\n  getInterval: function () {\n    return this._interval;\n  },\n\n  /**\n   * Set interval\n   */\n  setInterval: function (interval) {\n    this._interval = interval; // Dropped auto calculated niceExtent and use user setted extent\n    // We assume user wan't to set both interval, min, max to get a better result\n\n    this._niceExtent = this._extent.slice();\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\n  },\n\n  /**\n   * @param {boolean} [expandToNicedExtent=false] If expand the ticks to niced extent.\n   * @return {Array.<number>}\n   */\n  getTicks: function (expandToNicedExtent) {\n    var interval = this._interval;\n    var extent = this._extent;\n    var niceTickExtent = this._niceExtent;\n    var intervalPrecision = this._intervalPrecision;\n    var ticks = []; // If interval is 0, return [];\n\n    if (!interval) {\n      return ticks;\n    } // Consider this case: using dataZoom toolbox, zoom and zoom.\n\n\n    var safeLimit = 10000;\n\n    if (extent[0] < niceTickExtent[0]) {\n      if (expandToNicedExtent) {\n        ticks.push(roundNumber(niceTickExtent[0] - interval, intervalPrecision));\n      } else {\n        ticks.push(extent[0]);\n      }\n    }\n\n    var tick = niceTickExtent[0];\n\n    while (tick <= niceTickExtent[1]) {\n      ticks.push(tick); // Avoid rounding error\n\n      tick = roundNumber(tick + interval, intervalPrecision);\n\n      if (tick === ticks[ticks.length - 1]) {\n        // Consider out of safe float point, e.g.,\n        // -3711126.9907707 + 2e-10 === -3711126.9907707\n        break;\n      }\n\n      if (ticks.length > safeLimit) {\n        return [];\n      }\n    } // Consider this case: the last item of ticks is smaller\n    // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n\n\n    var lastNiceTick = ticks.length ? ticks[ticks.length - 1] : niceTickExtent[1];\n\n    if (extent[1] > lastNiceTick) {\n      if (expandToNicedExtent) {\n        ticks.push(roundNumber(lastNiceTick + interval, intervalPrecision));\n      } else {\n        ticks.push(extent[1]);\n      }\n    }\n\n    return ticks;\n  },\n\n  /**\n   * @param {number} [splitNumber=5]\n   * @return {Array.<Array.<number>>}\n   */\n  getMinorTicks: function (splitNumber) {\n    var ticks = this.getTicks(true);\n    var minorTicks = [];\n    var extent = this.getExtent();\n\n    for (var i = 1; i < ticks.length; i++) {\n      var nextTick = ticks[i];\n      var prevTick = ticks[i - 1];\n      var count = 0;\n      var minorTicksGroup = [];\n      var interval = nextTick - prevTick;\n      var minorInterval = interval / splitNumber;\n\n      while (count < splitNumber - 1) {\n        var minorTick = numberUtil.round(prevTick + (count + 1) * minorInterval); // For the first and last interval. The count may be less than splitNumber.\n\n        if (minorTick > extent[0] && minorTick < extent[1]) {\n          minorTicksGroup.push(minorTick);\n        }\n\n        count++;\n      }\n\n      minorTicks.push(minorTicksGroup);\n    }\n\n    return minorTicks;\n  },\n\n  /**\n   * @param {number} data\n   * @param {Object} [opt]\n   * @param {number|string} [opt.precision] If 'auto', use nice presision.\n   * @param {boolean} [opt.pad] returns 1.50 but not 1.5 if precision is 2.\n   * @return {string}\n   */\n  getLabel: function (data, opt) {\n    if (data == null) {\n      return '';\n    }\n\n    var precision = opt && opt.precision;\n\n    if (precision == null) {\n      precision = numberUtil.getPrecisionSafe(data) || 0;\n    } else if (precision === 'auto') {\n      // Should be more precise then tick.\n      precision = this._intervalPrecision;\n    } // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n\n\n    data = roundNumber(data, precision, true);\n    return formatUtil.addCommas(data);\n  },\n\n  /**\n   * Update interval and extent of intervals for nice ticks\n   *\n   * @param {number} [splitNumber = 5] Desired number of ticks\n   * @param {number} [minInterval]\n   * @param {number} [maxInterval]\n   */\n  niceTicks: function (splitNumber, minInterval, maxInterval) {\n    splitNumber = splitNumber || 5;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n\n    if (!isFinite(span)) {\n      return;\n    } // User may set axis min 0 and data are all negative\n    // FIXME If it needs to reverse ?\n\n\n    if (span < 0) {\n      span = -span;\n      extent.reverse();\n    }\n\n    var result = helper.intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\n    this._intervalPrecision = result.intervalPrecision;\n    this._interval = result.interval;\n    this._niceExtent = result.niceTickExtent;\n  },\n\n  /**\n   * Nice extent.\n   * @param {Object} opt\n   * @param {number} [opt.splitNumber = 5] Given approx tick number\n   * @param {boolean} [opt.fixMin=false]\n   * @param {boolean} [opt.fixMax=false]\n   * @param {boolean} [opt.minInterval]\n   * @param {boolean} [opt.maxInterval]\n   */\n  niceExtent: function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      if (extent[0] !== 0) {\n        // Expand extent\n        var expandSize = extent[0]; // In the fowllowing case\n        //      Axis has been fixed max 100\n        //      Plus data are all 100 and axis extent are [100, 100].\n        // Extend to the both side will cause expanded max is larger than fixed max.\n        // So only expand to the smaller side.\n\n        if (!opt.fixMax) {\n          extent[1] += expandSize / 2;\n          extent[0] -= expandSize / 2;\n        } else {\n          extent[0] -= expandSize / 2;\n        }\n      } else {\n        extent[1] = 1;\n      }\n    }\n\n    var span = extent[1] - extent[0]; // If there are no data and extent are [Infinity, -Infinity]\n\n    if (!isFinite(span)) {\n      extent[0] = 0;\n      extent[1] = 1;\n    }\n\n    this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // var extent = this._extent;\n\n    var interval = this._interval;\n\n    if (!opt.fixMin) {\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\n    }\n\n    if (!opt.fixMax) {\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\n    }\n  }\n});\n/**\n * @return {module:echarts/scale/Time}\n */\n\nIntervalScale.create = function () {\n  return new IntervalScale();\n};\n\nvar _default = IntervalScale;\nmodule.exports = _default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _fastDeepEqual = require('fast-deep-equal');\n\nvar _fastDeepEqual2 = _interopRequireDefault(_fastDeepEqual);\n\nvar _sizeSensor = require('size-sensor');\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EchartsReactCore = function (_Component) {\n  _inherits(EchartsReactCore, _Component);\n\n  function EchartsReactCore(props) {\n    _classCallCheck(this, EchartsReactCore);\n\n    var _this = _possibleConstructorReturn(this, (EchartsReactCore.__proto__ || Object.getPrototypeOf(EchartsReactCore)).call(this, props));\n\n    _this.getEchartsInstance = function () {\n      return _this.echartsLib.getInstanceByDom(_this.echartsElement) || _this.echartsLib.init(_this.echartsElement, _this.props.theme, _this.props.opts);\n    };\n\n    _this.dispose = function () {\n      if (_this.echartsElement) {\n        try {\n          (0, _sizeSensor.clear)(_this.echartsElement);\n        } catch (e) {\n          console.warn(e);\n        }\n        // dispose echarts instance\n        _this.echartsLib.dispose(_this.echartsElement);\n      }\n    };\n\n    _this.rerender = function () {\n      var _this$props = _this.props,\n          onEvents = _this$props.onEvents,\n          onChartReady = _this$props.onChartReady;\n\n\n      var echartObj = _this.renderEchartDom();\n      _this.bindEvents(echartObj, onEvents || {});\n\n      // on chart ready\n      if (typeof onChartReady === 'function') _this.props.onChartReady(echartObj);\n      // on resize\n      if (_this.echartsElement) {\n        (0, _sizeSensor.bind)(_this.echartsElement, function () {\n          try {\n            echartObj.resize();\n          } catch (e) {\n            console.warn(e);\n          }\n        });\n      }\n    };\n\n    _this.bindEvents = function (instance, events) {\n      var _bindEvent = function _bindEvent(eventName, func) {\n        // ignore the event config which not satisfy\n        if (typeof eventName === 'string' && typeof func === 'function') {\n          // binding event\n          // instance.off(eventName); //  dispose  off \n          instance.on(eventName, function (param) {\n            func(param, instance);\n          });\n        }\n      };\n\n      // loop and bind\n      for (var eventName in events) {\n        if (Object.prototype.hasOwnProperty.call(events, eventName)) {\n          _bindEvent(eventName, events[eventName]);\n        }\n      }\n    };\n\n    _this.renderEchartDom = function () {\n      // init the echart object\n      var echartObj = _this.getEchartsInstance();\n      // set the echart option\n      echartObj.setOption(_this.props.option, _this.props.notMerge || false, _this.props.lazyUpdate || false);\n      // set loading mask\n      if (_this.props.showLoading) echartObj.showLoading(_this.props.loadingOption || null);else echartObj.hideLoading();\n\n      return echartObj;\n    };\n\n    _this.echartsLib = props.echarts; // the echarts object.\n    _this.echartsElement = null; // echarts div element\n    return _this;\n  }\n\n  // first add\n\n\n  _createClass(EchartsReactCore, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.rerender();\n    }\n\n    // update\n\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      //  setOption true\n      if (typeof this.props.shouldSetOption === 'function' && !this.props.shouldSetOption(prevProps, this.props)) {\n        return;\n      }\n\n      //  dispose \n      // 1.  theme \n      // 2.  opts \n      // 3.  onEvents  issue #151\n      if (!(0, _fastDeepEqual2['default'])(prevProps.theme, this.props.theme) || !(0, _fastDeepEqual2['default'])(prevProps.opts, this.props.opts) || !(0, _fastDeepEqual2['default'])(prevProps.onEvents, this.props.onEvents)) {\n        this.dispose();\n\n        this.rerender(); // \n        return;\n      }\n\n      //  setOption\n      var pickKeys = ['option', 'notMerge', 'lazyUpdate', 'showLoading', 'loadingOption'];\n      if ((0, _fastDeepEqual2['default'])((0, _utils.pick)(this.props, pickKeys), (0, _utils.pick)(prevProps, pickKeys))) {\n        return;\n      }\n\n      var echartObj = this.renderEchartDom();\n      //  resize\n      if (!(0, _fastDeepEqual2['default'])(prevProps.style, this.props.style) || !(0, _fastDeepEqual2['default'])(prevProps.className, this.props.className)) {\n        try {\n          echartObj.resize();\n        } catch (e) {\n          console.warn(e);\n        }\n      }\n    }\n\n    // remove\n\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.dispose();\n    }\n\n    // return the echart object\n\n\n    // dispose echarts and clear size-sensor\n\n\n    // bind the events\n\n\n    // render the dom\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          style = _props.style,\n          className = _props.className;\n\n      var newStyle = _extends({\n        height: 300\n      }, style);\n      // for render\n      return _react2['default'].createElement('div', {\n        ref: function ref(e) {\n          _this2.echartsElement = e;\n        },\n        style: newStyle,\n        className: 'echarts-for-react ' + className\n      });\n    }\n  }]);\n\n  return EchartsReactCore;\n}(_react.Component);\n\nexports['default'] = EchartsReactCore;\n\n\nEchartsReactCore.propTypes = {\n  option: _propTypes2['default'].object.isRequired, // eslint-disable-line react/forbid-prop-types\n  echarts: _propTypes2['default'].object, // eslint-disable-line react/forbid-prop-types\n  notMerge: _propTypes2['default'].bool,\n  lazyUpdate: _propTypes2['default'].bool,\n  style: _propTypes2['default'].object, // eslint-disable-line react/forbid-prop-types\n  className: _propTypes2['default'].string,\n  theme: _propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].object]),\n  onChartReady: _propTypes2['default'].func,\n  showLoading: _propTypes2['default'].bool,\n  loadingOption: _propTypes2['default'].object, // eslint-disable-line react/forbid-prop-types\n  onEvents: _propTypes2['default'].object, // eslint-disable-line react/forbid-prop-types\n  opts: _propTypes2['default'].shape({\n    devicePixelRatio: _propTypes2['default'].number,\n    renderer: _propTypes2['default'].oneOf(['canvas', 'svg']),\n    width: _propTypes2['default'].oneOfType([_propTypes2['default'].number, _propTypes2['default'].oneOf([null, undefined, 'auto'])]),\n    height: _propTypes2['default'].oneOfType([_propTypes2['default'].number, _propTypes2['default'].oneOf([null, undefined, 'auto'])])\n  }),\n  shouldSetOption: _propTypes2['default'].func\n};\n\nEchartsReactCore.defaultProps = {\n  echarts: {},\n  notMerge: false,\n  lazyUpdate: false,\n  style: {},\n  className: '',\n  theme: null,\n  onChartReady: function onChartReady() {},\n  showLoading: false,\n  loadingOption: null,\n  onEvents: {},\n  opts: {},\n  shouldSetOption: function shouldSetOption() {\n    return true;\n  }\n};","var Path = require(\"../Path\");\n\nvar roundRectHelper = require(\"../helper/roundRect\");\n\nvar _subPixelOptimize = require(\"../helper/subPixelOptimize\");\n\nvar subPixelOptimizeRect = _subPixelOptimize.subPixelOptimizeRect;\n\n/**\n * \n * @module zrender/graphic/shape/Rect\n */\n// Avoid create repeatly.\nvar subPixelOptimizeOutputShape = {};\n\nvar _default = Path.extend({\n  type: 'rect',\n  shape: {\n    // r1r2r3r4\n    // r1          [1, 1, 1, 1]\n    // r[1]        [1, 1, 1, 1]\n    // r[1, 2]     [1, 2, 1, 2]\n    // r[1, 2, 3]  [1, 2, 3, 2]\n    r: 0,\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var x;\n    var y;\n    var width;\n    var height;\n\n    if (this.subPixelOptimize) {\n      subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n      x = subPixelOptimizeOutputShape.x;\n      y = subPixelOptimizeOutputShape.y;\n      width = subPixelOptimizeOutputShape.width;\n      height = subPixelOptimizeOutputShape.height;\n      subPixelOptimizeOutputShape.r = shape.r;\n      shape = subPixelOptimizeOutputShape;\n    } else {\n      x = shape.x;\n      y = shape.y;\n      width = shape.width;\n      height = shape.height;\n    }\n\n    if (!shape.r) {\n      ctx.rect(x, y, width, height);\n    } else {\n      roundRectHelper.buildPath(ctx, shape);\n    }\n\n    ctx.closePath();\n    return;\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"../core/util\");\n\nvar Gradient = require(\"./Gradient\");\n\n/**\n * x, y, x2, y2 are all percent from 0 to 1\n * @param {number} [x=0]\n * @param {number} [y=0]\n * @param {number} [x2=1]\n * @param {number} [y2=0]\n * @param {Array.<Object>} colorStops\n * @param {boolean} [globalCoord=false]\n */\nvar LinearGradient = function (x, y, x2, y2, colorStops, globalCoord) {\n  // Should do nothing more in this constructor. Because gradient can be\n  // declard by `color: {type: 'linear', colorStops: ...}`, where\n  // this constructor will not be called.\n  this.x = x == null ? 0 : x;\n  this.y = y == null ? 0 : y;\n  this.x2 = x2 == null ? 1 : x2;\n  this.y2 = y2 == null ? 0 : y2; // Can be cloned\n\n  this.type = 'linear'; // If use global coord\n\n  this.global = globalCoord || false;\n  Gradient.call(this, colorStops);\n};\n\nLinearGradient.prototype = {\n  constructor: LinearGradient\n};\nzrUtil.inherits(LinearGradient, Gradient);\nvar _default = LinearGradient;\nmodule.exports = _default;","var textHelper = require(\"../helper/text\");\n\nvar BoundingRect = require(\"../../core/BoundingRect\");\n\nvar _constant = require(\"../constant\");\n\nvar WILL_BE_RESTORED = _constant.WILL_BE_RESTORED;\n\n/**\n * Mixin for drawing text in a element bounding rect\n * @module zrender/mixin/RectText\n */\nvar tmpRect = new BoundingRect();\n\nvar RectText = function () {};\n\nRectText.prototype = {\n  constructor: RectText,\n\n  /**\n   * Draw text in a rect with specified position.\n   * @param  {CanvasRenderingContext2D} ctx\n   * @param  {Object} rect Displayable rect\n   */\n  drawRectText: function (ctx, rect) {\n    var style = this.style;\n    rect = style.textRect || rect; // Optimize, avoid normalize every time.\n\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n    var text = style.text; // Convert to string\n\n    text != null && (text += '');\n\n    if (!textHelper.needDrawText(text, style)) {\n      return;\n    } // FIXME\n    // Do not provide prevEl to `textHelper.renderText` for ctx prop cache,\n    // but use `ctx.save()` and `ctx.restore()`. Because the cache for rect\n    // text propably break the cache for its host elements.\n\n\n    ctx.save(); // Transform rect to view space\n\n    var transform = this.transform;\n\n    if (!style.transformText) {\n      if (transform) {\n        tmpRect.copy(rect);\n        tmpRect.applyTransform(transform);\n        rect = tmpRect;\n      }\n    } else {\n      this.setTransform(ctx);\n    } // transformText and textRotation can not be used at the same time.\n\n\n    textHelper.renderText(this, ctx, text, style, rect, WILL_BE_RESTORED);\n    ctx.restore();\n  }\n};\nvar _default = RectText;\nmodule.exports = _default;","/**\n * \n * @param  {number}  x0\n * @param  {number}  y0\n * @param  {number}  x1\n * @param  {number}  y1\n * @param  {number}  lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {boolean}\n */\nfunction containStroke(x0, y0, x1, y1, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth;\n  var _a = 0;\n  var _b = x0; // Quick reject\n\n  if (y > y0 + _l && y > y1 + _l || y < y0 - _l && y < y1 - _l || x > x0 + _l && x > x1 + _l || x < x0 - _l && x < x1 - _l) {\n    return false;\n  }\n\n  if (x0 !== x1) {\n    _a = (y0 - y1) / (x0 - x1);\n    _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n  } else {\n    return Math.abs(x - x0) <= _l / 2;\n  }\n\n  var tmp = _a * x - y + _b;\n\n  var _s = tmp * tmp / (_a * _a + 1);\n\n  return _s <= _l / 2 * _l / 2;\n}\n\nexports.containStroke = containStroke;","var _curve = require(\"../core/curve\");\n\nvar quadraticProjectPoint = _curve.quadraticProjectPoint;\n\n/**\n * \n * @param  {number}  x0\n * @param  {number}  y0\n * @param  {number}  x1\n * @param  {number}  y1\n * @param  {number}  x2\n * @param  {number}  y2\n * @param  {number}  lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {boolean}\n */\nfunction containStroke(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth; // Quick reject\n\n  if (y > y0 + _l && y > y1 + _l && y > y2 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l) {\n    return false;\n  }\n\n  var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n  return d <= _l / 2;\n}\n\nexports.containStroke = containStroke;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar ComponentView = require(\"../view/Component\");\n\nvar _sourceHelper = require(\"../data/helper/sourceHelper\");\n\nvar detectSourceFormat = _sourceHelper.detectSourceFormat;\n\nvar _sourceType = require(\"../data/helper/sourceType\");\n\nvar SERIES_LAYOUT_BY_COLUMN = _sourceType.SERIES_LAYOUT_BY_COLUMN;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * This module is imported by echarts directly.\n *\n * Notice:\n * Always keep this file exists for backward compatibility.\n * Because before 4.1.0, dataset is an optional component,\n * some users may import this module manually.\n */\nComponentModel.extend({\n  type: 'dataset',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    // 'row', 'column'\n    seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n    // null/'auto': auto detect header, see \"module:echarts/data/helper/sourceHelper\"\n    sourceHeader: null,\n    dimensions: null,\n    source: null\n  },\n  optionUpdated: function () {\n    detectSourceFormat(this);\n  }\n});\nComponentView.extend({\n  type: 'dataset'\n});","var Group = require(\"../container/Group\");\n\nvar ZImage = require(\"../graphic/Image\");\n\nvar Text = require(\"../graphic/Text\");\n\nvar Circle = require(\"../graphic/shape/Circle\");\n\nvar Rect = require(\"../graphic/shape/Rect\");\n\nvar Ellipse = require(\"../graphic/shape/Ellipse\");\n\nvar Line = require(\"../graphic/shape/Line\");\n\nvar Path = require(\"../graphic/Path\");\n\nvar Polygon = require(\"../graphic/shape/Polygon\");\n\nvar Polyline = require(\"../graphic/shape/Polyline\");\n\nvar LinearGradient = require(\"../graphic/LinearGradient\");\n\nvar Style = require(\"../graphic/Style\");\n\nvar matrix = require(\"../core/matrix\");\n\nvar _path = require(\"./path\");\n\nvar createFromString = _path.createFromString;\n\nvar _util = require(\"../core/util\");\n\nvar isString = _util.isString;\nvar extend = _util.extend;\nvar defaults = _util.defaults;\nvar trim = _util.trim;\nvar each = _util.each;\n// import RadialGradient from '../graphic/RadialGradient';\n// import Pattern from '../graphic/Pattern';\n// import * as vector from '../core/vector';\n// Most of the values can be separated by comma and/or white space.\nvar DILIMITER_REG = /[\\s,]+/;\n/**\n * For big svg string, this method might be time consuming.\n *\n * @param {string} svg xml string\n * @return {Object} xml root.\n */\n\nfunction parseXML(svg) {\n  if (isString(svg)) {\n    var parser = new DOMParser();\n    svg = parser.parseFromString(svg, 'text/xml');\n  } // Document node. If using $.get, doc node may be input.\n\n\n  if (svg.nodeType === 9) {\n    svg = svg.firstChild;\n  } // nodeName of <!DOCTYPE svg> is also 'svg'.\n\n\n  while (svg.nodeName.toLowerCase() !== 'svg' || svg.nodeType !== 1) {\n    svg = svg.nextSibling;\n  }\n\n  return svg;\n}\n\nfunction SVGParser() {\n  this._defs = {};\n  this._root = null;\n  this._isDefine = false;\n  this._isText = false;\n}\n\nSVGParser.prototype.parse = function (xml, opt) {\n  opt = opt || {};\n  var svg = parseXML(xml);\n\n  if (!svg) {\n    throw new Error('Illegal svg');\n  }\n\n  var root = new Group();\n  this._root = root; // parse view port\n\n  var viewBox = svg.getAttribute('viewBox') || ''; // If width/height not specified, means \"100%\" of `opt.width/height`.\n  // TODO: Other percent value not supported yet.\n\n  var width = parseFloat(svg.getAttribute('width') || opt.width);\n  var height = parseFloat(svg.getAttribute('height') || opt.height); // If width/height not specified, set as null for output.\n\n  isNaN(width) && (width = null);\n  isNaN(height) && (height = null); // Apply inline style on svg element.\n\n  parseAttributes(svg, root, null, true);\n  var child = svg.firstChild;\n\n  while (child) {\n    this._parseNode(child, root);\n\n    child = child.nextSibling;\n  }\n\n  var viewBoxRect;\n  var viewBoxTransform;\n\n  if (viewBox) {\n    var viewBoxArr = trim(viewBox).split(DILIMITER_REG); // Some invalid case like viewBox: 'none'.\n\n    if (viewBoxArr.length >= 4) {\n      viewBoxRect = {\n        x: parseFloat(viewBoxArr[0] || 0),\n        y: parseFloat(viewBoxArr[1] || 0),\n        width: parseFloat(viewBoxArr[2]),\n        height: parseFloat(viewBoxArr[3])\n      };\n    }\n  }\n\n  if (viewBoxRect && width != null && height != null) {\n    viewBoxTransform = makeViewBoxTransform(viewBoxRect, width, height);\n\n    if (!opt.ignoreViewBox) {\n      // If set transform on the output group, it probably bring trouble when\n      // some users only intend to show the clipped content inside the viewBox,\n      // but not intend to transform the output group. So we keep the output\n      // group no transform. If the user intend to use the viewBox as a\n      // camera, just set `opt.ignoreViewBox` as `true` and set transfrom\n      // manually according to the viewBox info in the output of this method.\n      var elRoot = root;\n      root = new Group();\n      root.add(elRoot);\n      elRoot.scale = viewBoxTransform.scale.slice();\n      elRoot.position = viewBoxTransform.position.slice();\n    }\n  } // Some shapes might be overflow the viewport, which should be\n  // clipped despite whether the viewBox is used, as the SVG does.\n\n\n  if (!opt.ignoreRootClip && width != null && height != null) {\n    root.setClipPath(new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: width,\n        height: height\n      }\n    }));\n  } // Set width/height on group just for output the viewport size.\n\n\n  return {\n    root: root,\n    width: width,\n    height: height,\n    viewBoxRect: viewBoxRect,\n    viewBoxTransform: viewBoxTransform\n  };\n};\n\nSVGParser.prototype._parseNode = function (xmlNode, parentGroup) {\n  var nodeName = xmlNode.nodeName.toLowerCase(); // TODO\n  // support <style>...</style> in svg, where nodeName is 'style',\n  // CSS classes is defined globally wherever the style tags are declared.\n\n  if (nodeName === 'defs') {\n    // define flag\n    this._isDefine = true;\n  } else if (nodeName === 'text') {\n    this._isText = true;\n  }\n\n  var el;\n\n  if (this._isDefine) {\n    var parser = defineParsers[nodeName];\n\n    if (parser) {\n      var def = parser.call(this, xmlNode);\n      var id = xmlNode.getAttribute('id');\n\n      if (id) {\n        this._defs[id] = def;\n      }\n    }\n  } else {\n    var parser = nodeParsers[nodeName];\n\n    if (parser) {\n      el = parser.call(this, xmlNode, parentGroup);\n      parentGroup.add(el);\n    }\n  }\n\n  var child = xmlNode.firstChild;\n\n  while (child) {\n    if (child.nodeType === 1) {\n      this._parseNode(child, el);\n    } // Is text\n\n\n    if (child.nodeType === 3 && this._isText) {\n      this._parseText(child, el);\n    }\n\n    child = child.nextSibling;\n  } // Quit define\n\n\n  if (nodeName === 'defs') {\n    this._isDefine = false;\n  } else if (nodeName === 'text') {\n    this._isText = false;\n  }\n};\n\nSVGParser.prototype._parseText = function (xmlNode, parentGroup) {\n  if (xmlNode.nodeType === 1) {\n    var dx = xmlNode.getAttribute('dx') || 0;\n    var dy = xmlNode.getAttribute('dy') || 0;\n    this._textX += parseFloat(dx);\n    this._textY += parseFloat(dy);\n  }\n\n  var text = new Text({\n    style: {\n      text: xmlNode.textContent,\n      transformText: true\n    },\n    position: [this._textX || 0, this._textY || 0]\n  });\n  inheritStyle(parentGroup, text);\n  parseAttributes(xmlNode, text, this._defs);\n  var fontSize = text.style.fontSize;\n\n  if (fontSize && fontSize < 9) {\n    // PENDING\n    text.style.fontSize = 9;\n    text.scale = text.scale || [1, 1];\n    text.scale[0] *= fontSize / 9;\n    text.scale[1] *= fontSize / 9;\n  }\n\n  var rect = text.getBoundingRect();\n  this._textX += rect.width;\n  parentGroup.add(text);\n  return text;\n};\n\nvar nodeParsers = {\n  'g': function (xmlNode, parentGroup) {\n    var g = new Group();\n    inheritStyle(parentGroup, g);\n    parseAttributes(xmlNode, g, this._defs);\n    return g;\n  },\n  'rect': function (xmlNode, parentGroup) {\n    var rect = new Rect();\n    inheritStyle(parentGroup, rect);\n    parseAttributes(xmlNode, rect, this._defs);\n    rect.setShape({\n      x: parseFloat(xmlNode.getAttribute('x') || 0),\n      y: parseFloat(xmlNode.getAttribute('y') || 0),\n      width: parseFloat(xmlNode.getAttribute('width') || 0),\n      height: parseFloat(xmlNode.getAttribute('height') || 0)\n    }); // console.log(xmlNode.getAttribute('transform'));\n    // console.log(rect.transform);\n\n    return rect;\n  },\n  'circle': function (xmlNode, parentGroup) {\n    var circle = new Circle();\n    inheritStyle(parentGroup, circle);\n    parseAttributes(xmlNode, circle, this._defs);\n    circle.setShape({\n      cx: parseFloat(xmlNode.getAttribute('cx') || 0),\n      cy: parseFloat(xmlNode.getAttribute('cy') || 0),\n      r: parseFloat(xmlNode.getAttribute('r') || 0)\n    });\n    return circle;\n  },\n  'line': function (xmlNode, parentGroup) {\n    var line = new Line();\n    inheritStyle(parentGroup, line);\n    parseAttributes(xmlNode, line, this._defs);\n    line.setShape({\n      x1: parseFloat(xmlNode.getAttribute('x1') || 0),\n      y1: parseFloat(xmlNode.getAttribute('y1') || 0),\n      x2: parseFloat(xmlNode.getAttribute('x2') || 0),\n      y2: parseFloat(xmlNode.getAttribute('y2') || 0)\n    });\n    return line;\n  },\n  'ellipse': function (xmlNode, parentGroup) {\n    var ellipse = new Ellipse();\n    inheritStyle(parentGroup, ellipse);\n    parseAttributes(xmlNode, ellipse, this._defs);\n    ellipse.setShape({\n      cx: parseFloat(xmlNode.getAttribute('cx') || 0),\n      cy: parseFloat(xmlNode.getAttribute('cy') || 0),\n      rx: parseFloat(xmlNode.getAttribute('rx') || 0),\n      ry: parseFloat(xmlNode.getAttribute('ry') || 0)\n    });\n    return ellipse;\n  },\n  'polygon': function (xmlNode, parentGroup) {\n    var points = xmlNode.getAttribute('points');\n\n    if (points) {\n      points = parsePoints(points);\n    }\n\n    var polygon = new Polygon({\n      shape: {\n        points: points || []\n      }\n    });\n    inheritStyle(parentGroup, polygon);\n    parseAttributes(xmlNode, polygon, this._defs);\n    return polygon;\n  },\n  'polyline': function (xmlNode, parentGroup) {\n    var path = new Path();\n    inheritStyle(parentGroup, path);\n    parseAttributes(xmlNode, path, this._defs);\n    var points = xmlNode.getAttribute('points');\n\n    if (points) {\n      points = parsePoints(points);\n    }\n\n    var polyline = new Polyline({\n      shape: {\n        points: points || []\n      }\n    });\n    return polyline;\n  },\n  'image': function (xmlNode, parentGroup) {\n    var img = new ZImage();\n    inheritStyle(parentGroup, img);\n    parseAttributes(xmlNode, img, this._defs);\n    img.setStyle({\n      image: xmlNode.getAttribute('xlink:href'),\n      x: xmlNode.getAttribute('x'),\n      y: xmlNode.getAttribute('y'),\n      width: xmlNode.getAttribute('width'),\n      height: xmlNode.getAttribute('height')\n    });\n    return img;\n  },\n  'text': function (xmlNode, parentGroup) {\n    var x = xmlNode.getAttribute('x') || 0;\n    var y = xmlNode.getAttribute('y') || 0;\n    var dx = xmlNode.getAttribute('dx') || 0;\n    var dy = xmlNode.getAttribute('dy') || 0;\n    this._textX = parseFloat(x) + parseFloat(dx);\n    this._textY = parseFloat(y) + parseFloat(dy);\n    var g = new Group();\n    inheritStyle(parentGroup, g);\n    parseAttributes(xmlNode, g, this._defs);\n    return g;\n  },\n  'tspan': function (xmlNode, parentGroup) {\n    var x = xmlNode.getAttribute('x');\n    var y = xmlNode.getAttribute('y');\n\n    if (x != null) {\n      // new offset x\n      this._textX = parseFloat(x);\n    }\n\n    if (y != null) {\n      // new offset y\n      this._textY = parseFloat(y);\n    }\n\n    var dx = xmlNode.getAttribute('dx') || 0;\n    var dy = xmlNode.getAttribute('dy') || 0;\n    var g = new Group();\n    inheritStyle(parentGroup, g);\n    parseAttributes(xmlNode, g, this._defs);\n    this._textX += dx;\n    this._textY += dy;\n    return g;\n  },\n  'path': function (xmlNode, parentGroup) {\n    // TODO svg fill rule\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule\n    // path.style.globalCompositeOperation = 'xor';\n    var d = xmlNode.getAttribute('d') || ''; // Performance sensitive.\n\n    var path = createFromString(d);\n    inheritStyle(parentGroup, path);\n    parseAttributes(xmlNode, path, this._defs);\n    return path;\n  }\n};\nvar defineParsers = {\n  'lineargradient': function (xmlNode) {\n    var x1 = parseInt(xmlNode.getAttribute('x1') || 0, 10);\n    var y1 = parseInt(xmlNode.getAttribute('y1') || 0, 10);\n    var x2 = parseInt(xmlNode.getAttribute('x2') || 10, 10);\n    var y2 = parseInt(xmlNode.getAttribute('y2') || 0, 10);\n    var gradient = new LinearGradient(x1, y1, x2, y2);\n\n    _parseGradientColorStops(xmlNode, gradient);\n\n    return gradient;\n  },\n  'radialgradient': function (xmlNode) {}\n};\n\nfunction _parseGradientColorStops(xmlNode, gradient) {\n  var stop = xmlNode.firstChild;\n\n  while (stop) {\n    if (stop.nodeType === 1) {\n      var offset = stop.getAttribute('offset');\n\n      if (offset.indexOf('%') > 0) {\n        // percentage\n        offset = parseInt(offset, 10) / 100;\n      } else if (offset) {\n        // number from 0 to 1\n        offset = parseFloat(offset);\n      } else {\n        offset = 0;\n      }\n\n      var stopColor = stop.getAttribute('stop-color') || '#000000';\n      gradient.addColorStop(offset, stopColor);\n    }\n\n    stop = stop.nextSibling;\n  }\n}\n\nfunction inheritStyle(parent, child) {\n  if (parent && parent.__inheritedStyle) {\n    if (!child.__inheritedStyle) {\n      child.__inheritedStyle = {};\n    }\n\n    defaults(child.__inheritedStyle, parent.__inheritedStyle);\n  }\n}\n\nfunction parsePoints(pointsString) {\n  var list = trim(pointsString).split(DILIMITER_REG);\n  var points = [];\n\n  for (var i = 0; i < list.length; i += 2) {\n    var x = parseFloat(list[i]);\n    var y = parseFloat(list[i + 1]);\n    points.push([x, y]);\n  }\n\n  return points;\n}\n\nvar attributesMap = {\n  'fill': 'fill',\n  'stroke': 'stroke',\n  'stroke-width': 'lineWidth',\n  'opacity': 'opacity',\n  'fill-opacity': 'fillOpacity',\n  'stroke-opacity': 'strokeOpacity',\n  'stroke-dasharray': 'lineDash',\n  'stroke-dashoffset': 'lineDashOffset',\n  'stroke-linecap': 'lineCap',\n  'stroke-linejoin': 'lineJoin',\n  'stroke-miterlimit': 'miterLimit',\n  'font-family': 'fontFamily',\n  'font-size': 'fontSize',\n  'font-style': 'fontStyle',\n  'font-weight': 'fontWeight',\n  'text-align': 'textAlign',\n  'alignment-baseline': 'textBaseline'\n};\n\nfunction parseAttributes(xmlNode, el, defs, onlyInlineStyle) {\n  var zrStyle = el.__inheritedStyle || {};\n  var isTextEl = el.type === 'text'; // TODO Shadow\n\n  if (xmlNode.nodeType === 1) {\n    parseTransformAttribute(xmlNode, el);\n    extend(zrStyle, parseStyleAttribute(xmlNode));\n\n    if (!onlyInlineStyle) {\n      for (var svgAttrName in attributesMap) {\n        if (attributesMap.hasOwnProperty(svgAttrName)) {\n          var attrValue = xmlNode.getAttribute(svgAttrName);\n\n          if (attrValue != null) {\n            zrStyle[attributesMap[svgAttrName]] = attrValue;\n          }\n        }\n      }\n    }\n  }\n\n  var elFillProp = isTextEl ? 'textFill' : 'fill';\n  var elStrokeProp = isTextEl ? 'textStroke' : 'stroke';\n  el.style = el.style || new Style();\n  var elStyle = el.style;\n  zrStyle.fill != null && elStyle.set(elFillProp, getPaint(zrStyle.fill, defs));\n  zrStyle.stroke != null && elStyle.set(elStrokeProp, getPaint(zrStyle.stroke, defs));\n  each(['lineWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'miterLimit', 'fontSize'], function (propName) {\n    var elPropName = propName === 'lineWidth' && isTextEl ? 'textStrokeWidth' : propName;\n    zrStyle[propName] != null && elStyle.set(elPropName, parseFloat(zrStyle[propName]));\n  });\n\n  if (!zrStyle.textBaseline || zrStyle.textBaseline === 'auto') {\n    zrStyle.textBaseline = 'alphabetic';\n  }\n\n  if (zrStyle.textBaseline === 'alphabetic') {\n    zrStyle.textBaseline = 'bottom';\n  }\n\n  if (zrStyle.textAlign === 'start') {\n    zrStyle.textAlign = 'left';\n  }\n\n  if (zrStyle.textAlign === 'end') {\n    zrStyle.textAlign = 'right';\n  }\n\n  each(['lineDashOffset', 'lineCap', 'lineJoin', 'fontWeight', 'fontFamily', 'fontStyle', 'textAlign', 'textBaseline'], function (propName) {\n    zrStyle[propName] != null && elStyle.set(propName, zrStyle[propName]);\n  });\n\n  if (zrStyle.lineDash) {\n    el.style.lineDash = trim(zrStyle.lineDash).split(DILIMITER_REG);\n  }\n\n  if (elStyle[elStrokeProp] && elStyle[elStrokeProp] !== 'none') {\n    // enable stroke\n    el[elStrokeProp] = true;\n  }\n\n  el.__inheritedStyle = zrStyle;\n}\n\nvar urlRegex = /url\\(\\s*#(.*?)\\)/;\n\nfunction getPaint(str, defs) {\n  // if (str === 'none') {\n  //     return;\n  // }\n  var urlMatch = defs && str && str.match(urlRegex);\n\n  if (urlMatch) {\n    var url = trim(urlMatch[1]);\n    var def = defs[url];\n    return def;\n  }\n\n  return str;\n}\n\nvar transformRegex = /(translate|scale|rotate|skewX|skewY|matrix)\\(([\\-\\s0-9\\.e,]*)\\)/g;\n\nfunction parseTransformAttribute(xmlNode, node) {\n  var transform = xmlNode.getAttribute('transform');\n\n  if (transform) {\n    transform = transform.replace(/,/g, ' ');\n    var m = null;\n    var transformOps = [];\n    transform.replace(transformRegex, function (str, type, value) {\n      transformOps.push(type, value);\n    });\n\n    for (var i = transformOps.length - 1; i > 0; i -= 2) {\n      var value = transformOps[i];\n      var type = transformOps[i - 1];\n      m = m || matrix.create();\n\n      switch (type) {\n        case 'translate':\n          value = trim(value).split(DILIMITER_REG);\n          matrix.translate(m, m, [parseFloat(value[0]), parseFloat(value[1] || 0)]);\n          break;\n\n        case 'scale':\n          value = trim(value).split(DILIMITER_REG);\n          matrix.scale(m, m, [parseFloat(value[0]), parseFloat(value[1] || value[0])]);\n          break;\n\n        case 'rotate':\n          value = trim(value).split(DILIMITER_REG);\n          matrix.rotate(m, m, parseFloat(value[0]));\n          break;\n\n        case 'skew':\n          value = trim(value).split(DILIMITER_REG);\n          console.warn('Skew transform is not supported yet');\n          break;\n\n        case 'matrix':\n          var value = trim(value).split(DILIMITER_REG);\n          m[0] = parseFloat(value[0]);\n          m[1] = parseFloat(value[1]);\n          m[2] = parseFloat(value[2]);\n          m[3] = parseFloat(value[3]);\n          m[4] = parseFloat(value[4]);\n          m[5] = parseFloat(value[5]);\n          break;\n      }\n    }\n\n    node.setLocalTransform(m);\n  }\n} // Value may contain space.\n\n\nvar styleRegex = /([^\\s:;]+)\\s*:\\s*([^:;]+)/g;\n\nfunction parseStyleAttribute(xmlNode) {\n  var style = xmlNode.getAttribute('style');\n  var result = {};\n\n  if (!style) {\n    return result;\n  }\n\n  var styleList = {};\n  styleRegex.lastIndex = 0;\n  var styleRegResult;\n\n  while ((styleRegResult = styleRegex.exec(style)) != null) {\n    styleList[styleRegResult[1]] = styleRegResult[2];\n  }\n\n  for (var svgAttrName in attributesMap) {\n    if (attributesMap.hasOwnProperty(svgAttrName) && styleList[svgAttrName] != null) {\n      result[attributesMap[svgAttrName]] = styleList[svgAttrName];\n    }\n  }\n\n  return result;\n}\n/**\n * @param {Array.<number>} viewBoxRect\n * @param {number} width\n * @param {number} height\n * @return {Object} {scale, position}\n */\n\n\nfunction makeViewBoxTransform(viewBoxRect, width, height) {\n  var scaleX = width / viewBoxRect.width;\n  var scaleY = height / viewBoxRect.height;\n  var scale = Math.min(scaleX, scaleY); // preserveAspectRatio 'xMidYMid'\n\n  var viewBoxScale = [scale, scale];\n  var viewBoxPosition = [-(viewBoxRect.x + viewBoxRect.width / 2) * scale + width / 2, -(viewBoxRect.y + viewBoxRect.height / 2) * scale + height / 2];\n  return {\n    scale: viewBoxScale,\n    position: viewBoxPosition\n  };\n}\n/**\n * @param {string|XMLElement} xml\n * @param {Object} [opt]\n * @param {number} [opt.width] Default width if svg width not specified or is a percent value.\n * @param {number} [opt.height] Default height if svg height not specified or is a percent value.\n * @param {boolean} [opt.ignoreViewBox]\n * @param {boolean} [opt.ignoreRootClip]\n * @return {Object} result:\n * {\n *     root: Group, The root of the the result tree of zrender shapes,\n *     width: number, the viewport width of the SVG,\n *     height: number, the viewport height of the SVG,\n *     viewBoxRect: {x, y, width, height}, the declared viewBox rect of the SVG, if exists,\n *     viewBoxTransform: the {scale, position} calculated by viewBox and viewport, is exists.\n * }\n */\n\n\nfunction parseSVG(xml, opt) {\n  var parser = new SVGParser();\n  return parser.parse(xml, opt);\n}\n\nexports.parseXML = parseXML;\nexports.makeViewBoxTransform = makeViewBoxTransform;\nexports.parseSVG = parseSVG;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrender = require(\"zrender/lib/zrender\");\n\nexports.zrender = zrender;\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nexports.matrix = matrix;\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nexports.vector = vector;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar colorTool = require(\"zrender/lib/tool/color\");\n\nexports.color = colorTool;\n\nvar graphicUtil = require(\"./util/graphic\");\n\nvar numberUtil = require(\"./util/number\");\n\nexports.number = numberUtil;\n\nvar formatUtil = require(\"./util/format\");\n\nexports.format = formatUtil;\n\nvar _throttle = require(\"./util/throttle\");\n\nvar throttle = _throttle.throttle;\nexports.throttle = _throttle.throttle;\n\nvar ecHelper = require(\"./helper\");\n\nexports.helper = ecHelper;\n\nvar parseGeoJSON = require(\"./coord/geo/parseGeoJson\");\n\nexports.parseGeoJSON = parseGeoJSON;\n\nvar _List = require(\"./data/List\");\n\nexports.List = _List;\n\nvar _Model = require(\"./model/Model\");\n\nexports.Model = _Model;\n\nvar _Axis = require(\"./coord/Axis\");\n\nexports.Axis = _Axis;\n\nvar _env = require(\"zrender/lib/core/env\");\n\nexports.env = _env;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Do not mount those modules on 'src/echarts' for better tree shaking.\n */\nvar parseGeoJson = parseGeoJSON;\nvar ecUtil = {};\nzrUtil.each(['map', 'each', 'filter', 'indexOf', 'inherits', 'reduce', 'filter', 'bind', 'curry', 'isArray', 'isString', 'isObject', 'isFunction', 'extend', 'defaults', 'clone', 'merge'], function (name) {\n  ecUtil[name] = zrUtil[name];\n});\nvar graphic = {};\nzrUtil.each(['extendShape', 'extendPath', 'makePath', 'makeImage', 'mergePath', 'resizePath', 'createIcon', 'setHoverStyle', 'setLabelStyle', 'setTextStyle', 'setText', 'getFont', 'updateProps', 'initProps', 'getTransform', 'clipPointsByRect', 'clipRectByRect', 'registerShape', 'getShapeClass', 'Group', 'Image', 'Text', 'Circle', 'Sector', 'Ring', 'Polygon', 'Polyline', 'Rect', 'Line', 'BezierCurve', 'Arc', 'IncrementalDisplayable', 'CompoundPath', 'LinearGradient', 'RadialGradient', 'BoundingRect'], function (name) {\n  graphic[name] = graphicUtil[name];\n});\nexports.parseGeoJson = parseGeoJson;\nexports.util = ecUtil;\nexports.graphic = graphic;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Scale = require(\"./Scale\");\n\nvar numberUtil = require(\"../util/number\");\n\nvar IntervalScale = require(\"./Interval\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Log scale\n * @module echarts/scale/Log\n */\n// Use some method of IntervalScale\nvar scaleProto = Scale.prototype;\nvar intervalScaleProto = IntervalScale.prototype;\nvar getPrecisionSafe = numberUtil.getPrecisionSafe;\nvar roundingErrorFix = numberUtil.round;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar mathPow = Math.pow;\nvar mathLog = Math.log;\nvar LogScale = Scale.extend({\n  type: 'log',\n  base: 10,\n  $constructor: function () {\n    Scale.apply(this, arguments);\n    this._originalScale = new IntervalScale();\n  },\n\n  /**\n   * @param {boolean} [expandToNicedExtent=false] If expand the ticks to niced extent.\n   * @return {Array.<number>}\n   */\n  getTicks: function (expandToNicedExtent) {\n    var originalScale = this._originalScale;\n    var extent = this._extent;\n    var originalExtent = originalScale.getExtent();\n    return zrUtil.map(intervalScaleProto.getTicks.call(this, expandToNicedExtent), function (val) {\n      var powVal = numberUtil.round(mathPow(this.base, val)); // Fix #4158\n\n      powVal = val === extent[0] && originalScale.__fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\n      powVal = val === extent[1] && originalScale.__fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\n      return powVal;\n    }, this);\n  },\n\n  /**\n   * @param {number} splitNumber\n   * @return {Array.<Array.<number>>}\n   */\n  getMinorTicks: intervalScaleProto.getMinorTicks,\n\n  /**\n   * @param {number} val\n   * @return {string}\n   */\n  getLabel: intervalScaleProto.getLabel,\n\n  /**\n   * @param  {number} val\n   * @return {number}\n   */\n  scale: function (val) {\n    val = scaleProto.scale.call(this, val);\n    return mathPow(this.base, val);\n  },\n\n  /**\n   * @param {number} start\n   * @param {number} end\n   */\n  setExtent: function (start, end) {\n    var base = this.base;\n    start = mathLog(start) / mathLog(base);\n    end = mathLog(end) / mathLog(base);\n    intervalScaleProto.setExtent.call(this, start, end);\n  },\n\n  /**\n   * @return {number} end\n   */\n  getExtent: function () {\n    var base = this.base;\n    var extent = scaleProto.getExtent.call(this);\n    extent[0] = mathPow(base, extent[0]);\n    extent[1] = mathPow(base, extent[1]); // Fix #4158\n\n    var originalScale = this._originalScale;\n    var originalExtent = originalScale.getExtent();\n    originalScale.__fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n    originalScale.__fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n    return extent;\n  },\n\n  /**\n   * @param  {Array.<number>} extent\n   */\n  unionExtent: function (extent) {\n    this._originalScale.unionExtent(extent);\n\n    var base = this.base;\n    extent[0] = mathLog(extent[0]) / mathLog(base);\n    extent[1] = mathLog(extent[1]) / mathLog(base);\n    scaleProto.unionExtent.call(this, extent);\n  },\n\n  /**\n   * @override\n   */\n  unionExtentFromData: function (data, dim) {\n    // TODO\n    // filter value that <= 0\n    this.unionExtent(data.getApproximateExtent(dim));\n  },\n\n  /**\n   * Update interval and extent of intervals for nice ticks\n   * @param  {number} [approxTickNum = 10] Given approx tick number\n   */\n  niceTicks: function (approxTickNum) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n\n    if (span === Infinity || span <= 0) {\n      return;\n    }\n\n    var interval = numberUtil.quantity(span);\n    var err = approxTickNum / span * interval; // Filter ticks to get closer to the desired count.\n\n    if (err <= 0.5) {\n      interval *= 10;\n    } // Interval should be integer\n\n\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n      interval *= 10;\n    }\n\n    var niceExtent = [numberUtil.round(mathCeil(extent[0] / interval) * interval), numberUtil.round(mathFloor(extent[1] / interval) * interval)];\n    this._interval = interval;\n    this._niceExtent = niceExtent;\n  },\n\n  /**\n   * Nice extent.\n   * @override\n   */\n  niceExtent: function (opt) {\n    intervalScaleProto.niceExtent.call(this, opt);\n    var originalScale = this._originalScale;\n    originalScale.__fixMin = opt.fixMin;\n    originalScale.__fixMax = opt.fixMax;\n  }\n});\nzrUtil.each(['contain', 'normalize'], function (methodName) {\n  LogScale.prototype[methodName] = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleProto[methodName].call(this, val);\n  };\n});\n\nLogScale.create = function () {\n  return new LogScale();\n};\n\nfunction fixRoundingError(val, originalVal) {\n  return roundingErrorFix(val, getPrecisionSafe(originalVal));\n}\n\nvar _default = LogScale;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Region = require(\"./Region\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Parse and decode geo json\n * @module echarts/coord/geo/parseGeoJson\n */\nfunction decode(json) {\n  if (!json.UTF8Encoding) {\n    return json;\n  }\n\n  var encodeScale = json.UTF8Scale;\n\n  if (encodeScale == null) {\n    encodeScale = 1024;\n  }\n\n  var features = json.features;\n\n  for (var f = 0; f < features.length; f++) {\n    var feature = features[f];\n    var geometry = feature.geometry;\n    var coordinates = geometry.coordinates;\n    var encodeOffsets = geometry.encodeOffsets;\n\n    for (var c = 0; c < coordinates.length; c++) {\n      var coordinate = coordinates[c];\n\n      if (geometry.type === 'Polygon') {\n        coordinates[c] = decodePolygon(coordinate, encodeOffsets[c], encodeScale);\n      } else if (geometry.type === 'MultiPolygon') {\n        for (var c2 = 0; c2 < coordinate.length; c2++) {\n          var polygon = coordinate[c2];\n          coordinate[c2] = decodePolygon(polygon, encodeOffsets[c][c2], encodeScale);\n        }\n      }\n    }\n  } // Has been decoded\n\n\n  json.UTF8Encoding = false;\n  return json;\n}\n\nfunction decodePolygon(coordinate, encodeOffsets, encodeScale) {\n  var result = [];\n  var prevX = encodeOffsets[0];\n  var prevY = encodeOffsets[1];\n\n  for (var i = 0; i < coordinate.length; i += 2) {\n    var x = coordinate.charCodeAt(i) - 64;\n    var y = coordinate.charCodeAt(i + 1) - 64; // ZigZag decoding\n\n    x = x >> 1 ^ -(x & 1);\n    y = y >> 1 ^ -(y & 1); // Delta deocding\n\n    x += prevX;\n    y += prevY;\n    prevX = x;\n    prevY = y; // Dequantize\n\n    result.push([x / encodeScale, y / encodeScale]);\n  }\n\n  return result;\n}\n/**\n * @alias module:echarts/coord/geo/parseGeoJson\n * @param {Object} geoJson\n * @param {string} nameProperty\n * @return {module:zrender/container/Group}\n */\n\n\nfunction _default(geoJson, nameProperty) {\n  decode(geoJson);\n  return zrUtil.map(zrUtil.filter(geoJson.features, function (featureObj) {\n    // Output of mapshaper may have geometry null\n    return featureObj.geometry && featureObj.properties && featureObj.geometry.coordinates.length > 0;\n  }), function (featureObj) {\n    var properties = featureObj.properties;\n    var geo = featureObj.geometry;\n    var coordinates = geo.coordinates;\n    var geometries = [];\n\n    if (geo.type === 'Polygon') {\n      geometries.push({\n        type: 'polygon',\n        // According to the GeoJSON specification.\n        // First must be exterior, and the rest are all interior(holes).\n        exterior: coordinates[0],\n        interiors: coordinates.slice(1)\n      });\n    }\n\n    if (geo.type === 'MultiPolygon') {\n      zrUtil.each(coordinates, function (item) {\n        if (item[0]) {\n          geometries.push({\n            type: 'polygon',\n            exterior: item[0],\n            interiors: item.slice(1)\n          });\n        }\n      });\n    }\n\n    var region = new Region(properties[nameProperty || 'name'], geometries, properties.cp);\n    region.properties = properties;\n    return region;\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar bbox = require(\"zrender/lib/core/bbox\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar polygonContain = require(\"zrender/lib/contain/polygon\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/coord/geo/Region\n */\n\n/**\n * @param {string|Region} name\n * @param {Array} geometries\n * @param {Array.<number>} cp\n */\nfunction Region(name, geometries, cp) {\n  /**\n   * @type {string}\n   * @readOnly\n   */\n  this.name = name;\n  /**\n   * @type {Array.<Array>}\n   * @readOnly\n   */\n\n  this.geometries = geometries;\n\n  if (!cp) {\n    var rect = this.getBoundingRect();\n    cp = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  } else {\n    cp = [cp[0], cp[1]];\n  }\n  /**\n   * @type {Array.<number>}\n   */\n\n\n  this.center = cp;\n}\n\nRegion.prototype = {\n  constructor: Region,\n  properties: null,\n\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n  getBoundingRect: function () {\n    var rect = this._rect;\n\n    if (rect) {\n      return rect;\n    }\n\n    var MAX_NUMBER = Number.MAX_VALUE;\n    var min = [MAX_NUMBER, MAX_NUMBER];\n    var max = [-MAX_NUMBER, -MAX_NUMBER];\n    var min2 = [];\n    var max2 = [];\n    var geometries = this.geometries;\n\n    for (var i = 0; i < geometries.length; i++) {\n      // Only support polygon\n      if (geometries[i].type !== 'polygon') {\n        continue;\n      } // Doesn't consider hole\n\n\n      var exterior = geometries[i].exterior;\n      bbox.fromPoints(exterior, min2, max2);\n      vec2.min(min, min, min2);\n      vec2.max(max, max, max2);\n    } // No data\n\n\n    if (i === 0) {\n      min[0] = min[1] = max[0] = max[1] = 0;\n    }\n\n    return this._rect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n  },\n\n  /**\n   * @param {<Array.<number>} coord\n   * @return {boolean}\n   */\n  contain: function (coord) {\n    var rect = this.getBoundingRect();\n    var geometries = this.geometries;\n\n    if (!rect.contain(coord[0], coord[1])) {\n      return false;\n    }\n\n    loopGeo: for (var i = 0, len = geometries.length; i < len; i++) {\n      // Only support polygon.\n      if (geometries[i].type !== 'polygon') {\n        continue;\n      }\n\n      var exterior = geometries[i].exterior;\n      var interiors = geometries[i].interiors;\n\n      if (polygonContain.contain(exterior, coord[0], coord[1])) {\n        // Not in the region if point is in the hole.\n        for (var k = 0; k < (interiors ? interiors.length : 0); k++) {\n          if (polygonContain.contain(interiors[k])) {\n            continue loopGeo;\n          }\n        }\n\n        return true;\n      }\n    }\n\n    return false;\n  },\n  transformTo: function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var aspect = rect.width / rect.height;\n\n    if (!width) {\n      width = aspect * height;\n    } else if (!height) {\n      height = width / aspect;\n    }\n\n    var target = new BoundingRect(x, y, width, height);\n    var transform = rect.calculateTransform(target);\n    var geometries = this.geometries;\n\n    for (var i = 0; i < geometries.length; i++) {\n      // Only support polygon.\n      if (geometries[i].type !== 'polygon') {\n        continue;\n      }\n\n      var exterior = geometries[i].exterior;\n      var interiors = geometries[i].interiors;\n\n      for (var p = 0; p < exterior.length; p++) {\n        vec2.applyTransform(exterior[p], exterior[p], transform);\n      }\n\n      for (var h = 0; h < (interiors ? interiors.length : 0); h++) {\n        for (var p = 0; p < interiors[h].length; p++) {\n          vec2.applyTransform(interiors[h][p], interiors[h][p], transform);\n        }\n      }\n    }\n\n    rect = this._rect;\n    rect.copy(target); // Update center\n\n    this.center = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  },\n  cloneShallow: function (name) {\n    name == null && (name = this.name);\n    var newRegion = new Region(name, this.geometries, this.center);\n    newRegion._rect = this._rect;\n    newRegion.transformTo = null; // Simply avoid to be called.\n\n    return newRegion;\n  }\n};\nvar _default = Region;\nmodule.exports = _default;","var windingLine = require(\"./windingLine\");\n\nvar EPSILON = 1e-8;\n\nfunction isAroundEqual(a, b) {\n  return Math.abs(a - b) < EPSILON;\n}\n\nfunction contain(points, x, y) {\n  var w = 0;\n  var p = points[0];\n\n  if (!p) {\n    return false;\n  }\n\n  for (var i = 1; i < points.length; i++) {\n    var p2 = points[i];\n    w += windingLine(p[0], p[1], p2[0], p2[1], x, y);\n    p = p2;\n  } // Close polygon\n\n\n  var p0 = points[0];\n\n  if (!isAroundEqual(p[0], p0[0]) || !isAroundEqual(p[1], p0[1])) {\n    w += windingLine(p[0], p[1], p0[0], p0[1], x, y);\n  }\n\n  return w !== 0;\n}\n\nexports.contain = contain;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar isTypedArray = _util.isTypedArray;\n\nvar _clazz = require(\"../util/clazz\");\n\nvar enableClassCheck = _clazz.enableClassCheck;\n\nvar _sourceType = require(\"./helper/sourceType\");\n\nvar SOURCE_FORMAT_ORIGINAL = _sourceType.SOURCE_FORMAT_ORIGINAL;\nvar SERIES_LAYOUT_BY_COLUMN = _sourceType.SERIES_LAYOUT_BY_COLUMN;\nvar SOURCE_FORMAT_UNKNOWN = _sourceType.SOURCE_FORMAT_UNKNOWN;\nvar SOURCE_FORMAT_TYPED_ARRAY = _sourceType.SOURCE_FORMAT_TYPED_ARRAY;\nvar SOURCE_FORMAT_KEYED_COLUMNS = _sourceType.SOURCE_FORMAT_KEYED_COLUMNS;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [sourceFormat]\n *\n * + \"original\":\n * This format is only used in series.data, where\n * itemStyle can be specified in data item.\n *\n * + \"arrayRows\":\n * [\n *     ['product', 'score', 'amount'],\n *     ['Matcha Latte', 89.3, 95.8],\n *     ['Milk Tea', 92.1, 89.4],\n *     ['Cheese Cocoa', 94.4, 91.2],\n *     ['Walnut Brownie', 85.4, 76.9]\n * ]\n *\n * + \"objectRows\":\n * [\n *     {product: 'Matcha Latte', score: 89.3, amount: 95.8},\n *     {product: 'Milk Tea', score: 92.1, amount: 89.4},\n *     {product: 'Cheese Cocoa', score: 94.4, amount: 91.2},\n *     {product: 'Walnut Brownie', score: 85.4, amount: 76.9}\n * ]\n *\n * + \"keyedColumns\":\n * {\n *     'product': ['Matcha Latte', 'Milk Tea', 'Cheese Cocoa', 'Walnut Brownie'],\n *     'count': [823, 235, 1042, 988],\n *     'score': [95.8, 81.4, 91.2, 76.9]\n * }\n *\n * + \"typedArray\"\n *\n * + \"unknown\"\n */\n\n/**\n * @constructor\n * @param {Object} fields\n * @param {string} fields.sourceFormat\n * @param {Array|Object} fields.fromDataset\n * @param {Array|Object} [fields.data]\n * @param {string} [seriesLayoutBy='column']\n * @param {Array.<Object|string>} [dimensionsDefine]\n * @param {Objet|HashMap} [encodeDefine]\n * @param {number} [startIndex=0]\n * @param {number} [dimensionsDetectCount]\n */\nfunction Source(fields) {\n  /**\n   * @type {boolean}\n   */\n  this.fromDataset = fields.fromDataset;\n  /**\n   * Not null/undefined.\n   * @type {Array|Object}\n   */\n\n  this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\n  /**\n   * See also \"detectSourceFormat\".\n   * Not null/undefined.\n   * @type {string}\n   */\n\n  this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN;\n  /**\n   * 'row' or 'column'\n   * Not null/undefined.\n   * @type {string} seriesLayoutBy\n   */\n\n  this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\n  /**\n   * dimensions definition in option.\n   * can be null/undefined.\n   * @type {Array.<Object|string>}\n   */\n\n  this.dimensionsDefine = fields.dimensionsDefine;\n  /**\n   * encode definition in option.\n   * can be null/undefined.\n   * @type {Objet|HashMap}\n   */\n\n  this.encodeDefine = fields.encodeDefine && createHashMap(fields.encodeDefine);\n  /**\n   * Not null/undefined, uint.\n   * @type {number}\n   */\n\n  this.startIndex = fields.startIndex || 0;\n  /**\n   * Can be null/undefined (when unknown), uint.\n   * @type {number}\n   */\n\n  this.dimensionsDetectCount = fields.dimensionsDetectCount;\n}\n/**\n * Wrap original series data for some compatibility cases.\n */\n\n\nSource.seriesDataToSource = function (data) {\n  return new Source({\n    data: data,\n    sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL,\n    fromDataset: false\n  });\n};\n\nenableClassCheck(Source);\nvar _default = Source;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Avoid typo.\nvar SOURCE_FORMAT_ORIGINAL = 'original';\nvar SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\nvar SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\nvar SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\nvar SOURCE_FORMAT_UNKNOWN = 'unknown'; // ??? CHANGE A NAME\n\nvar SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\nvar SERIES_LAYOUT_BY_COLUMN = 'column';\nvar SERIES_LAYOUT_BY_ROW = 'row';\nexports.SOURCE_FORMAT_ORIGINAL = SOURCE_FORMAT_ORIGINAL;\nexports.SOURCE_FORMAT_ARRAY_ROWS = SOURCE_FORMAT_ARRAY_ROWS;\nexports.SOURCE_FORMAT_OBJECT_ROWS = SOURCE_FORMAT_OBJECT_ROWS;\nexports.SOURCE_FORMAT_KEYED_COLUMNS = SOURCE_FORMAT_KEYED_COLUMNS;\nexports.SOURCE_FORMAT_UNKNOWN = SOURCE_FORMAT_UNKNOWN;\nexports.SOURCE_FORMAT_TYPED_ARRAY = SOURCE_FORMAT_TYPED_ARRAY;\nexports.SERIES_LAYOUT_BY_COLUMN = SERIES_LAYOUT_BY_COLUMN;\nexports.SERIES_LAYOUT_BY_ROW = SERIES_LAYOUT_BY_ROW;","var dpr = 1; // If in browser environment\n\nif (typeof window !== 'undefined') {\n  dpr = Math.max(window.devicePixelRatio || 1, 1);\n}\n/**\n * config\n * @exports zrender/config\n * @author Kener (@Kener-, kener.linfeng@gmail.com)\n */\n\n/**\n * Debug log mode:\n * 0: Do nothing, for release.\n * 1: console.error, for debug.\n */\n\n\nvar debugMode = 0; // retina \n\nvar devicePixelRatio = dpr;\nexports.debugMode = debugMode;\nexports.devicePixelRatio = devicePixelRatio;","var ContextCachedBy = {\n  NONE: 0,\n  STYLE_BIND: 1,\n  PLAIN_TEXT: 2\n}; // Avoid confused with 0/false.\n\nvar WILL_BE_RESTORED = 9;\nexports.ContextCachedBy = ContextCachedBy;\nexports.WILL_BE_RESTORED = WILL_BE_RESTORED;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar clazzUtil = require(\"../util/clazz\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * // Scale class management\n * @module echarts/scale/Scale\n */\n\n/**\n * @param {Object} [setting]\n */\nfunction Scale(setting) {\n  this._setting = setting || {};\n  /**\n   * Extent\n   * @type {Array.<number>}\n   * @protected\n   */\n\n  this._extent = [Infinity, -Infinity];\n  /**\n   * Step is calculated in adjustExtent\n   * @type {Array.<number>}\n   * @protected\n   */\n\n  this._interval = 0;\n  this.init && this.init.apply(this, arguments);\n}\n/**\n * Parse input val to valid inner number.\n * @param {*} val\n * @return {number}\n */\n\n\nScale.prototype.parse = function (val) {\n  // Notice: This would be a trap here, If the implementation\n  // of this method depends on extent, and this method is used\n  // before extent set (like in dataZoom), it would be wrong.\n  // Nevertheless, parse does not depend on extent generally.\n  return val;\n};\n\nScale.prototype.getSetting = function (name) {\n  return this._setting[name];\n};\n\nScale.prototype.contain = function (val) {\n  var extent = this._extent;\n  return val >= extent[0] && val <= extent[1];\n};\n/**\n * Normalize value to linear [0, 1], return 0.5 if extent span is 0\n * @param {number} val\n * @return {number}\n */\n\n\nScale.prototype.normalize = function (val) {\n  var extent = this._extent;\n\n  if (extent[1] === extent[0]) {\n    return 0.5;\n  }\n\n  return (val - extent[0]) / (extent[1] - extent[0]);\n};\n/**\n * Scale normalized value\n * @param {number} val\n * @return {number}\n */\n\n\nScale.prototype.scale = function (val) {\n  var extent = this._extent;\n  return val * (extent[1] - extent[0]) + extent[0];\n};\n/**\n * Set extent from data\n * @param {Array.<number>} other\n */\n\n\nScale.prototype.unionExtent = function (other) {\n  var extent = this._extent;\n  other[0] < extent[0] && (extent[0] = other[0]);\n  other[1] > extent[1] && (extent[1] = other[1]); // not setExtent because in log axis it may transformed to power\n  // this.setExtent(extent[0], extent[1]);\n};\n/**\n * Set extent from data\n * @param {module:echarts/data/List} data\n * @param {string} dim\n */\n\n\nScale.prototype.unionExtentFromData = function (data, dim) {\n  this.unionExtent(data.getApproximateExtent(dim));\n};\n/**\n * Get extent\n * @return {Array.<number>}\n */\n\n\nScale.prototype.getExtent = function () {\n  return this._extent.slice();\n};\n/**\n * Set extent\n * @param {number} start\n * @param {number} end\n */\n\n\nScale.prototype.setExtent = function (start, end) {\n  var thisExtent = this._extent;\n\n  if (!isNaN(start)) {\n    thisExtent[0] = start;\n  }\n\n  if (!isNaN(end)) {\n    thisExtent[1] = end;\n  }\n};\n/**\n * When axis extent depends on data and no data exists,\n * axis ticks should not be drawn, which is named 'blank'.\n */\n\n\nScale.prototype.isBlank = function () {\n  return this._isBlank;\n},\n/**\n * When axis extent depends on data and no data exists,\n * axis ticks should not be drawn, which is named 'blank'.\n */\nScale.prototype.setBlank = function (isBlank) {\n  this._isBlank = isBlank;\n};\n/**\n * @abstract\n * @param {*} tick\n * @return {string} label of the tick.\n */\n\nScale.prototype.getLabel = null;\nclazzUtil.enableClassExtend(Scale);\nclazzUtil.enableClassManagement(Scale, {\n  registerWhenExtend: true\n});\nvar _default = Scale;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nfunction collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get('axisPointer.type') === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get('axisPointer.axis'));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var key = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[key] = {\n        key: key,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: []\n      };\n      axesInfoInCoordSys[key] = axisInfo;\n      result.seriesInvolved |= involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[key] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var volatileOption = {};\n  each(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (field) {\n    volatileOption[field] = zrUtil.clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get('label.show');\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && zrUtil.defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get('tooltip.trigger', true);\n    var seriesTooltipShow = seriesModel.get('tooltip.show', true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get('axisPointer.show', true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  }, this);\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || zrUtil.isArray(linkPropValue) && zrUtil.indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nfunction fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\n\nfunction getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\n\nfunction getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get('handle.show');\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nfunction makeKey(model) {\n  return model.type + '||' + model.id;\n}\n\nexports.collect = collect;\nexports.fixValue = fixValue;\nexports.getAxisInfo = getAxisInfo;\nexports.getAxisPointerModel = getAxisPointerModel;\nexports.makeKey = makeKey;","// https://github.com/mziccard/node-timsort\nvar DEFAULT_MIN_MERGE = 32;\nvar DEFAULT_MIN_GALLOPING = 7;\nvar DEFAULT_TMP_STORAGE_LENGTH = 256;\n\nfunction minRunLength(n) {\n  var r = 0;\n\n  while (n >= DEFAULT_MIN_MERGE) {\n    r |= n & 1;\n    n >>= 1;\n  }\n\n  return n + r;\n}\n\nfunction makeAscendingRun(array, lo, hi, compare) {\n  var runHi = lo + 1;\n\n  if (runHi === hi) {\n    return 1;\n  }\n\n  if (compare(array[runHi++], array[lo]) < 0) {\n    while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n      runHi++;\n    }\n\n    reverseRun(array, lo, runHi);\n  } else {\n    while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n      runHi++;\n    }\n  }\n\n  return runHi - lo;\n}\n\nfunction reverseRun(array, lo, hi) {\n  hi--;\n\n  while (lo < hi) {\n    var t = array[lo];\n    array[lo++] = array[hi];\n    array[hi--] = t;\n  }\n}\n\nfunction binaryInsertionSort(array, lo, hi, start, compare) {\n  if (start === lo) {\n    start++;\n  }\n\n  for (; start < hi; start++) {\n    var pivot = array[start];\n    var left = lo;\n    var right = start;\n    var mid;\n\n    while (left < right) {\n      mid = left + right >>> 1;\n\n      if (compare(pivot, array[mid]) < 0) {\n        right = mid;\n      } else {\n        left = mid + 1;\n      }\n    }\n\n    var n = start - left;\n\n    switch (n) {\n      case 3:\n        array[left + 3] = array[left + 2];\n\n      case 2:\n        array[left + 2] = array[left + 1];\n\n      case 1:\n        array[left + 1] = array[left];\n        break;\n\n      default:\n        while (n > 0) {\n          array[left + n] = array[left + n - 1];\n          n--;\n        }\n\n    }\n\n    array[left] = pivot;\n  }\n}\n\nfunction gallopLeft(value, array, start, length, hint, compare) {\n  var lastOffset = 0;\n  var maxOffset = 0;\n  var offset = 1;\n\n  if (compare(value, array[start + hint]) > 0) {\n    maxOffset = length - hint;\n\n    while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    lastOffset += hint;\n    offset += hint;\n  } else {\n    maxOffset = hint + 1;\n\n    while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    var tmp = lastOffset;\n    lastOffset = hint - offset;\n    offset = hint - tmp;\n  }\n\n  lastOffset++;\n\n  while (lastOffset < offset) {\n    var m = lastOffset + (offset - lastOffset >>> 1);\n\n    if (compare(value, array[start + m]) > 0) {\n      lastOffset = m + 1;\n    } else {\n      offset = m;\n    }\n  }\n\n  return offset;\n}\n\nfunction gallopRight(value, array, start, length, hint, compare) {\n  var lastOffset = 0;\n  var maxOffset = 0;\n  var offset = 1;\n\n  if (compare(value, array[start + hint]) < 0) {\n    maxOffset = hint + 1;\n\n    while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    var tmp = lastOffset;\n    lastOffset = hint - offset;\n    offset = hint - tmp;\n  } else {\n    maxOffset = length - hint;\n\n    while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n      lastOffset = offset;\n      offset = (offset << 1) + 1;\n\n      if (offset <= 0) {\n        offset = maxOffset;\n      }\n    }\n\n    if (offset > maxOffset) {\n      offset = maxOffset;\n    }\n\n    lastOffset += hint;\n    offset += hint;\n  }\n\n  lastOffset++;\n\n  while (lastOffset < offset) {\n    var m = lastOffset + (offset - lastOffset >>> 1);\n\n    if (compare(value, array[start + m]) < 0) {\n      offset = m;\n    } else {\n      lastOffset = m + 1;\n    }\n  }\n\n  return offset;\n}\n\nfunction TimSort(array, compare) {\n  var minGallop = DEFAULT_MIN_GALLOPING;\n  var length = 0;\n  var tmpStorageLength = DEFAULT_TMP_STORAGE_LENGTH;\n  var stackLength = 0;\n  var runStart;\n  var runLength;\n  var stackSize = 0;\n  length = array.length;\n\n  if (length < 2 * DEFAULT_TMP_STORAGE_LENGTH) {\n    tmpStorageLength = length >>> 1;\n  }\n\n  var tmp = [];\n  stackLength = length < 120 ? 5 : length < 1542 ? 10 : length < 119151 ? 19 : 40;\n  runStart = [];\n  runLength = [];\n\n  function pushRun(_runStart, _runLength) {\n    runStart[stackSize] = _runStart;\n    runLength[stackSize] = _runLength;\n    stackSize += 1;\n  }\n\n  function mergeRuns() {\n    while (stackSize > 1) {\n      var n = stackSize - 2;\n\n      if (n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1] || n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1]) {\n        if (runLength[n - 1] < runLength[n + 1]) {\n          n--;\n        }\n      } else if (runLength[n] > runLength[n + 1]) {\n        break;\n      }\n\n      mergeAt(n);\n    }\n  }\n\n  function forceMergeRuns() {\n    while (stackSize > 1) {\n      var n = stackSize - 2;\n\n      if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n        n--;\n      }\n\n      mergeAt(n);\n    }\n  }\n\n  function mergeAt(i) {\n    var start1 = runStart[i];\n    var length1 = runLength[i];\n    var start2 = runStart[i + 1];\n    var length2 = runLength[i + 1];\n    runLength[i] = length1 + length2;\n\n    if (i === stackSize - 3) {\n      runStart[i + 1] = runStart[i + 2];\n      runLength[i + 1] = runLength[i + 2];\n    }\n\n    stackSize--;\n    var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n    start1 += k;\n    length1 -= k;\n\n    if (length1 === 0) {\n      return;\n    }\n\n    length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n\n    if (length2 === 0) {\n      return;\n    }\n\n    if (length1 <= length2) {\n      mergeLow(start1, length1, start2, length2);\n    } else {\n      mergeHigh(start1, length1, start2, length2);\n    }\n  }\n\n  function mergeLow(start1, length1, start2, length2) {\n    var i = 0;\n\n    for (i = 0; i < length1; i++) {\n      tmp[i] = array[start1 + i];\n    }\n\n    var cursor1 = 0;\n    var cursor2 = start2;\n    var dest = start1;\n    array[dest++] = array[cursor2++];\n\n    if (--length2 === 0) {\n      for (i = 0; i < length1; i++) {\n        array[dest + i] = tmp[cursor1 + i];\n      }\n\n      return;\n    }\n\n    if (length1 === 1) {\n      for (i = 0; i < length2; i++) {\n        array[dest + i] = array[cursor2 + i];\n      }\n\n      array[dest + length2] = tmp[cursor1];\n      return;\n    }\n\n    var _minGallop = minGallop;\n    var count1;\n    var count2;\n    var exit;\n\n    while (1) {\n      count1 = 0;\n      count2 = 0;\n      exit = false;\n\n      do {\n        if (compare(array[cursor2], tmp[cursor1]) < 0) {\n          array[dest++] = array[cursor2++];\n          count2++;\n          count1 = 0;\n\n          if (--length2 === 0) {\n            exit = true;\n            break;\n          }\n        } else {\n          array[dest++] = tmp[cursor1++];\n          count1++;\n          count2 = 0;\n\n          if (--length1 === 1) {\n            exit = true;\n            break;\n          }\n        }\n      } while ((count1 | count2) < _minGallop);\n\n      if (exit) {\n        break;\n      }\n\n      do {\n        count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n\n        if (count1 !== 0) {\n          for (i = 0; i < count1; i++) {\n            array[dest + i] = tmp[cursor1 + i];\n          }\n\n          dest += count1;\n          cursor1 += count1;\n          length1 -= count1;\n\n          if (length1 <= 1) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest++] = array[cursor2++];\n\n        if (--length2 === 0) {\n          exit = true;\n          break;\n        }\n\n        count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n\n        if (count2 !== 0) {\n          for (i = 0; i < count2; i++) {\n            array[dest + i] = array[cursor2 + i];\n          }\n\n          dest += count2;\n          cursor2 += count2;\n          length2 -= count2;\n\n          if (length2 === 0) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest++] = tmp[cursor1++];\n\n        if (--length1 === 1) {\n          exit = true;\n          break;\n        }\n\n        _minGallop--;\n      } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n      if (exit) {\n        break;\n      }\n\n      if (_minGallop < 0) {\n        _minGallop = 0;\n      }\n\n      _minGallop += 2;\n    }\n\n    minGallop = _minGallop;\n    minGallop < 1 && (minGallop = 1);\n\n    if (length1 === 1) {\n      for (i = 0; i < length2; i++) {\n        array[dest + i] = array[cursor2 + i];\n      }\n\n      array[dest + length2] = tmp[cursor1];\n    } else if (length1 === 0) {\n      throw new Error(); // throw new Error('mergeLow preconditions were not respected');\n    } else {\n      for (i = 0; i < length1; i++) {\n        array[dest + i] = tmp[cursor1 + i];\n      }\n    }\n  }\n\n  function mergeHigh(start1, length1, start2, length2) {\n    var i = 0;\n\n    for (i = 0; i < length2; i++) {\n      tmp[i] = array[start2 + i];\n    }\n\n    var cursor1 = start1 + length1 - 1;\n    var cursor2 = length2 - 1;\n    var dest = start2 + length2 - 1;\n    var customCursor = 0;\n    var customDest = 0;\n    array[dest--] = array[cursor1--];\n\n    if (--length1 === 0) {\n      customCursor = dest - (length2 - 1);\n\n      for (i = 0; i < length2; i++) {\n        array[customCursor + i] = tmp[i];\n      }\n\n      return;\n    }\n\n    if (length2 === 1) {\n      dest -= length1;\n      cursor1 -= length1;\n      customDest = dest + 1;\n      customCursor = cursor1 + 1;\n\n      for (i = length1 - 1; i >= 0; i--) {\n        array[customDest + i] = array[customCursor + i];\n      }\n\n      array[dest] = tmp[cursor2];\n      return;\n    }\n\n    var _minGallop = minGallop;\n\n    while (true) {\n      var count1 = 0;\n      var count2 = 0;\n      var exit = false;\n\n      do {\n        if (compare(tmp[cursor2], array[cursor1]) < 0) {\n          array[dest--] = array[cursor1--];\n          count1++;\n          count2 = 0;\n\n          if (--length1 === 0) {\n            exit = true;\n            break;\n          }\n        } else {\n          array[dest--] = tmp[cursor2--];\n          count2++;\n          count1 = 0;\n\n          if (--length2 === 1) {\n            exit = true;\n            break;\n          }\n        }\n      } while ((count1 | count2) < _minGallop);\n\n      if (exit) {\n        break;\n      }\n\n      do {\n        count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n\n        if (count1 !== 0) {\n          dest -= count1;\n          cursor1 -= count1;\n          length1 -= count1;\n          customDest = dest + 1;\n          customCursor = cursor1 + 1;\n\n          for (i = count1 - 1; i >= 0; i--) {\n            array[customDest + i] = array[customCursor + i];\n          }\n\n          if (length1 === 0) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest--] = tmp[cursor2--];\n\n        if (--length2 === 1) {\n          exit = true;\n          break;\n        }\n\n        count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n\n        if (count2 !== 0) {\n          dest -= count2;\n          cursor2 -= count2;\n          length2 -= count2;\n          customDest = dest + 1;\n          customCursor = cursor2 + 1;\n\n          for (i = 0; i < count2; i++) {\n            array[customDest + i] = tmp[customCursor + i];\n          }\n\n          if (length2 <= 1) {\n            exit = true;\n            break;\n          }\n        }\n\n        array[dest--] = array[cursor1--];\n\n        if (--length1 === 0) {\n          exit = true;\n          break;\n        }\n\n        _minGallop--;\n      } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n\n      if (exit) {\n        break;\n      }\n\n      if (_minGallop < 0) {\n        _minGallop = 0;\n      }\n\n      _minGallop += 2;\n    }\n\n    minGallop = _minGallop;\n\n    if (minGallop < 1) {\n      minGallop = 1;\n    }\n\n    if (length2 === 1) {\n      dest -= length1;\n      cursor1 -= length1;\n      customDest = dest + 1;\n      customCursor = cursor1 + 1;\n\n      for (i = length1 - 1; i >= 0; i--) {\n        array[customDest + i] = array[customCursor + i];\n      }\n\n      array[dest] = tmp[cursor2];\n    } else if (length2 === 0) {\n      throw new Error(); // throw new Error('mergeHigh preconditions were not respected');\n    } else {\n      customCursor = dest - (length2 - 1);\n\n      for (i = 0; i < length2; i++) {\n        array[customCursor + i] = tmp[i];\n      }\n    }\n  }\n\n  this.mergeRuns = mergeRuns;\n  this.forceMergeRuns = forceMergeRuns;\n  this.pushRun = pushRun;\n}\n\nfunction sort(array, compare, lo, hi) {\n  if (!lo) {\n    lo = 0;\n  }\n\n  if (!hi) {\n    hi = array.length;\n  }\n\n  var remaining = hi - lo;\n\n  if (remaining < 2) {\n    return;\n  }\n\n  var runLength = 0;\n\n  if (remaining < DEFAULT_MIN_MERGE) {\n    runLength = makeAscendingRun(array, lo, hi, compare);\n    binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n    return;\n  }\n\n  var ts = new TimSort(array, compare);\n  var minRun = minRunLength(remaining);\n\n  do {\n    runLength = makeAscendingRun(array, lo, hi, compare);\n\n    if (runLength < minRun) {\n      var force = remaining;\n\n      if (force > minRun) {\n        force = minRun;\n      }\n\n      binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n      runLength = force;\n    }\n\n    ts.pushRun(lo, runLength);\n    ts.mergeRuns();\n    remaining -= runLength;\n    lo += runLength;\n  } while (remaining !== 0);\n\n  ts.forceMergeRuns();\n}\n\nmodule.exports = sort;","var fixShadow = require(\"./helper/fixShadow\");\n\nvar _constant = require(\"./constant\");\n\nvar ContextCachedBy = _constant.ContextCachedBy;\nvar STYLE_COMMON_PROPS = [['shadowBlur', 0], ['shadowOffsetX', 0], ['shadowOffsetY', 0], ['shadowColor', '#000'], ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]]; // var SHADOW_PROPS = STYLE_COMMON_PROPS.slice(0, 4);\n// var LINE_PROPS = STYLE_COMMON_PROPS.slice(4);\n\nvar Style = function (opts) {\n  this.extendFrom(opts, false);\n};\n\nfunction createLinearGradient(ctx, obj, rect) {\n  var x = obj.x == null ? 0 : obj.x;\n  var x2 = obj.x2 == null ? 1 : obj.x2;\n  var y = obj.y == null ? 0 : obj.y;\n  var y2 = obj.y2 == null ? 0 : obj.y2;\n\n  if (!obj.global) {\n    x = x * rect.width + rect.x;\n    x2 = x2 * rect.width + rect.x;\n    y = y * rect.height + rect.y;\n    y2 = y2 * rect.height + rect.y;\n  } // Fix NaN when rect is Infinity\n\n\n  x = isNaN(x) ? 0 : x;\n  x2 = isNaN(x2) ? 1 : x2;\n  y = isNaN(y) ? 0 : y;\n  y2 = isNaN(y2) ? 0 : y2;\n  var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n  return canvasGradient;\n}\n\nfunction createRadialGradient(ctx, obj, rect) {\n  var width = rect.width;\n  var height = rect.height;\n  var min = Math.min(width, height);\n  var x = obj.x == null ? 0.5 : obj.x;\n  var y = obj.y == null ? 0.5 : obj.y;\n  var r = obj.r == null ? 0.5 : obj.r;\n\n  if (!obj.global) {\n    x = x * width + rect.x;\n    y = y * height + rect.y;\n    r = r * min;\n  }\n\n  var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n  return canvasGradient;\n}\n\nStyle.prototype = {\n  constructor: Style,\n\n  /**\n   * @type {string}\n   */\n  fill: '#000',\n\n  /**\n   * @type {string}\n   */\n  stroke: null,\n\n  /**\n   * @type {number}\n   */\n  opacity: 1,\n\n  /**\n   * @type {number}\n   */\n  fillOpacity: null,\n\n  /**\n   * @type {number}\n   */\n  strokeOpacity: null,\n\n  /**\n   * `true` is not supported.\n   * `false`/`null`/`undefined` are the same.\n   * `false` is used to remove lineDash in some\n   * case that `null`/`undefined` can not be set.\n   * (e.g., emphasis.lineStyle in echarts)\n   * @type {Array.<number>|boolean}\n   */\n  lineDash: null,\n\n  /**\n   * @type {number}\n   */\n  lineDashOffset: 0,\n\n  /**\n   * @type {number}\n   */\n  shadowBlur: 0,\n\n  /**\n   * @type {number}\n   */\n  shadowOffsetX: 0,\n\n  /**\n   * @type {number}\n   */\n  shadowOffsetY: 0,\n\n  /**\n   * @type {number}\n   */\n  lineWidth: 1,\n\n  /**\n   * If stroke ignore scale\n   * @type {Boolean}\n   */\n  strokeNoScale: false,\n  // Bounding rect text configuration\n  // Not affected by element transform\n\n  /**\n   * @type {string}\n   */\n  text: null,\n\n  /**\n   * If `fontSize` or `fontFamily` exists, `font` will be reset by\n   * `fontSize`, `fontStyle`, `fontWeight`, `fontFamily`.\n   * So do not visit it directly in upper application (like echarts),\n   * but use `contain/text#makeFont` instead.\n   * @type {string}\n   */\n  font: null,\n\n  /**\n   * The same as font. Use font please.\n   * @deprecated\n   * @type {string}\n   */\n  textFont: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * @type {string}\n   */\n  fontStyle: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * @type {string}\n   */\n  fontWeight: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * Should be 12 but not '12px'.\n   * @type {number}\n   */\n  fontSize: null,\n\n  /**\n   * It helps merging respectively, rather than parsing an entire font string.\n   * @type {string}\n   */\n  fontFamily: null,\n\n  /**\n   * Reserved for special functinality, like 'hr'.\n   * @type {string}\n   */\n  textTag: null,\n\n  /**\n   * @type {string}\n   */\n  textFill: '#000',\n\n  /**\n   * @type {string}\n   */\n  textStroke: null,\n\n  /**\n   * @type {number}\n   */\n  textWidth: null,\n\n  /**\n   * Only for textBackground.\n   * @type {number}\n   */\n  textHeight: null,\n\n  /**\n   * textStroke may be set as some color as a default\n   * value in upper applicaion, where the default value\n   * of textStrokeWidth should be 0 to make sure that\n   * user can choose to do not use text stroke.\n   * @type {number}\n   */\n  textStrokeWidth: 0,\n\n  /**\n   * @type {number}\n   */\n  textLineHeight: null,\n\n  /**\n   * 'inside', 'left', 'right', 'top', 'bottom'\n   * [x, y]\n   * Based on x, y of rect.\n   * @type {string|Array.<number>}\n   * @default 'inside'\n   */\n  textPosition: 'inside',\n\n  /**\n   * If not specified, use the boundingRect of a `displayable`.\n   * @type {Object}\n   */\n  textRect: null,\n\n  /**\n   * [x, y]\n   * @type {Array.<number>}\n   */\n  textOffset: null,\n\n  /**\n   * @type {string}\n   */\n  textAlign: null,\n\n  /**\n   * @type {string}\n   */\n  textVerticalAlign: null,\n\n  /**\n   * @type {number}\n   */\n  textDistance: 5,\n\n  /**\n   * @type {string}\n   */\n  textShadowColor: 'transparent',\n\n  /**\n   * @type {number}\n   */\n  textShadowBlur: 0,\n\n  /**\n   * @type {number}\n   */\n  textShadowOffsetX: 0,\n\n  /**\n   * @type {number}\n   */\n  textShadowOffsetY: 0,\n\n  /**\n   * @type {string}\n   */\n  textBoxShadowColor: 'transparent',\n\n  /**\n   * @type {number}\n   */\n  textBoxShadowBlur: 0,\n\n  /**\n   * @type {number}\n   */\n  textBoxShadowOffsetX: 0,\n\n  /**\n   * @type {number}\n   */\n  textBoxShadowOffsetY: 0,\n\n  /**\n   * Whether transform text.\n   * Only available in Path and Image element,\n   * where the text is called as `RectText`.\n   * @type {boolean}\n   */\n  transformText: false,\n\n  /**\n   * Text rotate around position of Path or Image.\n   * The origin of the rotation can be specified by `textOrigin`.\n   * Only available in Path and Image element,\n   * where the text is called as `RectText`.\n   */\n  textRotation: 0,\n\n  /**\n   * Text origin of text rotation.\n   * Useful in the case like label rotation of circular symbol.\n   * Only available in Path and Image element, where the text is called\n   * as `RectText` and the element is called as \"host element\".\n   * The value can be:\n   * + If specified as a coordinate like `[10, 40]`, it is the `[x, y]`\n   * base on the left-top corner of the rect of its host element.\n   * + If specified as a string `center`, it is the center of the rect of\n   * its host element.\n   * + By default, this origin is the `textPosition`.\n   * @type {string|Array.<number>}\n   */\n  textOrigin: null,\n\n  /**\n   * @type {string}\n   */\n  textBackgroundColor: null,\n\n  /**\n   * @type {string}\n   */\n  textBorderColor: null,\n\n  /**\n   * @type {number}\n   */\n  textBorderWidth: 0,\n\n  /**\n   * @type {number}\n   */\n  textBorderRadius: 0,\n\n  /**\n   * Can be `2` or `[2, 4]` or `[2, 3, 4, 5]`\n   * @type {number|Array.<number>}\n   */\n  textPadding: null,\n\n  /**\n   * Text styles for rich text.\n   * @type {Object}\n   */\n  rich: null,\n\n  /**\n   * {outerWidth, outerHeight, ellipsis, placeholder}\n   * @type {Object}\n   */\n  truncate: null,\n\n  /**\n   * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n   * @type {string}\n   */\n  blend: null,\n\n  /**\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  bind: function (ctx, el, prevEl) {\n    var style = this;\n    var prevStyle = prevEl && prevEl.style; // If no prevStyle, it means first draw.\n    // Only apply cache if the last time cachced by this function.\n\n    var notCheckCache = !prevStyle || ctx.__attrCachedBy !== ContextCachedBy.STYLE_BIND;\n    ctx.__attrCachedBy = ContextCachedBy.STYLE_BIND;\n\n    for (var i = 0; i < STYLE_COMMON_PROPS.length; i++) {\n      var prop = STYLE_COMMON_PROPS[i];\n      var styleName = prop[0];\n\n      if (notCheckCache || style[styleName] !== prevStyle[styleName]) {\n        // FIXME Invalid property value will cause style leak from previous element.\n        ctx[styleName] = fixShadow(ctx, styleName, style[styleName] || prop[1]);\n      }\n    }\n\n    if (notCheckCache || style.fill !== prevStyle.fill) {\n      ctx.fillStyle = style.fill;\n    }\n\n    if (notCheckCache || style.stroke !== prevStyle.stroke) {\n      ctx.strokeStyle = style.stroke;\n    }\n\n    if (notCheckCache || style.opacity !== prevStyle.opacity) {\n      ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n\n    if (notCheckCache || style.blend !== prevStyle.blend) {\n      ctx.globalCompositeOperation = style.blend || 'source-over';\n    }\n\n    if (this.hasStroke()) {\n      var lineWidth = style.lineWidth;\n      ctx.lineWidth = lineWidth / (this.strokeNoScale && el && el.getLineScale ? el.getLineScale() : 1);\n    }\n  },\n  hasFill: function () {\n    var fill = this.fill;\n    return fill != null && fill !== 'none';\n  },\n  hasStroke: function () {\n    var stroke = this.stroke;\n    return stroke != null && stroke !== 'none' && this.lineWidth > 0;\n  },\n\n  /**\n   * Extend from other style\n   * @param {zrender/graphic/Style} otherStyle\n   * @param {boolean} overwrite true: overwrirte any way.\n   *                            false: overwrite only when !target.hasOwnProperty\n   *                            others: overwrite when property is not null/undefined.\n   */\n  extendFrom: function (otherStyle, overwrite) {\n    if (otherStyle) {\n      for (var name in otherStyle) {\n        if (otherStyle.hasOwnProperty(name) && (overwrite === true || (overwrite === false ? !this.hasOwnProperty(name) : otherStyle[name] != null))) {\n          this[name] = otherStyle[name];\n        }\n      }\n    }\n  },\n\n  /**\n   * Batch setting style with a given object\n   * @param {Object|string} obj\n   * @param {*} [obj]\n   */\n  set: function (obj, value) {\n    if (typeof obj === 'string') {\n      this[obj] = value;\n    } else {\n      this.extendFrom(obj, true);\n    }\n  },\n\n  /**\n   * Clone\n   * @return {zrender/graphic/Style} [description]\n   */\n  clone: function () {\n    var newStyle = new this.constructor();\n    newStyle.extendFrom(this, true);\n    return newStyle;\n  },\n  getGradient: function (ctx, obj, rect) {\n    var method = obj.type === 'radial' ? createRadialGradient : createLinearGradient;\n    var canvasGradient = method(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n\n    for (var i = 0; i < colorStops.length; i++) {\n      canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n\n    return canvasGradient;\n  }\n};\nvar styleProto = Style.prototype;\n\nfor (var i = 0; i < STYLE_COMMON_PROPS.length; i++) {\n  var prop = STYLE_COMMON_PROPS[i];\n\n  if (!(prop[0] in styleProto)) {\n    styleProto[prop[0]] = prop[1];\n  }\n} // Provide for others\n\n\nStyle.getGradient = styleProto.getGradient;\nvar _default = Style;\nmodule.exports = _default;","var LRU = require(\"../../core/LRU\");\n\nvar globalImageCache = new LRU(50);\n/**\n * @param {string|HTMLImageElement|HTMLCanvasElement|Canvas} newImageOrSrc\n * @return {HTMLImageElement|HTMLCanvasElement|Canvas} image\n */\n\nfunction findExistImage(newImageOrSrc) {\n  if (typeof newImageOrSrc === 'string') {\n    var cachedImgObj = globalImageCache.get(newImageOrSrc);\n    return cachedImgObj && cachedImgObj.image;\n  } else {\n    return newImageOrSrc;\n  }\n}\n/**\n * Caution: User should cache loaded images, but not just count on LRU.\n * Consider if required images more than LRU size, will dead loop occur?\n *\n * @param {string|HTMLImageElement|HTMLCanvasElement|Canvas} newImageOrSrc\n * @param {HTMLImageElement|HTMLCanvasElement|Canvas} image Existent image.\n * @param {module:zrender/Element} [hostEl] For calling `dirty`.\n * @param {Function} [cb] params: (image, cbPayload)\n * @param {Object} [cbPayload] Payload on cb calling.\n * @return {HTMLImageElement|HTMLCanvasElement|Canvas} image\n */\n\n\nfunction createOrUpdateImage(newImageOrSrc, image, hostEl, cb, cbPayload) {\n  if (!newImageOrSrc) {\n    return image;\n  } else if (typeof newImageOrSrc === 'string') {\n    // Image should not be loaded repeatly.\n    if (image && image.__zrImageSrc === newImageOrSrc || !hostEl) {\n      return image;\n    } // Only when there is no existent image or existent image src\n    // is different, this method is responsible for load.\n\n\n    var cachedImgObj = globalImageCache.get(newImageOrSrc);\n    var pendingWrap = {\n      hostEl: hostEl,\n      cb: cb,\n      cbPayload: cbPayload\n    };\n\n    if (cachedImgObj) {\n      image = cachedImgObj.image;\n      !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n    } else {\n      image = new Image();\n      image.onload = image.onerror = imageOnLoad;\n      globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n        image: image,\n        pending: [pendingWrap]\n      });\n      image.src = image.__zrImageSrc = newImageOrSrc;\n    }\n\n    return image;\n  } // newImageOrSrc is an HTMLImageElement or HTMLCanvasElement or Canvas\n  else {\n      return newImageOrSrc;\n    }\n}\n\nfunction imageOnLoad() {\n  var cachedImgObj = this.__cachedImgObj;\n  this.onload = this.onerror = this.__cachedImgObj = null;\n\n  for (var i = 0; i < cachedImgObj.pending.length; i++) {\n    var pendingWrap = cachedImgObj.pending[i];\n    var cb = pendingWrap.cb;\n    cb && cb(this, pendingWrap.cbPayload);\n    pendingWrap.hostEl.dirty();\n  }\n\n  cachedImgObj.pending.length = 0;\n}\n\nfunction isImageReady(image) {\n  return image && image.width && image.height;\n}\n\nexports.findExistImage = findExistImage;\nexports.createOrUpdateImage = createOrUpdateImage;\nexports.isImageReady = isImageReady;","/**\n * Sub-pixel optimize for canvas rendering, prevent from blur\n * when rendering a thin vertical/horizontal line.\n */\nvar round = Math.round;\n/**\n * Sub pixel optimize line for canvas\n *\n * @param {Object} outputShape The modification will be performed on `outputShape`.\n *                 `outputShape` and `inputShape` can be the same object.\n *                 `outputShape` object can be used repeatly, because all of\n *                 the `x1`, `x2`, `y1`, `y2` will be assigned in this method.\n * @param {Object} [inputShape]\n * @param {number} [inputShape.x1]\n * @param {number} [inputShape.y1]\n * @param {number} [inputShape.x2]\n * @param {number} [inputShape.y2]\n * @param {Object} [style]\n * @param {number} [style.lineWidth] If `null`/`undefined`/`0`, do not optimize.\n */\n\nfunction subPixelOptimizeLine(outputShape, inputShape, style) {\n  if (!inputShape) {\n    return;\n  }\n\n  var x1 = inputShape.x1;\n  var x2 = inputShape.x2;\n  var y1 = inputShape.y1;\n  var y2 = inputShape.y2;\n  outputShape.x1 = x1;\n  outputShape.x2 = x2;\n  outputShape.y1 = y1;\n  outputShape.y2 = y2;\n  var lineWidth = style && style.lineWidth;\n\n  if (!lineWidth) {\n    return;\n  }\n\n  if (round(x1 * 2) === round(x2 * 2)) {\n    outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n  }\n\n  if (round(y1 * 2) === round(y2 * 2)) {\n    outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n  }\n}\n/**\n * Sub pixel optimize rect for canvas\n *\n * @param {Object} outputShape The modification will be performed on `outputShape`.\n *                 `outputShape` and `inputShape` can be the same object.\n *                 `outputShape` object can be used repeatly, because all of\n *                 the `x`, `y`, `width`, `height` will be assigned in this method.\n * @param {Object} [inputShape]\n * @param {number} [inputShape.x]\n * @param {number} [inputShape.y]\n * @param {number} [inputShape.width]\n * @param {number} [inputShape.height]\n * @param {Object} [style]\n * @param {number} [style.lineWidth] If `null`/`undefined`/`0`, do not optimize.\n */\n\n\nfunction subPixelOptimizeRect(outputShape, inputShape, style) {\n  if (!inputShape) {\n    return;\n  }\n\n  var originX = inputShape.x;\n  var originY = inputShape.y;\n  var originWidth = inputShape.width;\n  var originHeight = inputShape.height;\n  outputShape.x = originX;\n  outputShape.y = originY;\n  outputShape.width = originWidth;\n  outputShape.height = originHeight;\n  var lineWidth = style && style.lineWidth;\n\n  if (!lineWidth) {\n    return;\n  }\n\n  outputShape.x = subPixelOptimize(originX, lineWidth, true);\n  outputShape.y = subPixelOptimize(originY, lineWidth, true);\n  outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n  outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n}\n/**\n * Sub pixel optimize for canvas\n *\n * @param {number} position Coordinate, such as x, y\n * @param {number} lineWidth If `null`/`undefined`/`0`, do not optimize.\n * @param {boolean=} positiveOrNegative Default false (negative).\n * @return {number} Optimized position.\n */\n\n\nfunction subPixelOptimize(position, lineWidth, positiveOrNegative) {\n  if (!lineWidth) {\n    return position;\n  } // Assure that (position + lineWidth / 2) is near integer edge,\n  // otherwise line will be fuzzy in canvas.\n\n\n  var doubledPosition = round(position * 2);\n  return (doubledPosition + round(lineWidth)) % 2 === 0 ? doubledPosition / 2 : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n\nexports.subPixelOptimizeLine = subPixelOptimizeLine;\nexports.subPixelOptimizeRect = subPixelOptimizeRect;\nexports.subPixelOptimize = subPixelOptimize;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar assert = _util.assert;\nvar isArray = _util.isArray;\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} define\n * @return See the return of `createTask`.\n */\nfunction createTask(define) {\n  return new Task(define);\n}\n/**\n * @constructor\n * @param {Object} define\n * @param {Function} define.reset Custom reset\n * @param {Function} [define.plan] Returns 'reset' indicate reset immediately.\n * @param {Function} [define.count] count is used to determin data task.\n * @param {Function} [define.onDirty] count is used to determin data task.\n */\n\n\nfunction Task(define) {\n  define = define || {};\n  this._reset = define.reset;\n  this._plan = define.plan;\n  this._count = define.count;\n  this._onDirty = define.onDirty;\n  this._dirty = true; // Context must be specified implicitly, to\n  // avoid miss update context when model changed.\n\n  this.context;\n}\n\nvar taskProto = Task.prototype;\n/**\n * @param {Object} performArgs\n * @param {number} [performArgs.step] Specified step.\n * @param {number} [performArgs.skip] Skip customer perform call.\n * @param {number} [performArgs.modBy] Sampling window size.\n * @param {number} [performArgs.modDataCount] Sampling count.\n */\n\ntaskProto.perform = function (performArgs) {\n  var upTask = this._upstream;\n  var skip = performArgs && performArgs.skip; // TODO some refactor.\n  // Pull data. Must pull data each time, because context.data\n  // may be updated by Series.setData.\n\n  if (this._dirty && upTask) {\n    var context = this.context;\n    context.data = context.outputData = upTask.context.outputData;\n  }\n\n  if (this.__pipeline) {\n    this.__pipeline.currentTask = this;\n  }\n\n  var planResult;\n\n  if (this._plan && !skip) {\n    planResult = this._plan(this.context);\n  } // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n  // elements uniformed distributed when progress, especially when moving or zooming.\n\n\n  var lastModBy = normalizeModBy(this._modBy);\n  var lastModDataCount = this._modDataCount || 0;\n  var modBy = normalizeModBy(performArgs && performArgs.modBy);\n  var modDataCount = performArgs && performArgs.modDataCount || 0;\n\n  if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n    planResult = 'reset';\n  }\n\n  function normalizeModBy(val) {\n    !(val >= 1) && (val = 1); // jshint ignore:line\n\n    return val;\n  }\n\n  var forceFirstProgress;\n\n  if (this._dirty || planResult === 'reset') {\n    this._dirty = false;\n    forceFirstProgress = reset(this, skip);\n  }\n\n  this._modBy = modBy;\n  this._modDataCount = modDataCount;\n  var step = performArgs && performArgs.step;\n\n  if (upTask) {\n    this._dueEnd = upTask._outputDueEnd;\n  } // DataTask or overallTask\n  else {\n      this._dueEnd = this._count ? this._count(this.context) : Infinity;\n    } // Note: Stubs, that its host overall task let it has progress, has progress.\n  // If no progress, pass index from upstream to downstream each time plan called.\n\n\n  if (this._progress) {\n    var start = this._dueIndex;\n    var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n\n    if (!skip && (forceFirstProgress || start < end)) {\n      var progress = this._progress;\n\n      if (isArray(progress)) {\n        for (var i = 0; i < progress.length; i++) {\n          doProgress(this, progress[i], start, end, modBy, modDataCount);\n        }\n      } else {\n        doProgress(this, progress, start, end, modBy, modDataCount);\n      }\n    }\n\n    this._dueIndex = end; // If no `outputDueEnd`, assume that output data and\n    // input data is the same, so use `dueIndex` as `outputDueEnd`.\n\n    var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n    this._outputDueEnd = outputDueEnd;\n  } else {\n    // (1) Some overall task has no progress.\n    // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n    // This should always be performed so it can be passed to downstream.\n    this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n  }\n\n  return this.unfinished();\n};\n\nvar iterator = function () {\n  var end;\n  var current;\n  var modBy;\n  var modDataCount;\n  var winCount;\n  var it = {\n    reset: function (s, e, sStep, sCount) {\n      current = s;\n      end = e;\n      modBy = sStep;\n      modDataCount = sCount;\n      winCount = Math.ceil(modDataCount / modBy);\n      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n    }\n  };\n  return it;\n\n  function sequentialNext() {\n    return current < end ? current++ : null;\n  }\n\n  function modNext() {\n    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n    var result = current >= end ? null : dataIndex < modDataCount ? dataIndex // If modDataCount is smaller than data.count() (consider `appendData` case),\n    // Use normal linear rendering mode.\n    : current;\n    current++;\n    return result;\n  }\n}();\n\ntaskProto.dirty = function () {\n  this._dirty = true;\n  this._onDirty && this._onDirty(this.context);\n};\n\nfunction doProgress(taskIns, progress, start, end, modBy, modDataCount) {\n  iterator.reset(start, end, modBy, modDataCount);\n  taskIns._callingProgress = progress;\n\n  taskIns._callingProgress({\n    start: start,\n    end: end,\n    count: end - start,\n    next: iterator.next\n  }, taskIns.context);\n}\n\nfunction reset(taskIns, skip) {\n  taskIns._dueIndex = taskIns._outputDueEnd = taskIns._dueEnd = 0;\n  taskIns._settedOutputEnd = null;\n  var progress;\n  var forceFirstProgress;\n\n  if (!skip && taskIns._reset) {\n    progress = taskIns._reset(taskIns.context);\n\n    if (progress && progress.progress) {\n      forceFirstProgress = progress.forceFirstProgress;\n      progress = progress.progress;\n    } // To simplify no progress checking, array must has item.\n\n\n    if (isArray(progress) && !progress.length) {\n      progress = null;\n    }\n  }\n\n  taskIns._progress = progress;\n  taskIns._modBy = taskIns._modDataCount = null;\n  var downstream = taskIns._downstream;\n  downstream && downstream.dirty();\n  return forceFirstProgress;\n}\n/**\n * @return {boolean}\n */\n\n\ntaskProto.unfinished = function () {\n  return this._progress && this._dueIndex < this._dueEnd;\n};\n/**\n * @param {Object} downTask The downstream task.\n * @return {Object} The downstream task.\n */\n\n\ntaskProto.pipe = function (downTask) {\n  // If already downstream, do not dirty downTask.\n  if (this._downstream !== downTask || this._dirty) {\n    this._downstream = downTask;\n    downTask._upstream = this;\n    downTask.dirty();\n  }\n};\n\ntaskProto.dispose = function () {\n  if (this._disposed) {\n    return;\n  }\n\n  this._upstream && (this._upstream._downstream = null);\n  this._downstream && (this._downstream._upstream = null);\n  this._dirty = false;\n  this._disposed = true;\n};\n\ntaskProto.getUpstream = function () {\n  return this._upstream;\n};\n\ntaskProto.getDownstream = function () {\n  return this._downstream;\n};\n\ntaskProto.setOutputEnd = function (end) {\n  // This only happend in dataTask, dataZoom, map, currently.\n  // where dataZoom do not set end each time, but only set\n  // when reset. So we should record the setted end, in case\n  // that the stub of dataZoom perform again and earse the\n  // setted end by upstream.\n  this._outputDueEnd = this._settedOutputEnd = end;\n}; ///////////////////////////////////////////////////////////\n// For stream debug (Should be commented out after used!)\n// Usage: printTask(this, 'begin');\n// Usage: printTask(this, null, {someExtraProp});\n// function printTask(task, prefix, extra) {\n//     window.ecTaskUID == null && (window.ecTaskUID = 0);\n//     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n//     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n//     var props = [];\n//     if (task.__pipeline) {\n//         var val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n//         props.push({text: 'idx', value: val});\n//     } else {\n//         var stubCount = 0;\n//         task.agentStubMap.each(() => stubCount++);\n//         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n//     }\n//     props.push({text: 'uid', value: task.uidDebug});\n//     if (task.__pipeline) {\n//         props.push({text: 'pid', value: task.__pipeline.id});\n//         task.agent && props.push(\n//             {text: 'stubFor', value: task.agent.uidDebug}\n//         );\n//     }\n//     props.push(\n//         {text: 'dirty', value: task._dirty},\n//         {text: 'dueIndex', value: task._dueIndex},\n//         {text: 'dueEnd', value: task._dueEnd},\n//         {text: 'outputDueEnd', value: task._outputDueEnd}\n//     );\n//     if (extra) {\n//         Object.keys(extra).forEach(key => {\n//             props.push({text: key, value: extra[key]});\n//         });\n//     }\n//     var args = ['color: blue'];\n//     var msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n//         args.push('color: black', 'color: red'),\n//         `${item.text}: %c${item.value}`\n//     )).join('%c, ');\n//     console.log.apply(console, [msg].concat(args));\n//     // console.log(this);\n// }\n\n\nexports.createTask = createTask;","/**\n * zrender: id\n *\n * @author errorrik (errorrik@gmail.com)\n */\nvar idStart = 0x0907;\n\nfunction _default() {\n  return idStart++;\n}\n\nmodule.exports = _default;","var env = require(\"./env\");\n\nvar _fourPointsTransform = require(\"./fourPointsTransform\");\n\nvar buildTransformer = _fourPointsTransform.buildTransformer;\nvar EVENT_SAVED_PROP = '___zrEVENTSAVED';\nvar _calcOut = [];\n/**\n * Transform \"local coord\" from `elFrom` to `elTarget`.\n * \"local coord\": the coord based on the input `el`. The origin point is at\n *     the position of \"left: 0; top: 0;\" in the `el`.\n *\n * Support when CSS transform is used.\n *\n * Having the `out` (that is, `[outX, outY]`), we can create an DOM element\n * and set the CSS style as \"left: outX; top: outY;\" and append it to `elTarge`\n * to locate the element.\n *\n * For example, this code below positions a child of `document.body` on the event\n * point, no matter whether `body` has `margin`/`paddin`/`transfrom`/... :\n * ```js\n * transformLocalCoord(out, container, document.body, event.offsetX, event.offsetY);\n * if (!eqNaN(out[0])) {\n *     // Then locate the tip element on the event point.\n *     var tipEl = document.createElement('div');\n *     tipEl.style.cssText = 'position: absolute; left:' + out[0] + ';top:' + out[1] + ';';\n *     document.body.appendChild(tipEl);\n * }\n * ```\n *\n * Notice: In some env this method is not supported. If called, `out` will be `[NaN, NaN]`.\n *\n * @param {Array.<number>} out [inX: number, inY: number] The output..\n *        If can not transform, `out` will not be modified but return `false`.\n * @param {HTMLElement} elFrom The `[inX, inY]` is based on elFrom.\n * @param {HTMLElement} elTarget The `out` is based on elTarget.\n * @param {number} inX\n * @param {number} inY\n * @return {boolean} Whether transform successfully.\n */\n\nfunction transformLocalCoord(out, elFrom, elTarget, inX, inY) {\n  return transformCoordWithViewport(_calcOut, elFrom, inX, inY, true) && transformCoordWithViewport(out, elTarget, _calcOut[0], _calcOut[1]);\n}\n/**\n * Transform between a \"viewport coord\" and a \"local coord\".\n * \"viewport coord\": the coord based on the left-top corner of the viewport\n *     of the browser.\n * \"local coord\": the coord based on the input `el`. The origin point is at\n *     the position of \"left: 0; top: 0;\" in the `el`.\n *\n * Support the case when CSS transform is used on el.\n *\n * @param {Array.<number>} out [inX: number, inY: number] The output. If `inverse: false`,\n *        it represents \"local coord\", otherwise \"vireport coord\".\n *        If can not transform, `out` will not be modified but return `false`.\n * @param {HTMLElement} el The \"local coord\" is based on the `el`, see comment above.\n * @param {number} inX If `inverse: false`,\n *        it represents \"vireport coord\", otherwise \"local coord\".\n * @param {number} inY If `inverse: false`,\n *        it represents \"vireport coord\", otherwise \"local coord\".\n * @param {boolean} [inverse=false]\n *        `true`: from \"viewport coord\" to \"local coord\".\n *        `false`: from \"local coord\" to \"viewport coord\".\n * @return {boolean} Whether transform successfully.\n */\n\n\nfunction transformCoordWithViewport(out, el, inX, inY, inverse) {\n  if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n    var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\n    var markers = prepareCoordMarkers(el, saved);\n    var transformer = preparePointerTransformer(markers, saved, inverse);\n\n    if (transformer) {\n      transformer(out, inX, inY);\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction prepareCoordMarkers(el, saved) {\n  var markers = saved.markers;\n\n  if (markers) {\n    return markers;\n  }\n\n  markers = saved.markers = [];\n  var propLR = ['left', 'right'];\n  var propTB = ['top', 'bottom'];\n\n  for (var i = 0; i < 4; i++) {\n    var marker = document.createElement('div');\n    var stl = marker.style;\n    var idxLR = i % 2;\n    var idxTB = (i >> 1) % 2;\n    stl.cssText = ['position: absolute', 'visibility: hidden', 'padding: 0', 'margin: 0', 'border-width: 0', 'user-select: none', 'width:0', 'height:0', // 'width: 5px',\n    // 'height: 5px',\n    propLR[idxLR] + ':0', propTB[idxTB] + ':0', propLR[1 - idxLR] + ':auto', propTB[1 - idxTB] + ':auto', ''].join('!important;');\n    el.appendChild(marker);\n    markers.push(marker);\n  }\n\n  return markers;\n}\n\nfunction preparePointerTransformer(markers, saved, inverse) {\n  var transformerName = inverse ? 'invTrans' : 'trans';\n  var transformer = saved[transformerName];\n  var oldSrcCoords = saved.srcCoords;\n  var oldCoordTheSame = true;\n  var srcCoords = [];\n  var destCoords = [];\n\n  for (var i = 0; i < 4; i++) {\n    var rect = markers[i].getBoundingClientRect();\n    var ii = 2 * i;\n    var x = rect.left;\n    var y = rect.top;\n    srcCoords.push(x, y);\n    oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n    destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n  } // Cache to avoid time consuming of `buildTransformer`.\n\n\n  return oldCoordTheSame && transformer ? transformer : (saved.srcCoords = srcCoords, saved[transformerName] = inverse ? buildTransformer(destCoords, srcCoords) : buildTransformer(srcCoords, destCoords));\n}\n\nfunction isCanvasEl(el) {\n  return el.nodeName.toUpperCase() === 'CANVAS';\n}\n\nexports.transformLocalCoord = transformLocalCoord;\nexports.transformCoordWithViewport = transformCoordWithViewport;\nexports.isCanvasEl = isCanvasEl;","var guid = require(\"./core/guid\");\n\nvar Eventful = require(\"./mixin/Eventful\");\n\nvar Transformable = require(\"./mixin/Transformable\");\n\nvar Animatable = require(\"./mixin/Animatable\");\n\nvar zrUtil = require(\"./core/util\");\n\n/**\n * @alias module:zrender/Element\n * @constructor\n * @extends {module:zrender/mixin/Animatable}\n * @extends {module:zrender/mixin/Transformable}\n * @extends {module:zrender/mixin/Eventful}\n */\nvar Element = function (opts) {\n  // jshint ignore:line\n  Transformable.call(this, opts);\n  Eventful.call(this, opts);\n  Animatable.call(this, opts);\n  /**\n   * ID\n   * @type {string}\n   */\n\n  this.id = opts.id || guid();\n};\n\nElement.prototype = {\n  /**\n   * \n   * Element type\n   * @type {string}\n   */\n  type: 'element',\n\n  /**\n   * \n   * Element name\n   * @type {string}\n   */\n  name: '',\n\n  /**\n   * ZRender  element  zrender \n   * ZRender instance will be assigned when element is associated with zrender\n   * @name module:/zrender/Element#__zr\n   * @type {module:zrender/ZRender}\n   */\n  __zr: null,\n\n  /**\n   * true\n   * If ignore drawing and events of the element object\n   * @name module:/zrender/Element#ignore\n   * @type {boolean}\n   * @default false\n   */\n  ignore: false,\n\n  /**\n   * (shape) Group \n   * \n   * @type {module:zrender/graphic/Path}\n   * @see http://www.w3.org/TR/2dcontext/#clipping-region\n   * @readOnly\n   */\n  clipPath: null,\n\n  /**\n   *  Group\n   * @type {boolean}\n   */\n  isGroup: false,\n\n  /**\n   * Drift element\n   * @param  {number} dx dx on the global space\n   * @param  {number} dy dy on the global space\n   */\n  drift: function (dx, dy) {\n    switch (this.draggable) {\n      case 'horizontal':\n        dy = 0;\n        break;\n\n      case 'vertical':\n        dx = 0;\n        break;\n    }\n\n    var m = this.transform;\n\n    if (!m) {\n      m = this.transform = [1, 0, 0, 1, 0, 0];\n    }\n\n    m[4] += dx;\n    m[5] += dy;\n    this.decomposeTransform();\n    this.dirty(false);\n  },\n\n  /**\n   * Hook before update\n   */\n  beforeUpdate: function () {},\n\n  /**\n   * Hook after update\n   */\n  afterUpdate: function () {},\n\n  /**\n   * Update each frame\n   */\n  update: function () {\n    this.updateTransform();\n  },\n\n  /**\n   * @param  {Function} cb\n   * @param  {}   context\n   */\n  traverse: function (cb, context) {},\n\n  /**\n   * @protected\n   */\n  attrKV: function (key, value) {\n    if (key === 'position' || key === 'scale' || key === 'origin') {\n      // Copy the array\n      if (value) {\n        var target = this[key];\n\n        if (!target) {\n          target = this[key] = [];\n        }\n\n        target[0] = value[0];\n        target[1] = value[1];\n      }\n    } else {\n      this[key] = value;\n    }\n  },\n\n  /**\n   * Hide the element\n   */\n  hide: function () {\n    this.ignore = true;\n    this.__zr && this.__zr.refresh();\n  },\n\n  /**\n   * Show the element\n   */\n  show: function () {\n    this.ignore = false;\n    this.__zr && this.__zr.refresh();\n  },\n\n  /**\n   * @param {string|Object} key\n   * @param {*} value\n   */\n  attr: function (key, value) {\n    if (typeof key === 'string') {\n      this.attrKV(key, value);\n    } else if (zrUtil.isObject(key)) {\n      for (var name in key) {\n        if (key.hasOwnProperty(name)) {\n          this.attrKV(name, key[name]);\n        }\n      }\n    }\n\n    this.dirty(false);\n    return this;\n  },\n\n  /**\n   * @param {module:zrender/graphic/Path} clipPath\n   */\n  setClipPath: function (clipPath) {\n    var zr = this.__zr;\n\n    if (zr) {\n      clipPath.addSelfToZr(zr);\n    } // Remove previous clip path\n\n\n    if (this.clipPath && this.clipPath !== clipPath) {\n      this.removeClipPath();\n    }\n\n    this.clipPath = clipPath;\n    clipPath.__zr = zr;\n    clipPath.__clipTarget = this;\n    this.dirty(false);\n  },\n\n  /**\n   */\n  removeClipPath: function () {\n    var clipPath = this.clipPath;\n\n    if (clipPath) {\n      if (clipPath.__zr) {\n        clipPath.removeSelfFromZr(clipPath.__zr);\n      }\n\n      clipPath.__zr = null;\n      clipPath.__clipTarget = null;\n      this.clipPath = null;\n      this.dirty(false);\n    }\n  },\n\n  /**\n   * Add self from zrender instance.\n   * Not recursively because it will be invoked when element added to storage.\n   * @param {module:zrender/ZRender} zr\n   */\n  addSelfToZr: function (zr) {\n    this.__zr = zr; // \n\n    var animators = this.animators;\n\n    if (animators) {\n      for (var i = 0; i < animators.length; i++) {\n        zr.animation.addAnimator(animators[i]);\n      }\n    }\n\n    if (this.clipPath) {\n      this.clipPath.addSelfToZr(zr);\n    }\n  },\n\n  /**\n   * Remove self from zrender instance.\n   * Not recursively because it will be invoked when element added to storage.\n   * @param {module:zrender/ZRender} zr\n   */\n  removeSelfFromZr: function (zr) {\n    this.__zr = null; // \n\n    var animators = this.animators;\n\n    if (animators) {\n      for (var i = 0; i < animators.length; i++) {\n        zr.animation.removeAnimator(animators[i]);\n      }\n    }\n\n    if (this.clipPath) {\n      this.clipPath.removeSelfFromZr(zr);\n    }\n  }\n};\nzrUtil.mixin(Element, Animatable);\nzrUtil.mixin(Element, Transformable);\nzrUtil.mixin(Element, Eventful);\nvar _default = Element;\nmodule.exports = _default;","var Clip = require(\"./Clip\");\n\nvar color = require(\"../tool/color\");\n\nvar _util = require(\"../core/util\");\n\nvar isArrayLike = _util.isArrayLike;\n\n/**\n * @module echarts/animation/Animator\n */\nvar arraySlice = Array.prototype.slice;\n\nfunction defaultGetter(target, key) {\n  return target[key];\n}\n\nfunction defaultSetter(target, key, value) {\n  target[key] = value;\n}\n/**\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} percent\n * @return {number}\n */\n\n\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n/**\n * @param  {string} p0\n * @param  {string} p1\n * @param  {number} percent\n * @return {string}\n */\n\n\nfunction interpolateString(p0, p1, percent) {\n  return percent > 0.5 ? p1 : p0;\n}\n/**\n * @param  {Array} p0\n * @param  {Array} p1\n * @param  {number} percent\n * @param  {Array} out\n * @param  {number} arrDim\n */\n\n\nfunction interpolateArray(p0, p1, percent, out, arrDim) {\n  var len = p0.length;\n\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n  } else {\n    var len2 = len && p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n      }\n    }\n  }\n} // arr0 is source array, arr1 is target array.\n// Do some preprocess to avoid error happened when interpolating from arr0 to arr1\n\n\nfunction fillArr(arr0, arr1, arrDim) {\n  var arr0Len = arr0.length;\n  var arr1Len = arr1.length;\n\n  if (arr0Len !== arr1Len) {\n    // FIXME Not work for TypedArray\n    var isPreviousLarger = arr0Len > arr1Len;\n\n    if (isPreviousLarger) {\n      // Cut the previous\n      arr0.length = arr1Len;\n    } else {\n      // Fill the previous\n      for (var i = arr0Len; i < arr1Len; i++) {\n        arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n      }\n    }\n  } // Handling NaN value\n\n\n  var len2 = arr0[0] && arr0[0].length;\n\n  for (var i = 0; i < arr0.length; i++) {\n    if (arrDim === 1) {\n      if (isNaN(arr0[i])) {\n        arr0[i] = arr1[i];\n      }\n    } else {\n      for (var j = 0; j < len2; j++) {\n        if (isNaN(arr0[i][j])) {\n          arr0[i][j] = arr1[i][j];\n        }\n      }\n    }\n  }\n}\n/**\n * @param  {Array} arr0\n * @param  {Array} arr1\n * @param  {number} arrDim\n * @return {boolean}\n */\n\n\nfunction isArraySame(arr0, arr1, arrDim) {\n  if (arr0 === arr1) {\n    return true;\n  }\n\n  var len = arr0.length;\n\n  if (len !== arr1.length) {\n    return false;\n  }\n\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      if (arr0[i] !== arr1[i]) {\n        return false;\n      }\n    }\n  } else {\n    var len2 = arr0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        if (arr0[i][j] !== arr1[i][j]) {\n          return false;\n        }\n      }\n    }\n  }\n\n  return true;\n}\n/**\n * Catmull Rom interpolate array\n * @param  {Array} p0\n * @param  {Array} p1\n * @param  {Array} p2\n * @param  {Array} p3\n * @param  {number} t\n * @param  {number} t2\n * @param  {number} t3\n * @param  {Array} out\n * @param  {number} arrDim\n */\n\n\nfunction catmullRomInterpolateArray(p0, p1, p2, p3, t, t2, t3, out, arrDim) {\n  var len = p0.length;\n\n  if (arrDim === 1) {\n    for (var i = 0; i < len; i++) {\n      out[i] = catmullRomInterpolate(p0[i], p1[i], p2[i], p3[i], t, t2, t3);\n    }\n  } else {\n    var len2 = p0[0].length;\n\n    for (var i = 0; i < len; i++) {\n      for (var j = 0; j < len2; j++) {\n        out[i][j] = catmullRomInterpolate(p0[i][j], p1[i][j], p2[i][j], p3[i][j], t, t2, t3);\n      }\n    }\n  }\n}\n/**\n * Catmull Rom interpolate number\n * @param  {number} p0\n * @param  {number} p1\n * @param  {number} p2\n * @param  {number} p3\n * @param  {number} t\n * @param  {number} t2\n * @param  {number} t3\n * @return {number}\n */\n\n\nfunction catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {\n  var v0 = (p2 - p0) * 0.5;\n  var v1 = (p3 - p1) * 0.5;\n  return (2 * (p1 - p2) + v0 + v1) * t3 + (-3 * (p1 - p2) - 2 * v0 - v1) * t2 + v0 * t + p1;\n}\n\nfunction cloneValue(value) {\n  if (isArrayLike(value)) {\n    var len = value.length;\n\n    if (isArrayLike(value[0])) {\n      var ret = [];\n\n      for (var i = 0; i < len; i++) {\n        ret.push(arraySlice.call(value[i]));\n      }\n\n      return ret;\n    }\n\n    return arraySlice.call(value);\n  }\n\n  return value;\n}\n\nfunction rgba2String(rgba) {\n  rgba[0] = Math.floor(rgba[0]);\n  rgba[1] = Math.floor(rgba[1]);\n  rgba[2] = Math.floor(rgba[2]);\n  return 'rgba(' + rgba.join(',') + ')';\n}\n\nfunction getArrayDim(keyframes) {\n  var lastValue = keyframes[keyframes.length - 1].value;\n  return isArrayLike(lastValue && lastValue[0]) ? 2 : 1;\n}\n\nfunction createTrackClip(animator, easing, oneTrackDone, keyframes, propName, forceAnimate) {\n  var getter = animator._getter;\n  var setter = animator._setter;\n  var useSpline = easing === 'spline';\n  var trackLen = keyframes.length;\n\n  if (!trackLen) {\n    return;\n  } // Guess data type\n\n\n  var firstVal = keyframes[0].value;\n  var isValueArray = isArrayLike(firstVal);\n  var isValueColor = false;\n  var isValueString = false; // For vertices morphing\n\n  var arrDim = isValueArray ? getArrayDim(keyframes) : 0;\n  var trackMaxTime; // Sort keyframe as ascending\n\n  keyframes.sort(function (a, b) {\n    return a.time - b.time;\n  });\n  trackMaxTime = keyframes[trackLen - 1].time; // Percents of each keyframe\n\n  var kfPercents = []; // Value of each keyframe\n\n  var kfValues = [];\n  var prevValue = keyframes[0].value;\n  var isAllValueEqual = true;\n\n  for (var i = 0; i < trackLen; i++) {\n    kfPercents.push(keyframes[i].time / trackMaxTime); // Assume value is a color when it is a string\n\n    var value = keyframes[i].value; // Check if value is equal, deep check if value is array\n\n    if (!(isValueArray && isArraySame(value, prevValue, arrDim) || !isValueArray && value === prevValue)) {\n      isAllValueEqual = false;\n    }\n\n    prevValue = value; // Try converting a string to a color array\n\n    if (typeof value === 'string') {\n      var colorArray = color.parse(value);\n\n      if (colorArray) {\n        value = colorArray;\n        isValueColor = true;\n      } else {\n        isValueString = true;\n      }\n    }\n\n    kfValues.push(value);\n  }\n\n  if (!forceAnimate && isAllValueEqual) {\n    return;\n  }\n\n  var lastValue = kfValues[trackLen - 1]; // Polyfill array and NaN value\n\n  for (var i = 0; i < trackLen - 1; i++) {\n    if (isValueArray) {\n      fillArr(kfValues[i], lastValue, arrDim);\n    } else {\n      if (isNaN(kfValues[i]) && !isNaN(lastValue) && !isValueString && !isValueColor) {\n        kfValues[i] = lastValue;\n      }\n    }\n  }\n\n  isValueArray && fillArr(getter(animator._target, propName), lastValue, arrDim); // Cache the key of last frame to speed up when\n  // animation playback is sequency\n\n  var lastFrame = 0;\n  var lastFramePercent = 0;\n  var start;\n  var w;\n  var p0;\n  var p1;\n  var p2;\n  var p3;\n\n  if (isValueColor) {\n    var rgba = [0, 0, 0, 0];\n  }\n\n  var onframe = function (target, percent) {\n    // Find the range keyframes\n    // kf1-----kf2---------current--------kf3\n    // find kf2 and kf3 and do interpolation\n    var frame; // In the easing function like elasticOut, percent may less than 0\n\n    if (percent < 0) {\n      frame = 0;\n    } else if (percent < lastFramePercent) {\n      // Start from next key\n      // PENDING start from lastFrame ?\n      start = Math.min(lastFrame + 1, trackLen - 1);\n\n      for (frame = start; frame >= 0; frame--) {\n        if (kfPercents[frame] <= percent) {\n          break;\n        }\n      } // PENDING really need to do this ?\n\n\n      frame = Math.min(frame, trackLen - 2);\n    } else {\n      for (frame = lastFrame; frame < trackLen; frame++) {\n        if (kfPercents[frame] > percent) {\n          break;\n        }\n      }\n\n      frame = Math.min(frame - 1, trackLen - 2);\n    }\n\n    lastFrame = frame;\n    lastFramePercent = percent;\n    var range = kfPercents[frame + 1] - kfPercents[frame];\n\n    if (range === 0) {\n      return;\n    } else {\n      w = (percent - kfPercents[frame]) / range;\n    }\n\n    if (useSpline) {\n      p1 = kfValues[frame];\n      p0 = kfValues[frame === 0 ? frame : frame - 1];\n      p2 = kfValues[frame > trackLen - 2 ? trackLen - 1 : frame + 1];\n      p3 = kfValues[frame > trackLen - 3 ? trackLen - 1 : frame + 2];\n\n      if (isValueArray) {\n        catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, getter(target, propName), arrDim);\n      } else {\n        var value;\n\n        if (isValueColor) {\n          value = catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, rgba, 1);\n          value = rgba2String(rgba);\n        } else if (isValueString) {\n          // String is step(0.5)\n          return interpolateString(p1, p2, w);\n        } else {\n          value = catmullRomInterpolate(p0, p1, p2, p3, w, w * w, w * w * w);\n        }\n\n        setter(target, propName, value);\n      }\n    } else {\n      if (isValueArray) {\n        interpolateArray(kfValues[frame], kfValues[frame + 1], w, getter(target, propName), arrDim);\n      } else {\n        var value;\n\n        if (isValueColor) {\n          interpolateArray(kfValues[frame], kfValues[frame + 1], w, rgba, 1);\n          value = rgba2String(rgba);\n        } else if (isValueString) {\n          // String is step(0.5)\n          return interpolateString(kfValues[frame], kfValues[frame + 1], w);\n        } else {\n          value = interpolateNumber(kfValues[frame], kfValues[frame + 1], w);\n        }\n\n        setter(target, propName, value);\n      }\n    }\n  };\n\n  var clip = new Clip({\n    target: animator._target,\n    life: trackMaxTime,\n    loop: animator._loop,\n    delay: animator._delay,\n    onframe: onframe,\n    ondestroy: oneTrackDone\n  });\n\n  if (easing && easing !== 'spline') {\n    clip.easing = easing;\n  }\n\n  return clip;\n}\n/**\n * @alias module:zrender/animation/Animator\n * @constructor\n * @param {Object} target\n * @param {boolean} loop\n * @param {Function} getter\n * @param {Function} setter\n */\n\n\nvar Animator = function (target, loop, getter, setter) {\n  this._tracks = {};\n  this._target = target;\n  this._loop = loop || false;\n  this._getter = getter || defaultGetter;\n  this._setter = setter || defaultSetter;\n  this._clipCount = 0;\n  this._delay = 0;\n  this._doneList = [];\n  this._onframeList = [];\n  this._clipList = [];\n};\n\nAnimator.prototype = {\n  /**\n   * Set Animation keyframe\n   * @param  {number} time ms\n   * @param  {Object} props key-value\n   * @return {module:zrender/animation/Animator}\n   */\n  when: function (time\n  /* ms */\n  , props) {\n    var tracks = this._tracks;\n\n    for (var propName in props) {\n      if (!props.hasOwnProperty(propName)) {\n        continue;\n      }\n\n      if (!tracks[propName]) {\n        tracks[propName] = []; // Invalid value\n\n        var value = this._getter(this._target, propName);\n\n        if (value == null) {\n          // zrLog('Invalid property ' + propName);\n          continue;\n        } // If time is 0\n        //  Then props is given initialize value\n        // Else\n        //  Initialize value from current prop value\n\n\n        if (time !== 0) {\n          tracks[propName].push({\n            time: 0,\n            value: cloneValue(value)\n          });\n        }\n      }\n\n      tracks[propName].push({\n        time: time,\n        value: props[propName]\n      });\n    }\n\n    return this;\n  },\n\n  /**\n   * \n   * @param  {Function} callback\n   * @return {module:zrender/animation/Animator}\n   */\n  during: function (callback) {\n    this._onframeList.push(callback);\n\n    return this;\n  },\n  pause: function () {\n    for (var i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].pause();\n    }\n\n    this._paused = true;\n  },\n  resume: function () {\n    for (var i = 0; i < this._clipList.length; i++) {\n      this._clipList[i].resume();\n    }\n\n    this._paused = false;\n  },\n  isPaused: function () {\n    return !!this._paused;\n  },\n  _doneCallback: function () {\n    // Clear all tracks\n    this._tracks = {}; // Clear all clips\n\n    this._clipList.length = 0;\n    var doneList = this._doneList;\n    var len = doneList.length;\n\n    for (var i = 0; i < len; i++) {\n      doneList[i].call(this);\n    }\n  },\n\n  /**\n   * Start the animation\n   * @param  {string|Function} [easing]\n   *         {@link module:zrender/animation/easing}\n   * @param  {boolean} forceAnimate\n   * @return {module:zrender/animation/Animator}\n   */\n  start: function (easing, forceAnimate) {\n    var self = this;\n    var clipCount = 0;\n\n    var oneTrackDone = function () {\n      clipCount--;\n\n      if (!clipCount) {\n        self._doneCallback();\n      }\n    };\n\n    var lastClip;\n\n    for (var propName in this._tracks) {\n      if (!this._tracks.hasOwnProperty(propName)) {\n        continue;\n      }\n\n      var clip = createTrackClip(this, easing, oneTrackDone, this._tracks[propName], propName, forceAnimate);\n\n      if (clip) {\n        this._clipList.push(clip);\n\n        clipCount++; // If start after added to animation\n\n        if (this.animation) {\n          this.animation.addClip(clip);\n        }\n\n        lastClip = clip;\n      }\n    } // Add during callback on the last clip\n\n\n    if (lastClip) {\n      var oldOnFrame = lastClip.onframe;\n\n      lastClip.onframe = function (target, percent) {\n        oldOnFrame(target, percent);\n\n        for (var i = 0; i < self._onframeList.length; i++) {\n          self._onframeList[i](target, percent);\n        }\n      };\n    } // This optimization will help the case that in the upper application\n    // the view may be refreshed frequently, where animation will be\n    // called repeatly but nothing changed.\n\n\n    if (!clipCount) {\n      this._doneCallback();\n    }\n\n    return this;\n  },\n\n  /**\n   * Stop animation\n   * @param {boolean} forwardToLast If move to last frame before stop\n   */\n  stop: function (forwardToLast) {\n    var clipList = this._clipList;\n    var animation = this.animation;\n\n    for (var i = 0; i < clipList.length; i++) {\n      var clip = clipList[i];\n\n      if (forwardToLast) {\n        // Move to last frame before stop\n        clip.onframe(this._target, 1);\n      }\n\n      animation && animation.removeClip(clip);\n    }\n\n    clipList.length = 0;\n  },\n\n  /**\n   * Set when animation delay starts\n   * @param  {number} time ms\n   * @return {module:zrender/animation/Animator}\n   */\n  delay: function (time) {\n    this._delay = time;\n    return this;\n  },\n\n  /**\n   * Add callback for animation end\n   * @param  {Function} cb\n   * @return {module:zrender/animation/Animator}\n   */\n  done: function (cb) {\n    if (cb) {\n      this._doneList.push(cb);\n    }\n\n    return this;\n  },\n\n  /**\n   * @return {Array.<module:zrender/animation/Clip>}\n   */\n  getClips: function () {\n    return this._clipList;\n  }\n};\nvar _default = Animator;\nmodule.exports = _default;","// Simple LRU cache use doubly linked list\n// @module zrender/core/LRU\n\n/**\n * Simple double linked list. Compared with array, it has O(1) remove operation.\n * @constructor\n */\nvar LinkedList = function () {\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n  this.head = null;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.tail = null;\n  this._len = 0;\n};\n\nvar linkedListProto = LinkedList.prototype;\n/**\n * Insert a new value at the tail\n * @param  {} val\n * @return {module:zrender/core/LRU~Entry}\n */\n\nlinkedListProto.insert = function (val) {\n  var entry = new Entry(val);\n  this.insertEntry(entry);\n  return entry;\n};\n/**\n * Insert an entry at the tail\n * @param  {module:zrender/core/LRU~Entry} entry\n */\n\n\nlinkedListProto.insertEntry = function (entry) {\n  if (!this.head) {\n    this.head = this.tail = entry;\n  } else {\n    this.tail.next = entry;\n    entry.prev = this.tail;\n    entry.next = null;\n    this.tail = entry;\n  }\n\n  this._len++;\n};\n/**\n * Remove entry.\n * @param  {module:zrender/core/LRU~Entry} entry\n */\n\n\nlinkedListProto.remove = function (entry) {\n  var prev = entry.prev;\n  var next = entry.next;\n\n  if (prev) {\n    prev.next = next;\n  } else {\n    // Is head\n    this.head = next;\n  }\n\n  if (next) {\n    next.prev = prev;\n  } else {\n    // Is tail\n    this.tail = prev;\n  }\n\n  entry.next = entry.prev = null;\n  this._len--;\n};\n/**\n * @return {number}\n */\n\n\nlinkedListProto.len = function () {\n  return this._len;\n};\n/**\n * Clear list\n */\n\n\nlinkedListProto.clear = function () {\n  this.head = this.tail = null;\n  this._len = 0;\n};\n/**\n * @constructor\n * @param {} val\n */\n\n\nvar Entry = function (val) {\n  /**\n   * @type {}\n   */\n  this.value = val;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.next;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.prev;\n};\n/**\n * LRU Cache\n * @constructor\n * @alias module:zrender/core/LRU\n */\n\n\nvar LRU = function (maxSize) {\n  this._list = new LinkedList();\n  this._map = {};\n  this._maxSize = maxSize || 10;\n  this._lastRemovedEntry = null;\n};\n\nvar LRUProto = LRU.prototype;\n/**\n * @param  {string} key\n * @param  {} value\n * @return {} Removed value\n */\n\nLRUProto.put = function (key, value) {\n  var list = this._list;\n  var map = this._map;\n  var removed = null;\n\n  if (map[key] == null) {\n    var len = list.len(); // Reuse last removed entry\n\n    var entry = this._lastRemovedEntry;\n\n    if (len >= this._maxSize && len > 0) {\n      // Remove the least recently used\n      var leastUsedEntry = list.head;\n      list.remove(leastUsedEntry);\n      delete map[leastUsedEntry.key];\n      removed = leastUsedEntry.value;\n      this._lastRemovedEntry = leastUsedEntry;\n    }\n\n    if (entry) {\n      entry.value = value;\n    } else {\n      entry = new Entry(value);\n    }\n\n    entry.key = key;\n    list.insertEntry(entry);\n    map[key] = entry;\n  }\n\n  return removed;\n};\n/**\n * @param  {string} key\n * @return {}\n */\n\n\nLRUProto.get = function (key) {\n  var entry = this._map[key];\n  var list = this._list;\n\n  if (entry != null) {\n    // Put the latest used entry in the tail\n    if (entry !== list.tail) {\n      list.remove(entry);\n      list.insertEntry(entry);\n    }\n\n    return entry.value;\n  }\n};\n/**\n * Clear the cache\n */\n\n\nLRUProto.clear = function () {\n  this._list.clear();\n\n  this._map = {};\n};\n\nvar _default = LRU;\nmodule.exports = _default;","var SHADOW_PROPS = {\n  'shadowBlur': 1,\n  'shadowOffsetX': 1,\n  'shadowOffsetY': 1,\n  'textShadowBlur': 1,\n  'textShadowOffsetX': 1,\n  'textShadowOffsetY': 1,\n  'textBoxShadowBlur': 1,\n  'textBoxShadowOffsetX': 1,\n  'textBoxShadowOffsetY': 1\n};\n\nfunction _default(ctx, propName, value) {\n  if (SHADOW_PROPS.hasOwnProperty(propName)) {\n    return value *= ctx.dpr;\n  }\n\n  return value;\n}\n\nmodule.exports = _default;","var Pattern = function (image, repeat) {\n  // Should do nothing more in this constructor. Because gradient can be\n  // declard by `color: {image: ...}`, where this constructor will not be called.\n  this.image = image;\n  this.repeat = repeat; // Can be cloned\n\n  this.type = 'pattern';\n};\n\nPattern.prototype.getCanvasPattern = function (ctx) {\n  return ctx.createPattern(this.image, this.repeat || 'repeat');\n};\n\nvar _default = Pattern;\nmodule.exports = _default;","var _default = typeof window !== 'undefined' && (window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || // https://github.com/ecomfe/zrender/issues/189#issuecomment-224919809\nwindow.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window) || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame) || function (func) {\n  setTimeout(func, 16);\n};\n\nmodule.exports = _default;","/**\n * @param {Object} ctx\n * @param {Object} shape\n * @param {number} shape.x\n * @param {number} shape.y\n * @param {number} shape.width\n * @param {number} shape.height\n * @param {number} shape.r\n */\nfunction buildPath(ctx, shape) {\n  var x = shape.x;\n  var y = shape.y;\n  var width = shape.width;\n  var height = shape.height;\n  var r = shape.r;\n  var r1;\n  var r2;\n  var r3;\n  var r4; // Convert width and height to positive for better borderRadius\n\n  if (width < 0) {\n    x = x + width;\n    width = -width;\n  }\n\n  if (height < 0) {\n    y = y + height;\n    height = -height;\n  }\n\n  if (typeof r === 'number') {\n    r1 = r2 = r3 = r4 = r;\n  } else if (r instanceof Array) {\n    if (r.length === 1) {\n      r1 = r2 = r3 = r4 = r[0];\n    } else if (r.length === 2) {\n      r1 = r3 = r[0];\n      r2 = r4 = r[1];\n    } else if (r.length === 3) {\n      r1 = r[0];\n      r2 = r4 = r[1];\n      r3 = r[2];\n    } else {\n      r1 = r[0];\n      r2 = r[1];\n      r3 = r[2];\n      r4 = r[3];\n    }\n  } else {\n    r1 = r2 = r3 = r4 = 0;\n  }\n\n  var total;\n\n  if (r1 + r2 > width) {\n    total = r1 + r2;\n    r1 *= width / total;\n    r2 *= width / total;\n  }\n\n  if (r3 + r4 > width) {\n    total = r3 + r4;\n    r3 *= width / total;\n    r4 *= width / total;\n  }\n\n  if (r2 + r3 > height) {\n    total = r2 + r3;\n    r2 *= height / total;\n    r3 *= height / total;\n  }\n\n  if (r1 + r4 > height) {\n    total = r1 + r4;\n    r1 *= height / total;\n    r4 *= height / total;\n  }\n\n  ctx.moveTo(x + r1, y);\n  ctx.lineTo(x + width - r2, y);\n  r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n  ctx.lineTo(x + width, y + height - r3);\n  r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n  ctx.lineTo(x + r4, y + height);\n  r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n  ctx.lineTo(x, y + r1);\n  r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n}\n\nexports.buildPath = buildPath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar filter = _util.filter;\nvar map = _util.map;\nvar isArray = _util.isArray;\nvar indexOf = _util.indexOf;\nvar isObject = _util.isObject;\nvar isString = _util.isString;\nvar createHashMap = _util.createHashMap;\nvar assert = _util.assert;\nvar clone = _util.clone;\nvar merge = _util.merge;\nvar extend = _util.extend;\nvar mixin = _util.mixin;\n\nvar modelUtil = require(\"../util/model\");\n\nvar Model = require(\"./Model\");\n\nvar ComponentModel = require(\"./Component\");\n\nvar globalDefault = require(\"./globalDefault\");\n\nvar colorPaletteMixin = require(\"./mixin/colorPalette\");\n\nvar _sourceHelper = require(\"../data/helper/sourceHelper\");\n\nvar resetSourceDefaulter = _sourceHelper.resetSourceDefaulter;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * ECharts global model\n *\n * @module {echarts/model/Global}\n */\n\n/**\n * Caution: If the mechanism should be changed some day, these cases\n * should be considered:\n *\n * (1) In `merge option` mode, if using the same option to call `setOption`\n * many times, the result should be the same (try our best to ensure that).\n * (2) In `merge option` mode, if a component has no id/name specified, it\n * will be merged by index, and the result sequence of the components is\n * consistent to the original sequence.\n * (3) `reset` feature (in toolbox). Find detailed info in comments about\n * `mergeOption` in module:echarts/model/OptionManager.\n */\nvar OPTION_INNER_KEY = '\\0_ec_inner';\n/**\n * @alias module:echarts/model/Global\n *\n * @param {Object} option\n * @param {module:echarts/model/Model} parentModel\n * @param {Object} theme\n */\n\nvar GlobalModel = Model.extend({\n  init: function (option, parentModel, theme, optionManager) {\n    theme = theme || {};\n    this.option = null; // Mark as not initialized.\n\n    /**\n     * @type {module:echarts/model/Model}\n     * @private\n     */\n\n    this._theme = new Model(theme);\n    /**\n     * @type {module:echarts/model/OptionManager}\n     */\n\n    this._optionManager = optionManager;\n  },\n  setOption: function (option, optionPreprocessorFuncs) {\n    assert(!(OPTION_INNER_KEY in option), 'please use chart.getOption()');\n\n    this._optionManager.setOption(option, optionPreprocessorFuncs);\n\n    this.resetOption(null);\n  },\n\n  /**\n   * @param {string} type null/undefined: reset all.\n   *                      'recreate': force recreate all.\n   *                      'timeline': only reset timeline option\n   *                      'media': only reset media query option\n   * @return {boolean} Whether option changed.\n   */\n  resetOption: function (type) {\n    var optionChanged = false;\n    var optionManager = this._optionManager;\n\n    if (!type || type === 'recreate') {\n      var baseOption = optionManager.mountOption(type === 'recreate');\n\n      if (!this.option || type === 'recreate') {\n        initBase.call(this, baseOption);\n      } else {\n        this.restoreData();\n        this.mergeOption(baseOption);\n      }\n\n      optionChanged = true;\n    }\n\n    if (type === 'timeline' || type === 'media') {\n      this.restoreData();\n    }\n\n    if (!type || type === 'recreate' || type === 'timeline') {\n      var timelineOption = optionManager.getTimelineOption(this);\n      timelineOption && (this.mergeOption(timelineOption), optionChanged = true);\n    }\n\n    if (!type || type === 'recreate' || type === 'media') {\n      var mediaOptions = optionManager.getMediaOption(this, this._api);\n\n      if (mediaOptions.length) {\n        each(mediaOptions, function (mediaOption) {\n          this.mergeOption(mediaOption, optionChanged = true);\n        }, this);\n      }\n    }\n\n    return optionChanged;\n  },\n\n  /**\n   * @protected\n   */\n  mergeOption: function (newOption) {\n    var option = this.option;\n    var componentsMap = this._componentsMap;\n    var newCptTypes = [];\n    resetSourceDefaulter(this); // If no component class, merge directly.\n    // For example: color, animaiton options, etc.\n\n    each(newOption, function (componentOption, mainType) {\n      if (componentOption == null) {\n        return;\n      }\n\n      if (!ComponentModel.hasClass(mainType)) {\n        // globalSettingTask.dirty();\n        option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\n      } else if (mainType) {\n        newCptTypes.push(mainType);\n      }\n    });\n    ComponentModel.topologicalTravel(newCptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n\n    function visitComponent(mainType, dependencies) {\n      var newCptOptionList = modelUtil.normalizeToArray(newOption[mainType]);\n      var mapResult = modelUtil.mappingToExists(componentsMap.get(mainType), newCptOptionList);\n      modelUtil.makeIdAndName(mapResult); // Set mainType and complete subType.\n\n      each(mapResult, function (item, index) {\n        var opt = item.option;\n\n        if (isObject(opt)) {\n          item.keyInfo.mainType = mainType;\n          item.keyInfo.subType = determineSubType(mainType, opt, item.exist);\n        }\n      });\n      var dependentModels = getComponentsByTypes(componentsMap, dependencies);\n      option[mainType] = [];\n      componentsMap.set(mainType, []);\n      each(mapResult, function (resultItem, index) {\n        var componentModel = resultItem.exist;\n        var newCptOption = resultItem.option;\n        assert(isObject(newCptOption) || componentModel, 'Empty component definition'); // Consider where is no new option and should be merged using {},\n        // see removeEdgeAndAdd in topologicalTravel and\n        // ComponentModel.getAllClassMainTypes.\n\n        if (!newCptOption) {\n          componentModel.mergeOption({}, this);\n          componentModel.optionUpdated({}, false);\n        } else {\n          var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, true);\n\n          if (componentModel && componentModel.constructor === ComponentModelClass) {\n            componentModel.name = resultItem.keyInfo.name; // componentModel.settingTask && componentModel.settingTask.dirty();\n\n            componentModel.mergeOption(newCptOption, this);\n            componentModel.optionUpdated(newCptOption, false);\n          } else {\n            // PENDING Global as parent ?\n            var extraOpt = extend({\n              dependentModels: dependentModels,\n              componentIndex: index\n            }, resultItem.keyInfo);\n            componentModel = new ComponentModelClass(newCptOption, this, this, extraOpt);\n            extend(componentModel, extraOpt);\n            componentModel.init(newCptOption, this, this, extraOpt); // Call optionUpdated after init.\n            // newCptOption has been used as componentModel.option\n            // and may be merged with theme and default, so pass null\n            // to avoid confusion.\n\n            componentModel.optionUpdated(null, true);\n          }\n        }\n\n        componentsMap.get(mainType)[index] = componentModel;\n        option[mainType][index] = componentModel.option;\n      }, this); // Backup series for filtering.\n\n      if (mainType === 'series') {\n        createSeriesIndices(this, componentsMap.get('series'));\n      }\n    }\n\n    this._seriesIndicesMap = createHashMap(this._seriesIndices = this._seriesIndices || []);\n  },\n\n  /**\n   * Get option for output (cloned option and inner info removed)\n   * @public\n   * @return {Object}\n   */\n  getOption: function () {\n    var option = clone(this.option);\n    each(option, function (opts, mainType) {\n      if (ComponentModel.hasClass(mainType)) {\n        var opts = modelUtil.normalizeToArray(opts);\n\n        for (var i = opts.length - 1; i >= 0; i--) {\n          // Remove options with inner id.\n          if (modelUtil.isIdInner(opts[i])) {\n            opts.splice(i, 1);\n          }\n        }\n\n        option[mainType] = opts;\n      }\n    });\n    delete option[OPTION_INNER_KEY];\n    return option;\n  },\n\n  /**\n   * @return {module:echarts/model/Model}\n   */\n  getTheme: function () {\n    return this._theme;\n  },\n\n  /**\n   * @param {string} mainType\n   * @param {number} [idx=0]\n   * @return {module:echarts/model/Component}\n   */\n  getComponent: function (mainType, idx) {\n    var list = this._componentsMap.get(mainType);\n\n    if (list) {\n      return list[idx || 0];\n    }\n  },\n\n  /**\n   * If none of index and id and name used, return all components with mainType.\n   * @param {Object} condition\n   * @param {string} condition.mainType\n   * @param {string} [condition.subType] If ignore, only query by mainType\n   * @param {number|Array.<number>} [condition.index] Either input index or id or name.\n   * @param {string|Array.<string>} [condition.id] Either input index or id or name.\n   * @param {string|Array.<string>} [condition.name] Either input index or id or name.\n   * @return {Array.<module:echarts/model/Component>}\n   */\n  queryComponents: function (condition) {\n    var mainType = condition.mainType;\n\n    if (!mainType) {\n      return [];\n    }\n\n    var index = condition.index;\n    var id = condition.id;\n    var name = condition.name;\n\n    var cpts = this._componentsMap.get(mainType);\n\n    if (!cpts || !cpts.length) {\n      return [];\n    }\n\n    var result;\n\n    if (index != null) {\n      if (!isArray(index)) {\n        index = [index];\n      }\n\n      result = filter(map(index, function (idx) {\n        return cpts[idx];\n      }), function (val) {\n        return !!val;\n      });\n    } else if (id != null) {\n      var isIdArray = isArray(id);\n      result = filter(cpts, function (cpt) {\n        return isIdArray && indexOf(id, cpt.id) >= 0 || !isIdArray && cpt.id === id;\n      });\n    } else if (name != null) {\n      var isNameArray = isArray(name);\n      result = filter(cpts, function (cpt) {\n        return isNameArray && indexOf(name, cpt.name) >= 0 || !isNameArray && cpt.name === name;\n      });\n    } else {\n      // Return all components with mainType\n      result = cpts.slice();\n    }\n\n    return filterBySubType(result, condition);\n  },\n\n  /**\n   * The interface is different from queryComponents,\n   * which is convenient for inner usage.\n   *\n   * @usage\n   * var result = findComponents(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\n   * );\n   * var result = findComponents(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\n   * );\n   * var result = findComponents(\n   *     {mainType: 'series',\n   *     filter: function (model, index) {...}}\n   * );\n   * // result like [component0, componnet1, ...]\n   *\n   * @param {Object} condition\n   * @param {string} condition.mainType Mandatory.\n   * @param {string} [condition.subType] Optional.\n   * @param {Object} [condition.query] like {xxxIndex, xxxId, xxxName},\n   *        where xxx is mainType.\n   *        If query attribute is null/undefined or has no index/id/name,\n   *        do not filtering by query conditions, which is convenient for\n   *        no-payload situations or when target of action is global.\n   * @param {Function} [condition.filter] parameter: component, return boolean.\n   * @return {Array.<module:echarts/model/Component>}\n   */\n  findComponents: function (condition) {\n    var query = condition.query;\n    var mainType = condition.mainType;\n    var queryCond = getQueryCond(query);\n    var result = queryCond ? this.queryComponents(queryCond) : this._componentsMap.get(mainType);\n    return doFilter(filterBySubType(result, condition));\n\n    function getQueryCond(q) {\n      var indexAttr = mainType + 'Index';\n      var idAttr = mainType + 'Id';\n      var nameAttr = mainType + 'Name';\n      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n        mainType: mainType,\n        // subType will be filtered finally.\n        index: q[indexAttr],\n        id: q[idAttr],\n        name: q[nameAttr]\n      } : null;\n    }\n\n    function doFilter(res) {\n      return condition.filter ? filter(res, condition.filter) : res;\n    }\n  },\n\n  /**\n   * @usage\n   * eachComponent('legend', function (legendModel, index) {\n   *     ...\n   * });\n   * eachComponent(function (componentType, model, index) {\n   *     // componentType does not include subType\n   *     // (componentType is 'xxx' but not 'xxx.aa')\n   * });\n   * eachComponent(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}},\n   *     function (model, index) {...}\n   * );\n   * eachComponent(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}},\n   *     function (model, index) {...}\n   * );\n   *\n   * @param {string|Object=} mainType When mainType is object, the definition\n   *                                  is the same as the method 'findComponents'.\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachComponent: function (mainType, cb, context) {\n    var componentsMap = this._componentsMap;\n\n    if (typeof mainType === 'function') {\n      context = cb;\n      cb = mainType;\n      componentsMap.each(function (components, componentType) {\n        each(components, function (component, index) {\n          cb.call(context, componentType, component, index);\n        });\n      });\n    } else if (isString(mainType)) {\n      each(componentsMap.get(mainType), cb, context);\n    } else if (isObject(mainType)) {\n      var queryResult = this.findComponents(mainType);\n      each(queryResult, cb, context);\n    }\n  },\n\n  /**\n   * @param {string} name\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeriesByName: function (name) {\n    var series = this._componentsMap.get('series');\n\n    return filter(series, function (oneSeries) {\n      return oneSeries.name === name;\n    });\n  },\n\n  /**\n   * @param {number} seriesIndex\n   * @return {module:echarts/model/Series}\n   */\n  getSeriesByIndex: function (seriesIndex) {\n    return this._componentsMap.get('series')[seriesIndex];\n  },\n\n  /**\n   * Get series list before filtered by type.\n   * FIXME: rename to getRawSeriesByType?\n   *\n   * @param {string} subType\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeriesByType: function (subType) {\n    var series = this._componentsMap.get('series');\n\n    return filter(series, function (oneSeries) {\n      return oneSeries.subType === subType;\n    });\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeries: function () {\n    return this._componentsMap.get('series').slice();\n  },\n\n  /**\n   * @return {number}\n   */\n  getSeriesCount: function () {\n    return this._componentsMap.get('series').length;\n  },\n\n  /**\n   * After filtering, series may be different\n   * frome raw series.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachSeries: function (cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n      cb.call(context, series, rawSeriesIndex);\n    }, this);\n  },\n\n  /**\n   * Iterate raw series before filtered.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachRawSeries: function (cb, context) {\n    each(this._componentsMap.get('series'), cb, context);\n  },\n\n  /**\n   * After filtering, series may be different.\n   * frome raw series.\n   *\n   * @param {string} subType.\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachSeriesByType: function (subType, cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n      if (series.subType === subType) {\n        cb.call(context, series, rawSeriesIndex);\n      }\n    }, this);\n  },\n\n  /**\n   * Iterate raw series before filtered of given type.\n   *\n   * @parma {string} subType\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachRawSeriesByType: function (subType, cb, context) {\n    return each(this.getSeriesByType(subType), cb, context);\n  },\n\n  /**\n   * @param {module:echarts/model/Series} seriesModel\n   */\n  isSeriesFiltered: function (seriesModel) {\n    assertSeriesInitialized(this);\n    return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\n  },\n\n  /**\n   * @return {Array.<number>}\n   */\n  getCurrentSeriesIndices: function () {\n    return (this._seriesIndices || []).slice();\n  },\n\n  /**\n   * @param {Function} cb\n   * @param {*} context\n   */\n  filterSeries: function (cb, context) {\n    assertSeriesInitialized(this);\n    var filteredSeries = filter(this._componentsMap.get('series'), cb, context);\n    createSeriesIndices(this, filteredSeries);\n  },\n  restoreData: function (payload) {\n    var componentsMap = this._componentsMap;\n    createSeriesIndices(this, componentsMap.get('series'));\n    var componentTypes = [];\n    componentsMap.each(function (components, componentType) {\n      componentTypes.push(componentType);\n    });\n    ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType, dependencies) {\n      each(componentsMap.get(componentType), function (component) {\n        (componentType !== 'series' || !isNotTargetSeries(component, payload)) && component.restoreData();\n      });\n    });\n  }\n});\n\nfunction isNotTargetSeries(seriesModel, payload) {\n  if (payload) {\n    var index = payload.seiresIndex;\n    var id = payload.seriesId;\n    var name = payload.seriesName;\n    return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name != null && seriesModel.name !== name;\n  }\n}\n/**\n * @inner\n */\n\n\nfunction mergeTheme(option, theme) {\n  // PENDING\n  // NOT use `colorLayer` in theme if option has `color`\n  var notMergeColorLayer = option.color && !option.colorLayer;\n  each(theme, function (themeItem, name) {\n    if (name === 'colorLayer' && notMergeColorLayer) {\n      return;\n    } //  component model  merge  model \n\n\n    if (!ComponentModel.hasClass(name)) {\n      if (typeof themeItem === 'object') {\n        option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\n      } else {\n        if (option[name] == null) {\n          option[name] = themeItem;\n        }\n      }\n    }\n  });\n}\n\nfunction initBase(baseOption) {\n  baseOption = baseOption; // Using OPTION_INNER_KEY to mark that this option can not be used outside,\n  // i.e. `chart.setOption(chart.getModel().option);` is forbiden.\n\n  this.option = {};\n  this.option[OPTION_INNER_KEY] = 1;\n  /**\n   * Init with series: [], in case of calling findSeries method\n   * before series initialized.\n   * @type {Object.<string, Array.<module:echarts/model/Model>>}\n   * @private\n   */\n\n  this._componentsMap = createHashMap({\n    series: []\n  });\n  /**\n   * Mapping between filtered series list and raw series list.\n   * key: filtered series indices, value: raw series indices.\n   * @type {Array.<nubmer>}\n   * @private\n   */\n\n  this._seriesIndices;\n  this._seriesIndicesMap;\n  mergeTheme(baseOption, this._theme.option); // TODO Needs clone when merging to the unexisted property\n\n  merge(baseOption, globalDefault, false);\n  this.mergeOption(baseOption);\n}\n/**\n * @inner\n * @param {Array.<string>|string} types model types\n * @return {Object} key: {string} type, value: {Array.<Object>} models\n */\n\n\nfunction getComponentsByTypes(componentsMap, types) {\n  if (!isArray(types)) {\n    types = types ? [types] : [];\n  }\n\n  var ret = {};\n  each(types, function (type) {\n    ret[type] = (componentsMap.get(type) || []).slice();\n  });\n  return ret;\n}\n/**\n * @inner\n */\n\n\nfunction determineSubType(mainType, newCptOption, existComponent) {\n  var subType = newCptOption.type ? newCptOption.type : existComponent ? existComponent.subType // Use determineSubType only when there is no existComponent.\n  : ComponentModel.determineSubType(mainType, newCptOption); // tooltip, markline, markpoint may always has no subType\n\n  return subType;\n}\n/**\n * @inner\n */\n\n\nfunction createSeriesIndices(ecModel, seriesModels) {\n  ecModel._seriesIndicesMap = createHashMap(ecModel._seriesIndices = map(seriesModels, function (series) {\n    return series.componentIndex;\n  }) || []);\n}\n/**\n * @inner\n */\n\n\nfunction filterBySubType(components, condition) {\n  // Using hasOwnProperty for restrict. Consider\n  // subType is undefined in user payload.\n  return condition.hasOwnProperty('subType') ? filter(components, function (cpt) {\n    return cpt.subType === condition.subType;\n  }) : components;\n}\n/**\n * @inner\n */\n\n\nfunction assertSeriesInitialized(ecModel) {}\n\nmixin(GlobalModel, colorPaletteMixin);\nvar _default = GlobalModel;\nmodule.exports = _default;","var Path = require(\"../graphic/Path\");\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar transformPath = require(\"./transformPath\");\n\n// command chars\n// var cc = [\n//     'm', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z',\n//     'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'\n// ];\nvar mathSqrt = Math.sqrt;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\n\nvar vMag = function (v) {\n  return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n};\n\nvar vRatio = function (u, v) {\n  return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n};\n\nvar vAngle = function (u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n};\n\nfunction processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n  var psi = psiDeg * (PI / 180.0);\n  var xp = mathCos(psi) * (x1 - x2) / 2.0 + mathSin(psi) * (y1 - y2) / 2.0;\n  var yp = -1 * mathSin(psi) * (x1 - x2) / 2.0 + mathCos(psi) * (y1 - y2) / 2.0;\n  var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n\n  if (lambda > 1) {\n    rx *= mathSqrt(lambda);\n    ry *= mathSqrt(lambda);\n  }\n\n  var f = (fa === fs ? -1 : 1) * mathSqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp))) || 0;\n  var cxp = f * rx * yp / ry;\n  var cyp = f * -ry * xp / rx;\n  var cx = (x1 + x2) / 2.0 + mathCos(psi) * cxp - mathSin(psi) * cyp;\n  var cy = (y1 + y2) / 2.0 + mathSin(psi) * cxp + mathCos(psi) * cyp;\n  var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n  var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n  var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n  var dTheta = vAngle(u, v);\n\n  if (vRatio(u, v) <= -1) {\n    dTheta = PI;\n  }\n\n  if (vRatio(u, v) >= 1) {\n    dTheta = 0;\n  }\n\n  if (fs === 0 && dTheta > 0) {\n    dTheta = dTheta - 2 * PI;\n  }\n\n  if (fs === 1 && dTheta < 0) {\n    dTheta = dTheta + 2 * PI;\n  }\n\n  path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n}\n\nvar commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig; // Consider case:\n// (1) delimiter can be comma or space, where continuous commas\n// or spaces should be seen as one comma.\n// (2) value can be like:\n// '2e-4', 'l.5.9' (ignore 0), 'M-10-10', 'l-2.43e-1,34.9983',\n// 'l-.5E1,54', '121-23-44-11' (no delimiter)\n\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g; // var valueSplitReg = /[\\s,]+/;\n\nfunction createPathProxyFromString(data) {\n  if (!data) {\n    return new PathProxy();\n  } // var data = data.replace(/-/g, ' -')\n  //     .replace(/  /g, ' ')\n  //     .replace(/ /g, ',')\n  //     .replace(/,,/g, ',');\n  // var n;\n  // create pipes so that we can split the data\n  // for (n = 0; n < cc.length; n++) {\n  //     cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n  // }\n  // data = data.replace(/-/g, ',-');\n  // create array\n  // var arr = cs.split('|');\n  // init context point\n\n\n  var cpx = 0;\n  var cpy = 0;\n  var subpathX = cpx;\n  var subpathY = cpy;\n  var prevCmd;\n  var path = new PathProxy();\n  var CMD = PathProxy.CMD; // commandReg.lastIndex = 0;\n  // var cmdResult;\n  // while ((cmdResult = commandReg.exec(data)) != null) {\n  //     var cmdStr = cmdResult[1];\n  //     var cmdContent = cmdResult[2];\n\n  var cmdList = data.match(commandReg);\n\n  for (var l = 0; l < cmdList.length; l++) {\n    var cmdText = cmdList[l];\n    var cmdStr = cmdText.charAt(0);\n    var cmd; // String#split is faster a little bit than String#replace or RegExp#exec.\n    // var p = cmdContent.split(valueSplitReg);\n    // var pLen = 0;\n    // for (var i = 0; i < p.length; i++) {\n    //     // '' and other invalid str => NaN\n    //     var val = parseFloat(p[i]);\n    //     !isNaN(val) && (p[pLen++] = val);\n    // }\n\n    var p = cmdText.match(numberReg) || [];\n    var pLen = p.length;\n\n    for (var i = 0; i < pLen; i++) {\n      p[i] = parseFloat(p[i]);\n    }\n\n    var off = 0;\n\n    while (off < pLen) {\n      var ctlPtx;\n      var ctlPty;\n      var rx;\n      var ry;\n      var psi;\n      var fa;\n      var fs;\n      var x1 = cpx;\n      var y1 = cpy; // convert l, H, h, V, and v to L\n\n      switch (cmdStr) {\n        case 'l':\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'L':\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'm':\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.M;\n          path.addData(cmd, cpx, cpy);\n          subpathX = cpx;\n          subpathY = cpy;\n          cmdStr = 'l';\n          break;\n\n        case 'M':\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.M;\n          path.addData(cmd, cpx, cpy);\n          subpathX = cpx;\n          subpathY = cpy;\n          cmdStr = 'L';\n          break;\n\n        case 'h':\n          cpx += p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'H':\n          cpx = p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'v':\n          cpy += p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'V':\n          cpy = p[off++];\n          cmd = CMD.L;\n          path.addData(cmd, cpx, cpy);\n          break;\n\n        case 'C':\n          cmd = CMD.C;\n          path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n          cpx = p[off - 2];\n          cpy = p[off - 1];\n          break;\n\n        case 'c':\n          cmd = CMD.C;\n          path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n          cpx += p[off - 2];\n          cpy += p[off - 1];\n          break;\n\n        case 'S':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.C) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cmd = CMD.C;\n          x1 = p[off++];\n          y1 = p[off++];\n          cpx = p[off++];\n          cpy = p[off++];\n          path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n          break;\n\n        case 's':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.C) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cmd = CMD.C;\n          x1 = cpx + p[off++];\n          y1 = cpy + p[off++];\n          cpx += p[off++];\n          cpy += p[off++];\n          path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n          break;\n\n        case 'Q':\n          x1 = p[off++];\n          y1 = p[off++];\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, x1, y1, cpx, cpy);\n          break;\n\n        case 'q':\n          x1 = p[off++] + cpx;\n          y1 = p[off++] + cpy;\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, x1, y1, cpx, cpy);\n          break;\n\n        case 'T':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.Q) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case 't':\n          ctlPtx = cpx;\n          ctlPty = cpy;\n          var len = path.len();\n          var pathData = path.data;\n\n          if (prevCmd === CMD.Q) {\n            ctlPtx += cpx - pathData[len - 4];\n            ctlPty += cpy - pathData[len - 3];\n          }\n\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.Q;\n          path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n          break;\n\n        case 'A':\n          rx = p[off++];\n          ry = p[off++];\n          psi = p[off++];\n          fa = p[off++];\n          fs = p[off++];\n          x1 = cpx, y1 = cpy;\n          cpx = p[off++];\n          cpy = p[off++];\n          cmd = CMD.A;\n          processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n          break;\n\n        case 'a':\n          rx = p[off++];\n          ry = p[off++];\n          psi = p[off++];\n          fa = p[off++];\n          fs = p[off++];\n          x1 = cpx, y1 = cpy;\n          cpx += p[off++];\n          cpy += p[off++];\n          cmd = CMD.A;\n          processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n          break;\n      }\n    }\n\n    if (cmdStr === 'z' || cmdStr === 'Z') {\n      cmd = CMD.Z;\n      path.addData(cmd); // z may be in the middle of the path.\n\n      cpx = subpathX;\n      cpy = subpathY;\n    }\n\n    prevCmd = cmd;\n  }\n\n  path.toStatic();\n  return path;\n} // TODO Optimize double memory cost problem\n\n\nfunction createPathOptions(str, opts) {\n  var pathProxy = createPathProxyFromString(str);\n  opts = opts || {};\n\n  opts.buildPath = function (path) {\n    if (path.setData) {\n      path.setData(pathProxy.data); // Svg and vml renderer don't have context\n\n      var ctx = path.getContext();\n\n      if (ctx) {\n        path.rebuildPath(ctx);\n      }\n    } else {\n      var ctx = path;\n      pathProxy.rebuildPath(ctx);\n    }\n  };\n\n  opts.applyTransform = function (m) {\n    transformPath(pathProxy, m);\n    this.dirty(true);\n  };\n\n  return opts;\n}\n/**\n * Create a Path object from path string data\n * http://www.w3.org/TR/SVG/paths.html#PathData\n * @param  {Object} opts Other options\n */\n\n\nfunction createFromString(str, opts) {\n  return new Path(createPathOptions(str, opts));\n}\n/**\n * Create a Path class from path string data\n * @param  {string} str\n * @param  {Object} opts Other options\n */\n\n\nfunction extendFromString(str, opts) {\n  return Path.extend(createPathOptions(str, opts));\n}\n/**\n * Merge multiple paths\n */\n// TODO Apply transform\n// TODO stroke dash\n// TODO Optimize double memory cost problem\n\n\nfunction mergePath(pathEls, opts) {\n  var pathList = [];\n  var len = pathEls.length;\n\n  for (var i = 0; i < len; i++) {\n    var pathEl = pathEls[i];\n\n    if (!pathEl.path) {\n      pathEl.createPathProxy();\n    }\n\n    if (pathEl.__dirtyPath) {\n      pathEl.buildPath(pathEl.path, pathEl.shape, true);\n    }\n\n    pathList.push(pathEl.path);\n  }\n\n  var pathBundle = new Path(opts); // Need path proxy.\n\n  pathBundle.createPathProxy();\n\n  pathBundle.buildPath = function (path) {\n    path.appendPath(pathList); // Svg and vml renderer don't have context\n\n    var ctx = path.getContext();\n\n    if (ctx) {\n      path.rebuildPath(ctx);\n    }\n  };\n\n  return pathBundle;\n}\n\nexports.createFromString = createFromString;\nexports.extendFromString = extendFromString;\nexports.mergePath = mergePath;","var PI2 = Math.PI * 2;\n\nfunction normalizeRadian(angle) {\n  angle %= PI2;\n\n  if (angle < 0) {\n    angle += PI2;\n  }\n\n  return angle;\n}\n\nexports.normalizeRadian = normalizeRadian;","function windingLine(x0, y0, x1, y1, x, y) {\n  if (y > y0 && y > y1 || y < y0 && y < y1) {\n    return 0;\n  } // Ignore horizontal line\n\n\n  if (y1 === y0) {\n    return 0;\n  }\n\n  var dir = y1 < y0 ? 1 : -1;\n  var t = (y - y0) / (y1 - y0); // Avoid winding error when intersection point is the connect point of two line of polygon\n\n  if (t === 1 || t === 0) {\n    dir = y1 < y0 ? 0.5 : -0.5;\n  }\n\n  var x_ = t * (x1 - x0) + x0; // If (x, y) on the line, considered as \"contain\".\n\n  return x_ === x ? Infinity : x_ > x ? dir : 0;\n}\n\nmodule.exports = windingLine;","var Path = require(\"../Path\");\n\n/**\n * \n * @module zrender/shape/Circle\n */\nvar _default = Path.extend({\n  type: 'circle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r: 0\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    // Better stroking in ShapeBundle\n    // Always do it may have performence issue ( fill may be 2x more cost)\n    if (inBundle) {\n      ctx.moveTo(shape.cx + shape.r, shape.cy);\n    } // else {\n    //     if (ctx.allocate && !ctx.data.length) {\n    //         ctx.allocate(ctx.CMD_MEM_SIZE.A);\n    //     }\n    // }\n    // Better stroking in ShapeBundle\n    // ctx.moveTo(shape.cx + shape.r, shape.cy);\n\n\n    ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2, true);\n  }\n});\n\nmodule.exports = _default;","var env = require(\"../../core/env\");\n\n// Fix weird bug in some version of IE11 (like 11.0.9600.178**),\n// where exception \"unexpected call to method or property access\"\n// might be thrown when calling ctx.fill or ctx.stroke after a path\n// whose area size is zero is drawn and ctx.clip() is called and\n// shadowBlur is set. See #4572, #3112, #5777.\n// (e.g.,\n//  ctx.moveTo(10, 10);\n//  ctx.lineTo(20, 10);\n//  ctx.closePath();\n//  ctx.clip();\n//  ctx.shadowBlur = 10;\n//  ...\n//  ctx.fill();\n// )\nvar shadowTemp = [['shadowBlur', 0], ['shadowColor', '#000'], ['shadowOffsetX', 0], ['shadowOffsetY', 0]];\n\nfunction _default(orignalBrush) {\n  // version string can be: '11.0'\n  return env.browser.ie && env.browser.version >= 11 ? function () {\n    var clipPaths = this.__clipPaths;\n    var style = this.style;\n    var modified;\n\n    if (clipPaths) {\n      for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        var shape = clipPath && clipPath.shape;\n        var type = clipPath && clipPath.type;\n\n        if (shape && (type === 'sector' && shape.startAngle === shape.endAngle || type === 'rect' && (!shape.width || !shape.height))) {\n          for (var j = 0; j < shadowTemp.length; j++) {\n            // It is save to put shadowTemp static, because shadowTemp\n            // will be all modified each item brush called.\n            shadowTemp[j][2] = style[shadowTemp[j][0]];\n            style[shadowTemp[j][0]] = shadowTemp[j][1];\n          }\n\n          modified = true;\n          break;\n        }\n      }\n    }\n\n    orignalBrush.apply(this, arguments);\n\n    if (modified) {\n      for (var j = 0; j < shadowTemp.length; j++) {\n        style[shadowTemp[j][0]] = shadowTemp[j][2];\n      }\n    }\n  } : orignalBrush;\n}\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar polyHelper = require(\"../helper/poly\");\n\n/**\n * \n * @module zrender/shape/Polygon\n */\nvar _default = Path.extend({\n  type: 'polygon',\n  shape: {\n    points: null,\n    smooth: false,\n    smoothConstraint: null\n  },\n  buildPath: function (ctx, shape) {\n    polyHelper.buildPath(ctx, shape, true);\n  }\n});\n\nmodule.exports = _default;","var smoothSpline = require(\"./smoothSpline\");\n\nvar smoothBezier = require(\"./smoothBezier\");\n\nfunction buildPath(ctx, shape, closePath) {\n  var points = shape.points;\n  var smooth = shape.smooth;\n\n  if (points && points.length >= 2) {\n    if (smooth && smooth !== 'spline') {\n      var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n      ctx.moveTo(points[0][0], points[0][1]);\n      var len = points.length;\n\n      for (var i = 0; i < (closePath ? len : len - 1); i++) {\n        var cp1 = controlPoints[i * 2];\n        var cp2 = controlPoints[i * 2 + 1];\n        var p = points[(i + 1) % len];\n        ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n      }\n    } else {\n      if (smooth === 'spline') {\n        points = smoothSpline(points, closePath);\n      }\n\n      ctx.moveTo(points[0][0], points[0][1]);\n\n      for (var i = 1, l = points.length; i < l; i++) {\n        ctx.lineTo(points[i][0], points[i][1]);\n      }\n    }\n\n    closePath && ctx.closePath();\n  }\n}\n\nexports.buildPath = buildPath;","var Path = require(\"../Path\");\n\nvar polyHelper = require(\"../helper/poly\");\n\n/**\n * @module zrender/graphic/shape/Polyline\n */\nvar _default = Path.extend({\n  type: 'polyline',\n  shape: {\n    points: null,\n    smooth: false,\n    smoothConstraint: null\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    polyHelper.buildPath(ctx, shape, false);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar _subPixelOptimize = require(\"../helper/subPixelOptimize\");\n\nvar subPixelOptimizeLine = _subPixelOptimize.subPixelOptimizeLine;\n\n/**\n * \n * @module zrender/graphic/shape/Line\n */\n// Avoid create repeatly.\nvar subPixelOptimizeOutputShape = {};\n\nvar _default = Path.extend({\n  type: 'line',\n  shape: {\n    // Start point\n    x1: 0,\n    y1: 0,\n    // End point\n    x2: 0,\n    y2: 0,\n    percent: 1\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var x1;\n    var y1;\n    var x2;\n    var y2;\n\n    if (this.subPixelOptimize) {\n      subPixelOptimizeLine(subPixelOptimizeOutputShape, shape, this.style);\n      x1 = subPixelOptimizeOutputShape.x1;\n      y1 = subPixelOptimizeOutputShape.y1;\n      x2 = subPixelOptimizeOutputShape.x2;\n      y2 = subPixelOptimizeOutputShape.y2;\n    } else {\n      x1 = shape.x1;\n      y1 = shape.y1;\n      x2 = shape.x2;\n      y2 = shape.y2;\n    }\n\n    var percent = shape.percent;\n\n    if (percent === 0) {\n      return;\n    }\n\n    ctx.moveTo(x1, y1);\n\n    if (percent < 1) {\n      x2 = x1 * (1 - percent) + x2 * percent;\n      y2 = y1 * (1 - percent) + y2 * percent;\n    }\n\n    ctx.lineTo(x2, y2);\n  },\n\n  /**\n   * Get point at percent\n   * @param  {number} percent\n   * @return {Array.<number>}\n   */\n  pointAt: function (p) {\n    var shape = this.shape;\n    return [shape.x1 * (1 - p) + shape.x2 * p, shape.y1 * (1 - p) + shape.y2 * p];\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\nvar normalizeToArray = _model.normalizeToArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\n\nfunction getNearestColorPalette(colors, requestColorNum) {\n  var paletteNum = colors.length; // TODO colors must be in order\n\n  for (var i = 0; i < paletteNum; i++) {\n    if (colors[i].length > requestColorNum) {\n      return colors[i];\n    }\n  }\n\n  return colors[paletteNum - 1];\n}\n\nvar _default = {\n  clearColorPalette: function () {\n    inner(this).colorIdx = 0;\n    inner(this).colorNameMap = {};\n  },\n\n  /**\n   * @param {string} name MUST NOT be null/undefined. Otherwise call this function\n   *                 twise with the same parameters will get different result.\n   * @param {Object} [scope=this]\n   * @param {Object} [requestColorNum]\n   * @return {string} color string.\n   */\n  getColorFromPalette: function (name, scope, requestColorNum) {\n    scope = scope || this;\n    var scopeFields = inner(scope);\n    var colorIdx = scopeFields.colorIdx || 0;\n    var colorNameMap = scopeFields.colorNameMap = scopeFields.colorNameMap || {}; // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n\n    if (colorNameMap.hasOwnProperty(name)) {\n      return colorNameMap[name];\n    }\n\n    var defaultColorPalette = normalizeToArray(this.get('color', true));\n    var layeredColorPalette = this.get('colorLayer', true);\n    var colorPalette = requestColorNum == null || !layeredColorPalette ? defaultColorPalette : getNearestColorPalette(layeredColorPalette, requestColorNum); // In case can't find in layered color palette.\n\n    colorPalette = colorPalette || defaultColorPalette;\n\n    if (!colorPalette || !colorPalette.length) {\n      return;\n    }\n\n    var color = colorPalette[colorIdx];\n\n    if (name) {\n      colorNameMap[name] = color;\n    }\n\n    scopeFields.colorIdx = (colorIdx + 1) % colorPalette.length;\n    return color;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echartsAPIList = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL', 'getModel', 'getOption', 'getViewOfComponentModel', 'getViewOfSeriesModel']; // And `getCoordinateSystems` and `getComponentByElement` will be injected in echarts.js\n\nfunction ExtensionAPI(chartInstance) {\n  zrUtil.each(echartsAPIList, function (name) {\n    this[name] = zrUtil.bind(chartInstance[name], chartInstance);\n  }, this);\n}\n\nvar _default = ExtensionAPI;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @class\n * @param {Object|DataDimensionInfo} [opt] All of the fields will be shallow copied.\n */\nfunction DataDimensionInfo(opt) {\n  if (opt != null) {\n    zrUtil.extend(this, opt);\n  }\n  /**\n   * Dimension name.\n   * Mandatory.\n   * @type {string}\n   */\n  // this.name;\n\n  /**\n   * The origin name in dimsDef, see source helper.\n   * If displayName given, the tooltip will displayed vertically.\n   * Optional.\n   * @type {string}\n   */\n  // this.displayName;\n\n  /**\n   * Which coordSys dimension this dimension mapped to.\n   * A `coordDim` can be a \"coordSysDim\" that the coordSys required\n   * (for example, an item in `coordSysDims` of `model/referHelper#CoordSysInfo`),\n   * or an generated \"extra coord name\" if does not mapped to any \"coordSysDim\"\n   * (That is determined by whether `isExtraCoord` is `true`).\n   * Mandatory.\n   * @type {string}\n   */\n  // this.coordDim;\n\n  /**\n   * The index of this dimension in `series.encode[coordDim]`.\n   * Mandatory.\n   * @type {number}\n   */\n  // this.coordDimIndex;\n\n  /**\n   * Dimension type. The enumerable values are the key of\n   * `dataCtors` of `data/List`.\n   * Optional.\n   * @type {string}\n   */\n  // this.type;\n\n  /**\n   * This index of this dimension info in `data/List#_dimensionInfos`.\n   * Mandatory after added to `data/List`.\n   * @type {number}\n   */\n  // this.index;\n\n  /**\n   * The format of `otherDims` is:\n   * ```js\n   * {\n   *     tooltip: number optional,\n   *     label: number optional,\n   *     itemName: number optional,\n   *     seriesName: number optional,\n   * }\n   * ```\n   *\n   * A `series.encode` can specified these fields:\n   * ```js\n   * encode: {\n   *     // \"3, 1, 5\" is the index of data dimension.\n   *     tooltip: [3, 1, 5],\n   *     label: [0, 3],\n   *     ...\n   * }\n   * ```\n   * `otherDims` is the parse result of the `series.encode` above, like:\n   * ```js\n   * // Suppose the index of this data dimension is `3`.\n   * this.otherDims = {\n   *     // `3` is at the index `0` of the `encode.tooltip`\n   *     tooltip: 0,\n   *     // `3` is at the index `1` of the `encode.tooltip`\n   *     label: 1\n   * };\n   * ```\n   *\n   * This prop should never be `null`/`undefined` after initialized.\n   * @type {Object}\n   */\n\n\n  this.otherDims = {};\n  /**\n   * Be `true` if this dimension is not mapped to any \"coordSysDim\" that the\n   * \"coordSys\" required.\n   * Mandatory.\n   * @type {boolean}\n   */\n  // this.isExtraCoord;\n\n  /**\n   * @type {module:data/OrdinalMeta}\n   */\n  // this.ordinalMeta;\n\n  /**\n   * Whether to create inverted indices.\n   * @type {boolean}\n   */\n  // this.createInvertedIndices;\n}\n\n;\nvar _default = DataDimensionInfo;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar each = _util.each;\nvar isString = _util.isString;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar isObject = _util.isObject;\nvar clone = _util.clone;\n\nvar _model = require(\"../../util/model\");\n\nvar normalizeToArray = _model.normalizeToArray;\n\nvar _sourceHelper = require(\"./sourceHelper\");\n\nvar guessOrdinal = _sourceHelper.guessOrdinal;\nvar BE_ORDINAL = _sourceHelper.BE_ORDINAL;\n\nvar Source = require(\"../Source\");\n\nvar _dimensionHelper = require(\"./dimensionHelper\");\n\nvar OTHER_DIMENSIONS = _dimensionHelper.OTHER_DIMENSIONS;\n\nvar DataDimensionInfo = require(\"../DataDimensionInfo\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @deprecated\n * Use `echarts/data/helper/createDimensions` instead.\n */\n\n/**\n * @see {module:echarts/test/ut/spec/data/completeDimensions}\n *\n * This method builds the relationship between:\n * + \"what the coord sys or series requires (see `sysDims`)\",\n * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimsDef` and `opt.encodeDef`)\"\n * + \"what the data source provids (see `source`)\".\n *\n * Some guess strategy will be adapted if user does not define something.\n * If no 'value' dimension specified, the first no-named dimension will be\n * named as 'value'.\n *\n * @param {Array.<string>} sysDims Necessary dimensions, like ['x', 'y'], which\n *      provides not only dim template, but also default order.\n *      properties: 'name', 'type', 'displayName'.\n *      `name` of each item provides default coord name.\n *      [{dimsDef: [string|Object, ...]}, ...] dimsDef of sysDim item provides default dim name, and\n *                                    provide dims count that the sysDim required.\n *      [{ordinalMeta}] can be specified.\n * @param {module:echarts/data/Source|Array|Object} source or data (for compatibal with pervious)\n * @param {Object} [opt]\n * @param {Array.<Object|string>} [opt.dimsDef] option.series.dimensions User defined dimensions\n *      For example: ['asdf', {name, type}, ...].\n * @param {Object|HashMap} [opt.encodeDef] option.series.encode {x: 2, y: [3, 1], tooltip: [1, 2], label: 3}\n * @param {Function} [opt.encodeDefaulter] Called if no `opt.encodeDef` exists.\n *      If not specified, auto find the next available data dim.\n *      param source {module:data/Source}\n *      param dimCount {number}\n *      return {Object} encode Never be `null/undefined`.\n * @param {string} [opt.generateCoord] Generate coord dim with the given name.\n *      If not specified, extra dim names will be:\n *      'value', 'value0', 'value1', ...\n * @param {number} [opt.generateCoordCount] By default, the generated dim name is `generateCoord`.\n *      If `generateCoordCount` specified, the generated dim names will be:\n *      `generateCoord` + 0, `generateCoord` + 1, ...\n *      can be Infinity, indicate that use all of the remain columns.\n * @param {number} [opt.dimCount] If not specified, guess by the first data item.\n * @return {Array.<module:data/DataDimensionInfo>}\n */\nfunction completeDimensions(sysDims, source, opt) {\n  if (!Source.isInstance(source)) {\n    source = Source.seriesDataToSource(source);\n  }\n\n  opt = opt || {};\n  sysDims = (sysDims || []).slice();\n  var dimsDef = (opt.dimsDef || []).slice();\n  var dataDimNameMap = createHashMap();\n  var coordDimNameMap = createHashMap(); // var valueCandidate;\n\n  var result = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimCount); // Apply user defined dims (`name` and `type`) and init result.\n\n  for (var i = 0; i < dimCount; i++) {\n    var dimDefItem = dimsDef[i] = extend({}, isObject(dimsDef[i]) ? dimsDef[i] : {\n      name: dimsDef[i]\n    });\n    var userDimName = dimDefItem.name;\n    var resultItem = result[i] = new DataDimensionInfo(); // Name will be applied later for avoiding duplication.\n\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      // Only if `series.dimensions` is defined in option\n      // displayName, will be set, and dimension will be diplayed vertically in\n      // tooltip by default.\n      resultItem.name = resultItem.displayName = userDimName;\n      dataDimNameMap.set(userDimName, i);\n    }\n\n    dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n    dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n  }\n\n  var encodeDef = opt.encodeDef;\n\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n\n  encodeDef = createHashMap(encodeDef); // Set `coordDim` and `coordDimIndex` by `encodeDef` and normalize `encodeDef`.\n\n  encodeDef.each(function (dataDims, coordDim) {\n    dataDims = normalizeToArray(dataDims).slice(); // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n    // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n    // this case.\n\n    if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDef.set(coordDim, false);\n      return;\n    }\n\n    var validDataDims = encodeDef.set(coordDim, []);\n    each(dataDims, function (resultDimIdx, idx) {\n      // The input resultDimIdx can be dim name or index.\n      isString(resultDimIdx) && (resultDimIdx = dataDimNameMap.get(resultDimIdx));\n\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(result[resultDimIdx], coordDim, idx);\n      }\n    });\n  }); // Apply templetes and default order from `sysDims`.\n\n  var availDimIdx = 0;\n  each(sysDims, function (sysDimItem, sysDimIndex) {\n    var coordDim;\n    var sysDimItem;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n\n    if (isString(sysDimItem)) {\n      coordDim = sysDimItem;\n      sysDimItem = {};\n    } else {\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = clone(sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta; // `coordDimIndex` should not be set directly.\n\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n\n    var dataDims = encodeDef.get(coordDim); // negative resultDimIdx means no need to mapping.\n\n    if (dataDims === false) {\n      return;\n    }\n\n    var dataDims = normalizeToArray(dataDims); // dimensions provides default dim sequences.\n\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < result.length && result[availDimIdx].coordDim != null) {\n          availDimIdx++;\n        }\n\n        availDimIdx < result.length && dataDims.push(availDimIdx++);\n      }\n    } // Apply templates.\n\n\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = result[resultDimIdx];\n      applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      } // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n\n\n      sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (OTHER_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  } // Make sure the first extra dim is 'value'.\n\n\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value'; // Set dim `name` and other `coordDim` and other props.\n\n  for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n    var resultItem = result[resultDimIdx] = result[resultDimIdx] || new DataDimensionInfo();\n    var coordDim = resultItem.coordDim;\n\n    if (coordDim == null) {\n      resultItem.coordDim = genName(extra, coordDimNameMap, fromZero);\n      resultItem.coordDimIndex = 0;\n\n      if (!generateCoord || generateCoordCount <= 0) {\n        resultItem.isExtraCoord = true;\n      }\n\n      generateCoordCount--;\n    }\n\n    resultItem.name == null && (resultItem.name = genName(resultItem.coordDim, dataDimNameMap));\n\n    if (resultItem.type == null && (guessOrdinal(source, resultDimIdx, resultItem.name) === BE_ORDINAL.Must // Consider the case:\n    // {\n    //    dataset: {source: [\n    //        ['2001', 123],\n    //        ['2002', 456],\n    //        ...\n    //        ['The others', 987],\n    //    ]},\n    //    series: {type: 'pie'}\n    // }\n    // The first colum should better be treated as a \"ordinal\" although it\n    // might not able to be detected as an \"ordinal\" by `guessOrdinal`.\n    || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n      resultItem.type = 'ordinal';\n    }\n  }\n\n  return result;\n} // ??? TODO\n// Originally detect dimCount by data[0]. Should we\n// optimize it to only by sysDims and dimensions and encode.\n// So only necessary dims will be initialized.\n// But\n// (1) custom series should be considered. where other dims\n// may be visited.\n// (2) sometimes user need to calcualte bubble size or use visualMap\n// on other dimensions besides coordSys needed.\n// So, dims that is not used by system, should be shared in storage?\n\n\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  // Note that the result dimCount should not small than columns count\n  // of data, otherwise `dataDimNameMap` checking will be incorrect.\n  var dimCount = Math.max(source.dimensionsDetectCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef = sysDimItem.dimsDef;\n    sysDimItemDimsDef && (dimCount = Math.max(dimCount, sysDimItemDimsDef.length));\n  });\n  return dimCount;\n}\n\nfunction genName(name, map, fromZero) {\n  if (fromZero || map.get(name) != null) {\n    var i = 0;\n\n    while (map.get(name + i) != null) {\n      i++;\n    }\n\n    name += i;\n  }\n\n  map.set(name, true);\n  return name;\n}\n\nvar _default = completeDimensions;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar isObject = _util.isObject;\nvar map = _util.map;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @constructor\n * @param {Object} [opt]\n * @param {Object} [opt.categories=[]]\n * @param {Object} [opt.needCollect=false]\n * @param {Object} [opt.deduplication=false]\n */\nfunction OrdinalMeta(opt) {\n  /**\n   * @readOnly\n   * @type {Array.<string>}\n   */\n  this.categories = opt.categories || [];\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._needCollect = opt.needCollect;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._deduplication = opt.deduplication;\n  /**\n   * @private\n   * @type {boolean}\n   */\n\n  this._map;\n}\n/**\n * @param {module:echarts/model/Model} axisModel\n * @return {module:echarts/data/OrdinalMeta}\n */\n\n\nOrdinalMeta.createByAxisModel = function (axisModel) {\n  var option = axisModel.option;\n  var data = option.data;\n  var categories = data && map(data, getName);\n  return new OrdinalMeta({\n    categories: categories,\n    needCollect: !categories,\n    // deduplication is default in axis.\n    deduplication: option.dedplication !== false\n  });\n};\n\nvar proto = OrdinalMeta.prototype;\n/**\n * @param {string} category\n * @return {number} ordinal\n */\n\nproto.getOrdinal = function (category) {\n  return getOrCreateMap(this).get(category);\n};\n/**\n * @param {*} category\n * @return {number} The ordinal. If not found, return NaN.\n */\n\n\nproto.parseAndCollect = function (category) {\n  var index;\n  var needCollect = this._needCollect; // The value of category dim can be the index of the given category set.\n  // This feature is only supported when !needCollect, because we should\n  // consider a common case: a value is 2017, which is a number but is\n  // expected to be tread as a category. This case usually happen in dataset,\n  // where it happent to be no need of the index feature.\n\n  if (typeof category !== 'string' && !needCollect) {\n    return category;\n  } // Optimize for the scenario:\n  // category is ['2012-01-01', '2012-01-02', ...], where the input\n  // data has been ensured not duplicate and is large data.\n  // Notice, if a dataset dimension provide categroies, usually echarts\n  // should remove duplication except user tell echarts dont do that\n  // (set axis.deduplication = false), because echarts do not know whether\n  // the values in the category dimension has duplication (consider the\n  // parallel-aqi example)\n\n\n  if (needCollect && !this._deduplication) {\n    index = this.categories.length;\n    this.categories[index] = category;\n    return index;\n  }\n\n  var map = getOrCreateMap(this);\n  index = map.get(category);\n\n  if (index == null) {\n    if (needCollect) {\n      index = this.categories.length;\n      this.categories[index] = category;\n      map.set(category, index);\n    } else {\n      index = NaN;\n    }\n  }\n\n  return index;\n}; // Consider big data, do not create map until needed.\n\n\nfunction getOrCreateMap(ordinalMeta) {\n  return ordinalMeta._map || (ordinalMeta._map = createHashMap(ordinalMeta.categories));\n}\n\nfunction getName(obj) {\n  if (isObject(obj) && obj.value != null) {\n    return obj.value;\n  } else {\n    return obj + '';\n  }\n}\n\nvar _default = OrdinalMeta;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar numberUtil = require(\"../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * For testable.\n */\nvar roundNumber = numberUtil.round;\n/**\n * @param {Array.<number>} extent Both extent[0] and extent[1] should be valid number.\n *                                Should be extent[0] < extent[1].\n * @param {number} splitNumber splitNumber should be >= 1.\n * @param {number} [minInterval]\n * @param {number} [maxInterval]\n * @return {Object} {interval, intervalPrecision, niceTickExtent}\n */\n\nfunction intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\n  var result = {};\n  var span = extent[1] - extent[0];\n  var interval = result.interval = numberUtil.nice(span / splitNumber, true);\n\n  if (minInterval != null && interval < minInterval) {\n    interval = result.interval = minInterval;\n  }\n\n  if (maxInterval != null && interval > maxInterval) {\n    interval = result.interval = maxInterval;\n  } // Tow more digital for tick.\n\n\n  var precision = result.intervalPrecision = getIntervalPrecision(interval); // Niced extent inside original extent\n\n  var niceTickExtent = result.niceTickExtent = [roundNumber(Math.ceil(extent[0] / interval) * interval, precision), roundNumber(Math.floor(extent[1] / interval) * interval, precision)];\n  fixExtent(niceTickExtent, extent);\n  return result;\n}\n/**\n * @param {number} interval\n * @return {number} interval precision\n */\n\n\nfunction getIntervalPrecision(interval) {\n  // Tow more digital for tick.\n  return numberUtil.getPrecisionSafe(interval) + 2;\n}\n\nfunction clamp(niceTickExtent, idx, extent) {\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n} // In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\n\n\nfunction fixExtent(niceTickExtent, extent) {\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n  clamp(niceTickExtent, 0, extent);\n  clamp(niceTickExtent, 1, extent);\n\n  if (niceTickExtent[0] > niceTickExtent[1]) {\n    niceTickExtent[0] = niceTickExtent[1];\n  }\n}\n\nexports.intervalScaleNiceTicks = intervalScaleNiceTicks;\nexports.getIntervalPrecision = getIntervalPrecision;\nexports.fixExtent = fixExtent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n *\n * @param {Object} opt {labelInside}\n * @return {Object} {\n *  position, rotation, labelDirection, labelOffset,\n *  tickDirection, labelRotate, z2\n * }\n */\nfunction layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get('axisTick.inside')) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get('axisLabel.inside'))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get('axisLabel.rotate');\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\n\nexports.layout = layout;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\nvar _default = function _default(fn) {\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 60;\n  var timer = null;\n  return function () {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      fn.apply(_this, args);\n    }, delay);\n  };\n};\n\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SensorTabIndex = exports.SensorClassName = exports.SizeSensorId = void 0;\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\nvar SizeSensorId = 'size-sensor-id';\nexports.SizeSensorId = SizeSensorId;\nvar SensorClassName = 'size-sensor-object';\nexports.SensorClassName = SensorClassName;\nvar SensorTabIndex = '-1';\nexports.SensorTabIndex = SensorTabIndex;","var util = require(\"./core/util\");\n\nvar vec2 = require(\"./core/vector\");\n\nvar Draggable = require(\"./mixin/Draggable\");\n\nvar Eventful = require(\"./mixin/Eventful\");\n\nvar eventTool = require(\"./core/event\");\n\nvar GestureMgr = require(\"./core/GestureMgr\");\n\n/**\n * [The interface between `Handler` and `HandlerProxy`]:\n *\n * The default `HandlerProxy` only support the common standard web environment\n * (e.g., standalone browser, headless browser, embed browser in mobild APP, ...).\n * But `HandlerProxy` can be replaced to support more non-standard environment\n * (e.g., mini app), or to support more feature that the default `HandlerProxy`\n * not provided (like echarts-gl did).\n * So the interface between `Handler` and `HandlerProxy` should be stable. Do not\n * make break changes util inevitable. The interface include the public methods\n * of `Handler` and the events listed in `handlerNames` below, by which `HandlerProxy`\n * drives `Handler`.\n */\n\n/**\n * [Drag outside]:\n *\n * That is, triggering `mousemove` and `mouseup` event when the pointer is out of the\n * zrender area when dragging. That is important for the improvement of the user experience\n * when dragging something near the boundary without being terminated unexpectedly.\n *\n * We originally consider to introduce new events like `pagemovemove` and `pagemouseup`\n * to resolve this issue. But some drawbacks of it is described in\n * https://github.com/ecomfe/zrender/pull/536#issuecomment-560286899\n *\n * Instead, we referenced the specifications:\n * https://www.w3.org/TR/touch-events/#the-touchmove-event\n * https://www.w3.org/TR/2014/WD-DOM-Level-3-Events-20140925/#event-type-mousemove\n * where the the mousemove/touchmove can be continue to fire if the user began a drag\n * operation and the pointer has left the boundary. (for the mouse event, browsers\n * only do it on `document` and when the pointer has left the boundary of the browser.)\n *\n * So the default `HandlerProxy` supports this feature similarly: if it is in the dragging\n * state (see `pointerCapture` in `HandlerProxy`), the `mousemove` and `mouseup` continue\n * to fire until release the pointer. That is implemented by listen to those event on\n * `document`.\n * If we implement some other `HandlerProxy` only for touch device, that would be easier.\n * The touch event support this feature by default.\n *\n * Note:\n * There might be some cases that the mouse event can not be\n * received on `document`. For example,\n * (A) `useCapture` is not supported and some user defined event listeners on the ancestor\n * of zr dom throw Error .\n * (B) `useCapture` is not supported Some user defined event listeners on the ancestor of\n * zr dom call `stopPropagation`.\n * In these cases, the `mousemove` event might be keep triggered event\n * if the mouse is released. We try to reduce the side-effect in those cases.\n * That is, do nothing (especially, `findHover`) in those cases. See `isOutsideBoundary`.\n *\n * Note:\n * If `HandlerProxy` listens to `document` with `useCapture`, `HandlerProxy` needs to\n * make sure `stopPropagation` and `preventDefault` doing nothing if and only if the event\n * target is not zrender dom. Becuase it is dangerous to enable users to call them in\n * `document` capture phase to prevent the propagation to any listener of the webpage.\n * But they are needed to work when the pointer inside the zrender dom.\n */\nvar SILENT = 'silent';\n\nfunction makeEventPacket(eveType, targetInfo, event) {\n  return {\n    type: eveType,\n    event: event,\n    // target can only be an element that is not silent.\n    target: targetInfo.target,\n    // topTarget can be a silent element.\n    topTarget: targetInfo.topTarget,\n    cancelBubble: false,\n    offsetX: event.zrX,\n    offsetY: event.zrY,\n    gestureEvent: event.gestureEvent,\n    pinchX: event.pinchX,\n    pinchY: event.pinchY,\n    pinchScale: event.pinchScale,\n    wheelDelta: event.zrDelta,\n    zrByTouch: event.zrByTouch,\n    which: event.which,\n    stop: stopEvent\n  };\n}\n\nfunction stopEvent() {\n  eventTool.stop(this.event);\n}\n\nfunction EmptyProxy() {}\n\nEmptyProxy.prototype.dispose = function () {};\n\nvar handlerNames = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\n/**\n * @alias module:zrender/Handler\n * @constructor\n * @extends module:zrender/mixin/Eventful\n * @param {module:zrender/Storage} storage Storage instance.\n * @param {module:zrender/Painter} painter Painter instance.\n * @param {module:zrender/dom/HandlerProxy} proxy HandlerProxy instance.\n * @param {HTMLElement} painterRoot painter.root (not painter.getViewportRoot()).\n */\n\nvar Handler = function (storage, painter, proxy, painterRoot) {\n  Eventful.call(this);\n  this.storage = storage;\n  this.painter = painter;\n  this.painterRoot = painterRoot;\n  proxy = proxy || new EmptyProxy();\n  /**\n   * Proxy of event. can be Dom, WebGLSurface, etc.\n   */\n\n  this.proxy = null;\n  /**\n   * {target, topTarget, x, y}\n   * @private\n   * @type {Object}\n   */\n\n  this._hovered = {};\n  /**\n   * @private\n   * @type {Date}\n   */\n\n  this._lastTouchMoment;\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this._lastX;\n  /**\n   * @private\n   * @type {number}\n   */\n\n  this._lastY;\n  /**\n   * @private\n   * @type {module:zrender/core/GestureMgr}\n   */\n\n  this._gestureMgr;\n  Draggable.call(this);\n  this.setHandlerProxy(proxy);\n};\n\nHandler.prototype = {\n  constructor: Handler,\n  setHandlerProxy: function (proxy) {\n    if (this.proxy) {\n      this.proxy.dispose();\n    }\n\n    if (proxy) {\n      util.each(handlerNames, function (name) {\n        proxy.on && proxy.on(name, this[name], this);\n      }, this); // Attach handler\n\n      proxy.handler = this;\n    }\n\n    this.proxy = proxy;\n  },\n  mousemove: function (event) {\n    var x = event.zrX;\n    var y = event.zrY;\n    var isOutside = isOutsideBoundary(this, x, y);\n    var lastHovered = this._hovered;\n    var lastHoveredTarget = lastHovered.target; // If lastHoveredTarget is removed from zr (detected by '__zr') by some API call\n    // (like 'setOption' or 'dispatchAction') in event handlers, we should find\n    // lastHovered again here. Otherwise 'mouseout' can not be triggered normally.\n    // See #6198.\n\n    if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n      lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n      lastHoveredTarget = lastHovered.target;\n    }\n\n    var hovered = this._hovered = isOutside ? {\n      x: x,\n      y: y\n    } : this.findHover(x, y);\n    var hoveredTarget = hovered.target;\n    var proxy = this.proxy;\n    proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default'); // Mouse out on previous hovered element\n\n    if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n      this.dispatchToElement(lastHovered, 'mouseout', event);\n    } // Mouse moving on one element\n\n\n    this.dispatchToElement(hovered, 'mousemove', event); // Mouse over on a new element\n\n    if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n      this.dispatchToElement(hovered, 'mouseover', event);\n    }\n  },\n  mouseout: function (event) {\n    var eventControl = event.zrEventControl;\n    var zrIsToLocalDOM = event.zrIsToLocalDOM;\n\n    if (eventControl !== 'only_globalout') {\n      this.dispatchToElement(this._hovered, 'mouseout', event);\n    }\n\n    if (eventControl !== 'no_globalout') {\n      // FIXME: if the pointer moving from the extra doms to realy \"outside\",\n      // the `globalout` should have been triggered. But currently not.\n      !zrIsToLocalDOM && this.trigger('globalout', {\n        type: 'globalout',\n        event: event\n      });\n    }\n  },\n\n  /**\n   * Resize\n   */\n  resize: function (event) {\n    this._hovered = {};\n  },\n\n  /**\n   * Dispatch event\n   * @param {string} eventName\n   * @param {event=} eventArgs\n   */\n  dispatch: function (eventName, eventArgs) {\n    var handler = this[eventName];\n    handler && handler.call(this, eventArgs);\n  },\n\n  /**\n   * Dispose\n   */\n  dispose: function () {\n    this.proxy.dispose();\n    this.storage = this.proxy = this.painter = null;\n  },\n\n  /**\n   * cursor style\n   * @param {string} [cursorStyle='default']  crosshair\n   */\n  setCursorStyle: function (cursorStyle) {\n    var proxy = this.proxy;\n    proxy.setCursor && proxy.setCursor(cursorStyle);\n  },\n\n  /**\n   * \n   *\n   * @private\n   * @param {Object} targetInfo {target, topTarget} \n   * @param {string} eventName \n   * @param {Object} event \n   */\n  dispatchToElement: function (targetInfo, eventName, event) {\n    targetInfo = targetInfo || {};\n    var el = targetInfo.target;\n\n    if (el && el.silent) {\n      return;\n    }\n\n    var eventHandler = 'on' + eventName;\n    var eventPacket = makeEventPacket(eventName, targetInfo, event);\n\n    while (el) {\n      el[eventHandler] && (eventPacket.cancelBubble = el[eventHandler].call(el, eventPacket));\n      el.trigger(eventName, eventPacket);\n      el = el.parent;\n\n      if (eventPacket.cancelBubble) {\n        break;\n      }\n    }\n\n    if (!eventPacket.cancelBubble) {\n      //  zrender \n      this.trigger(eventName, eventPacket); // \n      //  click  dispose painter \n\n      this.painter && this.painter.eachOtherLayer(function (layer) {\n        if (typeof layer[eventHandler] === 'function') {\n          layer[eventHandler].call(layer, eventPacket);\n        }\n\n        if (layer.trigger) {\n          layer.trigger(eventName, eventPacket);\n        }\n      });\n    }\n  },\n\n  /**\n   * @private\n   * @param {number} x\n   * @param {number} y\n   * @param {module:zrender/graphic/Displayable} exclude\n   * @return {model:zrender/Element}\n   * @method\n   */\n  findHover: function (x, y, exclude) {\n    var list = this.storage.getDisplayList();\n    var out = {\n      x: x,\n      y: y\n    };\n\n    for (var i = list.length - 1; i >= 0; i--) {\n      var hoverCheckResult;\n\n      if (list[i] !== exclude // getDisplayList may include ignored item in VML mode\n      && !list[i].ignore && (hoverCheckResult = isHover(list[i], x, y))) {\n        !out.topTarget && (out.topTarget = list[i]);\n\n        if (hoverCheckResult !== SILENT) {\n          out.target = list[i];\n          break;\n        }\n      }\n    }\n\n    return out;\n  },\n  processGesture: function (event, stage) {\n    if (!this._gestureMgr) {\n      this._gestureMgr = new GestureMgr();\n    }\n\n    var gestureMgr = this._gestureMgr;\n    stage === 'start' && gestureMgr.clear();\n    var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n    stage === 'end' && gestureMgr.clear(); // Do not do any preventDefault here. Upper application do that if necessary.\n\n    if (gestureInfo) {\n      var type = gestureInfo.type;\n      event.gestureEvent = type;\n      this.dispatchToElement({\n        target: gestureInfo.target\n      }, type, gestureInfo.event);\n    }\n  }\n}; // Common handlers\n\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n  Handler.prototype[name] = function (event) {\n    var x = event.zrX;\n    var y = event.zrY;\n    var isOutside = isOutsideBoundary(this, x, y);\n    var hovered;\n    var hoveredTarget;\n\n    if (name !== 'mouseup' || !isOutside) {\n      // Find hover again to avoid click event is dispatched manually. Or click is triggered without mouseover\n      hovered = this.findHover(x, y);\n      hoveredTarget = hovered.target;\n    }\n\n    if (name === 'mousedown') {\n      this._downEl = hoveredTarget;\n      this._downPoint = [event.zrX, event.zrY]; // In case click triggered before mouseup\n\n      this._upEl = hoveredTarget;\n    } else if (name === 'mouseup') {\n      this._upEl = hoveredTarget;\n    } else if (name === 'click') {\n      if (this._downEl !== this._upEl // Original click event is triggered on the whole canvas element,\n      // including the case that `mousedown` - `mousemove` - `mouseup`,\n      // which should be filtered, otherwise it will bring trouble to\n      // pan and zoom.\n      || !this._downPoint // Arbitrary value\n      || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n        return;\n      }\n\n      this._downPoint = null;\n    }\n\n    this.dispatchToElement(hovered, name, event);\n  };\n});\n\nfunction isHover(displayable, x, y) {\n  if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n    var el = displayable;\n    var isSilent;\n\n    while (el) {\n      // If clipped by ancestor.\n      // FIXME: If clipPath has neither stroke nor fill,\n      // el.clipPath.contain(x, y) will always return false.\n      if (el.clipPath && !el.clipPath.contain(x, y)) {\n        return false;\n      }\n\n      if (el.silent) {\n        isSilent = true;\n      }\n\n      el = el.parent;\n    }\n\n    return isSilent ? SILENT : true;\n  }\n\n  return false;\n}\n/**\n * See [Drag outside].\n */\n\n\nfunction isOutsideBoundary(handlerInstance, x, y) {\n  var painter = handlerInstance.painter;\n  return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\n\nutil.mixin(Handler, Eventful);\nutil.mixin(Handler, Draggable);\nvar _default = Handler;\nmodule.exports = _default;","// TODO Draggable for group\n// FIXME Draggable on element which has parent rotation or scale\nfunction Draggable() {\n  this.on('mousedown', this._dragStart, this);\n  this.on('mousemove', this._drag, this);\n  this.on('mouseup', this._dragEnd, this); // `mosuemove` and `mouseup` can be continue to fire when dragging.\n  // See [Drag outside] in `Handler.js`. So we do not need to trigger\n  // `_dragEnd` when globalout. That would brings better user experience.\n  // this.on('globalout', this._dragEnd, this);\n  // this._dropTarget = null;\n  // this._draggingTarget = null;\n  // this._x = 0;\n  // this._y = 0;\n}\n\nDraggable.prototype = {\n  constructor: Draggable,\n  _dragStart: function (e) {\n    var draggingTarget = e.target; // Find if there is draggable in the ancestor\n\n    while (draggingTarget && !draggingTarget.draggable) {\n      draggingTarget = draggingTarget.parent;\n    }\n\n    if (draggingTarget) {\n      this._draggingTarget = draggingTarget;\n      draggingTarget.dragging = true;\n      this._x = e.offsetX;\n      this._y = e.offsetY;\n      this.dispatchToElement(param(draggingTarget, e), 'dragstart', e.event);\n    }\n  },\n  _drag: function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var dx = x - this._x;\n      var dy = y - this._y;\n      this._x = x;\n      this._y = y;\n      draggingTarget.drift(dx, dy, e);\n      this.dispatchToElement(param(draggingTarget, e), 'drag', e.event);\n      var dropTarget = this.findHover(x, y, draggingTarget).target;\n      var lastDropTarget = this._dropTarget;\n      this._dropTarget = dropTarget;\n\n      if (draggingTarget !== dropTarget) {\n        if (lastDropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(lastDropTarget, e), 'dragleave', e.event);\n        }\n\n        if (dropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(dropTarget, e), 'dragenter', e.event);\n        }\n      }\n    }\n  },\n  _dragEnd: function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      draggingTarget.dragging = false;\n    }\n\n    this.dispatchToElement(param(draggingTarget, e), 'dragend', e.event);\n\n    if (this._dropTarget) {\n      this.dispatchToElement(param(this._dropTarget, e), 'drop', e.event);\n    }\n\n    this._draggingTarget = null;\n    this._dropTarget = null;\n  }\n};\n\nfunction param(target, e) {\n  return {\n    target: target,\n    topTarget: e && e.topTarget\n  };\n}\n\nvar _default = Draggable;\nmodule.exports = _default;","/**\n * The algoritm is learnt from\n * https://franklinta.com/2014/09/08/computing-css-matrix3d-transforms/\n * And we made some optimization for matrix inversion.\n * Other similar approaches:\n * \"cv::getPerspectiveTransform\", \"Direct Linear Transformation\".\n */\nvar LN2 = Math.log(2);\n\nfunction determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\n  var cacheKey = rowMask + '-' + colMask;\n  var fullRank = rows.length;\n\n  if (detCache.hasOwnProperty(cacheKey)) {\n    return detCache[cacheKey];\n  }\n\n  if (rank === 1) {\n    // In this case the colMask must be like: `11101111`. We can find the place of `0`.\n    var colStart = Math.round(Math.log((1 << fullRank) - 1 & ~colMask) / LN2);\n    return rows[rowStart][colStart];\n  }\n\n  var subRowMask = rowMask | 1 << rowStart;\n  var subRowStart = rowStart + 1;\n\n  while (rowMask & 1 << subRowStart) {\n    subRowStart++;\n  }\n\n  var sum = 0;\n\n  for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\n    var colTag = 1 << j;\n\n    if (!(colTag & colMask)) {\n      sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j] // det(subMatrix(0, j))\n      * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n      colLocalIdx++;\n    }\n  }\n\n  detCache[cacheKey] = sum;\n  return sum;\n}\n/**\n * Usage:\n * ```js\n * var transformer = buildTransformer(\n *     [10, 44, 100, 44, 100, 300, 10, 300],\n *     [50, 54, 130, 14, 140, 330, 14, 220]\n * );\n * var out = [];\n * transformer && transformer([11, 33], out);\n * ```\n *\n * Notice: `buildTransformer` may take more than 10ms in some Android device.\n *\n * @param {Array.<number>} src source four points, [x0, y0, x1, y1, x2, y2, x3, y3]\n * @param {Array.<number>} dest destination four points, [x0, y0, x1, y1, x2, y2, x3, y3]\n * @return {Function} transformer If fail, return null/undefined.\n */\n\n\nfunction buildTransformer(src, dest) {\n  var mA = [[src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]], [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]], [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]], [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]], [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]], [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]], [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]], [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]];\n  var detCache = {};\n  var det = determinant(mA, 8, 0, 0, 0, detCache);\n\n  if (det === 0) {\n    // can not make transformer when and only when\n    // any three of the markers are collinear.\n    return;\n  } // `invert(mA) * dest`, that is, `adj(mA) / det * dest`.\n\n\n  var vh = [];\n\n  for (var i = 0; i < 8; i++) {\n    for (var j = 0; j < 8; j++) {\n      vh[j] == null && (vh[j] = 0);\n      vh[j] += ((i + j) % 2 ? -1 : 1) * // det(subMatrix(i, j))\n      determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache) / det * dest[i];\n    }\n  }\n\n  return function (out, srcPointX, srcPointY) {\n    var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n    out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n    out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n  };\n}\n\nexports.buildTransformer = buildTransformer;","var eventUtil = require(\"./event\");\n\n/**\n * Only implements needed gestures for mobile.\n */\nvar GestureMgr = function () {\n  /**\n   * @private\n   * @type {Array.<Object>}\n   */\n  this._track = [];\n};\n\nGestureMgr.prototype = {\n  constructor: GestureMgr,\n  recognize: function (event, target, root) {\n    this._doTrack(event, target, root);\n\n    return this._recognize(event);\n  },\n  clear: function () {\n    this._track.length = 0;\n    return this;\n  },\n  _doTrack: function (event, target, root) {\n    var touches = event.touches;\n\n    if (!touches) {\n      return;\n    }\n\n    var trackItem = {\n      points: [],\n      touches: [],\n      target: target,\n      event: event\n    };\n\n    for (var i = 0, len = touches.length; i < len; i++) {\n      var touch = touches[i];\n      var pos = eventUtil.clientToLocal(root, touch, {});\n      trackItem.points.push([pos.zrX, pos.zrY]);\n      trackItem.touches.push(touch);\n    }\n\n    this._track.push(trackItem);\n  },\n  _recognize: function (event) {\n    for (var eventName in recognizers) {\n      if (recognizers.hasOwnProperty(eventName)) {\n        var gestureInfo = recognizers[eventName](this._track, event);\n\n        if (gestureInfo) {\n          return gestureInfo;\n        }\n      }\n    }\n  }\n};\n\nfunction dist(pointPair) {\n  var dx = pointPair[1][0] - pointPair[0][0];\n  var dy = pointPair[1][1] - pointPair[0][1];\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction center(pointPair) {\n  return [(pointPair[0][0] + pointPair[1][0]) / 2, (pointPair[0][1] + pointPair[1][1]) / 2];\n}\n\nvar recognizers = {\n  pinch: function (track, event) {\n    var trackLen = track.length;\n\n    if (!trackLen) {\n      return;\n    }\n\n    var pinchEnd = (track[trackLen - 1] || {}).points;\n    var pinchPre = (track[trackLen - 2] || {}).points || pinchEnd;\n\n    if (pinchPre && pinchPre.length > 1 && pinchEnd && pinchEnd.length > 1) {\n      var pinchScale = dist(pinchEnd) / dist(pinchPre);\n      !isFinite(pinchScale) && (pinchScale = 1);\n      event.pinchScale = pinchScale;\n      var pinchCenter = center(pinchEnd);\n      event.pinchX = pinchCenter[0];\n      event.pinchY = pinchCenter[1];\n      return {\n        type: 'pinch',\n        target: track[0].target,\n        event: event\n      };\n    }\n  } // Only pinch currently.\n\n};\nvar _default = GestureMgr;\nmodule.exports = _default;","var util = require(\"./core/util\");\n\nvar env = require(\"./core/env\");\n\nvar Group = require(\"./container/Group\");\n\nvar timsort = require(\"./core/timsort\");\n\n// Use timsort because in most case elements are partially sorted\n// https://jsfiddle.net/pissang/jr4x7mdm/8/\nfunction shapeCompareFunc(a, b) {\n  if (a.zlevel === b.zlevel) {\n    if (a.z === b.z) {\n      // if (a.z2 === b.z2) {\n      //     // FIXME Slow has renderidx compare\n      //     // http://stackoverflow.com/questions/20883421/sorting-in-javascript-should-every-compare-function-have-a-return-0-statement\n      //     // https://github.com/v8/v8/blob/47cce544a31ed5577ffe2963f67acb4144ee0232/src/js/array.js#L1012\n      //     return a.__renderidx - b.__renderidx;\n      // }\n      return a.z2 - b.z2;\n    }\n\n    return a.z - b.z;\n  }\n\n  return a.zlevel - b.zlevel;\n}\n/**\n *  (M)\n * @alias module:zrender/Storage\n * @constructor\n */\n\n\nvar Storage = function () {\n  // jshint ignore:line\n  this._roots = [];\n  this._displayList = [];\n  this._displayListLen = 0;\n};\n\nStorage.prototype = {\n  constructor: Storage,\n\n  /**\n   * @param  {Function} cb\n   *\n   */\n  traverse: function (cb, context) {\n    for (var i = 0; i < this._roots.length; i++) {\n      this._roots[i].traverse(cb, context);\n    }\n  },\n\n  /**\n   * \n   * @param {boolean} [update=false] \n   * @param {boolean} [includeIgnore=false]  ignore ,  update  true \n   *\n   * {@link module:zrender/graphic/Displayable.prototype.updateDisplayList}\n   * @return {Array.<module:zrender/graphic/Displayable>}\n   */\n  getDisplayList: function (update, includeIgnore) {\n    includeIgnore = includeIgnore || false;\n\n    if (update) {\n      this.updateDisplayList(includeIgnore);\n    }\n\n    return this._displayList;\n  },\n\n  /**\n   * \n   * GroupShapeShape\n   * zlevel > z > \n   * @param {boolean} [includeIgnore=false]  ignore \n   */\n  updateDisplayList: function (includeIgnore) {\n    this._displayListLen = 0;\n    var roots = this._roots;\n    var displayList = this._displayList;\n\n    for (var i = 0, len = roots.length; i < len; i++) {\n      this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n    }\n\n    displayList.length = this._displayListLen;\n    env.canvasSupported && timsort(displayList, shapeCompareFunc);\n  },\n  _updateAndAddDisplayable: function (el, clipPaths, includeIgnore) {\n    if (el.ignore && !includeIgnore) {\n      return;\n    }\n\n    el.beforeUpdate();\n\n    if (el.__dirty) {\n      el.update();\n    }\n\n    el.afterUpdate();\n    var userSetClipPath = el.clipPath;\n\n    if (userSetClipPath) {\n      // FIXME \n      if (clipPaths) {\n        clipPaths = clipPaths.slice();\n      } else {\n        clipPaths = [];\n      }\n\n      var currentClipPath = userSetClipPath;\n      var parentClipPath = el; // Recursively add clip path\n\n      while (currentClipPath) {\n        // clipPath  clipPath \n        currentClipPath.parent = parentClipPath;\n        currentClipPath.updateTransform();\n        clipPaths.push(currentClipPath);\n        parentClipPath = currentClipPath;\n        currentClipPath = currentClipPath.clipPath;\n      }\n    }\n\n    if (el.isGroup) {\n      var children = el._children;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i]; // Force to mark as dirty if group is dirty\n        // FIXME __dirtyPath ?\n\n        if (el.__dirty) {\n          child.__dirty = true;\n        }\n\n        this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n      } // Mark group clean here\n\n\n      el.__dirty = false;\n    } else {\n      el.__clipPaths = clipPaths;\n      this._displayList[this._displayListLen++] = el;\n    }\n  },\n\n  /**\n   * (Shape)(Group)\n   * @param {module:zrender/Element} el\n   */\n  addRoot: function (el) {\n    if (el.__storage === this) {\n      return;\n    }\n\n    if (el instanceof Group) {\n      el.addChildrenToStorage(this);\n    }\n\n    this.addToStorage(el);\n\n    this._roots.push(el);\n  },\n\n  /**\n   * (Shape)(Group)\n   * @param {string|Array.<string>} [el] Storage\n   */\n  delRoot: function (el) {\n    if (el == null) {\n      // el\n      for (var i = 0; i < this._roots.length; i++) {\n        var root = this._roots[i];\n\n        if (root instanceof Group) {\n          root.delChildrenFromStorage(this);\n        }\n      }\n\n      this._roots = [];\n      this._displayList = [];\n      this._displayListLen = 0;\n      return;\n    }\n\n    if (el instanceof Array) {\n      for (var i = 0, l = el.length; i < l; i++) {\n        this.delRoot(el[i]);\n      }\n\n      return;\n    }\n\n    var idx = util.indexOf(this._roots, el);\n\n    if (idx >= 0) {\n      this.delFromStorage(el);\n\n      this._roots.splice(idx, 1);\n\n      if (el instanceof Group) {\n        el.delChildrenFromStorage(this);\n      }\n    }\n  },\n  addToStorage: function (el) {\n    if (el) {\n      el.__storage = this;\n      el.dirty(false);\n    }\n\n    return this;\n  },\n  delFromStorage: function (el) {\n    if (el) {\n      el.__storage = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * Storage\n   */\n  dispose: function () {\n    this._renderList = this._roots = null;\n  },\n  displayableSortFunc: shapeCompareFunc\n};\nvar _default = Storage;\nmodule.exports = _default;","var Animator = require(\"../animation/Animator\");\n\nvar logError = require(\"../core/log\");\n\nvar _util = require(\"../core/util\");\n\nvar isString = _util.isString;\nvar isFunction = _util.isFunction;\nvar isObject = _util.isObject;\nvar isArrayLike = _util.isArrayLike;\nvar indexOf = _util.indexOf;\n\n/**\n * @alias module:zrender/mixin/Animatable\n * @constructor\n */\nvar Animatable = function () {\n  /**\n   * @type {Array.<module:zrender/animation/Animator>}\n   * @readOnly\n   */\n  this.animators = [];\n};\n\nAnimatable.prototype = {\n  constructor: Animatable,\n\n  /**\n   * \n   *\n   * @param {string} path The path to fetch value from object, like 'a.b.c'.\n   * @param {boolean} [loop] Whether to loop animation.\n   * @return {module:zrender/animation/Animator}\n   * @example:\n   *     el.animate('style', false)\n   *         .when(1000, {x: 10} )\n   *         .done(function(){ // Animation done })\n   *         .start()\n   */\n  animate: function (path, loop) {\n    var target;\n    var animatingShape = false;\n    var el = this;\n    var zr = this.__zr;\n\n    if (path) {\n      var pathSplitted = path.split('.');\n      var prop = el; // If animating shape\n\n      animatingShape = pathSplitted[0] === 'shape';\n\n      for (var i = 0, l = pathSplitted.length; i < l; i++) {\n        if (!prop) {\n          continue;\n        }\n\n        prop = prop[pathSplitted[i]];\n      }\n\n      if (prop) {\n        target = prop;\n      }\n    } else {\n      target = el;\n    }\n\n    if (!target) {\n      logError('Property \"' + path + '\" is not existed in element ' + el.id);\n      return;\n    }\n\n    var animators = el.animators;\n    var animator = new Animator(target, loop);\n    animator.during(function (target) {\n      el.dirty(animatingShape);\n    }).done(function () {\n      // FIXME Animator will not be removed if use `Animator#stop` to stop animation\n      animators.splice(indexOf(animators, animator), 1);\n    });\n    animators.push(animator); // If animate after added to the zrender\n\n    if (zr) {\n      zr.animation.addAnimator(animator);\n    }\n\n    return animator;\n  },\n\n  /**\n   * \n   * @param {boolean} forwardToLast If move to last frame before stop\n   */\n  stopAnimation: function (forwardToLast) {\n    var animators = this.animators;\n    var len = animators.length;\n\n    for (var i = 0; i < len; i++) {\n      animators[i].stop(forwardToLast);\n    }\n\n    animators.length = 0;\n    return this;\n  },\n\n  /**\n   * Caution: this method will stop previous animation.\n   * So do not use this method to one element twice before\n   * animation starts, unless you know what you are doing.\n   * @param {Object} target\n   * @param {number} [time=500] Time in ms\n   * @param {string} [easing='linear']\n   * @param {number} [delay=0]\n   * @param {Function} [callback]\n   * @param {Function} [forceAnimate] Prevent stop animation and callback\n   *        immediently when target values are the same as current values.\n   *\n   * @example\n   *  // Animate position\n   *  el.animateTo({\n   *      position: [10, 10]\n   *  }, function () { // done })\n   *\n   *  // Animate shape, style and position in 100ms, delayed 100ms, with cubicOut easing\n   *  el.animateTo({\n   *      shape: {\n   *          width: 500\n   *      },\n   *      style: {\n   *          fill: 'red'\n   *      }\n   *      position: [10, 10]\n   *  }, 100, 100, 'cubicOut', function () { // done })\n   */\n  // TODO Return animation key\n  animateTo: function (target, time, delay, easing, callback, forceAnimate) {\n    animateTo(this, target, time, delay, easing, callback, forceAnimate);\n  },\n\n  /**\n   * Animate from the target state to current state.\n   * The params and the return value are the same as `this.animateTo`.\n   */\n  animateFrom: function (target, time, delay, easing, callback, forceAnimate) {\n    animateTo(this, target, time, delay, easing, callback, forceAnimate, true);\n  }\n};\n\nfunction animateTo(animatable, target, time, delay, easing, callback, forceAnimate, reverse) {\n  // animateTo(target, time, easing, callback);\n  if (isString(delay)) {\n    callback = easing;\n    easing = delay;\n    delay = 0;\n  } // animateTo(target, time, delay, callback);\n  else if (isFunction(easing)) {\n      callback = easing;\n      easing = 'linear';\n      delay = 0;\n    } // animateTo(target, time, callback);\n    else if (isFunction(delay)) {\n        callback = delay;\n        delay = 0;\n      } // animateTo(target, callback)\n      else if (isFunction(time)) {\n          callback = time;\n          time = 500;\n        } // animateTo(target)\n        else if (!time) {\n            time = 500;\n          } // Stop all previous animations\n\n\n  animatable.stopAnimation();\n  animateToShallow(animatable, '', animatable, target, time, delay, reverse); // Animators may be removed immediately after start\n  // if there is nothing to animate\n\n  var animators = animatable.animators.slice();\n  var count = animators.length;\n\n  function done() {\n    count--;\n\n    if (!count) {\n      callback && callback();\n    }\n  } // No animators. This should be checked before animators[i].start(),\n  // because 'done' may be executed immediately if no need to animate.\n\n\n  if (!count) {\n    callback && callback();\n  } // Start after all animators created\n  // Incase any animator is done immediately when all animation properties are not changed\n\n\n  for (var i = 0; i < animators.length; i++) {\n    animators[i].done(done).start(easing, forceAnimate);\n  }\n}\n/**\n * @param {string} path=''\n * @param {Object} source=animatable\n * @param {Object} target\n * @param {number} [time=500]\n * @param {number} [delay=0]\n * @param {boolean} [reverse] If `true`, animate\n *        from the `target` to current state.\n *\n * @example\n *  // Animate position\n *  el._animateToShallow({\n *      position: [10, 10]\n *  })\n *\n *  // Animate shape, style and position in 100ms, delayed 100ms\n *  el._animateToShallow({\n *      shape: {\n *          width: 500\n *      },\n *      style: {\n *          fill: 'red'\n *      }\n *      position: [10, 10]\n *  }, 100, 100)\n */\n\n\nfunction animateToShallow(animatable, path, source, target, time, delay, reverse) {\n  var objShallow = {};\n  var propertyCount = 0;\n\n  for (var name in target) {\n    if (!target.hasOwnProperty(name)) {\n      continue;\n    }\n\n    if (source[name] != null) {\n      if (isObject(target[name]) && !isArrayLike(target[name])) {\n        animateToShallow(animatable, path ? path + '.' + name : name, source[name], target[name], time, delay, reverse);\n      } else {\n        if (reverse) {\n          objShallow[name] = source[name];\n          setAttrByPath(animatable, path, name, target[name]);\n        } else {\n          objShallow[name] = target[name];\n        }\n\n        propertyCount++;\n      }\n    } else if (target[name] != null && !reverse) {\n      setAttrByPath(animatable, path, name, target[name]);\n    }\n  }\n\n  if (propertyCount > 0) {\n    animatable.animate(path, false).when(time == null ? 500 : time, objShallow).delay(delay || 0);\n  }\n}\n\nfunction setAttrByPath(el, path, name, value) {\n  // Attr directly if not has property\n  // FIXME, if some property not needed for element ?\n  if (!path) {\n    el.attr(name, value);\n  } else {\n    // Only support set shape or style\n    var props = {};\n    props[path] = {};\n    props[path][name] = value;\n    el.attr(props);\n  }\n}\n\nvar _default = Animatable;\nmodule.exports = _default;","var easingFuncs = require(\"./easing\");\n\n/**\n * \n * @config target onframe\n * @config life(1000) \n * @config delay(0) \n * @config loop(true)\n * @config gap(0) \n * @config onframe\n * @config easing(optional)\n * @config ondestroy(optional)\n * @config onrestart(optional)\n *\n * TODO pause\n */\nfunction Clip(options) {\n  this._target = options.target; // \n\n  this._life = options.life || 1000; // \n\n  this._delay = options.delay || 0; // \n  // this._startTime = new Date().getTime() + this._delay;// \n\n  this._initialized = false; // \n\n  this.loop = options.loop == null ? false : options.loop;\n  this.gap = options.gap || 0;\n  this.easing = options.easing || 'Linear';\n  this.onframe = options.onframe;\n  this.ondestroy = options.ondestroy;\n  this.onrestart = options.onrestart;\n  this._pausedTime = 0;\n  this._paused = false;\n}\n\nClip.prototype = {\n  constructor: Clip,\n  step: function (globalTime, deltaTime) {\n    // Set startTime on first step, or _startTime may has milleseconds different between clips\n    // PENDING\n    if (!this._initialized) {\n      this._startTime = globalTime + this._delay;\n      this._initialized = true;\n    }\n\n    if (this._paused) {\n      this._pausedTime += deltaTime;\n      return;\n    }\n\n    var percent = (globalTime - this._startTime - this._pausedTime) / this._life; // \n\n    if (percent < 0) {\n      return;\n    }\n\n    percent = Math.min(percent, 1);\n    var easing = this.easing;\n    var easingFunc = typeof easing === 'string' ? easingFuncs[easing] : easing;\n    var schedule = typeof easingFunc === 'function' ? easingFunc(percent) : percent;\n    this.fire('frame', schedule); // \n\n    if (percent === 1) {\n      if (this.loop) {\n        this.restart(globalTime); // \n        //  stage.update \n\n        return 'restart';\n      } // \n      // Animation.update\n\n\n      this._needsRemove = true;\n      return 'destroy';\n    }\n\n    return null;\n  },\n  restart: function (globalTime) {\n    var remainder = (globalTime - this._startTime - this._pausedTime) % this._life;\n    this._startTime = globalTime - remainder + this.gap;\n    this._pausedTime = 0;\n    this._needsRemove = false;\n  },\n  fire: function (eventType, arg) {\n    eventType = 'on' + eventType;\n\n    if (this[eventType]) {\n      this[eventType](this._target, arg);\n    }\n  },\n  pause: function () {\n    this._paused = true;\n  },\n  resume: function () {\n    this._paused = false;\n  }\n};\nvar _default = Clip;\nmodule.exports = _default;","/**\n *  https://github.com/sole/tween.js/blob/master/src/Tween.js\n * @see http://sole.github.io/tween.js/examples/03_graphs.html\n * @exports zrender/animation/easing\n */\nvar easing = {\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  linear: function (k) {\n    return k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quadraticIn: function (k) {\n    return k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quadraticOut: function (k) {\n    return k * (2 - k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quadraticInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k;\n    }\n\n    return -0.5 * (--k * (k - 2) - 1);\n  },\n  // t^3\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  cubicIn: function (k) {\n    return k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  cubicOut: function (k) {\n    return --k * k * k + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  cubicInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k;\n    }\n\n    return 0.5 * ((k -= 2) * k * k + 2);\n  },\n  // t^4\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quarticIn: function (k) {\n    return k * k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quarticOut: function (k) {\n    return 1 - --k * k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quarticInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k;\n    }\n\n    return -0.5 * ((k -= 2) * k * k * k - 2);\n  },\n  // t^5\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quinticIn: function (k) {\n    return k * k * k * k * k;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quinticOut: function (k) {\n    return --k * k * k * k * k + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  quinticInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return 0.5 * k * k * k * k * k;\n    }\n\n    return 0.5 * ((k -= 2) * k * k * k * k + 2);\n  },\n  // sin(t)\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  sinusoidalIn: function (k) {\n    return 1 - Math.cos(k * Math.PI / 2);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  sinusoidalOut: function (k) {\n    return Math.sin(k * Math.PI / 2);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  sinusoidalInOut: function (k) {\n    return 0.5 * (1 - Math.cos(Math.PI * k));\n  },\n  // 2^t\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  exponentialIn: function (k) {\n    return k === 0 ? 0 : Math.pow(1024, k - 1);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  exponentialOut: function (k) {\n    return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  exponentialInOut: function (k) {\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if ((k *= 2) < 1) {\n      return 0.5 * Math.pow(1024, k - 1);\n    }\n\n    return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n  },\n  // sqrt(1-t^2)\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  circularIn: function (k) {\n    return 1 - Math.sqrt(1 - k * k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  circularOut: function (k) {\n    return Math.sqrt(1 - --k * k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  circularInOut: function (k) {\n    if ((k *= 2) < 1) {\n      return -0.5 * (Math.sqrt(1 - k * k) - 1);\n    }\n\n    return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n  },\n  // \n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  elasticIn: function (k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = p * Math.asin(1 / a) / (2 * Math.PI);\n    }\n\n    return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  elasticOut: function (k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = p * Math.asin(1 / a) / (2 * Math.PI);\n    }\n\n    return a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  elasticInOut: function (k) {\n    var s;\n    var a = 0.1;\n    var p = 0.4;\n\n    if (k === 0) {\n      return 0;\n    }\n\n    if (k === 1) {\n      return 1;\n    }\n\n    if (!a || a < 1) {\n      a = 1;\n      s = p / 4;\n    } else {\n      s = p * Math.asin(1 / a) / (2 * Math.PI);\n    }\n\n    if ((k *= 2) < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));\n    }\n\n    return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n  },\n  // \n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  backIn: function (k) {\n    var s = 1.70158;\n    return k * k * ((s + 1) * k - s);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  backOut: function (k) {\n    var s = 1.70158;\n    return --k * k * ((s + 1) * k + s) + 1;\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  backInOut: function (k) {\n    var s = 1.70158 * 1.525;\n\n    if ((k *= 2) < 1) {\n      return 0.5 * (k * k * ((s + 1) * k - s));\n    }\n\n    return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n  },\n  // \n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  bounceIn: function (k) {\n    return 1 - easing.bounceOut(1 - k);\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  bounceOut: function (k) {\n    if (k < 1 / 2.75) {\n      return 7.5625 * k * k;\n    } else if (k < 2 / 2.75) {\n      return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n    } else if (k < 2.5 / 2.75) {\n      return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n    } else {\n      return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n    }\n  },\n\n  /**\n  * @param {number} k\n  * @return {number}\n  */\n  bounceInOut: function (k) {\n    if (k < 0.5) {\n      return easing.bounceIn(k * 2) * 0.5;\n    }\n\n    return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n  }\n};\nvar _default = easing;\nmodule.exports = _default;","var _config = require(\"./config\");\n\nvar devicePixelRatio = _config.devicePixelRatio;\n\nvar util = require(\"./core/util\");\n\nvar logError = require(\"./core/log\");\n\nvar BoundingRect = require(\"./core/BoundingRect\");\n\nvar timsort = require(\"./core/timsort\");\n\nvar Layer = require(\"./Layer\");\n\nvar requestAnimationFrame = require(\"./animation/requestAnimationFrame\");\n\nvar Image = require(\"./graphic/Image\");\n\nvar env = require(\"./core/env\");\n\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\n\nfunction parseInt10(val) {\n  return parseInt(val, 10);\n}\n\nfunction isLayerValid(layer) {\n  if (!layer) {\n    return false;\n  }\n\n  if (layer.__builtin__) {\n    return true;\n  }\n\n  if (typeof layer.resize !== 'function' || typeof layer.refresh !== 'function') {\n    return false;\n  }\n\n  return true;\n}\n\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar viewRect = new BoundingRect(0, 0, 0, 0);\n\nfunction isDisplayableCulled(el, width, height) {\n  tmpRect.copy(el.getBoundingRect());\n\n  if (el.transform) {\n    tmpRect.applyTransform(el.transform);\n  }\n\n  viewRect.width = width;\n  viewRect.height = height;\n  return !tmpRect.intersect(viewRect);\n}\n\nfunction isClipPathChanged(clipPaths, prevClipPaths) {\n  // displayable.__clipPaths can only be `null`/`undefined` or an non-empty array.\n  if (clipPaths === prevClipPaths) {\n    return false;\n  }\n\n  if (!clipPaths || !prevClipPaths || clipPaths.length !== prevClipPaths.length) {\n    return true;\n  }\n\n  for (var i = 0; i < clipPaths.length; i++) {\n    if (clipPaths[i] !== prevClipPaths[i]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction doClip(clipPaths, ctx) {\n  for (var i = 0; i < clipPaths.length; i++) {\n    var clipPath = clipPaths[i];\n    clipPath.setTransform(ctx);\n    ctx.beginPath();\n    clipPath.buildPath(ctx, clipPath.shape);\n    ctx.clip(); // Transform back\n\n    clipPath.restoreTransform(ctx);\n  }\n}\n\nfunction createRoot(width, height) {\n  var domRoot = document.createElement('div'); // domRoot.onselectstart = returnFalse; // Avoid page selected\n\n  domRoot.style.cssText = ['position:relative', // IOS13 safari probably has a compositing bug (z order of the canvas and the consequent\n  // dom does not act as expected) when some of the parent dom has\n  // `-webkit-overflow-scrolling: touch;` and the webpage is longer than one screen and\n  // the canvas is not at the top part of the page.\n  // Check `https://bugs.webkit.org/show_bug.cgi?id=203681` for more details. We remove\n  // this `overflow:hidden` to avoid the bug.\n  // 'overflow:hidden',\n  'width:' + width + 'px', 'height:' + height + 'px', 'padding:0', 'margin:0', 'border-width:0'].join(';') + ';';\n  return domRoot;\n}\n/**\n * @alias module:zrender/Painter\n * @constructor\n * @param {HTMLElement} root \n * @param {module:zrender/Storage} storage\n * @param {Object} opts\n */\n\n\nvar Painter = function (root, storage, opts) {\n  this.type = 'canvas'; // In node environment using node-canvas\n\n  var singleCanvas = !root.nodeName // In node ?\n  || root.nodeName.toUpperCase() === 'CANVAS';\n  this._opts = opts = util.extend({}, opts || {});\n  /**\n   * @type {number}\n   */\n\n  this.dpr = opts.devicePixelRatio || devicePixelRatio;\n  /**\n   * @type {boolean}\n   * @private\n   */\n\n  this._singleCanvas = singleCanvas;\n  /**\n   * \n   * @type {HTMLElement}\n   */\n\n  this.root = root;\n  var rootStyle = root.style;\n\n  if (rootStyle) {\n    rootStyle['-webkit-tap-highlight-color'] = 'transparent';\n    rootStyle['-webkit-user-select'] = rootStyle['user-select'] = rootStyle['-webkit-touch-callout'] = 'none';\n    root.innerHTML = '';\n  }\n  /**\n   * @type {module:zrender/Storage}\n   */\n\n\n  this.storage = storage;\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n\n  var zlevelList = this._zlevelList = [];\n  /**\n   * @type {Object.<string, module:zrender/Layer>}\n   * @private\n   */\n\n  var layers = this._layers = {};\n  /**\n   * @type {Object.<string, Object>}\n   * @private\n   */\n\n  this._layerConfig = {};\n  /**\n   * zrender will do compositing when root is a canvas and have multiple zlevels.\n   */\n\n  this._needsManuallyCompositing = false;\n\n  if (!singleCanvas) {\n    this._width = this._getSize(0);\n    this._height = this._getSize(1);\n    var domRoot = this._domRoot = createRoot(this._width, this._height);\n    root.appendChild(domRoot);\n  } else {\n    var width = root.width;\n    var height = root.height;\n\n    if (opts.width != null) {\n      width = opts.width;\n    }\n\n    if (opts.height != null) {\n      height = opts.height;\n    }\n\n    this.dpr = opts.devicePixelRatio || 1; // Use canvas width and height directly\n\n    root.width = width * this.dpr;\n    root.height = height * this.dpr;\n    this._width = width;\n    this._height = height; // Create layer if only one given canvas\n    // Device can be specified to create a high dpi image.\n\n    var mainLayer = new Layer(root, this, this.dpr);\n    mainLayer.__builtin__ = true;\n    mainLayer.initContext(); // FIXME Use canvas width and height\n    // mainLayer.resize(width, height);\n\n    layers[CANVAS_ZLEVEL] = mainLayer;\n    mainLayer.zlevel = CANVAS_ZLEVEL; // Not use common zlevel.\n\n    zlevelList.push(CANVAS_ZLEVEL);\n    this._domRoot = root;\n  }\n  /**\n   * @type {module:zrender/Layer}\n   * @private\n   */\n\n\n  this._hoverlayer = null;\n  this._hoverElements = [];\n};\n\nPainter.prototype = {\n  constructor: Painter,\n  getType: function () {\n    return 'canvas';\n  },\n\n  /**\n   * If painter use a single canvas\n   * @return {boolean}\n   */\n  isSingleCanvas: function () {\n    return this._singleCanvas;\n  },\n\n  /**\n   * @return {HTMLDivElement}\n   */\n  getViewportRoot: function () {\n    return this._domRoot;\n  },\n  getViewportRootOffset: function () {\n    var viewportRoot = this.getViewportRoot();\n\n    if (viewportRoot) {\n      return {\n        offsetLeft: viewportRoot.offsetLeft || 0,\n        offsetTop: viewportRoot.offsetTop || 0\n      };\n    }\n  },\n\n  /**\n   * \n   * @param {boolean} [paintAll=false] displayable\n   */\n  refresh: function (paintAll) {\n    var list = this.storage.getDisplayList(true);\n    var zlevelList = this._zlevelList;\n    this._redrawId = Math.random();\n\n    this._paintList(list, paintAll, this._redrawId); // Paint custum layers\n\n\n    for (var i = 0; i < zlevelList.length; i++) {\n      var z = zlevelList[i];\n      var layer = this._layers[z];\n\n      if (!layer.__builtin__ && layer.refresh) {\n        var clearColor = i === 0 ? this._backgroundColor : null;\n        layer.refresh(clearColor);\n      }\n    }\n\n    this.refreshHover();\n    return this;\n  },\n  addHover: function (el, hoverStyle) {\n    if (el.__hoverMir) {\n      return;\n    }\n\n    var elMirror = new el.constructor({\n      style: el.style,\n      shape: el.shape,\n      z: el.z,\n      z2: el.z2,\n      silent: el.silent\n    });\n    elMirror.__from = el;\n    el.__hoverMir = elMirror;\n    hoverStyle && elMirror.setStyle(hoverStyle);\n\n    this._hoverElements.push(elMirror);\n\n    return elMirror;\n  },\n  removeHover: function (el) {\n    var elMirror = el.__hoverMir;\n    var hoverElements = this._hoverElements;\n    var idx = util.indexOf(hoverElements, elMirror);\n\n    if (idx >= 0) {\n      hoverElements.splice(idx, 1);\n    }\n\n    el.__hoverMir = null;\n  },\n  clearHover: function (el) {\n    var hoverElements = this._hoverElements;\n\n    for (var i = 0; i < hoverElements.length; i++) {\n      var from = hoverElements[i].__from;\n\n      if (from) {\n        from.__hoverMir = null;\n      }\n    }\n\n    hoverElements.length = 0;\n  },\n  refreshHover: function () {\n    var hoverElements = this._hoverElements;\n    var len = hoverElements.length;\n    var hoverLayer = this._hoverlayer;\n    hoverLayer && hoverLayer.clear();\n\n    if (!len) {\n      return;\n    }\n\n    timsort(hoverElements, this.storage.displayableSortFunc); // Use a extream large zlevel\n    // FIXME?\n\n    if (!hoverLayer) {\n      hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n    }\n\n    var scope = {};\n    hoverLayer.ctx.save();\n\n    for (var i = 0; i < len;) {\n      var el = hoverElements[i];\n      var originalEl = el.__from; // Original el is removed\n      // PENDING\n\n      if (!(originalEl && originalEl.__zr)) {\n        hoverElements.splice(i, 1);\n        originalEl.__hoverMir = null;\n        len--;\n        continue;\n      }\n\n      i++; // Use transform\n      // FIXME style and shape ?\n\n      if (!originalEl.invisible) {\n        el.transform = originalEl.transform;\n        el.invTransform = originalEl.invTransform;\n        el.__clipPaths = originalEl.__clipPaths; // el.\n\n        this._doPaintEl(el, hoverLayer, true, scope);\n      }\n    }\n\n    hoverLayer.ctx.restore();\n  },\n  getHoverLayer: function () {\n    return this.getLayer(HOVER_LAYER_ZLEVEL);\n  },\n  _paintList: function (list, paintAll, redrawId) {\n    if (this._redrawId !== redrawId) {\n      return;\n    }\n\n    paintAll = paintAll || false;\n\n    this._updateLayerStatus(list);\n\n    var finished = this._doPaintList(list, paintAll);\n\n    if (this._needsManuallyCompositing) {\n      this._compositeManually();\n    }\n\n    if (!finished) {\n      var self = this;\n      requestAnimationFrame(function () {\n        self._paintList(list, paintAll, redrawId);\n      });\n    }\n  },\n  _compositeManually: function () {\n    var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n    var width = this._domRoot.width;\n    var height = this._domRoot.height;\n    ctx.clearRect(0, 0, width, height); // PENDING, If only builtin layer?\n\n    this.eachBuiltinLayer(function (layer) {\n      if (layer.virtual) {\n        ctx.drawImage(layer.dom, 0, 0, width, height);\n      }\n    });\n  },\n  _doPaintList: function (list, paintAll) {\n    var layerList = [];\n\n    for (var zi = 0; zi < this._zlevelList.length; zi++) {\n      var zlevel = this._zlevelList[zi];\n      var layer = this._layers[zlevel];\n\n      if (layer.__builtin__ && layer !== this._hoverlayer && (layer.__dirty || paintAll)) {\n        layerList.push(layer);\n      }\n    }\n\n    var finished = true;\n\n    for (var k = 0; k < layerList.length; k++) {\n      var layer = layerList[k];\n      var ctx = layer.ctx;\n      var scope = {};\n      ctx.save();\n      var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n      var useTimer = !paintAll && layer.incremental && Date.now;\n      var startTime = useTimer && Date.now();\n      var clearColor = layer.zlevel === this._zlevelList[0] ? this._backgroundColor : null; // All elements in this layer are cleared.\n\n      if (layer.__startIndex === layer.__endIndex) {\n        layer.clear(false, clearColor);\n      } else if (start === layer.__startIndex) {\n        var firstEl = list[start];\n\n        if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n          layer.clear(false, clearColor);\n        }\n      }\n\n      if (start === -1) {\n        console.error('For some unknown reason. drawIndex is -1');\n        start = layer.__startIndex;\n      }\n\n      for (var i = start; i < layer.__endIndex; i++) {\n        var el = list[i];\n\n        this._doPaintEl(el, layer, paintAll, scope);\n\n        el.__dirty = el.__dirtyText = false;\n\n        if (useTimer) {\n          // Date.now can be executed in 13,025,305 ops/second.\n          var dTime = Date.now() - startTime; // Give 15 millisecond to draw.\n          // The rest elements will be drawn in the next frame.\n\n          if (dTime > 15) {\n            break;\n          }\n        }\n      }\n\n      layer.__drawIndex = i;\n\n      if (layer.__drawIndex < layer.__endIndex) {\n        finished = false;\n      }\n\n      if (scope.prevElClipPaths) {\n        // Needs restore the state. If last drawn element is in the clipping area.\n        ctx.restore();\n      }\n\n      ctx.restore();\n    }\n\n    if (env.wxa) {\n      // Flush for weixin application\n      util.each(this._layers, function (layer) {\n        if (layer && layer.ctx && layer.ctx.draw) {\n          layer.ctx.draw();\n        }\n      });\n    }\n\n    return finished;\n  },\n  _doPaintEl: function (el, currentLayer, forcePaint, scope) {\n    var ctx = currentLayer.ctx;\n    var m = el.transform;\n\n    if ((currentLayer.__dirty || forcePaint) && // Ignore invisible element\n    !el.invisible // Ignore transparent element\n    && el.style.opacity !== 0 // Ignore scale 0 element, in some environment like node-canvas\n    // Draw a scale 0 element can cause all following draw wrong\n    // And setTransform with scale 0 will cause set back transform failed.\n    && !(m && !m[0] && !m[3]) // Ignore culled element\n    && !(el.culling && isDisplayableCulled(el, this._width, this._height))) {\n      var clipPaths = el.__clipPaths;\n      var prevElClipPaths = scope.prevElClipPaths; // Optimize when clipping on group with several elements\n\n      if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n        // If has previous clipping state, restore from it\n        if (prevElClipPaths) {\n          ctx.restore();\n          scope.prevElClipPaths = null; // Reset prevEl since context has been restored\n\n          scope.prevEl = null;\n        } // New clipping state\n\n\n        if (clipPaths) {\n          ctx.save();\n          doClip(clipPaths, ctx);\n          scope.prevElClipPaths = clipPaths;\n        }\n      }\n\n      el.beforeBrush && el.beforeBrush(ctx);\n      el.brush(ctx, scope.prevEl || null);\n      scope.prevEl = el;\n      el.afterBrush && el.afterBrush(ctx);\n    }\n  },\n\n  /**\n   *  zlevel \n   * @param {number} zlevel\n   * @param {boolean} virtual Virtual layer will not be inserted into dom.\n   * @return {module:zrender/Layer}\n   */\n  getLayer: function (zlevel, virtual) {\n    if (this._singleCanvas && !this._needsManuallyCompositing) {\n      zlevel = CANVAS_ZLEVEL;\n    }\n\n    var layer = this._layers[zlevel];\n\n    if (!layer) {\n      // Create a new layer\n      layer = new Layer('zr_' + zlevel, this, this.dpr);\n      layer.zlevel = zlevel;\n      layer.__builtin__ = true;\n\n      if (this._layerConfig[zlevel]) {\n        util.merge(layer, this._layerConfig[zlevel], true);\n      } // TODO Remove EL_AFTER_INCREMENTAL_INC magic number\n      else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n          util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n        }\n\n      if (virtual) {\n        layer.virtual = virtual;\n      }\n\n      this.insertLayer(zlevel, layer); // Context is created after dom inserted to document\n      // Or excanvas will get 0px clientWidth and clientHeight\n\n      layer.initContext();\n    }\n\n    return layer;\n  },\n  insertLayer: function (zlevel, layer) {\n    var layersMap = this._layers;\n    var zlevelList = this._zlevelList;\n    var len = zlevelList.length;\n    var prevLayer = null;\n    var i = -1;\n    var domRoot = this._domRoot;\n\n    if (layersMap[zlevel]) {\n      logError('ZLevel ' + zlevel + ' has been used already');\n      return;\n    } // Check if is a valid layer\n\n\n    if (!isLayerValid(layer)) {\n      logError('Layer of zlevel ' + zlevel + ' is not valid');\n      return;\n    }\n\n    if (len > 0 && zlevel > zlevelList[0]) {\n      for (i = 0; i < len - 1; i++) {\n        if (zlevelList[i] < zlevel && zlevelList[i + 1] > zlevel) {\n          break;\n        }\n      }\n\n      prevLayer = layersMap[zlevelList[i]];\n    }\n\n    zlevelList.splice(i + 1, 0, zlevel);\n    layersMap[zlevel] = layer; // Vitual layer will not directly show on the screen.\n    // (It can be a WebGL layer and assigned to a ZImage element)\n    // But it still under management of zrender.\n\n    if (!layer.virtual) {\n      if (prevLayer) {\n        var prevDom = prevLayer.dom;\n\n        if (prevDom.nextSibling) {\n          domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n        } else {\n          domRoot.appendChild(layer.dom);\n        }\n      } else {\n        if (domRoot.firstChild) {\n          domRoot.insertBefore(layer.dom, domRoot.firstChild);\n        } else {\n          domRoot.appendChild(layer.dom);\n        }\n      }\n    }\n  },\n  // Iterate each layer\n  eachLayer: function (cb, context) {\n    var zlevelList = this._zlevelList;\n    var z;\n    var i;\n\n    for (i = 0; i < zlevelList.length; i++) {\n      z = zlevelList[i];\n      cb.call(context, this._layers[z], z);\n    }\n  },\n  // Iterate each buildin layer\n  eachBuiltinLayer: function (cb, context) {\n    var zlevelList = this._zlevelList;\n    var layer;\n    var z;\n    var i;\n\n    for (i = 0; i < zlevelList.length; i++) {\n      z = zlevelList[i];\n      layer = this._layers[z];\n\n      if (layer.__builtin__) {\n        cb.call(context, layer, z);\n      }\n    }\n  },\n  // Iterate each other layer except buildin layer\n  eachOtherLayer: function (cb, context) {\n    var zlevelList = this._zlevelList;\n    var layer;\n    var z;\n    var i;\n\n    for (i = 0; i < zlevelList.length; i++) {\n      z = zlevelList[i];\n      layer = this._layers[z];\n\n      if (!layer.__builtin__) {\n        cb.call(context, layer, z);\n      }\n    }\n  },\n\n  /**\n   * \n   * @param {Array.<module:zrender/Layer>} [prevLayer]\n   */\n  getLayers: function () {\n    return this._layers;\n  },\n  _updateLayerStatus: function (list) {\n    this.eachBuiltinLayer(function (layer, z) {\n      layer.__dirty = layer.__used = false;\n    });\n\n    function updatePrevLayer(idx) {\n      if (prevLayer) {\n        if (prevLayer.__endIndex !== idx) {\n          prevLayer.__dirty = true;\n        }\n\n        prevLayer.__endIndex = idx;\n      }\n    }\n\n    if (this._singleCanvas) {\n      for (var i = 1; i < list.length; i++) {\n        var el = list[i];\n\n        if (el.zlevel !== list[i - 1].zlevel || el.incremental) {\n          this._needsManuallyCompositing = true;\n          break;\n        }\n      }\n    }\n\n    var prevLayer = null;\n    var incrementalLayerCount = 0;\n    var prevZlevel;\n\n    for (var i = 0; i < list.length; i++) {\n      var el = list[i];\n      var zlevel = el.zlevel;\n      var layer;\n\n      if (prevZlevel !== zlevel) {\n        prevZlevel = zlevel;\n        incrementalLayerCount = 0;\n      } // TODO Not use magic number on zlevel.\n      // Each layer with increment element can be separated to 3 layers.\n      //          (Other Element drawn after incremental element)\n      // -----------------zlevel + EL_AFTER_INCREMENTAL_INC--------------------\n      //                      (Incremental element)\n      // ----------------------zlevel + INCREMENTAL_INC------------------------\n      //              (Element drawn before incremental element)\n      // --------------------------------zlevel--------------------------------\n\n\n      if (el.incremental) {\n        layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n        layer.incremental = true;\n        incrementalLayerCount = 1;\n      } else {\n        layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n      }\n\n      if (!layer.__builtin__) {\n        logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n      }\n\n      if (layer !== prevLayer) {\n        layer.__used = true;\n\n        if (layer.__startIndex !== i) {\n          layer.__dirty = true;\n        }\n\n        layer.__startIndex = i;\n\n        if (!layer.incremental) {\n          layer.__drawIndex = i;\n        } else {\n          // Mark layer draw index needs to update.\n          layer.__drawIndex = -1;\n        }\n\n        updatePrevLayer(i);\n        prevLayer = layer;\n      }\n\n      if (el.__dirty) {\n        layer.__dirty = true;\n\n        if (layer.incremental && layer.__drawIndex < 0) {\n          // Start draw from the first dirty element.\n          layer.__drawIndex = i;\n        }\n      }\n    }\n\n    updatePrevLayer(i);\n    this.eachBuiltinLayer(function (layer, z) {\n      // Used in last frame but not in this frame. Needs clear\n      if (!layer.__used && layer.getElementCount() > 0) {\n        layer.__dirty = true;\n        layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n      } // For incremental layer. In case start index changed and no elements are dirty.\n\n\n      if (layer.__dirty && layer.__drawIndex < 0) {\n        layer.__drawIndex = layer.__startIndex;\n      }\n    });\n  },\n\n  /**\n   * hover\n   */\n  clear: function () {\n    this.eachBuiltinLayer(this._clearLayer);\n    return this;\n  },\n  _clearLayer: function (layer) {\n    layer.clear();\n  },\n  setBackgroundColor: function (backgroundColor) {\n    this._backgroundColor = backgroundColor;\n  },\n\n  /**\n   * zlevel\n   *\n   * @param {string} zlevel\n   * @param {Object} config \n   * @param {string} [config.clearColor=0] \n   * @param {string} [config.motionBlur=false] \n   * @param {number} [config.lastFrameAlpha=0.7]\n   *                 alpha\n   */\n  configLayer: function (zlevel, config) {\n    if (config) {\n      var layerConfig = this._layerConfig;\n\n      if (!layerConfig[zlevel]) {\n        layerConfig[zlevel] = config;\n      } else {\n        util.merge(layerConfig[zlevel], config, true);\n      }\n\n      for (var i = 0; i < this._zlevelList.length; i++) {\n        var _zlevel = this._zlevelList[i]; // TODO Remove EL_AFTER_INCREMENTAL_INC magic number\n\n        if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n          var layer = this._layers[_zlevel];\n          util.merge(layer, layerConfig[zlevel], true);\n        }\n      }\n    }\n  },\n\n  /**\n   * \n   * @param {number} zlevel zlevel\n   */\n  delLayer: function (zlevel) {\n    var layers = this._layers;\n    var zlevelList = this._zlevelList;\n    var layer = layers[zlevel];\n\n    if (!layer) {\n      return;\n    }\n\n    layer.dom.parentNode.removeChild(layer.dom);\n    delete layers[zlevel];\n    zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n  },\n\n  /**\n   * \n   */\n  resize: function (width, height) {\n    if (!this._domRoot.style) {\n      // Maybe in node or worker\n      if (width == null || height == null) {\n        return;\n      }\n\n      this._width = width;\n      this._height = height;\n      this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n    } else {\n      var domRoot = this._domRoot; // FIXME Why ?\n\n      domRoot.style.display = 'none'; // Save input w/h\n\n      var opts = this._opts;\n      width != null && (opts.width = width);\n      height != null && (opts.height = height);\n      width = this._getSize(0);\n      height = this._getSize(1);\n      domRoot.style.display = ''; // resize\n\n      if (this._width !== width || height !== this._height) {\n        domRoot.style.width = width + 'px';\n        domRoot.style.height = height + 'px';\n\n        for (var id in this._layers) {\n          if (this._layers.hasOwnProperty(id)) {\n            this._layers[id].resize(width, height);\n          }\n        }\n\n        util.each(this._progressiveLayers, function (layer) {\n          layer.resize(width, height);\n        });\n        this.refresh(true);\n      }\n\n      this._width = width;\n      this._height = height;\n    }\n\n    return this;\n  },\n\n  /**\n   * \n   * @param {number} zlevel\n   */\n  clearLayer: function (zlevel) {\n    var layer = this._layers[zlevel];\n\n    if (layer) {\n      layer.clear();\n    }\n  },\n\n  /**\n   * \n   */\n  dispose: function () {\n    this.root.innerHTML = '';\n    this.root = this.storage = this._domRoot = this._layers = null;\n  },\n\n  /**\n   * Get canvas which has all thing rendered\n   * @param {Object} opts\n   * @param {string} [opts.backgroundColor]\n   * @param {number} [opts.pixelRatio]\n   */\n  getRenderedCanvas: function (opts) {\n    opts = opts || {};\n\n    if (this._singleCanvas && !this._compositeManually) {\n      return this._layers[CANVAS_ZLEVEL].dom;\n    }\n\n    var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n    imageLayer.initContext();\n    imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n\n    if (opts.pixelRatio <= this.dpr) {\n      this.refresh();\n      var width = imageLayer.dom.width;\n      var height = imageLayer.dom.height;\n      var ctx = imageLayer.ctx;\n      this.eachLayer(function (layer) {\n        if (layer.__builtin__) {\n          ctx.drawImage(layer.dom, 0, 0, width, height);\n        } else if (layer.renderToCanvas) {\n          imageLayer.ctx.save();\n          layer.renderToCanvas(imageLayer.ctx);\n          imageLayer.ctx.restore();\n        }\n      });\n    } else {\n      // PENDING, echarts-gl and incremental rendering.\n      var scope = {};\n      var displayList = this.storage.getDisplayList(true);\n\n      for (var i = 0; i < displayList.length; i++) {\n        var el = displayList[i];\n\n        this._doPaintEl(el, imageLayer, true, scope);\n      }\n    }\n\n    return imageLayer.dom;\n  },\n\n  /**\n   * \n   */\n  getWidth: function () {\n    return this._width;\n  },\n\n  /**\n   * \n   */\n  getHeight: function () {\n    return this._height;\n  },\n  _getSize: function (whIdx) {\n    var opts = this._opts;\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n      return parseFloat(opts[wh]);\n    }\n\n    var root = this.root; // IE8 does not support getComputedStyle, but it use VML.\n\n    var stl = document.defaultView.getComputedStyle(root);\n    return (root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh])) - (parseInt10(stl[plt]) || 0) - (parseInt10(stl[prb]) || 0) | 0;\n  },\n  pathToImage: function (path, dpr) {\n    dpr = dpr || this.dpr;\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    var rect = path.getBoundingRect();\n    var style = path.style;\n    var shadowBlurSize = style.shadowBlur * dpr;\n    var shadowOffsetX = style.shadowOffsetX * dpr;\n    var shadowOffsetY = style.shadowOffsetY * dpr;\n    var lineWidth = style.hasStroke() ? style.lineWidth : 0;\n    var leftMargin = Math.max(lineWidth / 2, -shadowOffsetX + shadowBlurSize);\n    var rightMargin = Math.max(lineWidth / 2, shadowOffsetX + shadowBlurSize);\n    var topMargin = Math.max(lineWidth / 2, -shadowOffsetY + shadowBlurSize);\n    var bottomMargin = Math.max(lineWidth / 2, shadowOffsetY + shadowBlurSize);\n    var width = rect.width + leftMargin + rightMargin;\n    var height = rect.height + topMargin + bottomMargin;\n    canvas.width = width * dpr;\n    canvas.height = height * dpr;\n    ctx.scale(dpr, dpr);\n    ctx.clearRect(0, 0, width, height);\n    ctx.dpr = dpr;\n    var pathTransform = {\n      position: path.position,\n      rotation: path.rotation,\n      scale: path.scale\n    };\n    path.position = [leftMargin - rect.x, topMargin - rect.y];\n    path.rotation = 0;\n    path.scale = [1, 1];\n    path.updateTransform();\n\n    if (path) {\n      path.brush(ctx);\n    }\n\n    var ImageShape = Image;\n    var imgShape = new ImageShape({\n      style: {\n        x: 0,\n        y: 0,\n        image: canvas\n      }\n    });\n\n    if (pathTransform.position != null) {\n      imgShape.position = path.position = pathTransform.position;\n    }\n\n    if (pathTransform.rotation != null) {\n      imgShape.rotation = path.rotation = pathTransform.rotation;\n    }\n\n    if (pathTransform.scale != null) {\n      imgShape.scale = path.scale = pathTransform.scale;\n    }\n\n    return imgShape;\n  }\n};\nvar _default = Painter;\nmodule.exports = _default;","var util = require(\"./core/util\");\n\nvar _config = require(\"./config\");\n\nvar devicePixelRatio = _config.devicePixelRatio;\n\nvar Style = require(\"./graphic/Style\");\n\nvar Pattern = require(\"./graphic/Pattern\");\n\n/**\n * @module zrender/Layer\n * @author pissang(https://www.github.com/pissang)\n */\nfunction returnFalse() {\n  return false;\n}\n/**\n * dom\n *\n * @inner\n * @param {string} id dom id \n * @param {Painter} painter painter instance\n * @param {number} number\n */\n\n\nfunction createDom(id, painter, dpr) {\n  var newDom = util.createCanvas();\n  var width = painter.getWidth();\n  var height = painter.getHeight();\n  var newDomStyle = newDom.style;\n\n  if (newDomStyle) {\n    // In node or some other non-browser environment\n    newDomStyle.position = 'absolute';\n    newDomStyle.left = 0;\n    newDomStyle.top = 0;\n    newDomStyle.width = width + 'px';\n    newDomStyle.height = height + 'px';\n    newDom.setAttribute('data-zr-dom-id', id);\n  }\n\n  newDom.width = width * dpr;\n  newDom.height = height * dpr;\n  return newDom;\n}\n/**\n * @alias module:zrender/Layer\n * @constructor\n * @extends module:zrender/mixin/Transformable\n * @param {string} id\n * @param {module:zrender/Painter} painter\n * @param {number} [dpr]\n */\n\n\nvar Layer = function (id, painter, dpr) {\n  var dom;\n  dpr = dpr || devicePixelRatio;\n\n  if (typeof id === 'string') {\n    dom = createDom(id, painter, dpr);\n  } // Not using isDom because in node it will return false\n  else if (util.isObject(id)) {\n      dom = id;\n      id = dom.id;\n    }\n\n  this.id = id;\n  this.dom = dom;\n  var domStyle = dom.style;\n\n  if (domStyle) {\n    // Not in node\n    dom.onselectstart = returnFalse; // \n\n    domStyle['-webkit-user-select'] = 'none';\n    domStyle['user-select'] = 'none';\n    domStyle['-webkit-touch-callout'] = 'none';\n    domStyle['-webkit-tap-highlight-color'] = 'rgba(0,0,0,0)';\n    domStyle['padding'] = 0; // eslint-disable-line dot-notation\n\n    domStyle['margin'] = 0; // eslint-disable-line dot-notation\n\n    domStyle['border-width'] = 0;\n  }\n\n  this.domBack = null;\n  this.ctxBack = null;\n  this.painter = painter;\n  this.config = null; // Configs\n\n  /**\n   * \n   * @type {string}\n   * @default 0\n   */\n\n  this.clearColor = 0;\n  /**\n   * \n   * @type {boolean}\n   * @default false\n   */\n\n  this.motionBlur = false;\n  /**\n   * alpha\n   * @type {number}\n   * @default 0.7\n   */\n\n  this.lastFrameAlpha = 0.7;\n  /**\n   * Layer dpr\n   * @type {number}\n   */\n\n  this.dpr = dpr;\n};\n\nLayer.prototype = {\n  constructor: Layer,\n  __dirty: true,\n  __used: false,\n  __drawIndex: 0,\n  __startIndex: 0,\n  __endIndex: 0,\n  incremental: false,\n  getElementCount: function () {\n    return this.__endIndex - this.__startIndex;\n  },\n  initContext: function () {\n    this.ctx = this.dom.getContext('2d');\n    this.ctx.dpr = this.dpr;\n  },\n  createBackBuffer: function () {\n    var dpr = this.dpr;\n    this.domBack = createDom('back-' + this.id, this.painter, dpr);\n    this.ctxBack = this.domBack.getContext('2d');\n\n    if (dpr !== 1) {\n      this.ctxBack.scale(dpr, dpr);\n    }\n  },\n\n  /**\n   * @param  {number} width\n   * @param  {number} height\n   */\n  resize: function (width, height) {\n    var dpr = this.dpr;\n    var dom = this.dom;\n    var domStyle = dom.style;\n    var domBack = this.domBack;\n\n    if (domStyle) {\n      domStyle.width = width + 'px';\n      domStyle.height = height + 'px';\n    }\n\n    dom.width = width * dpr;\n    dom.height = height * dpr;\n\n    if (domBack) {\n      domBack.width = width * dpr;\n      domBack.height = height * dpr;\n\n      if (dpr !== 1) {\n        this.ctxBack.scale(dpr, dpr);\n      }\n    }\n  },\n\n  /**\n   * \n   * @param {boolean} [clearAll]=false Clear all with out motion blur\n   * @param {Color} [clearColor]\n   */\n  clear: function (clearAll, clearColor) {\n    var dom = this.dom;\n    var ctx = this.ctx;\n    var width = dom.width;\n    var height = dom.height;\n    var clearColor = clearColor || this.clearColor;\n    var haveMotionBLur = this.motionBlur && !clearAll;\n    var lastFrameAlpha = this.lastFrameAlpha;\n    var dpr = this.dpr;\n\n    if (haveMotionBLur) {\n      if (!this.domBack) {\n        this.createBackBuffer();\n      }\n\n      this.ctxBack.globalCompositeOperation = 'copy';\n      this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n    }\n\n    ctx.clearRect(0, 0, width, height);\n\n    if (clearColor && clearColor !== 'transparent') {\n      var clearColorGradientOrPattern; // Gradient\n\n      if (clearColor.colorStops) {\n        // Cache canvas gradient\n        clearColorGradientOrPattern = clearColor.__canvasGradient || Style.getGradient(ctx, clearColor, {\n          x: 0,\n          y: 0,\n          width: width,\n          height: height\n        });\n        clearColor.__canvasGradient = clearColorGradientOrPattern;\n      } // Pattern\n      else if (clearColor.image) {\n          clearColorGradientOrPattern = Pattern.prototype.getCanvasPattern.call(clearColor, ctx);\n        }\n\n      ctx.save();\n      ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n      ctx.fillRect(0, 0, width, height);\n      ctx.restore();\n    }\n\n    if (haveMotionBLur) {\n      var domBack = this.domBack;\n      ctx.save();\n      ctx.globalAlpha = lastFrameAlpha;\n      ctx.drawImage(domBack, 0, 0, width, height);\n      ctx.restore();\n    }\n  }\n};\nvar _default = Layer;\nmodule.exports = _default;","var util = require(\"../core/util\");\n\nvar _event = require(\"../core/event\");\n\nvar Dispatcher = _event.Dispatcher;\n\nvar requestAnimationFrame = require(\"./requestAnimationFrame\");\n\nvar Animator = require(\"./Animator\");\n\n/**\n * Animation main class, dispatch and manage all animation controllers\n *\n * @module zrender/animation/Animation\n * @author pissang(https://github.com/pissang)\n */\n// TODO Additive animation\n// http://iosoteric.com/additive-animations-animatewithduration-in-ios-8/\n// https://developer.apple.com/videos/wwdc2014/#236\n\n/**\n * @typedef {Object} IZRenderStage\n * @property {Function} update\n */\n\n/**\n * @alias module:zrender/animation/Animation\n * @constructor\n * @param {Object} [options]\n * @param {Function} [options.onframe]\n * @param {IZRenderStage} [options.stage]\n * @example\n *     var animation = new Animation();\n *     var obj = {\n *         x: 100,\n *         y: 100\n *     };\n *     animation.animate(node.position)\n *         .when(1000, {\n *             x: 500,\n *             y: 500\n *         })\n *         .when(2000, {\n *             x: 100,\n *             y: 100\n *         })\n *         .start('spline');\n */\nvar Animation = function (options) {\n  options = options || {};\n  this.stage = options.stage || {};\n\n  this.onframe = options.onframe || function () {}; // private properties\n\n\n  this._clips = [];\n  this._running = false;\n  this._time;\n  this._pausedTime;\n  this._pauseStart;\n  this._paused = false;\n  Dispatcher.call(this);\n};\n\nAnimation.prototype = {\n  constructor: Animation,\n\n  /**\n   * Add clip\n   * @param {module:zrender/animation/Clip} clip\n   */\n  addClip: function (clip) {\n    this._clips.push(clip);\n  },\n\n  /**\n   * Add animator\n   * @param {module:zrender/animation/Animator} animator\n   */\n  addAnimator: function (animator) {\n    animator.animation = this;\n    var clips = animator.getClips();\n\n    for (var i = 0; i < clips.length; i++) {\n      this.addClip(clips[i]);\n    }\n  },\n\n  /**\n   * Delete animation clip\n   * @param {module:zrender/animation/Clip} clip\n   */\n  removeClip: function (clip) {\n    var idx = util.indexOf(this._clips, clip);\n\n    if (idx >= 0) {\n      this._clips.splice(idx, 1);\n    }\n  },\n\n  /**\n   * Delete animation clip\n   * @param {module:zrender/animation/Animator} animator\n   */\n  removeAnimator: function (animator) {\n    var clips = animator.getClips();\n\n    for (var i = 0; i < clips.length; i++) {\n      this.removeClip(clips[i]);\n    }\n\n    animator.animation = null;\n  },\n  _update: function () {\n    var time = new Date().getTime() - this._pausedTime;\n\n    var delta = time - this._time;\n    var clips = this._clips;\n    var len = clips.length;\n    var deferredEvents = [];\n    var deferredClips = [];\n\n    for (var i = 0; i < len; i++) {\n      var clip = clips[i];\n      var e = clip.step(time, delta); // Throw out the events need to be called after\n      // stage.update, like destroy\n\n      if (e) {\n        deferredEvents.push(e);\n        deferredClips.push(clip);\n      }\n    } // Remove the finished clip\n\n\n    for (var i = 0; i < len;) {\n      if (clips[i]._needsRemove) {\n        clips[i] = clips[len - 1];\n        clips.pop();\n        len--;\n      } else {\n        i++;\n      }\n    }\n\n    len = deferredEvents.length;\n\n    for (var i = 0; i < len; i++) {\n      deferredClips[i].fire(deferredEvents[i]);\n    }\n\n    this._time = time;\n    this.onframe(delta); // 'frame' should be triggered before stage, because upper application\n    // depends on the sequence (e.g., echarts-stream and finish\n    // event judge)\n\n    this.trigger('frame', delta);\n\n    if (this.stage.update) {\n      this.stage.update();\n    }\n  },\n  _startLoop: function () {\n    var self = this;\n    this._running = true;\n\n    function step() {\n      if (self._running) {\n        requestAnimationFrame(step);\n        !self._paused && self._update();\n      }\n    }\n\n    requestAnimationFrame(step);\n  },\n\n  /**\n   * Start animation.\n   */\n  start: function () {\n    this._time = new Date().getTime();\n    this._pausedTime = 0;\n\n    this._startLoop();\n  },\n\n  /**\n   * Stop animation.\n   */\n  stop: function () {\n    this._running = false;\n  },\n\n  /**\n   * Pause animation.\n   */\n  pause: function () {\n    if (!this._paused) {\n      this._pauseStart = new Date().getTime();\n      this._paused = true;\n    }\n  },\n\n  /**\n   * Resume animation.\n   */\n  resume: function () {\n    if (this._paused) {\n      this._pausedTime += new Date().getTime() - this._pauseStart;\n      this._paused = false;\n    }\n  },\n\n  /**\n   * Clear animation.\n   */\n  clear: function () {\n    this._clips = [];\n  },\n\n  /**\n   * Whether animation finished.\n   */\n  isFinished: function () {\n    return !this._clips.length;\n  },\n\n  /**\n   * Creat animator for a target, whose props can be animated.\n   *\n   * @param  {Object} target\n   * @param  {Object} options\n   * @param  {boolean} [options.loop=false] Whether loop animation.\n   * @param  {Function} [options.getter=null] Get value from target.\n   * @param  {Function} [options.setter=null] Set value to target.\n   * @return {module:zrender/animation/Animation~Animator}\n   */\n  // TODO Gap\n  animate: function (target, options) {\n    options = options || {};\n    var animator = new Animator(target, options.loop, options.getter, options.setter);\n    this.addAnimator(animator);\n    return animator;\n  }\n};\nutil.mixin(Animation, Dispatcher);\nvar _default = Animation;\nmodule.exports = _default;","var _event = require(\"../core/event\");\n\nvar addEventListener = _event.addEventListener;\nvar removeEventListener = _event.removeEventListener;\nvar normalizeEvent = _event.normalizeEvent;\nvar getNativeEvent = _event.getNativeEvent;\n\nvar zrUtil = require(\"../core/util\");\n\nvar Eventful = require(\"../mixin/Eventful\");\n\nvar env = require(\"../core/env\");\n\n/* global document */\nvar TOUCH_CLICK_DELAY = 300;\nvar globalEventSupported = env.domSupported;\n\nvar localNativeListenerNames = function () {\n  var mouseHandlerNames = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu'];\n  var touchHandlerNames = ['touchstart', 'touchend', 'touchmove'];\n  var pointerEventNameMap = {\n    pointerdown: 1,\n    pointerup: 1,\n    pointermove: 1,\n    pointerout: 1\n  };\n  var pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n    var nm = name.replace('mouse', 'pointer');\n    return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n  });\n  return {\n    mouse: mouseHandlerNames,\n    touch: touchHandlerNames,\n    pointer: pointerHandlerNames\n  };\n}();\n\nvar globalNativeListenerNames = {\n  mouse: ['mousemove', 'mouseup'],\n  pointer: ['pointermove', 'pointerup']\n};\n\nfunction eventNameFix(name) {\n  return name === 'mousewheel' && env.browser.firefox ? 'DOMMouseScroll' : name;\n}\n\nfunction isPointerFromTouch(event) {\n  var pointerType = event.pointerType;\n  return pointerType === 'pen' || pointerType === 'touch';\n} // function useMSGuesture(handlerProxy, event) {\n//     return isPointerFromTouch(event) && !!handlerProxy._msGesture;\n// }\n// function onMSGestureChange(proxy, event) {\n//     if (event.translationX || event.translationY) {\n//         // mousemove is carried by MSGesture to reduce the sensitivity.\n//         proxy.handler.dispatchToElement(event.target, 'mousemove', event);\n//     }\n//     if (event.scale !== 1) {\n//         event.pinchX = event.offsetX;\n//         event.pinchY = event.offsetY;\n//         event.pinchScale = event.scale;\n//         proxy.handler.dispatchToElement(event.target, 'pinch', event);\n//     }\n// }\n\n/**\n * Prevent mouse event from being dispatched after Touch Events action\n * @see <https://github.com/deltakosh/handjs/blob/master/src/hand.base.js>\n * 1. Mobile browsers dispatch mouse events 300ms after touchend.\n * 2. Chrome for Android dispatch mousedown for long-touch about 650ms\n * Result: Blocking Mouse Events for 700ms.\n *\n * @param {DOMHandlerScope} scope\n */\n\n\nfunction setTouchTimer(scope) {\n  scope.touching = true;\n\n  if (scope.touchTimer != null) {\n    clearTimeout(scope.touchTimer);\n    scope.touchTimer = null;\n  }\n\n  scope.touchTimer = setTimeout(function () {\n    scope.touching = false;\n    scope.touchTimer = null;\n  }, 700);\n} // Mark touch, which is useful in distinguish touch and\n// mouse event in upper applicatoin.\n\n\nfunction markTouch(event) {\n  event && (event.zrByTouch = true);\n} // function markTriggeredFromLocal(event) {\n//     event && (event.__zrIsFromLocal = true);\n// }\n// function isTriggeredFromLocal(instance, event) {\n//     return !!(event && event.__zrIsFromLocal);\n// }\n\n\nfunction normalizeGlobalEvent(instance, event) {\n  // offsetX, offsetY still need to be calculated. They are necessary in the event\n  // handlers of the upper applications. Set `true` to force calculate them.\n  return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n}\n/**\n * Detect whether the given el is in `painterRoot`.\n */\n\n\nfunction isLocalEl(instance, el) {\n  var elTmp = el;\n  var isLocal = false;\n\n  while (elTmp && elTmp.nodeType !== 9 && !(isLocal = elTmp.domBelongToZr || elTmp !== el && elTmp === instance.painterRoot)) {\n    elTmp = elTmp.parentNode;\n  }\n\n  return isLocal;\n}\n/**\n * Make a fake event but not change the original event,\n * becuase the global event probably be used by other\n * listeners not belonging to zrender.\n * @class\n */\n\n\nfunction FakeGlobalEvent(instance, event) {\n  this.type = event.type;\n  this.target = this.currentTarget = instance.dom;\n  this.pointerType = event.pointerType; // Necessray for the force calculation of zrX, zrY\n\n  this.clientX = event.clientX;\n  this.clientY = event.clientY; // Because we do not mount global listeners to touch events,\n  // we do not copy `targetTouches` and `changedTouches` here.\n}\n\nvar fakeGlobalEventProto = FakeGlobalEvent.prototype; // we make the default methods on the event do nothing,\n// otherwise it is dangerous. See more details in\n// [Drag outside] in `Handler.js`.\n\nfakeGlobalEventProto.stopPropagation = fakeGlobalEventProto.stopImmediatePropagation = fakeGlobalEventProto.preventDefault = zrUtil.noop;\n/**\n * Local DOM Handlers\n * @this {HandlerProxy}\n */\n\nvar localDOMHandlers = {\n  mousedown: function (event) {\n    event = normalizeEvent(this.dom, event);\n    this._mayPointerCapture = [event.zrX, event.zrY];\n    this.trigger('mousedown', event);\n  },\n  mousemove: function (event) {\n    event = normalizeEvent(this.dom, event);\n    var downPoint = this._mayPointerCapture;\n\n    if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n      togglePointerCapture(this, true);\n    }\n\n    this.trigger('mousemove', event);\n  },\n  mouseup: function (event) {\n    event = normalizeEvent(this.dom, event);\n    togglePointerCapture(this, false);\n    this.trigger('mouseup', event);\n  },\n  mouseout: function (event) {\n    event = normalizeEvent(this.dom, event); // Similarly to the browser did on `document` and touch event,\n    // `globalout` will be delayed to final pointer cature release.\n\n    if (this._pointerCapturing) {\n      event.zrEventControl = 'no_globalout';\n    } // There might be some doms created by upper layer application\n    // at the same level of painter.getViewportRoot() (e.g., tooltip\n    // dom created by echarts), where 'globalout' event should not\n    // be triggered when mouse enters these doms. (But 'mouseout'\n    // should be triggered at the original hovered element as usual).\n\n\n    var element = event.toElement || event.relatedTarget;\n    event.zrIsToLocalDOM = isLocalEl(this, element);\n    this.trigger('mouseout', event);\n  },\n  touchstart: function (event) {\n    // Default mouse behaviour should not be disabled here.\n    // For example, page may needs to be slided.\n    event = normalizeEvent(this.dom, event);\n    markTouch(event);\n    this._lastTouchMoment = new Date();\n    this.handler.processGesture(event, 'start'); // For consistent event listener for both touch device and mouse device,\n    // we simulate \"mouseover-->mousedown\" in touch device. So we trigger\n    // `mousemove` here (to trigger `mouseover` inside), and then trigger\n    // `mousedown`.\n\n    localDOMHandlers.mousemove.call(this, event);\n    localDOMHandlers.mousedown.call(this, event);\n  },\n  touchmove: function (event) {\n    event = normalizeEvent(this.dom, event);\n    markTouch(event);\n    this.handler.processGesture(event, 'change'); // Mouse move should always be triggered no matter whether\n    // there is gestrue event, because mouse move and pinch may\n    // be used at the same time.\n\n    localDOMHandlers.mousemove.call(this, event);\n  },\n  touchend: function (event) {\n    event = normalizeEvent(this.dom, event);\n    markTouch(event);\n    this.handler.processGesture(event, 'end');\n    localDOMHandlers.mouseup.call(this, event); // Do not trigger `mouseout` here, in spite of `mousemove`(`mouseover`) is\n    // triggered in `touchstart`. This seems to be illogical, but by this mechanism,\n    // we can conveniently implement \"hover style\" in both PC and touch device just\n    // by listening to `mouseover` to add \"hover style\" and listening to `mouseout`\n    // to remove \"hover style\" on an element, without any additional code for\n    // compatibility. (`mouseout` will not be triggered in `touchend`, so \"hover\n    // style\" will remain for user view)\n    // click event should always be triggered no matter whether\n    // there is gestrue event. System click can not be prevented.\n\n    if (+new Date() - this._lastTouchMoment < TOUCH_CLICK_DELAY) {\n      localDOMHandlers.click.call(this, event);\n    }\n  },\n  pointerdown: function (event) {\n    localDOMHandlers.mousedown.call(this, event); // if (useMSGuesture(this, event)) {\n    //     this._msGesture.addPointer(event.pointerId);\n    // }\n  },\n  pointermove: function (event) {\n    // FIXME\n    // pointermove is so sensitive that it always triggered when\n    // tap(click) on touch screen, which affect some judgement in\n    // upper application. So, we dont support mousemove on MS touch\n    // device yet.\n    if (!isPointerFromTouch(event)) {\n      localDOMHandlers.mousemove.call(this, event);\n    }\n  },\n  pointerup: function (event) {\n    localDOMHandlers.mouseup.call(this, event);\n  },\n  pointerout: function (event) {\n    // pointerout will be triggered when tap on touch screen\n    // (IE11+/Edge on MS Surface) after click event triggered,\n    // which is inconsistent with the mousout behavior we defined\n    // in touchend. So we unify them.\n    // (check localDOMHandlers.touchend for detailed explanation)\n    if (!isPointerFromTouch(event)) {\n      localDOMHandlers.mouseout.call(this, event);\n    }\n  }\n};\n/**\n * Othere DOM UI Event handlers for zr dom.\n * @this {HandlerProxy}\n */\n\nzrUtil.each(['click', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n  localDOMHandlers[name] = function (event) {\n    event = normalizeEvent(this.dom, event);\n    this.trigger(name, event);\n  };\n});\n/**\n * DOM UI Event handlers for global page.\n *\n * [Caution]:\n * those handlers should both support in capture phase and bubble phase!\n *\n * @this {HandlerProxy}\n */\n\nvar globalDOMHandlers = {\n  pointermove: function (event) {\n    // FIXME\n    // pointermove is so sensitive that it always triggered when\n    // tap(click) on touch screen, which affect some judgement in\n    // upper application. So, we dont support mousemove on MS touch\n    // device yet.\n    if (!isPointerFromTouch(event)) {\n      globalDOMHandlers.mousemove.call(this, event);\n    }\n  },\n  pointerup: function (event) {\n    globalDOMHandlers.mouseup.call(this, event);\n  },\n  mousemove: function (event) {\n    this.trigger('mousemove', event);\n  },\n  mouseup: function (event) {\n    var pointerCaptureReleasing = this._pointerCapturing;\n    togglePointerCapture(this, false);\n    this.trigger('mouseup', event);\n\n    if (pointerCaptureReleasing) {\n      event.zrEventControl = 'only_globalout';\n      this.trigger('mouseout', event);\n    }\n  }\n};\n/**\n * @param {HandlerProxy} instance\n * @param {DOMHandlerScope} scope\n */\n\nfunction mountLocalDOMEventListeners(instance, scope) {\n  var domHandlers = scope.domHandlers;\n\n  if (env.pointerEventsSupported) {\n    // Only IE11+/Edge\n    // 1. On devices that both enable touch and mouse (e.g., MS Surface and lenovo X240),\n    // IE11+/Edge do not trigger touch event, but trigger pointer event and mouse event\n    // at the same time.\n    // 2. On MS Surface, it probablely only trigger mousedown but no mouseup when tap on\n    // screen, which do not occurs in pointer event.\n    // So we use pointer event to both detect touch gesture and mouse behavior.\n    zrUtil.each(localNativeListenerNames.pointer, function (nativeEventName) {\n      mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n        // markTriggeredFromLocal(event);\n        domHandlers[nativeEventName].call(instance, event);\n      });\n    }); // FIXME\n    // Note: MS Gesture require CSS touch-action set. But touch-action is not reliable,\n    // which does not prevent defuault behavior occasionally (which may cause view port\n    // zoomed in but use can not zoom it back). And event.preventDefault() does not work.\n    // So we have to not to use MSGesture and not to support touchmove and pinch on MS\n    // touch screen. And we only support click behavior on MS touch screen now.\n    // MS Gesture Event is only supported on IE11+/Edge and on Windows 8+.\n    // We dont support touch on IE on win7.\n    // See <https://msdn.microsoft.com/en-us/library/dn433243(v=vs.85).aspx>\n    // if (typeof MSGesture === 'function') {\n    //     (this._msGesture = new MSGesture()).target = dom; // jshint ignore:line\n    //     dom.addEventListener('MSGestureChange', onMSGestureChange);\n    // }\n  } else {\n    if (env.touchEventsSupported) {\n      zrUtil.each(localNativeListenerNames.touch, function (nativeEventName) {\n        mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n          // markTriggeredFromLocal(event);\n          domHandlers[nativeEventName].call(instance, event);\n          setTouchTimer(scope);\n        });\n      }); // Handler of 'mouseout' event is needed in touch mode, which will be mounted below.\n      // addEventListener(root, 'mouseout', this._mouseoutHandler);\n    } // 1. Considering some devices that both enable touch and mouse event (like on MS Surface\n    // and lenovo X240, @see #2350), we make mouse event be always listened, otherwise\n    // mouse event can not be handle in those devices.\n    // 2. On MS Surface, Chrome will trigger both touch event and mouse event. How to prevent\n    // mouseevent after touch event triggered, see `setTouchTimer`.\n\n\n    zrUtil.each(localNativeListenerNames.mouse, function (nativeEventName) {\n      mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n        event = getNativeEvent(event);\n\n        if (!scope.touching) {\n          // markTriggeredFromLocal(event);\n          domHandlers[nativeEventName].call(instance, event);\n        }\n      });\n    });\n  }\n}\n/**\n * @param {HandlerProxy} instance\n * @param {DOMHandlerScope} scope\n */\n\n\nfunction mountGlobalDOMEventListeners(instance, scope) {\n  // Only IE11+/Edge. See the comment in `mountLocalDOMEventListeners`.\n  if (env.pointerEventsSupported) {\n    zrUtil.each(globalNativeListenerNames.pointer, mount);\n  } // Touch event has implemented \"drag outside\" so we do not mount global listener for touch event.\n  // (see https://www.w3.org/TR/touch-events/#the-touchmove-event)\n  // We do not consider \"both-support-touch-and-mouse device\" for this feature (see the comment of\n  // `mountLocalDOMEventListeners`) to avoid bugs util some requirements come.\n  else if (!env.touchEventsSupported) {\n      zrUtil.each(globalNativeListenerNames.mouse, mount);\n    }\n\n  function mount(nativeEventName) {\n    function nativeEventListener(event) {\n      event = getNativeEvent(event); // See the reason in [Drag outside] in `Handler.js`\n      // This checking supports both `useCapture` or not.\n      // PENDING: if there is performance issue in some devices,\n      // we probably can not use `useCapture` and change a easier\n      // to judes whether local (mark).\n\n      if (!isLocalEl(instance, event.target)) {\n        event = normalizeGlobalEvent(instance, event);\n        scope.domHandlers[nativeEventName].call(instance, event);\n      }\n    }\n\n    mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, {\n      capture: true\n    } // See [Drag Outside] in `Handler.js`\n    );\n  }\n}\n\nfunction mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n  scope.mounted[nativeEventName] = listener;\n  scope.listenerOpts[nativeEventName] = opt;\n  addEventListener(scope.domTarget, eventNameFix(nativeEventName), listener, opt);\n}\n\nfunction unmountDOMEventListeners(scope) {\n  var mounted = scope.mounted;\n\n  for (var nativeEventName in mounted) {\n    if (mounted.hasOwnProperty(nativeEventName)) {\n      removeEventListener(scope.domTarget, eventNameFix(nativeEventName), mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n    }\n  }\n\n  scope.mounted = {};\n}\n/**\n * See [Drag Outside] in `Handler.js`.\n * @implement\n * @param {boolean} isPointerCapturing Should never be `null`/`undefined`.\n *        `true`: start to capture pointer if it is not capturing.\n *        `false`: end the capture if it is capturing.\n */\n\n\nfunction togglePointerCapture(instance, isPointerCapturing) {\n  instance._mayPointerCapture = null;\n\n  if (globalEventSupported && instance._pointerCapturing ^ isPointerCapturing) {\n    instance._pointerCapturing = isPointerCapturing;\n    var globalHandlerScope = instance._globalHandlerScope;\n    isPointerCapturing ? mountGlobalDOMEventListeners(instance, globalHandlerScope) : unmountDOMEventListeners(globalHandlerScope);\n  }\n}\n/**\n * @inner\n * @class\n */\n\n\nfunction DOMHandlerScope(domTarget, domHandlers) {\n  this.domTarget = domTarget;\n  this.domHandlers = domHandlers; // Key: eventName, value: mounted handler funcitons.\n  // Used for unmount.\n\n  this.mounted = {};\n  this.listenerOpts = {};\n  this.touchTimer = null;\n  this.touching = false;\n}\n/**\n * @public\n * @class\n */\n\n\nfunction HandlerDomProxy(dom, painterRoot) {\n  Eventful.call(this);\n  this.dom = dom;\n  this.painterRoot = painterRoot;\n  this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n\n  if (globalEventSupported) {\n    this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n  }\n  /**\n   * @type {boolean}\n   */\n\n\n  this._pointerCapturing = false;\n  /**\n   * @type {Array.<number>} [x, y] or null.\n   */\n\n  this._mayPointerCapture = null;\n  mountLocalDOMEventListeners(this, this._localHandlerScope);\n}\n\nvar handlerDomProxyProto = HandlerDomProxy.prototype;\n\nhandlerDomProxyProto.dispose = function () {\n  unmountDOMEventListeners(this._localHandlerScope);\n\n  if (globalEventSupported) {\n    unmountDOMEventListeners(this._globalHandlerScope);\n  }\n};\n\nhandlerDomProxyProto.setCursor = function (cursorStyle) {\n  this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n};\n\nzrUtil.mixin(HandlerDomProxy, Eventful);\nvar _default = HandlerDomProxy;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar makeStyleMapper = require(\"./makeStyleMapper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar getLineStyle = makeStyleMapper([['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]);\nvar _default = {\n  getLineStyle: function (excludes) {\n    var style = getLineStyle(this, excludes); // Always set lineDash whether dashed, otherwise we can not\n    // erase the previous style when assigning to el.style.\n\n    style.lineDash = this.getLineDash(style.lineWidth);\n    return style;\n  },\n  getLineDash: function (lineWidth) {\n    if (lineWidth == null) {\n      lineWidth = 1;\n    }\n\n    var lineType = this.get('type');\n    var dotSize = Math.max(lineWidth, 2);\n    var dashSize = lineWidth * 4;\n    return lineType === 'solid' || lineType == null ? // Use `false` but not `null` for the solid line here, because `null` might be\n    // ignored when assigning to `el.style`. e.g., when setting `lineStyle.type` as\n    // `'dashed'` and `emphasis.lineStyle.type` as `'solid'` in graph series, the\n    // `lineDash` gotten form the latter one is not able to erase that from the former\n    // one if using `null` here according to the emhpsis strategy in `util/graphic.js`.\n    false : lineType === 'dashed' ? [dashSize, dashSize] : [dotSize, dotSize];\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar makeStyleMapper = require(\"./makeStyleMapper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar getAreaStyle = makeStyleMapper([['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor']]);\nvar _default = {\n  getAreaStyle: function (excludes, includes) {\n    return getAreaStyle(this, excludes, includes);\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar graphicUtil = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PATH_COLOR = ['textStyle', 'color'];\nvar _default = {\n  /**\n   * Get color property or get color from option.textStyle.color\n   * @param {boolean} [isEmphasis]\n   * @return {string}\n   */\n  getTextColor: function (isEmphasis) {\n    var ecModel = this.ecModel;\n    return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\n  },\n\n  /**\n   * Create font string from fontStyle, fontWeight, fontSize, fontFamily\n   * @return {string}\n   */\n  getFont: function () {\n    return graphicUtil.getFont({\n      fontStyle: this.getShallow('fontStyle'),\n      fontWeight: this.getShallow('fontWeight'),\n      fontSize: this.getShallow('fontSize'),\n      fontFamily: this.getShallow('fontFamily')\n    }, this.ecModel);\n  },\n  getTextRect: function (text) {\n    return textContain.getBoundingRect(text, this.getFont(), this.getShallow('align'), this.getShallow('verticalAlign') || this.getShallow('baseline'), this.getShallow('padding'), this.getShallow('lineHeight'), this.getShallow('rich'), this.getShallow('truncateText'));\n  }\n};\nmodule.exports = _default;","var PathProxy = require(\"../core/PathProxy\");\n\nvar line = require(\"./line\");\n\nvar cubic = require(\"./cubic\");\n\nvar quadratic = require(\"./quadratic\");\n\nvar arc = require(\"./arc\");\n\nvar _util = require(\"./util\");\n\nvar normalizeRadian = _util.normalizeRadian;\n\nvar curve = require(\"../core/curve\");\n\nvar windingLine = require(\"./windingLine\");\n\nvar CMD = PathProxy.CMD;\nvar PI2 = Math.PI * 2;\nvar EPSILON = 1e-4;\n\nfunction isAroundEqual(a, b) {\n  return Math.abs(a - b) < EPSILON;\n} // \n\n\nvar roots = [-1, -1, -1];\nvar extrema = [-1, -1];\n\nfunction swapExtrema() {\n  var tmp = extrema[0];\n  extrema[0] = extrema[1];\n  extrema[1] = tmp;\n}\n\nfunction windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n  // Quick reject\n  if (y > y0 && y > y1 && y > y2 && y > y3 || y < y0 && y < y1 && y < y2 && y < y3) {\n    return 0;\n  }\n\n  var nRoots = curve.cubicRootAt(y0, y1, y2, y3, y, roots);\n\n  if (nRoots === 0) {\n    return 0;\n  } else {\n    var w = 0;\n    var nExtrema = -1;\n    var y0_;\n    var y1_;\n\n    for (var i = 0; i < nRoots; i++) {\n      var t = roots[i]; // Avoid winding error when intersection point is the connect point of two line of polygon\n\n      var unit = t === 0 || t === 1 ? 0.5 : 1;\n      var x_ = curve.cubicAt(x0, x1, x2, x3, t);\n\n      if (x_ < x) {\n        // Quick reject\n        continue;\n      }\n\n      if (nExtrema < 0) {\n        nExtrema = curve.cubicExtrema(y0, y1, y2, y3, extrema);\n\n        if (extrema[1] < extrema[0] && nExtrema > 1) {\n          swapExtrema();\n        }\n\n        y0_ = curve.cubicAt(y0, y1, y2, y3, extrema[0]);\n\n        if (nExtrema > 1) {\n          y1_ = curve.cubicAt(y0, y1, y2, y3, extrema[1]);\n        }\n      }\n\n      if (nExtrema === 2) {\n        // \n        if (t < extrema[0]) {\n          w += y0_ < y0 ? unit : -unit;\n        } else if (t < extrema[1]) {\n          w += y1_ < y0_ ? unit : -unit;\n        } else {\n          w += y3 < y1_ ? unit : -unit;\n        }\n      } else {\n        // \n        if (t < extrema[0]) {\n          w += y0_ < y0 ? unit : -unit;\n        } else {\n          w += y3 < y0_ ? unit : -unit;\n        }\n      }\n    }\n\n    return w;\n  }\n}\n\nfunction windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n  // Quick reject\n  if (y > y0 && y > y1 && y > y2 || y < y0 && y < y1 && y < y2) {\n    return 0;\n  }\n\n  var nRoots = curve.quadraticRootAt(y0, y1, y2, y, roots);\n\n  if (nRoots === 0) {\n    return 0;\n  } else {\n    var t = curve.quadraticExtremum(y0, y1, y2);\n\n    if (t >= 0 && t <= 1) {\n      var w = 0;\n      var y_ = curve.quadraticAt(y0, y1, y2, t);\n\n      for (var i = 0; i < nRoots; i++) {\n        // Remove one endpoint.\n        var unit = roots[i] === 0 || roots[i] === 1 ? 0.5 : 1;\n        var x_ = curve.quadraticAt(x0, x1, x2, roots[i]);\n\n        if (x_ < x) {\n          // Quick reject\n          continue;\n        }\n\n        if (roots[i] < t) {\n          w += y_ < y0 ? unit : -unit;\n        } else {\n          w += y2 < y_ ? unit : -unit;\n        }\n      }\n\n      return w;\n    } else {\n      // Remove one endpoint.\n      var unit = roots[0] === 0 || roots[0] === 1 ? 0.5 : 1;\n      var x_ = curve.quadraticAt(x0, x1, x2, roots[0]);\n\n      if (x_ < x) {\n        // Quick reject\n        return 0;\n      }\n\n      return y2 < y0 ? unit : -unit;\n    }\n  }\n} // TODO\n// Arc \n\n\nfunction windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n  y -= cy;\n\n  if (y > r || y < -r) {\n    return 0;\n  }\n\n  var tmp = Math.sqrt(r * r - y * y);\n  roots[0] = -tmp;\n  roots[1] = tmp;\n  var diff = Math.abs(startAngle - endAngle);\n\n  if (diff < 1e-4) {\n    return 0;\n  }\n\n  if (diff % PI2 < 1e-4) {\n    // Is a circle\n    startAngle = 0;\n    endAngle = PI2;\n    var dir = anticlockwise ? 1 : -1;\n\n    if (x >= roots[0] + cx && x <= roots[1] + cx) {\n      return dir;\n    } else {\n      return 0;\n    }\n  }\n\n  if (anticlockwise) {\n    var tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n\n  var w = 0;\n\n  for (var i = 0; i < 2; i++) {\n    var x_ = roots[i];\n\n    if (x_ + cx > x) {\n      var angle = Math.atan2(y, x_);\n      var dir = anticlockwise ? 1 : -1;\n\n      if (angle < 0) {\n        angle = PI2 + angle;\n      }\n\n      if (angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle) {\n        if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n          dir = -dir;\n        }\n\n        w += dir;\n      }\n    }\n  }\n\n  return w;\n}\n\nfunction containPath(data, lineWidth, isStroke, x, y) {\n  var w = 0;\n  var xi = 0;\n  var yi = 0;\n  var x0 = 0;\n  var y0 = 0;\n\n  for (var i = 0; i < data.length;) {\n    var cmd = data[i++]; // Begin a new subpath\n\n    if (cmd === CMD.M && i > 1) {\n      // Close previous subpath\n      if (!isStroke) {\n        w += windingLine(xi, yi, x0, y0, x, y);\n      } //  subpath \n      // if (w !== 0) {\n      //     return true;\n      // }\n\n    }\n\n    if (i === 1) {\n      //  L, C, Q\n      //  previous point  point\n      //\n      //  Arc \n      xi = data[i];\n      yi = data[i + 1];\n      x0 = xi;\n      y0 = yi;\n    }\n\n    switch (cmd) {\n      case CMD.M:\n        // moveTo  subpath, \n        //  closePath \n        x0 = data[i++];\n        y0 = data[i++];\n        xi = x0;\n        yi = y0;\n        break;\n\n      case CMD.L:\n        if (isStroke) {\n          if (line.containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          // NOTE  L, C, Q  NaN\n          w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n        }\n\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.C:\n        if (isStroke) {\n          if (cubic.containStroke(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n        }\n\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.Q:\n        if (isStroke) {\n          if (quadratic.containStroke(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n        }\n\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.A:\n        // TODO Arc \n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++]; // TODO Arc \n\n        i += 1;\n        var anticlockwise = 1 - data[i++];\n        var x1 = Math.cos(theta) * rx + cx;\n        var y1 = Math.sin(theta) * ry + cy; //  arc \n\n        if (i > 1) {\n          w += windingLine(xi, yi, x1, y1, x, y);\n        } else {\n          // \n          x0 = x1;\n          y0 = y1;\n        } // zr scale, x\n\n\n        var _x = (x - cx) * ry / rx + cx;\n\n        if (isStroke) {\n          if (arc.containStroke(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n            return true;\n          }\n        } else {\n          w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n        }\n\n        xi = Math.cos(theta + dTheta) * rx + cx;\n        yi = Math.sin(theta + dTheta) * ry + cy;\n        break;\n\n      case CMD.R:\n        x0 = xi = data[i++];\n        y0 = yi = data[i++];\n        var width = data[i++];\n        var height = data[i++];\n        var x1 = x0 + width;\n        var y1 = y0 + height;\n\n        if (isStroke) {\n          if (line.containStroke(x0, y0, x1, y0, lineWidth, x, y) || line.containStroke(x1, y0, x1, y1, lineWidth, x, y) || line.containStroke(x1, y1, x0, y1, lineWidth, x, y) || line.containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          // FIXME Clockwise ?\n          w += windingLine(x1, y0, x1, y1, x, y);\n          w += windingLine(x0, y1, x0, y0, x, y);\n        }\n\n        break;\n\n      case CMD.Z:\n        if (isStroke) {\n          if (line.containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\n            return true;\n          }\n        } else {\n          // Close a subpath\n          w += windingLine(xi, yi, x0, y0, x, y); //  subpath \n          // FIXME subpaths may overlap\n          // if (w !== 0) {\n          //     return true;\n          // }\n        }\n\n        xi = x0;\n        yi = y0;\n        break;\n    }\n  }\n\n  if (!isStroke && !isAroundEqual(yi, y0)) {\n    w += windingLine(xi, yi, x0, y0, x, y) || 0;\n  }\n\n  return w !== 0;\n}\n\nfunction contain(pathData, x, y) {\n  return containPath(pathData, 0, false, x, y);\n}\n\nfunction containStroke(pathData, lineWidth, x, y) {\n  return containPath(pathData, lineWidth, true, x, y);\n}\n\nexports.contain = contain;\nexports.containStroke = containStroke;","var curve = require(\"../core/curve\");\n\n/**\n * \n * @param  {number}  x0\n * @param  {number}  y0\n * @param  {number}  x1\n * @param  {number}  y1\n * @param  {number}  x2\n * @param  {number}  y2\n * @param  {number}  x3\n * @param  {number}  y3\n * @param  {number}  lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {boolean}\n */\nfunction containStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth; // Quick reject\n\n  if (y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l) {\n    return false;\n  }\n\n  var d = curve.cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n  return d <= _l / 2;\n}\n\nexports.containStroke = containStroke;","var _util = require(\"./util\");\n\nvar normalizeRadian = _util.normalizeRadian;\nvar PI2 = Math.PI * 2;\n/**\n * \n * @param  {number}  cx\n * @param  {number}  cy\n * @param  {number}  r\n * @param  {number}  startAngle\n * @param  {number}  endAngle\n * @param  {boolean}  anticlockwise\n * @param  {number} lineWidth\n * @param  {number}  x\n * @param  {number}  y\n * @return {Boolean}\n */\n\nfunction containStroke(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n  if (lineWidth === 0) {\n    return false;\n  }\n\n  var _l = lineWidth;\n  x -= cx;\n  y -= cy;\n  var d = Math.sqrt(x * x + y * y);\n\n  if (d - _l > r || d + _l < r) {\n    return false;\n  }\n\n  if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n    // Is a circle\n    return true;\n  }\n\n  if (anticlockwise) {\n    var tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n\n  var angle = Math.atan2(y, x);\n\n  if (angle < 0) {\n    angle += PI2;\n  }\n\n  return angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle;\n}\n\nexports.containStroke = containStroke;","var PathProxy = require(\"../core/PathProxy\");\n\nvar _vector = require(\"../core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\nvar CMD = PathProxy.CMD;\nvar points = [[], [], []];\nvar mathSqrt = Math.sqrt;\nvar mathAtan2 = Math.atan2;\n\nfunction _default(path, m) {\n  var data = path.data;\n  var cmd;\n  var nPoint;\n  var i;\n  var j;\n  var k;\n  var p;\n  var M = CMD.M;\n  var C = CMD.C;\n  var L = CMD.L;\n  var R = CMD.R;\n  var A = CMD.A;\n  var Q = CMD.Q;\n\n  for (i = 0, j = 0; i < data.length;) {\n    cmd = data[i++];\n    j = i;\n    nPoint = 0;\n\n    switch (cmd) {\n      case M:\n        nPoint = 1;\n        break;\n\n      case L:\n        nPoint = 1;\n        break;\n\n      case C:\n        nPoint = 3;\n        break;\n\n      case Q:\n        nPoint = 2;\n        break;\n\n      case A:\n        var x = m[4];\n        var y = m[5];\n        var sx = mathSqrt(m[0] * m[0] + m[1] * m[1]);\n        var sy = mathSqrt(m[2] * m[2] + m[3] * m[3]);\n        var angle = mathAtan2(-m[1] / sy, m[0] / sx); // cx\n\n        data[i] *= sx;\n        data[i++] += x; // cy\n\n        data[i] *= sy;\n        data[i++] += y; // Scale rx and ry\n        // FIXME Assume psi is 0 here\n\n        data[i++] *= sx;\n        data[i++] *= sy; // Start angle\n\n        data[i++] += angle; // end angle\n\n        data[i++] += angle; // FIXME psi\n\n        i += 2;\n        j = i;\n        break;\n\n      case R:\n        // x0, y0\n        p[0] = data[i++];\n        p[1] = data[i++];\n        v2ApplyTransform(p, p, m);\n        data[j++] = p[0];\n        data[j++] = p[1]; // x1, y1\n\n        p[0] += data[i++];\n        p[1] += data[i++];\n        v2ApplyTransform(p, p, m);\n        data[j++] = p[0];\n        data[j++] = p[1];\n    }\n\n    for (k = 0; k < nPoint; k++) {\n      var p = points[k];\n      p[0] = data[i++];\n      p[1] = data[i++];\n      v2ApplyTransform(p, p, m); // Write back\n\n      data[j++] = p[0];\n      data[j++] = p[1];\n    }\n  }\n}\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar fixClipWithShadow = require(\"../helper/fixClipWithShadow\");\n\n/**\n * \n * @module zrender/graphic/shape/Sector\n */\nvar _default = Path.extend({\n  type: 'sector',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r0: 0,\n    r: 0,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    clockwise: true\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var unitX = Math.cos(startAngle);\n    var unitY = Math.sin(startAngle);\n    ctx.moveTo(unitX * r0 + x, unitY * r0 + y);\n    ctx.lineTo(unitX * r + x, unitY * r + y);\n    ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    ctx.lineTo(Math.cos(endAngle) * r0 + x, Math.sin(endAngle) * r0 + y);\n\n    if (r0 !== 0) {\n      ctx.arc(x, y, r0, endAngle, startAngle, clockwise);\n    }\n\n    ctx.closePath();\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * \n * @module zrender/graphic/shape/Ring\n */\nvar _default = Path.extend({\n  type: 'ring',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r: 0,\n    r0: 0\n  },\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var PI2 = Math.PI * 2;\n    ctx.moveTo(x + shape.r, y);\n    ctx.arc(x, y, shape.r, 0, PI2, false);\n    ctx.moveTo(x + shape.r0, y);\n    ctx.arc(x, y, shape.r0, 0, PI2, true);\n  }\n});\n\nmodule.exports = _default;","var _vector = require(\"../../core/vector\");\n\nvar v2Distance = _vector.distance;\n\n/**\n * Catmull-Rom spline \n * @module zrender/shape/util/smoothSpline\n * @author pissang (https://www.github.com/pissang)\n *         Kener (@Kener-, kener.linfeng@gmail.com)\n *         errorrik (errorrik@gmail.com)\n */\n\n/**\n * @inner\n */\nfunction interpolate(p0, p1, p2, p3, t, t2, t3) {\n  var v0 = (p2 - p0) * 0.5;\n  var v1 = (p3 - p1) * 0.5;\n  return (2 * (p1 - p2) + v0 + v1) * t3 + (-3 * (p1 - p2) - 2 * v0 - v1) * t2 + v0 * t + p1;\n}\n/**\n * @alias module:zrender/shape/util/smoothSpline\n * @param {Array} points \n * @param {boolean} isLoop\n * @return {Array}\n */\n\n\nfunction _default(points, isLoop) {\n  var len = points.length;\n  var ret = [];\n  var distance = 0;\n\n  for (var i = 1; i < len; i++) {\n    distance += v2Distance(points[i - 1], points[i]);\n  }\n\n  var segs = distance / 2;\n  segs = segs < len ? len : segs;\n\n  for (var i = 0; i < segs; i++) {\n    var pos = i / (segs - 1) * (isLoop ? len : len - 1);\n    var idx = Math.floor(pos);\n    var w = pos - idx;\n    var p0;\n    var p1 = points[idx % len];\n    var p2;\n    var p3;\n\n    if (!isLoop) {\n      p0 = points[idx === 0 ? idx : idx - 1];\n      p2 = points[idx > len - 2 ? len - 1 : idx + 1];\n      p3 = points[idx > len - 3 ? len - 1 : idx + 2];\n    } else {\n      p0 = points[(idx - 1 + len) % len];\n      p2 = points[(idx + 1) % len];\n      p3 = points[(idx + 2) % len];\n    }\n\n    var w2 = w * w;\n    var w3 = w * w2;\n    ret.push([interpolate(p0[0], p1[0], p2[0], p3[0], w, w2, w3), interpolate(p0[1], p1[1], p2[1], p3[1], w, w2, w3)]);\n  }\n\n  return ret;\n}\n\nmodule.exports = _default;","var _vector = require(\"../../core/vector\");\n\nvar v2Min = _vector.min;\nvar v2Max = _vector.max;\nvar v2Scale = _vector.scale;\nvar v2Distance = _vector.distance;\nvar v2Add = _vector.add;\nvar v2Clone = _vector.clone;\nvar v2Sub = _vector.sub;\n\n/**\n * \n * @module zrender/shape/util/smoothBezier\n * @author pissang (https://www.github.com/pissang)\n *         Kener (@Kener-, kener.linfeng@gmail.com)\n *         errorrik (errorrik@gmail.com)\n */\n\n/**\n * \n * @alias module:zrender/shape/util/smoothBezier\n * @param {Array} points \n * @param {number} smooth , 0-1\n * @param {boolean} isLoop\n * @param {Array} constraint \n *                            [[0, 0], [100, 100]], \n *                           \n * @param {Array} \n */\nfunction _default(points, smooth, isLoop, constraint) {\n  var cps = [];\n  var v = [];\n  var v1 = [];\n  var v2 = [];\n  var prevPoint;\n  var nextPoint;\n  var min;\n  var max;\n\n  if (constraint) {\n    min = [Infinity, Infinity];\n    max = [-Infinity, -Infinity];\n\n    for (var i = 0, len = points.length; i < len; i++) {\n      v2Min(min, min, points[i]);\n      v2Max(max, max, points[i]);\n    } // \n\n\n    v2Min(min, min, constraint[0]);\n    v2Max(max, max, constraint[1]);\n  }\n\n  for (var i = 0, len = points.length; i < len; i++) {\n    var point = points[i];\n\n    if (isLoop) {\n      prevPoint = points[i ? i - 1 : len - 1];\n      nextPoint = points[(i + 1) % len];\n    } else {\n      if (i === 0 || i === len - 1) {\n        cps.push(v2Clone(points[i]));\n        continue;\n      } else {\n        prevPoint = points[i - 1];\n        nextPoint = points[i + 1];\n      }\n    }\n\n    v2Sub(v, nextPoint, prevPoint); // use degree to scale the handle length\n\n    v2Scale(v, v, smooth);\n    var d0 = v2Distance(point, prevPoint);\n    var d1 = v2Distance(point, nextPoint);\n    var sum = d0 + d1;\n\n    if (sum !== 0) {\n      d0 /= sum;\n      d1 /= sum;\n    }\n\n    v2Scale(v1, v, -d0);\n    v2Scale(v2, v, d1);\n    var cp0 = v2Add([], point, v1);\n    var cp1 = v2Add([], point, v2);\n\n    if (constraint) {\n      v2Max(cp0, cp0, min);\n      v2Min(cp0, cp0, max);\n      v2Max(cp1, cp1, min);\n      v2Min(cp1, cp1, max);\n    }\n\n    cps.push(cp0);\n    cps.push(cp1);\n  }\n\n  if (isLoop) {\n    cps.push(cps.shift());\n  }\n\n  return cps;\n}\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\nvar vec2 = require(\"../../core/vector\");\n\nvar _curve = require(\"../../core/curve\");\n\nvar quadraticSubdivide = _curve.quadraticSubdivide;\nvar cubicSubdivide = _curve.cubicSubdivide;\nvar quadraticAt = _curve.quadraticAt;\nvar cubicAt = _curve.cubicAt;\nvar quadraticDerivativeAt = _curve.quadraticDerivativeAt;\nvar cubicDerivativeAt = _curve.cubicDerivativeAt;\n\n/**\n * \n * @module zrender/shape/BezierCurve\n */\nvar out = [];\n\nfunction someVectorAt(shape, t, isTangent) {\n  var cpx2 = shape.cpx2;\n  var cpy2 = shape.cpy2;\n\n  if (cpx2 === null || cpy2 === null) {\n    return [(isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t), (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)];\n  } else {\n    return [(isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t), (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)];\n  }\n}\n\nvar _default = Path.extend({\n  type: 'bezier-curve',\n  shape: {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    cpx1: 0,\n    cpy1: 0,\n    // cpx2: 0,\n    // cpy2: 0\n    // Curve show percent, for animating\n    percent: 1\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var x1 = shape.x1;\n    var y1 = shape.y1;\n    var x2 = shape.x2;\n    var y2 = shape.y2;\n    var cpx1 = shape.cpx1;\n    var cpy1 = shape.cpy1;\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    var percent = shape.percent;\n\n    if (percent === 0) {\n      return;\n    }\n\n    ctx.moveTo(x1, y1);\n\n    if (cpx2 == null || cpy2 == null) {\n      if (percent < 1) {\n        quadraticSubdivide(x1, cpx1, x2, percent, out);\n        cpx1 = out[1];\n        x2 = out[2];\n        quadraticSubdivide(y1, cpy1, y2, percent, out);\n        cpy1 = out[1];\n        y2 = out[2];\n      }\n\n      ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n    } else {\n      if (percent < 1) {\n        cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n        cpx1 = out[1];\n        cpx2 = out[2];\n        x2 = out[3];\n        cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n        cpy1 = out[1];\n        cpy2 = out[2];\n        y2 = out[3];\n      }\n\n      ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n    }\n  },\n\n  /**\n   * Get point at percent\n   * @param  {number} t\n   * @return {Array.<number>}\n   */\n  pointAt: function (t) {\n    return someVectorAt(this.shape, t, false);\n  },\n\n  /**\n   * Get tangent at percent\n   * @param  {number} t\n   * @return {Array.<number>}\n   */\n  tangentAt: function (t) {\n    var p = someVectorAt(this.shape, t, true);\n    return vec2.normalize(p, p);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * \n * @module zrender/graphic/shape/Arc\n */\nvar _default = Path.extend({\n  type: 'arc',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r: 0,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    clockwise: true\n  },\n  style: {\n    stroke: '#000',\n    fill: null\n  },\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var r = Math.max(shape.r, 0);\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var unitX = Math.cos(startAngle);\n    var unitY = Math.sin(startAngle);\n    ctx.moveTo(unitX * r + x, unitY * r + y);\n    ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n  }\n});\n\nmodule.exports = _default;","var Path = require(\"./Path\");\n\n// CompoundPath to improve performance\nvar _default = Path.extend({\n  type: 'compound',\n  shape: {\n    paths: null\n  },\n  _updatePathDirty: function () {\n    var dirtyPath = this.__dirtyPath;\n    var paths = this.shape.paths;\n\n    for (var i = 0; i < paths.length; i++) {\n      // Mark as dirty if any subpath is dirty\n      dirtyPath = dirtyPath || paths[i].__dirtyPath;\n    }\n\n    this.__dirtyPath = dirtyPath;\n    this.__dirty = this.__dirty || dirtyPath;\n  },\n  beforeBrush: function () {\n    this._updatePathDirty();\n\n    var paths = this.shape.paths || [];\n    var scale = this.getGlobalScale(); // Update path scale\n\n    for (var i = 0; i < paths.length; i++) {\n      if (!paths[i].path) {\n        paths[i].createPathProxy();\n      }\n\n      paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n    }\n  },\n  buildPath: function (ctx, shape) {\n    var paths = shape.paths || [];\n\n    for (var i = 0; i < paths.length; i++) {\n      paths[i].buildPath(ctx, paths[i].shape, true);\n    }\n  },\n  afterBrush: function () {\n    var paths = this.shape.paths || [];\n\n    for (var i = 0; i < paths.length; i++) {\n      paths[i].__dirtyPath = false;\n    }\n  },\n  getBoundingRect: function () {\n    this._updatePathDirty();\n\n    return Path.prototype.getBoundingRect.call(this);\n  }\n});\n\nmodule.exports = _default;","var zrUtil = require(\"../core/util\");\n\nvar Gradient = require(\"./Gradient\");\n\n/**\n * x, y, r are all percent from 0 to 1\n * @param {number} [x=0.5]\n * @param {number} [y=0.5]\n * @param {number} [r=0.5]\n * @param {Array.<Object>} [colorStops]\n * @param {boolean} [globalCoord=false]\n */\nvar RadialGradient = function (x, y, r, colorStops, globalCoord) {\n  // Should do nothing more in this constructor. Because gradient can be\n  // declard by `color: {type: 'radial', colorStops: ...}`, where\n  // this constructor will not be called.\n  this.x = x == null ? 0.5 : x;\n  this.y = y == null ? 0.5 : y;\n  this.r = r == null ? 0.5 : r; // Can be cloned\n\n  this.type = 'radial'; // If use global coord\n\n  this.global = globalCoord || false;\n  Gradient.call(this, colorStops);\n};\n\nRadialGradient.prototype = {\n  constructor: RadialGradient\n};\nzrUtil.inherits(RadialGradient, Gradient);\nvar _default = RadialGradient;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar makeStyleMapper = require(\"./makeStyleMapper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar getItemStyle = makeStyleMapper([['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['textPosition'], ['textAlign']]);\nvar _default = {\n  getItemStyle: function (excludes, includes) {\n    var style = getItemStyle(this, excludes, includes);\n    var lineDash = this.getBorderLineDash();\n    lineDash && (style.lineDash = lineDash);\n    return style;\n  },\n  getBorderLineDash: function () {\n    var lineType = this.get('borderType');\n    return lineType === 'solid' || lineType == null ? null : lineType === 'dashed' ? [5, 5] : [1, 1];\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = {\n  getBoxLayoutParams: function () {\n    return {\n      left: this.get('left'),\n      top: this.get('top'),\n      right: this.get('right'),\n      bottom: this.get('bottom'),\n      width: this.get('width'),\n      height: this.get('height')\n    };\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar platform = ''; // Navigator not exists in node\n\nif (typeof navigator !== 'undefined') {\n  platform = navigator.platform || '';\n}\n\nvar _default = {\n  // backgroundColor: 'rgba(0,0,0,0)',\n  // https://dribbble.com/shots/1065960-Infographic-Pie-chart-visualization\n  // color: ['#5793f3', '#d14a61', '#fd9c35', '#675bba', '#fec42c', '#dd4444', '#d4df5a', '#cd4870'],\n  // Light colors:\n  // color: ['#bcd3bb', '#e88f70', '#edc1a5', '#9dc5c8', '#e1e8c8', '#7b7c68', '#e5b5b5', '#f0b489', '#928ea8', '#bda29a'],\n  // color: ['#cc5664', '#9bd6ec', '#ea946e', '#8acaaa', '#f1ec64', '#ee8686', '#a48dc1', '#5da6bc', '#b9dcae'],\n  // Dark colors:\n  color: ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#bda29a', '#6e7074', '#546570', '#c4ccd3'],\n  gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\n  // If xAxis and yAxis declared, grid is created by default.\n  // grid: {},\n  textStyle: {\n    // color: '#000',\n    // decoration: 'none',\n    // PENDING\n    fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n    // fontFamily: 'Arial, Verdana, sans-serif',\n    fontSize: 12,\n    fontStyle: 'normal',\n    fontWeight: 'normal'\n  },\n  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n  // Default is source-over\n  blendMode: null,\n  animation: 'auto',\n  animationDuration: 1000,\n  animationDurationUpdate: 300,\n  animationEasing: 'exponentialOut',\n  animationEasingUpdate: 'cubicOut',\n  animationThreshold: 2000,\n  // Configuration for progressive/incremental rendering\n  progressiveThreshold: 3000,\n  progressive: 400,\n  // Threshold of if use single hover layer to optimize.\n  // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n  // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n  // which is unexpected.\n  // see example <echarts/test/heatmap-large.html>.\n  hoverLayerThreshold: 3000,\n  // See: module:echarts/scale/Time\n  useUTC: false\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../util/model\");\n\nvar ComponentModel = require(\"./Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * ECharts option manager\n *\n * @module {echarts/model/OptionManager}\n */\nvar each = zrUtil.each;\nvar clone = zrUtil.clone;\nvar map = zrUtil.map;\nvar merge = zrUtil.merge;\nvar QUERY_REG = /^(min|max)?(.+)$/;\n/**\n * TERM EXPLANATIONS:\n *\n * [option]:\n *\n *     An object that contains definitions of components. For example:\n *     var option = {\n *         title: {...},\n *         legend: {...},\n *         visualMap: {...},\n *         series: [\n *             {data: [...]},\n *             {data: [...]},\n *             ...\n *         ]\n *     };\n *\n * [rawOption]:\n *\n *     An object input to echarts.setOption. 'rawOption' may be an\n *     'option', or may be an object contains multi-options. For example:\n *     var option = {\n *         baseOption: {\n *             title: {...},\n *             legend: {...},\n *             series: [\n *                 {data: [...]},\n *                 {data: [...]},\n *                 ...\n *             ]\n *         },\n *         timeline: {...},\n *         options: [\n *             {title: {...}, series: {data: [...]}},\n *             {title: {...}, series: {data: [...]}},\n *             ...\n *         ],\n *         media: [\n *             {\n *                 query: {maxWidth: 320},\n *                 option: {series: {x: 20}, visualMap: {show: false}}\n *             },\n *             {\n *                 query: {minWidth: 320, maxWidth: 720},\n *                 option: {series: {x: 500}, visualMap: {show: true}}\n *             },\n *             {\n *                 option: {series: {x: 1200}, visualMap: {show: true}}\n *             }\n *         ]\n *     };\n *\n * @alias module:echarts/model/OptionManager\n * @param {module:echarts/ExtensionAPI} api\n */\n\nfunction OptionManager(api) {\n  /**\n   * @private\n   * @type {module:echarts/ExtensionAPI}\n   */\n  this._api = api;\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._timelineOptions = [];\n  /**\n   * @private\n   * @type {Array.<Object>}\n   */\n\n  this._mediaList = [];\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._mediaDefault;\n  /**\n   * -1, means default.\n   * empty means no media.\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._currentMediaIndices = [];\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._optionBackup;\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._newBaseOption;\n} // timeline.notMerge is not supported in ec3. Firstly there is rearly\n// case that notMerge is needed. Secondly supporting 'notMerge' requires\n// rawOption cloned and backuped when timeline changed, which does no\n// good to performance. What's more, that both timeline and setOption\n// method supply 'notMerge' brings complex and some problems.\n// Consider this case:\n// (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n// (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n\n\nOptionManager.prototype = {\n  constructor: OptionManager,\n\n  /**\n   * @public\n   * @param {Object} rawOption Raw option.\n   * @param {module:echarts/model/Global} ecModel\n   * @param {Array.<Function>} optionPreprocessorFuncs\n   * @return {Object} Init option\n   */\n  setOption: function (rawOption, optionPreprocessorFuncs) {\n    if (rawOption) {\n      // That set dat primitive is dangerous if user reuse the data when setOption again.\n      zrUtil.each(modelUtil.normalizeToArray(rawOption.series), function (series) {\n        series && series.data && zrUtil.isTypedArray(series.data) && zrUtil.setAsPrimitive(series.data);\n      });\n    } // Caution: some series modify option data, if do not clone,\n    // it should ensure that the repeat modify correctly\n    // (create a new object when modify itself).\n\n\n    rawOption = clone(rawOption); // FIXME\n    //  timeline options  media baseOption\n\n    var oldOptionBackup = this._optionBackup;\n    var newParsedOption = parseRawOption.call(this, rawOption, optionPreprocessorFuncs, !oldOptionBackup);\n    this._newBaseOption = newParsedOption.baseOption; // For setOption at second time (using merge mode);\n\n    if (oldOptionBackup) {\n      // Only baseOption can be merged.\n      mergeOption(oldOptionBackup.baseOption, newParsedOption.baseOption); // For simplicity, timeline options and media options do not support merge,\n      // that is, if you `setOption` twice and both has timeline options, the latter\n      // timeline opitons will not be merged to the formers, but just substitude them.\n\n      if (newParsedOption.timelineOptions.length) {\n        oldOptionBackup.timelineOptions = newParsedOption.timelineOptions;\n      }\n\n      if (newParsedOption.mediaList.length) {\n        oldOptionBackup.mediaList = newParsedOption.mediaList;\n      }\n\n      if (newParsedOption.mediaDefault) {\n        oldOptionBackup.mediaDefault = newParsedOption.mediaDefault;\n      }\n    } else {\n      this._optionBackup = newParsedOption;\n    }\n  },\n\n  /**\n   * @param {boolean} isRecreate\n   * @return {Object}\n   */\n  mountOption: function (isRecreate) {\n    var optionBackup = this._optionBackup; // TODO\n    // resetclone\n\n    this._timelineOptions = map(optionBackup.timelineOptions, clone);\n    this._mediaList = map(optionBackup.mediaList, clone);\n    this._mediaDefault = clone(optionBackup.mediaDefault);\n    this._currentMediaIndices = [];\n    return clone(isRecreate // this._optionBackup.baseOption, which is created at the first `setOption`\n    // called, and is merged into every new option by inner method `mergeOption`\n    // each time `setOption` called, can be only used in `isRecreate`, because\n    // its reliability is under suspicion. In other cases option merge is\n    // performed by `model.mergeOption`.\n    ? optionBackup.baseOption : this._newBaseOption);\n  },\n\n  /**\n   * @param {module:echarts/model/Global} ecModel\n   * @return {Object}\n   */\n  getTimelineOption: function (ecModel) {\n    var option;\n    var timelineOptions = this._timelineOptions;\n\n    if (timelineOptions.length) {\n      // getTimelineOption can only be called after ecModel inited,\n      // so we can get currentIndex from timelineModel.\n      var timelineModel = ecModel.getComponent('timeline');\n\n      if (timelineModel) {\n        option = clone(timelineOptions[timelineModel.getCurrentIndex()], true);\n      }\n    }\n\n    return option;\n  },\n\n  /**\n   * @param {module:echarts/model/Global} ecModel\n   * @return {Array.<Object>}\n   */\n  getMediaOption: function (ecModel) {\n    var ecWidth = this._api.getWidth();\n\n    var ecHeight = this._api.getHeight();\n\n    var mediaList = this._mediaList;\n    var mediaDefault = this._mediaDefault;\n    var indices = [];\n    var result = []; // No media defined.\n\n    if (!mediaList.length && !mediaDefault) {\n      return result;\n    } // Multi media may be applied, the latter defined media has higher priority.\n\n\n    for (var i = 0, len = mediaList.length; i < len; i++) {\n      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n        indices.push(i);\n      }\n    } // FIXME\n    // mediaDefault\n\n\n    if (!indices.length && mediaDefault) {\n      indices = [-1];\n    }\n\n    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n      result = map(indices, function (index) {\n        return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n      });\n    } // Otherwise return nothing.\n\n\n    this._currentMediaIndices = indices;\n    return result;\n  }\n};\n\nfunction parseRawOption(rawOption, optionPreprocessorFuncs, isNew) {\n  var timelineOptions = [];\n  var mediaList = [];\n  var mediaDefault;\n  var baseOption; // Compatible with ec2.\n\n  var timelineOpt = rawOption.timeline;\n\n  if (rawOption.baseOption) {\n    baseOption = rawOption.baseOption;\n  } // For timeline\n\n\n  if (timelineOpt || rawOption.options) {\n    baseOption = baseOption || {};\n    timelineOptions = (rawOption.options || []).slice();\n  } // For media query\n\n\n  if (rawOption.media) {\n    baseOption = baseOption || {};\n    var media = rawOption.media;\n    each(media, function (singleMedia) {\n      if (singleMedia && singleMedia.option) {\n        if (singleMedia.query) {\n          mediaList.push(singleMedia);\n        } else if (!mediaDefault) {\n          // Use the first media default.\n          mediaDefault = singleMedia;\n        }\n      }\n    });\n  } // For normal option\n\n\n  if (!baseOption) {\n    baseOption = rawOption;\n  } // Set timelineOpt to baseOption in ec3,\n  // which is convenient for merge option.\n\n\n  if (!baseOption.timeline) {\n    baseOption.timeline = timelineOpt;\n  } // Preprocess.\n\n\n  each([baseOption].concat(timelineOptions).concat(zrUtil.map(mediaList, function (media) {\n    return media.option;\n  })), function (option) {\n    each(optionPreprocessorFuncs, function (preProcess) {\n      preProcess(option, isNew);\n    });\n  });\n  return {\n    baseOption: baseOption,\n    timelineOptions: timelineOptions,\n    mediaDefault: mediaDefault,\n    mediaList: mediaList\n  };\n}\n/**\n * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\n * Support: width, height, aspectRatio\n * Can use max or min as prefix.\n */\n\n\nfunction applyMediaQuery(query, ecWidth, ecHeight) {\n  var realMap = {\n    width: ecWidth,\n    height: ecHeight,\n    aspectratio: ecWidth / ecHeight // lowser case for convenientce.\n\n  };\n  var applicatable = true;\n  zrUtil.each(query, function (value, attr) {\n    var matched = attr.match(QUERY_REG);\n\n    if (!matched || !matched[1] || !matched[2]) {\n      return;\n    }\n\n    var operator = matched[1];\n    var realAttr = matched[2].toLowerCase();\n\n    if (!compare(realMap[realAttr], value, operator)) {\n      applicatable = false;\n    }\n  });\n  return applicatable;\n}\n\nfunction compare(real, expect, operator) {\n  if (operator === 'min') {\n    return real >= expect;\n  } else if (operator === 'max') {\n    return real <= expect;\n  } else {\n    // Equals\n    return real === expect;\n  }\n}\n\nfunction indicesEquals(indices1, indices2) {\n  // indices is always order by asc and has only finite number.\n  return indices1.join(',') === indices2.join(',');\n}\n/**\n * Consider case:\n * `chart.setOption(opt1);`\n * Then user do some interaction like dataZoom, dataView changing.\n * `chart.setOption(opt2);`\n * Then user press 'reset button' in toolbox.\n *\n * After doing that all of the interaction effects should be reset, the\n * chart should be the same as the result of invoke\n * `chart.setOption(opt1); chart.setOption(opt2);`.\n *\n * Although it is not able ensure that\n * `chart.setOption(opt1); chart.setOption(opt2);` is equivalents to\n * `chart.setOption(merge(opt1, opt2));` exactly,\n * this might be the only simple way to implement that feature.\n *\n * MEMO: We've considered some other approaches:\n * 1. Each model handle its self restoration but not uniform treatment.\n *     (Too complex in logic and error-prone)\n * 2. Use a shadow ecModel. (Performace expensive)\n */\n\n\nfunction mergeOption(oldOption, newOption) {\n  newOption = newOption || {};\n  each(newOption, function (newCptOpt, mainType) {\n    if (newCptOpt == null) {\n      return;\n    }\n\n    var oldCptOpt = oldOption[mainType];\n\n    if (!ComponentModel.hasClass(mainType)) {\n      oldOption[mainType] = merge(oldCptOpt, newCptOpt, true);\n    } else {\n      newCptOpt = modelUtil.normalizeToArray(newCptOpt);\n      oldCptOpt = modelUtil.normalizeToArray(oldCptOpt);\n      var mapResult = modelUtil.mappingToExists(oldCptOpt, newCptOpt);\n      oldOption[mainType] = map(mapResult, function (item) {\n        return item.option && item.exist ? merge(item.exist, item.option, true) : item.exist || item.option;\n      });\n    }\n  });\n}\n\nvar _default = OptionManager;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar isArray = _util.isArray;\nvar isObject = _util.isObject;\n\nvar compatStyle = require(\"./helper/compatStyle\");\n\nvar _model = require(\"../util/model\");\n\nvar normalizeToArray = _model.normalizeToArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Compatitable with 2.0\nfunction get(opt, path) {\n  path = path.split(',');\n  var obj = opt;\n\n  for (var i = 0; i < path.length; i++) {\n    obj = obj && obj[path[i]];\n\n    if (obj == null) {\n      break;\n    }\n  }\n\n  return obj;\n}\n\nfunction set(opt, path, val, overwrite) {\n  path = path.split(',');\n  var obj = opt;\n  var key;\n\n  for (var i = 0; i < path.length - 1; i++) {\n    key = path[i];\n\n    if (obj[key] == null) {\n      obj[key] = {};\n    }\n\n    obj = obj[key];\n  }\n\n  if (overwrite || obj[path[i]] == null) {\n    obj[path[i]] = val;\n  }\n}\n\nfunction compatLayoutProperties(option) {\n  each(LAYOUT_PROPERTIES, function (prop) {\n    if (prop[0] in option && !(prop[1] in option)) {\n      option[prop[1]] = option[prop[0]];\n    }\n  });\n}\n\nvar LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\nvar COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\n\nfunction _default(option, isTheme) {\n  compatStyle(option, isTheme); // Make sure series array for model initialization.\n\n  option.series = normalizeToArray(option.series);\n  each(option.series, function (seriesOpt) {\n    if (!isObject(seriesOpt)) {\n      return;\n    }\n\n    var seriesType = seriesOpt.type;\n\n    if (seriesType === 'line') {\n      if (seriesOpt.clipOverflow != null) {\n        seriesOpt.clip = seriesOpt.clipOverflow;\n      }\n    } else if (seriesType === 'pie' || seriesType === 'gauge') {\n      if (seriesOpt.clockWise != null) {\n        seriesOpt.clockwise = seriesOpt.clockWise;\n      }\n    } else if (seriesType === 'gauge') {\n      var pointerColor = get(seriesOpt, 'pointer.color');\n      pointerColor != null && set(seriesOpt, 'itemStyle.color', pointerColor);\n    }\n\n    compatLayoutProperties(seriesOpt);\n  }); // dataRange has changed to visualMap\n\n  if (option.dataRange) {\n    option.visualMap = option.dataRange;\n  }\n\n  each(COMPATITABLE_COMPONENTS, function (componentName) {\n    var options = option[componentName];\n\n    if (options) {\n      if (!isArray(options)) {\n        options = [options];\n      }\n\n      each(options, function (option) {\n        compatLayoutProperties(option);\n      });\n    }\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\n\nfunction compatEC2ItemStyle(opt) {\n  var itemStyleOpt = opt && opt.itemStyle;\n\n  if (!itemStyleOpt) {\n    return;\n  }\n\n  for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n    var styleName = POSSIBLE_STYLES[i];\n    var normalItemStyleOpt = itemStyleOpt.normal;\n    var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n\n    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n      opt[styleName] = opt[styleName] || {};\n\n      if (!opt[styleName].normal) {\n        opt[styleName].normal = normalItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n      }\n\n      normalItemStyleOpt[styleName] = null;\n    }\n\n    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n      opt[styleName] = opt[styleName] || {};\n\n      if (!opt[styleName].emphasis) {\n        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n      }\n\n      emphasisItemStyleOpt[styleName] = null;\n    }\n  }\n}\n\nfunction convertNormalEmphasis(opt, optType, useExtend) {\n  if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\n    var normalOpt = opt[optType].normal;\n    var emphasisOpt = opt[optType].emphasis;\n\n    if (normalOpt) {\n      // Timeline controlStyle has other properties besides normal and emphasis\n      if (useExtend) {\n        opt[optType].normal = opt[optType].emphasis = null;\n        zrUtil.defaults(opt[optType], normalOpt);\n      } else {\n        opt[optType] = normalOpt;\n      }\n    }\n\n    if (emphasisOpt) {\n      opt.emphasis = opt.emphasis || {};\n      opt.emphasis[optType] = emphasisOpt;\n    }\n  }\n}\n\nfunction removeEC3NormalStatus(opt) {\n  convertNormalEmphasis(opt, 'itemStyle');\n  convertNormalEmphasis(opt, 'lineStyle');\n  convertNormalEmphasis(opt, 'areaStyle');\n  convertNormalEmphasis(opt, 'label');\n  convertNormalEmphasis(opt, 'labelLine'); // treemap\n\n  convertNormalEmphasis(opt, 'upperLabel'); // graph\n\n  convertNormalEmphasis(opt, 'edgeLabel');\n}\n\nfunction compatTextStyle(opt, propName) {\n  // Check whether is not object (string\\null\\undefined ...)\n  var labelOptSingle = isObject(opt) && opt[propName];\n  var textStyle = isObject(labelOptSingle) && labelOptSingle.textStyle;\n\n  if (textStyle) {\n    for (var i = 0, len = modelUtil.TEXT_STYLE_OPTIONS.length; i < len; i++) {\n      var propName = modelUtil.TEXT_STYLE_OPTIONS[i];\n\n      if (textStyle.hasOwnProperty(propName)) {\n        labelOptSingle[propName] = textStyle[propName];\n      }\n    }\n  }\n}\n\nfunction compatEC3CommonStyles(opt) {\n  if (opt) {\n    removeEC3NormalStatus(opt);\n    compatTextStyle(opt, 'label');\n    opt.emphasis && compatTextStyle(opt.emphasis, 'label');\n  }\n}\n\nfunction processSeries(seriesOpt) {\n  if (!isObject(seriesOpt)) {\n    return;\n  }\n\n  compatEC2ItemStyle(seriesOpt);\n  removeEC3NormalStatus(seriesOpt);\n  compatTextStyle(seriesOpt, 'label'); // treemap\n\n  compatTextStyle(seriesOpt, 'upperLabel'); // graph\n\n  compatTextStyle(seriesOpt, 'edgeLabel');\n\n  if (seriesOpt.emphasis) {\n    compatTextStyle(seriesOpt.emphasis, 'label'); // treemap\n\n    compatTextStyle(seriesOpt.emphasis, 'upperLabel'); // graph\n\n    compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\n  }\n\n  var markPoint = seriesOpt.markPoint;\n\n  if (markPoint) {\n    compatEC2ItemStyle(markPoint);\n    compatEC3CommonStyles(markPoint);\n  }\n\n  var markLine = seriesOpt.markLine;\n\n  if (markLine) {\n    compatEC2ItemStyle(markLine);\n    compatEC3CommonStyles(markLine);\n  }\n\n  var markArea = seriesOpt.markArea;\n\n  if (markArea) {\n    compatEC3CommonStyles(markArea);\n  }\n\n  var data = seriesOpt.data; // Break with ec3: if `setOption` again, there may be no `type` in option,\n  // then the backward compat based on option type will not be performed.\n\n  if (seriesOpt.type === 'graph') {\n    data = data || seriesOpt.nodes;\n    var edgeData = seriesOpt.links || seriesOpt.edges;\n\n    if (edgeData && !zrUtil.isTypedArray(edgeData)) {\n      for (var i = 0; i < edgeData.length; i++) {\n        compatEC3CommonStyles(edgeData[i]);\n      }\n    }\n\n    zrUtil.each(seriesOpt.categories, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  }\n\n  if (data && !zrUtil.isTypedArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      compatEC3CommonStyles(data[i]);\n    }\n  } // mark point data\n\n\n  var markPoint = seriesOpt.markPoint;\n\n  if (markPoint && markPoint.data) {\n    var mpData = markPoint.data;\n\n    for (var i = 0; i < mpData.length; i++) {\n      compatEC3CommonStyles(mpData[i]);\n    }\n  } // mark line data\n\n\n  var markLine = seriesOpt.markLine;\n\n  if (markLine && markLine.data) {\n    var mlData = markLine.data;\n\n    for (var i = 0; i < mlData.length; i++) {\n      if (zrUtil.isArray(mlData[i])) {\n        compatEC3CommonStyles(mlData[i][0]);\n        compatEC3CommonStyles(mlData[i][1]);\n      } else {\n        compatEC3CommonStyles(mlData[i]);\n      }\n    }\n  } // Series\n\n\n  if (seriesOpt.type === 'gauge') {\n    compatTextStyle(seriesOpt, 'axisLabel');\n    compatTextStyle(seriesOpt, 'title');\n    compatTextStyle(seriesOpt, 'detail');\n  } else if (seriesOpt.type === 'treemap') {\n    convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\n    zrUtil.each(seriesOpt.levels, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  } else if (seriesOpt.type === 'tree') {\n    removeEC3NormalStatus(seriesOpt.leaves);\n  } // sunburst starts from ec4, so it does not need to compat levels.\n\n}\n\nfunction toArr(o) {\n  return zrUtil.isArray(o) ? o : o ? [o] : [];\n}\n\nfunction toObj(o) {\n  return (zrUtil.isArray(o) ? o[0] : o) || {};\n}\n\nfunction _default(option, isTheme) {\n  each(toArr(option.series), function (seriesOpt) {\n    isObject(seriesOpt) && processSeries(seriesOpt);\n  });\n  var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n  isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n  each(axes, function (axisName) {\n    each(toArr(option[axisName]), function (axisOpt) {\n      if (axisOpt) {\n        compatTextStyle(axisOpt, 'axisLabel');\n        compatTextStyle(axisOpt.axisPointer, 'label');\n      }\n    });\n  });\n  each(toArr(option.parallel), function (parallelOpt) {\n    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n    compatTextStyle(parallelAxisDefault, 'axisLabel');\n    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n  });\n  each(toArr(option.calendar), function (calendarOpt) {\n    convertNormalEmphasis(calendarOpt, 'itemStyle');\n    compatTextStyle(calendarOpt, 'dayLabel');\n    compatTextStyle(calendarOpt, 'monthLabel');\n    compatTextStyle(calendarOpt, 'yearLabel');\n  }); // radar.name.textStyle\n\n  each(toArr(option.radar), function (radarOpt) {\n    compatTextStyle(radarOpt, 'name');\n  });\n  each(toArr(option.geo), function (geoOpt) {\n    if (isObject(geoOpt)) {\n      compatEC3CommonStyles(geoOpt);\n      each(toArr(geoOpt.regions), function (regionObj) {\n        compatEC3CommonStyles(regionObj);\n      });\n    }\n  });\n  each(toArr(option.timeline), function (timelineOpt) {\n    compatEC3CommonStyles(timelineOpt);\n    convertNormalEmphasis(timelineOpt, 'label');\n    convertNormalEmphasis(timelineOpt, 'itemStyle');\n    convertNormalEmphasis(timelineOpt, 'controlStyle', true);\n    var data = timelineOpt.data;\n    zrUtil.isArray(data) && zrUtil.each(data, function (item) {\n      if (zrUtil.isObject(item)) {\n        convertNormalEmphasis(item, 'label');\n        convertNormalEmphasis(item, 'itemStyle');\n      }\n    });\n  });\n  each(toArr(option.toolbox), function (toolboxOpt) {\n    convertNormalEmphasis(toolboxOpt, 'iconStyle');\n    each(toolboxOpt.feature, function (featureOpt) {\n      convertNormalEmphasis(featureOpt, 'iconStyle');\n    });\n  });\n  compatTextStyle(toObj(option.axisPointer), 'label');\n  compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar each = _util.each;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// (1) [Caution]: the logic is correct based on the premises:\n//     data processing stage is blocked in stream.\n//     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\n// (2) Only register once when import repeatly.\n//     Should be executed after series filtered and before stack calculation.\nfunction _default(ecModel) {\n  var stackInfoMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var stack = seriesModel.get('stack'); // Compatibal: when `stack` is set as '', do not stack.\n\n    if (stack) {\n      var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\n      var data = seriesModel.getData();\n      var stackInfo = {\n        // Used for calculate axis extent automatically.\n        stackResultDimension: data.getCalculationInfo('stackResultDimension'),\n        stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\n        stackedDimension: data.getCalculationInfo('stackedDimension'),\n        stackedByDimension: data.getCalculationInfo('stackedByDimension'),\n        isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\n        data: data,\n        seriesModel: seriesModel\n      }; // If stacked on axis that do not support data stack.\n\n      if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\n        return;\n      }\n\n      stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\n      stackInfoList.push(stackInfo);\n    }\n  });\n  stackInfoMap.each(calculateStack);\n}\n\nfunction calculateStack(stackInfoList) {\n  each(stackInfoList, function (targetStackInfo, idxInStack) {\n    var resultVal = [];\n    var resultNaN = [NaN, NaN];\n    var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\n    var targetData = targetStackInfo.data;\n    var isStackedByIndex = targetStackInfo.isStackedByIndex; // Should not write on raw data, because stack series model list changes\n    // depending on legend selection.\n\n    var newData = targetData.map(dims, function (v0, v1, dataIndex) {\n      var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex); // Consider `connectNulls` of line area, if value is NaN, stackedOver\n      // should also be NaN, to draw a appropriate belt area.\n\n      if (isNaN(sum)) {\n        return resultNaN;\n      }\n\n      var byValue;\n      var stackedDataRawIndex;\n\n      if (isStackedByIndex) {\n        stackedDataRawIndex = targetData.getRawIndex(dataIndex);\n      } else {\n        byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\n      } // If stackOver is NaN, chart view will render point on value start.\n\n\n      var stackedOver = NaN;\n\n      for (var j = idxInStack - 1; j >= 0; j--) {\n        var stackInfo = stackInfoList[j]; // Has been optimized by inverted indices on `stackedByDimension`.\n\n        if (!isStackedByIndex) {\n          stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\n        }\n\n        if (stackedDataRawIndex >= 0) {\n          var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex); // Considering positive stack, negative stack and empty data\n\n          if (sum >= 0 && val > 0 || // Positive stack\n          sum <= 0 && val < 0 // Negative stack\n          ) {\n              sum += val;\n              stackedOver = val;\n              break;\n            }\n        }\n      }\n\n      resultVal[0] = sum;\n      resultVal[1] = stackedOver;\n      return resultVal;\n    });\n    targetData.hostModel.setData(newData); // Update for consequent calculation\n\n    targetStackInfo.data = newData;\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Gradient = require(\"zrender/lib/graphic/Gradient\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var colorAccessPath = (seriesModel.visualColorAccessPath || 'itemStyle.color').split('.'); // Set in itemStyle\n\n    var color = seriesModel.get(colorAccessPath);\n    var colorCallback = isFunction(color) && !(color instanceof Gradient) ? color : null; // Default color\n\n    if (!color || colorCallback) {\n      color = seriesModel.getColorFromPalette( // TODO series count changed.\n      seriesModel.name, null, ecModel.getSeriesCount());\n    }\n\n    data.setVisual('color', color);\n    var borderColorAccessPath = (seriesModel.visualBorderColorAccessPath || 'itemStyle.borderColor').split('.');\n    var borderColor = seriesModel.get(borderColorAccessPath);\n    data.setVisual('borderColor', borderColor); // Only visible series has each data be visual encoded\n\n    if (!ecModel.isSeriesFiltered(seriesModel)) {\n      if (colorCallback) {\n        data.each(function (idx) {\n          data.setItemVisual(idx, 'color', colorCallback(seriesModel.getDataParams(idx)));\n        });\n      } // itemStyle in each data item\n\n\n      var dataEach = function (data, idx) {\n        var itemModel = data.getItemModel(idx);\n        var color = itemModel.get(colorAccessPath, true);\n        var borderColor = itemModel.get(borderColorAccessPath, true);\n\n        if (color != null) {\n          data.setItemVisual(idx, 'color', color);\n        }\n\n        if (borderColor != null) {\n          data.setItemVisual(idx, 'borderColor', borderColor);\n        }\n      };\n\n      return {\n        dataEach: data.hasItemOption ? dataEach : null\n      };\n    }\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar lang = require(\"../lang\");\n\nvar _dataProvider = require(\"../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(dom, ecModel) {\n  var ariaModel = ecModel.getModel('aria');\n\n  if (!ariaModel.get('show')) {\n    return;\n  } else if (ariaModel.get('description')) {\n    dom.setAttribute('aria-label', ariaModel.get('description'));\n    return;\n  }\n\n  var seriesCnt = 0;\n  ecModel.eachSeries(function (seriesModel, idx) {\n    ++seriesCnt;\n  }, this);\n  var maxDataCnt = ariaModel.get('data.maxCount') || 10;\n  var maxSeriesCnt = ariaModel.get('series.maxCount') || 10;\n  var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n  var ariaLabel;\n\n  if (seriesCnt < 1) {\n    // No series, no aria label\n    return;\n  } else {\n    var title = getTitle();\n\n    if (title) {\n      ariaLabel = replace(getConfig('general.withTitle'), {\n        title: title\n      });\n    } else {\n      ariaLabel = getConfig('general.withoutTitle');\n    }\n\n    var seriesLabels = [];\n    var prefix = seriesCnt > 1 ? 'series.multiple.prefix' : 'series.single.prefix';\n    ariaLabel += replace(getConfig(prefix), {\n      seriesCount: seriesCnt\n    });\n    ecModel.eachSeries(function (seriesModel, idx) {\n      if (idx < displaySeriesCnt) {\n        var seriesLabel;\n        var seriesName = seriesModel.get('name');\n        var seriesTpl = 'series.' + (seriesCnt > 1 ? 'multiple' : 'single') + '.';\n        seriesLabel = getConfig(seriesName ? seriesTpl + 'withName' : seriesTpl + 'withoutName');\n        seriesLabel = replace(seriesLabel, {\n          seriesId: seriesModel.seriesIndex,\n          seriesName: seriesModel.get('name'),\n          seriesType: getSeriesTypeName(seriesModel.subType)\n        });\n        var data = seriesModel.getData();\n        window.data = data;\n\n        if (data.count() > maxDataCnt) {\n          // Show part of data\n          seriesLabel += replace(getConfig('data.partialData'), {\n            displayCnt: maxDataCnt\n          });\n        } else {\n          seriesLabel += getConfig('data.allData');\n        }\n\n        var dataLabels = [];\n\n        for (var i = 0; i < data.count(); i++) {\n          if (i < maxDataCnt) {\n            var name = data.getName(i);\n            var value = retrieveRawValue(data, i);\n            dataLabels.push(replace(name ? getConfig('data.withName') : getConfig('data.withoutName'), {\n              name: name,\n              value: value\n            }));\n          }\n        }\n\n        seriesLabel += dataLabels.join(getConfig('data.separator.middle')) + getConfig('data.separator.end');\n        seriesLabels.push(seriesLabel);\n      }\n    });\n    ariaLabel += seriesLabels.join(getConfig('series.multiple.separator.middle')) + getConfig('series.multiple.separator.end');\n    dom.setAttribute('aria-label', ariaLabel);\n  }\n\n  function replace(str, keyValues) {\n    if (typeof str !== 'string') {\n      return str;\n    }\n\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n\n  function getConfig(path) {\n    var userConfig = ariaModel.get(path);\n\n    if (userConfig == null) {\n      var pathArr = path.split('.');\n      var result = lang.aria;\n\n      for (var i = 0; i < pathArr.length; ++i) {\n        result = result[pathArr[i]];\n      }\n\n      return result;\n    } else {\n      return userConfig;\n    }\n  }\n\n  function getTitle() {\n    var title = ecModel.getModel('title').option;\n\n    if (title && title.length) {\n      title = title[0];\n    }\n\n    return title && title.text;\n  }\n\n  function getSeriesTypeName(type) {\n    return lang.series.typeNames[type] || '';\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * @param {module:echarts/ExtensionAPI} api\n * @param {Object} [opts]\n * @param {string} [opts.text]\n * @param {string} [opts.color]\n * @param {string} [opts.textColor]\n * @return {module:zrender/Element}\n */\n\nfunction _default(api, opts) {\n  opts = opts || {};\n  zrUtil.defaults(opts, {\n    text: 'loading',\n    textColor: '#000',\n    fontSize: '12px',\n    maskColor: 'rgba(255, 255, 255, 0.8)',\n    showSpinner: true,\n    color: '#c23531',\n    spinnerRadius: 10,\n    lineWidth: 5,\n    zlevel: 0\n  });\n  var group = new graphic.Group();\n  var mask = new graphic.Rect({\n    style: {\n      fill: opts.maskColor\n    },\n    zlevel: opts.zlevel,\n    z: 10000\n  });\n  group.add(mask);\n  var font = opts.fontSize + ' sans-serif';\n  var labelRect = new graphic.Rect({\n    style: {\n      fill: 'none',\n      text: opts.text,\n      font: font,\n      textPosition: 'right',\n      textDistance: 10,\n      textFill: opts.textColor\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  group.add(labelRect);\n\n  if (opts.showSpinner) {\n    var arc = new graphic.Arc({\n      shape: {\n        startAngle: -PI / 2,\n        endAngle: -PI / 2 + 0.1,\n        r: opts.spinnerRadius\n      },\n      style: {\n        stroke: opts.color,\n        lineCap: 'round',\n        lineWidth: opts.lineWidth\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    arc.animateShape(true).when(1000, {\n      endAngle: PI * 3 / 2\n    }).start('circularInOut');\n    arc.animateShape(true).when(1000, {\n      startAngle: PI * 3 / 2\n    }).delay(300).start('circularInOut');\n    group.add(arc);\n  } // Inject resize\n\n\n  group.resize = function () {\n    var textWidth = textContain.getWidth(opts.text, font);\n    var r = opts.showSpinner ? opts.spinnerRadius : 0; // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\n    // textDistance needs to be calculated when both animation and text exist\n\n    var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 // only show the text\n    - (opts.showSpinner ? 0 : textWidth / 2);\n    var cy = api.getHeight() / 2;\n    opts.showSpinner && arc.setShape({\n      cx: cx,\n      cy: cy\n    });\n    labelRect.setShape({\n      x: cx - r,\n      y: cy - r,\n      width: r * 2,\n      height: r * 2\n    });\n    mask.setShape({\n      x: 0,\n      y: 0,\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n\n  group.resize();\n  return group;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar map = _util.map;\nvar isFunction = _util.isFunction;\nvar createHashMap = _util.createHashMap;\nvar noop = _util.noop;\n\nvar _task = require(\"./task\");\n\nvar createTask = _task.createTask;\n\nvar _component = require(\"../util/component\");\n\nvar getUID = _component.getUID;\n\nvar GlobalModel = require(\"../model/Global\");\n\nvar ExtensionAPI = require(\"../ExtensionAPI\");\n\nvar _model = require(\"../util/model\");\n\nvar normalizeToArray = _model.normalizeToArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/stream/Scheduler\n */\n\n/**\n * @constructor\n */\nfunction Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n  this.ecInstance = ecInstance;\n  this.api = api;\n  this.unfinished; // Fix current processors in case that in some rear cases that\n  // processors might be registered after echarts instance created.\n  // Register processors incrementally for a echarts instance is\n  // not supported by this stream architecture.\n\n  var dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n  var visualHandlers = this._visualHandlers = visualHandlers.slice();\n  this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n  /**\n   * @private\n   * @type {\n   *     [handlerUID: string]: {\n   *         seriesTaskMap?: {\n   *             [seriesUID: string]: Task\n   *         },\n   *         overallTask?: Task\n   *     }\n   * }\n   */\n\n  this._stageTaskMap = createHashMap();\n}\n\nvar proto = Scheduler.prototype;\n/**\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} payload\n */\n\nproto.restoreData = function (ecModel, payload) {\n  // TODO: Only restroe needed series and components, but not all components.\n  // Currently `restoreData` of all of the series and component will be called.\n  // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n  // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n  // and some components like coordinate system, axes, dataZoom, visualMap only\n  // need their target series refresh.\n  // (1) If we are implementing this feature some day, we should consider these cases:\n  // if a data processor depends on a component (e.g., dataZoomProcessor depends\n  // on the settings of `dataZoom`), it should be re-performed if the component\n  // is modified by `setOption`.\n  // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n  // it should be re-performed when the result array of `getTargetSeries` changed.\n  // We use `dependencies` to cover these issues.\n  // (3) How to update target series when coordinate system related components modified.\n  // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n  // and this case all of the tasks will be set as dirty.\n  ecModel.restoreData(payload); // Theoretically an overall task not only depends on each of its target series, but also\n  // depends on all of the series.\n  // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n  // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n  // that the overall task is set as dirty and to be performed, otherwise it probably cause\n  // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n  // probably cause state chaos (consider `dataZoomProcessor`).\n\n  this._stageTaskMap.each(function (taskRecord) {\n    var overallTask = taskRecord.overallTask;\n    overallTask && overallTask.dirty();\n  });\n}; // If seriesModel provided, incremental threshold is check by series data.\n\n\nproto.getPerformArgs = function (task, isBlock) {\n  // For overall task\n  if (!task.__pipeline) {\n    return;\n  }\n\n  var pipeline = this._pipelineMap.get(task.__pipeline.id);\n\n  var pCtx = pipeline.context;\n  var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n  var step = incremental ? pipeline.step : null;\n  var modDataCount = pCtx && pCtx.modDataCount;\n  var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n  return {\n    step: step,\n    modBy: modBy,\n    modDataCount: modDataCount\n  };\n};\n\nproto.getPipeline = function (pipelineId) {\n  return this._pipelineMap.get(pipelineId);\n};\n/**\n * Current, progressive rendering starts from visual and layout.\n * Always detect render mode in the same stage, avoiding that incorrect\n * detection caused by data filtering.\n * Caution:\n * `updateStreamModes` use `seriesModel.getData()`.\n */\n\n\nproto.updateStreamModes = function (seriesModel, view) {\n  var pipeline = this._pipelineMap.get(seriesModel.uid);\n\n  var data = seriesModel.getData();\n  var dataLen = data.count(); // `progressiveRender` means that can render progressively in each\n  // animation frame. Note that some types of series do not provide\n  // `view.incrementalPrepareRender` but support `chart.appendData`. We\n  // use the term `incremental` but not `progressive` to describe the\n  // case that `chart.appendData`.\n\n  var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n  var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold'); // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n  // see `test/candlestick-large3.html`\n\n  var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n  seriesModel.pipelineContext = pipeline.context = {\n    progressiveRender: progressiveRender,\n    modDataCount: modDataCount,\n    large: large\n  };\n};\n\nproto.restorePipelines = function (ecModel) {\n  var scheduler = this;\n  var pipelineMap = scheduler._pipelineMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var progressive = seriesModel.getProgressive();\n    var pipelineId = seriesModel.uid;\n    pipelineMap.set(pipelineId, {\n      id: pipelineId,\n      head: null,\n      tail: null,\n      threshold: seriesModel.getProgressiveThreshold(),\n      progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n      blockIndex: -1,\n      step: Math.round(progressive || 700),\n      count: 0\n    });\n    pipe(scheduler, seriesModel, seriesModel.dataTask);\n  });\n};\n\nproto.prepareStageTasks = function () {\n  var stageTaskMap = this._stageTaskMap;\n  var ecModel = this.ecInstance.getModel();\n  var api = this.api;\n  each(this._allHandlers, function (handler) {\n    var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, []);\n    handler.reset && createSeriesStageTask(this, handler, record, ecModel, api);\n    handler.overallReset && createOverallStageTask(this, handler, record, ecModel, api);\n  }, this);\n};\n\nproto.prepareView = function (view, model, ecModel, api) {\n  var renderTask = view.renderTask;\n  var context = renderTask.context;\n  context.model = model;\n  context.ecModel = ecModel;\n  context.api = api;\n  renderTask.__block = !view.incrementalPrepareRender;\n  pipe(this, model, renderTask);\n};\n\nproto.performDataProcessorTasks = function (ecModel, payload) {\n  // If we do not use `block` here, it should be considered when to update modes.\n  performStageTasks(this, this._dataProcessorHandlers, ecModel, payload, {\n    block: true\n  });\n}; // opt\n// opt.visualType: 'visual' or 'layout'\n// opt.setDirty\n\n\nproto.performVisualTasks = function (ecModel, payload, opt) {\n  performStageTasks(this, this._visualHandlers, ecModel, payload, opt);\n};\n\nfunction performStageTasks(scheduler, stageHandlers, ecModel, payload, opt) {\n  opt = opt || {};\n  var unfinished;\n  each(stageHandlers, function (stageHandler, idx) {\n    if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n      return;\n    }\n\n    var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n\n    var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n    var overallTask = stageHandlerRecord.overallTask;\n\n    if (overallTask) {\n      var overallNeedDirty;\n      var agentStubMap = overallTask.agentStubMap;\n      agentStubMap.each(function (stub) {\n        if (needSetDirty(opt, stub)) {\n          stub.dirty();\n          overallNeedDirty = true;\n        }\n      });\n      overallNeedDirty && overallTask.dirty();\n      updatePayload(overallTask, payload);\n      var performArgs = scheduler.getPerformArgs(overallTask, opt.block); // Execute stubs firstly, which may set the overall task dirty,\n      // then execute the overall task. And stub will call seriesModel.setData,\n      // which ensures that in the overallTask seriesModel.getData() will not\n      // return incorrect data.\n\n      agentStubMap.each(function (stub) {\n        stub.perform(performArgs);\n      });\n      unfinished |= overallTask.perform(performArgs);\n    } else if (seriesTaskMap) {\n      seriesTaskMap.each(function (task, pipelineId) {\n        if (needSetDirty(opt, task)) {\n          task.dirty();\n        }\n\n        var performArgs = scheduler.getPerformArgs(task, opt.block); // FIXME\n        // if intending to decalare `performRawSeries` in handlers, only\n        // stream-independent (specifically, data item independent) operations can be\n        // performed. Because is a series is filtered, most of the tasks will not\n        // be performed. A stream-dependent operation probably cause wrong biz logic.\n        // Perhaps we should not provide a separate callback for this case instead\n        // of providing the config `performRawSeries`. The stream-dependent operaions\n        // and stream-independent operations should better not be mixed.\n\n        performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n        updatePayload(task, payload);\n        unfinished |= task.perform(performArgs);\n      });\n    }\n  });\n\n  function needSetDirty(opt, task) {\n    return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n  }\n\n  scheduler.unfinished |= unfinished;\n}\n\nproto.performSeriesTasks = function (ecModel) {\n  var unfinished;\n  ecModel.eachSeries(function (seriesModel) {\n    // Progress to the end for dataInit and dataRestore.\n    unfinished |= seriesModel.dataTask.perform();\n  });\n  this.unfinished |= unfinished;\n};\n\nproto.plan = function () {\n  // Travel pipelines, check block.\n  this._pipelineMap.each(function (pipeline) {\n    var task = pipeline.tail;\n\n    do {\n      if (task.__block) {\n        pipeline.blockIndex = task.__idxInPipeline;\n        break;\n      }\n\n      task = task.getUpstream();\n    } while (task);\n  });\n};\n\nvar updatePayload = proto.updatePayload = function (task, payload) {\n  payload !== 'remain' && (task.context.payload = payload);\n};\n\nfunction createSeriesStageTask(scheduler, stageHandler, stageHandlerRecord, ecModel, api) {\n  var seriesTaskMap = stageHandlerRecord.seriesTaskMap || (stageHandlerRecord.seriesTaskMap = createHashMap());\n  var seriesType = stageHandler.seriesType;\n  var getTargetSeries = stageHandler.getTargetSeries; // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n  // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n  // it works but it may cause other irrelevant charts blocked.\n\n  if (stageHandler.createOnAllSeries) {\n    ecModel.eachRawSeries(create);\n  } else if (seriesType) {\n    ecModel.eachRawSeriesByType(seriesType, create);\n  } else if (getTargetSeries) {\n    getTargetSeries(ecModel, api).each(create);\n  }\n\n  function create(seriesModel) {\n    var pipelineId = seriesModel.uid; // Init tasks for each seriesModel only once.\n    // Reuse original task instance.\n\n    var task = seriesTaskMap.get(pipelineId) || seriesTaskMap.set(pipelineId, createTask({\n      plan: seriesTaskPlan,\n      reset: seriesTaskReset,\n      count: seriesTaskCount\n    }));\n    task.context = {\n      model: seriesModel,\n      ecModel: ecModel,\n      api: api,\n      useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n      plan: stageHandler.plan,\n      reset: stageHandler.reset,\n      scheduler: scheduler\n    };\n    pipe(scheduler, seriesModel, task);\n  } // Clear unused series tasks.\n\n\n  var pipelineMap = scheduler._pipelineMap;\n  seriesTaskMap.each(function (task, pipelineId) {\n    if (!pipelineMap.get(pipelineId)) {\n      task.dispose();\n      seriesTaskMap.removeKey(pipelineId);\n    }\n  });\n}\n\nfunction createOverallStageTask(scheduler, stageHandler, stageHandlerRecord, ecModel, api) {\n  var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask // For overall task, the function only be called on reset stage.\n  || createTask({\n    reset: overallTaskReset\n  });\n  overallTask.context = {\n    ecModel: ecModel,\n    api: api,\n    overallReset: stageHandler.overallReset,\n    scheduler: scheduler\n  }; // Reuse orignal stubs.\n\n  var agentStubMap = overallTask.agentStubMap = overallTask.agentStubMap || createHashMap();\n  var seriesType = stageHandler.seriesType;\n  var getTargetSeries = stageHandler.getTargetSeries;\n  var overallProgress = true;\n  var modifyOutputEnd = stageHandler.modifyOutputEnd; // An overall task with seriesType detected or has `getTargetSeries`, we add\n  // stub in each pipelines, it will set the overall task dirty when the pipeline\n  // progress. Moreover, to avoid call the overall task each frame (too frequent),\n  // we set the pipeline block.\n\n  if (seriesType) {\n    ecModel.eachRawSeriesByType(seriesType, createStub);\n  } else if (getTargetSeries) {\n    getTargetSeries(ecModel, api).each(createStub);\n  } // Otherwise, (usually it is legancy case), the overall task will only be\n  // executed when upstream dirty. Otherwise the progressive rendering of all\n  // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n  // dirty info from upsteam.\n  else {\n      overallProgress = false;\n      each(ecModel.getSeries(), createStub);\n    }\n\n  function createStub(seriesModel) {\n    var pipelineId = seriesModel.uid;\n    var stub = agentStubMap.get(pipelineId);\n\n    if (!stub) {\n      stub = agentStubMap.set(pipelineId, createTask({\n        reset: stubReset,\n        onDirty: stubOnDirty\n      })); // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n\n      overallTask.dirty();\n    }\n\n    stub.context = {\n      model: seriesModel,\n      overallProgress: overallProgress,\n      modifyOutputEnd: modifyOutputEnd\n    };\n    stub.agent = overallTask;\n    stub.__block = overallProgress;\n    pipe(scheduler, seriesModel, stub);\n  } // Clear unused stubs.\n\n\n  var pipelineMap = scheduler._pipelineMap;\n  agentStubMap.each(function (stub, pipelineId) {\n    if (!pipelineMap.get(pipelineId)) {\n      stub.dispose(); // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n\n      overallTask.dirty();\n      agentStubMap.removeKey(pipelineId);\n    }\n  });\n}\n\nfunction overallTaskReset(context) {\n  context.overallReset(context.ecModel, context.api, context.payload);\n}\n\nfunction stubReset(context, upstreamContext) {\n  return context.overallProgress && stubProgress;\n}\n\nfunction stubProgress() {\n  this.agent.dirty();\n  this.getDownstream().dirty();\n}\n\nfunction stubOnDirty() {\n  this.agent && this.agent.dirty();\n}\n\nfunction seriesTaskPlan(context) {\n  return context.plan && context.plan(context.model, context.ecModel, context.api, context.payload);\n}\n\nfunction seriesTaskReset(context) {\n  if (context.useClearVisual) {\n    context.data.clearAllVisual();\n  }\n\n  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n  return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n    return makeSeriesTaskProgress(idx);\n  }) : singleSeriesTaskProgress;\n}\n\nvar singleSeriesTaskProgress = makeSeriesTaskProgress(0);\n\nfunction makeSeriesTaskProgress(resetDefineIdx) {\n  return function (params, context) {\n    var data = context.data;\n    var resetDefine = context.resetDefines[resetDefineIdx];\n\n    if (resetDefine && resetDefine.dataEach) {\n      for (var i = params.start; i < params.end; i++) {\n        resetDefine.dataEach(data, i);\n      }\n    } else if (resetDefine && resetDefine.progress) {\n      resetDefine.progress(params, data);\n    }\n  };\n}\n\nfunction seriesTaskCount(context) {\n  return context.data.count();\n}\n\nfunction pipe(scheduler, seriesModel, task) {\n  var pipelineId = seriesModel.uid;\n\n  var pipeline = scheduler._pipelineMap.get(pipelineId);\n\n  !pipeline.head && (pipeline.head = task);\n  pipeline.tail && pipeline.tail.pipe(task);\n  pipeline.tail = task;\n  task.__idxInPipeline = pipeline.count++;\n  task.__pipeline = pipeline;\n}\n\nScheduler.wrapStageHandler = function (stageHandler, visualType) {\n  if (isFunction(stageHandler)) {\n    stageHandler = {\n      overallReset: stageHandler,\n      seriesType: detectSeriseType(stageHandler)\n    };\n  }\n\n  stageHandler.uid = getUID('stageHandler');\n  visualType && (stageHandler.visualType = visualType);\n  return stageHandler;\n};\n/**\n * Only some legacy stage handlers (usually in echarts extensions) are pure function.\n * To ensure that they can work normally, they should work in block mode, that is,\n * they should not be started util the previous tasks finished. So they cause the\n * progressive rendering disabled. We try to detect the series type, to narrow down\n * the block range to only the series type they concern, but not all series.\n */\n\n\nfunction detectSeriseType(legacyFunc) {\n  seriesType = null;\n\n  try {\n    // Assume there is no async when calling `eachSeriesByType`.\n    legacyFunc(ecModelMock, apiMock);\n  } catch (e) {}\n\n  return seriesType;\n}\n\nvar ecModelMock = {};\nvar apiMock = {};\nvar seriesType;\nmockMethods(ecModelMock, GlobalModel);\nmockMethods(apiMock, ExtensionAPI);\n\necModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n  seriesType = type;\n};\n\necModelMock.eachComponent = function (cond) {\n  if (cond.mainType === 'series' && cond.subType) {\n    seriesType = cond.subType;\n  }\n};\n\nfunction mockMethods(target, Clz) {\n  /* eslint-disable */\n  for (var name in Clz.prototype) {\n    // Do not use hasOwnProperty\n    target[name] = noop;\n  }\n  /* eslint-enable */\n\n}\n\nvar _default = Scheduler;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar colorAll = ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'];\nvar _default = {\n  color: colorAll,\n  colorLayer: [['#37A2DA', '#ffd85c', '#fd7b5f'], ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'], ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'], colorAll]\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar contrastColor = '#eee';\n\nvar axisCommon = function () {\n  return {\n    axisLine: {\n      lineStyle: {\n        color: contrastColor\n      }\n    },\n    axisTick: {\n      lineStyle: {\n        color: contrastColor\n      }\n    },\n    axisLabel: {\n      textStyle: {\n        color: contrastColor\n      }\n    },\n    splitLine: {\n      lineStyle: {\n        type: 'dashed',\n        color: '#aaa'\n      }\n    },\n    splitArea: {\n      areaStyle: {\n        color: contrastColor\n      }\n    }\n  };\n};\n\nvar colorPalette = ['#dd6b66', '#759aa0', '#e69d87', '#8dc1a9', '#ea7e53', '#eedd78', '#73a373', '#73b9bc', '#7289ab', '#91ca8c', '#f49f42'];\nvar theme = {\n  color: colorPalette,\n  backgroundColor: '#333',\n  tooltip: {\n    axisPointer: {\n      lineStyle: {\n        color: contrastColor\n      },\n      crossStyle: {\n        color: contrastColor\n      },\n      label: {\n        color: '#000'\n      }\n    }\n  },\n  legend: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  textStyle: {\n    color: contrastColor\n  },\n  title: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  toolbox: {\n    iconStyle: {\n      normal: {\n        borderColor: contrastColor\n      }\n    }\n  },\n  dataZoom: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  visualMap: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  timeline: {\n    lineStyle: {\n      color: contrastColor\n    },\n    itemStyle: {\n      normal: {\n        color: colorPalette[1]\n      }\n    },\n    label: {\n      normal: {\n        textStyle: {\n          color: contrastColor\n        }\n      }\n    },\n    controlStyle: {\n      normal: {\n        color: contrastColor,\n        borderColor: contrastColor\n      }\n    }\n  },\n  timeAxis: axisCommon(),\n  logAxis: axisCommon(),\n  valueAxis: axisCommon(),\n  categoryAxis: axisCommon(),\n  line: {\n    symbol: 'circle'\n  },\n  graph: {\n    color: colorPalette\n  },\n  gauge: {\n    title: {\n      textStyle: {\n        color: contrastColor\n      }\n    }\n  },\n  candlestick: {\n    itemStyle: {\n      normal: {\n        color: '#FD1050',\n        color0: '#0CF49B',\n        borderColor: '#FD1050',\n        borderColor0: '#0CF49B'\n      }\n    }\n  }\n};\ntheme.categoryAxis.splitLine.show = false;\nvar _default = theme;\nmodule.exports = _default;","var Path = require(\"../Path\");\n\n/**\n * \n * @module zrender/graphic/shape/Ellipse\n */\nvar _default = Path.extend({\n  type: 'ellipse',\n  shape: {\n    cx: 0,\n    cy: 0,\n    rx: 0,\n    ry: 0\n  },\n  buildPath: function (ctx, shape) {\n    var k = 0.5522848;\n    var x = shape.cx;\n    var y = shape.cy;\n    var a = shape.rx;\n    var b = shape.ry;\n    var ox = a * k; // \n\n    var oy = b * k; // \n    // \n\n    ctx.moveTo(x - a, y);\n    ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n    ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n    ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n    ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n    ctx.closePath();\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar createListFromArray = require(\"./chart/helper/createListFromArray\");\n\nvar axisHelper = require(\"./coord/axisHelper\");\n\nvar axisModelCommonMixin = require(\"./coord/axisModelCommonMixin\");\n\nvar Model = require(\"./model/Model\");\n\nvar _layout = require(\"./util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nexports.getLayoutRect = _layout.getLayoutRect;\n\nvar _dataStackHelper = require(\"./data/helper/dataStackHelper\");\n\nvar enableDataStack = _dataStackHelper.enableDataStack;\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\nvar getStackedDimension = _dataStackHelper.getStackedDimension;\n\nvar _completeDimensions = require(\"./data/helper/completeDimensions\");\n\nexports.completeDimensions = _completeDimensions;\n\nvar _createDimensions = require(\"./data/helper/createDimensions\");\n\nexports.createDimensions = _createDimensions;\n\nvar _symbol = require(\"./util/symbol\");\n\nexports.createSymbol = _symbol.createSymbol;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import createGraphFromNodeEdge from './chart/helper/createGraphFromNodeEdge';\n\n/**\n * Create a muti dimension List structure from seriesModel.\n * @param  {module:echarts/model/Model} seriesModel\n * @return {module:echarts/data/List} list\n */\nfunction createList(seriesModel) {\n  return createListFromArray(seriesModel.getSource(), seriesModel);\n} // export function createGraph(seriesModel) {\n//     var nodes = seriesModel.get('data');\n//     var links = seriesModel.get('links');\n//     return createGraphFromNodeEdge(nodes, links, seriesModel);\n// }\n\n\nvar dataStack = {\n  isDimensionStacked: isDimensionStacked,\n  enableDataStack: enableDataStack,\n  getStackedDimension: getStackedDimension\n};\n/**\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\n * @param {string} symbolDesc\n * @param {number} x\n * @param {number} y\n * @param {number} w\n * @param {number} h\n * @param {string} color\n */\n\n/**\n * Create scale\n * @param {Array.<number>} dataExtent\n * @param {Object|module:echarts/Model} option\n */\nfunction createScale(dataExtent, option) {\n  var axisModel = option;\n\n  if (!Model.isInstance(option)) {\n    axisModel = new Model(option);\n    zrUtil.mixin(axisModel, axisModelCommonMixin);\n  }\n\n  var scale = axisHelper.createScaleByModel(axisModel);\n  scale.setExtent(dataExtent[0], dataExtent[1]);\n  axisHelper.niceScaleExtent(scale, axisModel);\n  return scale;\n}\n/**\n * Mixin common methods to axis model,\n *\n * Inlcude methods\n * `getFormattedLabels() => Array.<string>`\n * `getCategories() => Array.<string>`\n * `getMin(origin: boolean) => number`\n * `getMax(origin: boolean) => number`\n * `getNeedCrossZero() => boolean`\n * `setRange(start: number, end: number)`\n * `resetRange()`\n */\n\n\nfunction mixinAxisModelCommonMethods(Model) {\n  zrUtil.mixin(Model, axisModelCommonMixin);\n}\n\nexports.createList = createList;\nexports.dataStack = dataStack;\nexports.createScale = createScale;\nexports.mixinAxisModelCommonMethods = mixinAxisModelCommonMethods;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar retrieve = _util.retrieve;\nvar each = _util.each;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Helper for model references.\n * There are many manners to refer axis/coordSys.\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\n\n/**\n * @class\n * For example:\n * {\n *     coordSysName: 'cartesian2d',\n *     coordSysDims: ['x', 'y', ...],\n *     axisMap: HashMap({\n *         x: xAxisModel,\n *         y: yAxisModel\n *     }),\n *     categoryAxisMap: HashMap({\n *         x: xAxisModel,\n *         y: undefined\n *     }),\n *     // The index of the first category axis in `coordSysDims`.\n *     // `null/undefined` means no category axis exists.\n *     firstCategoryDimIndex: 1,\n *     // To replace user specified encode.\n * }\n */\nfunction CoordSysInfo(coordSysName) {\n  /**\n   * @type {string}\n   */\n  this.coordSysName = coordSysName;\n  /**\n   * @type {Array.<string>}\n   */\n\n  this.coordSysDims = [];\n  /**\n   * @type {module:zrender/core/util#HashMap}\n   */\n\n  this.axisMap = createHashMap();\n  /**\n   * @type {module:zrender/core/util#HashMap}\n   */\n\n  this.categoryAxisMap = createHashMap();\n  /**\n   * @type {number}\n   */\n\n  this.firstCategoryDimIndex = null;\n}\n/**\n * @return {module:model/referHelper#CoordSysInfo}\n */\n\n\nfunction getCoordSysInfoBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = new CoordSysInfo(coordSysName);\n  var fetch = fetchers[coordSysName];\n\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\n\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis')[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis')[0];\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex == null & (result.firstCategoryDimIndex = 1);\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis')[0];\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar')[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n\n      if (isCategory(axisModel) && result.firstCategoryDimIndex == null) {\n        categoryAxisMap.set(axisDim, axisModel);\n        result.firstCategoryDimIndex = index;\n      }\n    });\n  }\n};\n\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}\n\nexports.getCoordSysInfoBySeries = getCoordSysInfoBySeries;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Scale = require(\"./Scale\");\n\nvar OrdinalMeta = require(\"../data/OrdinalMeta\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Linear continuous scale\n * @module echarts/coord/scale/Ordinal\n *\n * http://en.wikipedia.org/wiki/Level_of_measurement\n */\n// FIXME only one data\nvar scaleProto = Scale.prototype;\nvar OrdinalScale = Scale.extend({\n  type: 'ordinal',\n\n  /**\n   * @param {module:echarts/data/OrdianlMeta|Array.<string>} ordinalMeta\n   */\n  init: function (ordinalMeta, extent) {\n    // Caution: Should not use instanceof, consider ec-extensions using\n    // import approach to get OrdinalMeta class.\n    if (!ordinalMeta || zrUtil.isArray(ordinalMeta)) {\n      ordinalMeta = new OrdinalMeta({\n        categories: ordinalMeta\n      });\n    }\n\n    this._ordinalMeta = ordinalMeta;\n    this._extent = extent || [0, ordinalMeta.categories.length - 1];\n  },\n  parse: function (val) {\n    return typeof val === 'string' ? this._ordinalMeta.getOrdinal(val) // val might be float.\n    : Math.round(val);\n  },\n  contain: function (rank) {\n    rank = this.parse(rank);\n    return scaleProto.contain.call(this, rank) && this._ordinalMeta.categories[rank] != null;\n  },\n\n  /**\n   * Normalize given rank or name to linear [0, 1]\n   * @param {number|string} [val]\n   * @return {number}\n   */\n  normalize: function (val) {\n    return scaleProto.normalize.call(this, this.parse(val));\n  },\n  scale: function (val) {\n    return Math.round(scaleProto.scale.call(this, val));\n  },\n\n  /**\n   * @return {Array}\n   */\n  getTicks: function () {\n    var ticks = [];\n    var extent = this._extent;\n    var rank = extent[0];\n\n    while (rank <= extent[1]) {\n      ticks.push(rank);\n      rank++;\n    }\n\n    return ticks;\n  },\n\n  /**\n   * Get item on rank n\n   * @param {number} n\n   * @return {string}\n   */\n  getLabel: function (n) {\n    if (!this.isBlank()) {\n      // Note that if no data, ordinalMeta.categories is an empty array.\n      return this._ordinalMeta.categories[n];\n    }\n  },\n\n  /**\n   * @return {number}\n   */\n  count: function () {\n    return this._extent[1] - this._extent[0] + 1;\n  },\n\n  /**\n   * @override\n   */\n  unionExtentFromData: function (data, dim) {\n    this.unionExtent(data.getApproximateExtent(dim));\n  },\n  getOrdinalMeta: function () {\n    return this._ordinalMeta;\n  },\n  niceTicks: zrUtil.noop,\n  niceExtent: zrUtil.noop\n});\n/**\n * @return {module:echarts/scale/Time}\n */\n\nOrdinalScale.create = function () {\n  return new OrdinalScale();\n};\n\nvar _default = OrdinalScale;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar numberUtil = require(\"../util/number\");\n\nvar formatUtil = require(\"../util/format\");\n\nvar scaleHelper = require(\"./helper\");\n\nvar IntervalScale = require(\"./Interval\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design have\n// concidered these common case:\n// (1) Time that is persistent in server is in UTC, but it is needed to be diplayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\nvar intervalScaleProto = IntervalScale.prototype;\nvar mathCeil = Math.ceil;\nvar mathFloor = Math.floor;\nvar ONE_SECOND = 1000;\nvar ONE_MINUTE = ONE_SECOND * 60;\nvar ONE_HOUR = ONE_MINUTE * 60;\nvar ONE_DAY = ONE_HOUR * 24; // FIXME \n\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return lo;\n};\n/**\n * @alias module:echarts/coord/scale/Time\n * @constructor\n */\n\n\nvar TimeScale = IntervalScale.extend({\n  type: 'time',\n\n  /**\n   * @override\n   */\n  getLabel: function (val) {\n    var stepLvl = this._stepLvl;\n    var date = new Date(val);\n    return formatUtil.formatTime(stepLvl[0], date, this.getSetting('useUTC'));\n  },\n\n  /**\n   * @override\n   */\n  niceExtent: function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= ONE_DAY;\n      extent[1] += ONE_DAY;\n    } // If there are no data and extent are [Infinity, -Infinity]\n\n\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - ONE_DAY;\n    }\n\n    this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // var extent = this._extent;\n\n    var interval = this._interval;\n\n    if (!opt.fixMin) {\n      extent[0] = numberUtil.round(mathFloor(extent[0] / interval) * interval);\n    }\n\n    if (!opt.fixMax) {\n      extent[1] = numberUtil.round(mathCeil(extent[1] / interval) * interval);\n    }\n  },\n\n  /**\n   * @override\n   */\n  niceTicks: function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    var approxInterval = span / approxTickNum;\n\n    if (minInterval != null && approxInterval < minInterval) {\n      approxInterval = minInterval;\n    }\n\n    if (maxInterval != null && approxInterval > maxInterval) {\n      approxInterval = maxInterval;\n    }\n\n    var scaleLevelsLen = scaleLevels.length;\n    var idx = bisect(scaleLevels, approxInterval, 0, scaleLevelsLen);\n    var level = scaleLevels[Math.min(idx, scaleLevelsLen - 1)];\n    var interval = level[1]; // Same with interval scale if span is much larger than 1 year\n\n    if (level[0] === 'year') {\n      var yearSpan = span / interval; // From \"Nice Numbers for Graph Labels\" of Graphic Gems\n      // var niceYearSpan = numberUtil.nice(yearSpan, false);\n\n      var yearStep = numberUtil.nice(yearSpan / approxTickNum, true);\n      interval *= yearStep;\n    }\n\n    var timezoneOffset = this.getSetting('useUTC') ? 0 : new Date(+extent[0] || +extent[1]).getTimezoneOffset() * 60 * 1000;\n    var niceExtent = [Math.round(mathCeil((extent[0] - timezoneOffset) / interval) * interval + timezoneOffset), Math.round(mathFloor((extent[1] - timezoneOffset) / interval) * interval + timezoneOffset)];\n    scaleHelper.fixExtent(niceExtent, extent);\n    this._stepLvl = level; // Interval will be used in getTicks\n\n    this._interval = interval;\n    this._niceExtent = niceExtent;\n  },\n  parse: function (val) {\n    // val might be float.\n    return +numberUtil.parseDate(val);\n  }\n});\nzrUtil.each(['contain', 'normalize'], function (methodName) {\n  TimeScale.prototype[methodName] = function (val) {\n    return intervalScaleProto[methodName].call(this, this.parse(val));\n  };\n});\n/**\n * This implementation was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\nvar scaleLevels = [// Format              interval\n['hh:mm:ss', ONE_SECOND], // 1s\n['hh:mm:ss', ONE_SECOND * 5], // 5s\n['hh:mm:ss', ONE_SECOND * 10], // 10s\n['hh:mm:ss', ONE_SECOND * 15], // 15s\n['hh:mm:ss', ONE_SECOND * 30], // 30s\n['hh:mm\\nMM-dd', ONE_MINUTE], // 1m\n['hh:mm\\nMM-dd', ONE_MINUTE * 5], // 5m\n['hh:mm\\nMM-dd', ONE_MINUTE * 10], // 10m\n['hh:mm\\nMM-dd', ONE_MINUTE * 15], // 15m\n['hh:mm\\nMM-dd', ONE_MINUTE * 30], // 30m\n['hh:mm\\nMM-dd', ONE_HOUR], // 1h\n['hh:mm\\nMM-dd', ONE_HOUR * 2], // 2h\n['hh:mm\\nMM-dd', ONE_HOUR * 6], // 6h\n['hh:mm\\nMM-dd', ONE_HOUR * 12], // 12h\n['MM-dd\\nyyyy', ONE_DAY], // 1d\n['MM-dd\\nyyyy', ONE_DAY * 2], // 2d\n['MM-dd\\nyyyy', ONE_DAY * 3], // 3d\n['MM-dd\\nyyyy', ONE_DAY * 4], // 4d\n['MM-dd\\nyyyy', ONE_DAY * 5], // 5d\n['MM-dd\\nyyyy', ONE_DAY * 6], // 6d\n['week', ONE_DAY * 7], // 7d\n['MM-dd\\nyyyy', ONE_DAY * 10], // 10d\n['week', ONE_DAY * 14], // 2w\n['week', ONE_DAY * 21], // 3w\n['month', ONE_DAY * 31], // 1M\n['week', ONE_DAY * 42], // 6w\n['month', ONE_DAY * 62], // 2M\n['week', ONE_DAY * 70], // 10w\n['quarter', ONE_DAY * 95], // 3M\n['month', ONE_DAY * 31 * 4], // 4M\n['month', ONE_DAY * 31 * 5], // 5M\n['half-year', ONE_DAY * 380 / 2], // 6M\n['month', ONE_DAY * 31 * 8], // 8M\n['month', ONE_DAY * 31 * 10], // 10M\n['year', ONE_DAY * 380] // 1Y\n];\n/**\n * @param {module:echarts/model/Model}\n * @return {module:echarts/scale/Time}\n */\n\nTimeScale.create = function (model) {\n  return new TimeScale({\n    useUTC: model.ecModel.get('useUTC')\n  });\n};\n\nvar _default = TimeScale;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar _model = require(\"../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar _axisHelper = require(\"./axisHelper\");\n\nvar makeLabelFormatter = _axisHelper.makeLabelFormatter;\nvar getOptionCategoryInterval = _axisHelper.getOptionCategoryInterval;\nvar shouldShowAllLabels = _axisHelper.shouldShowAllLabels;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\n/**\n * @param {module:echats/coord/Axis} axis\n * @return {Object} {\n *     labels: [{\n *         formattedLabel: string,\n *         rawLabel: string,\n *         tickValue: number\n *     }, ...],\n *     labelCategoryInterval: number\n * }\n */\n\nfunction createAxisLabels(axis) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\n}\n/**\n * @param {module:echats/coord/Axis} axis\n * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\n * @return {Object} {\n *     ticks: Array.<number>\n *     tickCategoryInterval: number\n * }\n */\n\n\nfunction createAxisTicks(axis, tickModel) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n    ticks: axis.scale.getTicks()\n  };\n}\n\nfunction makeCategoryLabels(axis) {\n  var labelModel = axis.getLabelModel();\n  var result = makeCategoryLabelsActually(axis, labelModel);\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\n    labels: [],\n    labelCategoryInterval: result.labelCategoryInterval\n  } : result;\n}\n\nfunction makeCategoryLabelsActually(axis, labelModel) {\n  var labelsCache = getListCache(axis, 'labels');\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\n  var result = listCacheGet(labelsCache, optionLabelInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var labels;\n  var numericLabelInterval;\n\n  if (zrUtil.isFunction(optionLabelInterval)) {\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n  } else {\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n  } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(labelsCache, optionLabelInterval, {\n    labels: labels,\n    labelCategoryInterval: numericLabelInterval\n  });\n}\n\nfunction makeCategoryTicks(axis, tickModel) {\n  var ticksCache = getListCache(axis, 'ticks');\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\n  var result = listCacheGet(ticksCache, optionTickInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var ticks;\n  var tickCategoryInterval; // Optimize for the case that large category data and no label displayed,\n  // we should not return all ticks.\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    ticks = [];\n  }\n\n  if (zrUtil.isFunction(optionTickInterval)) {\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n  } // Always use label interval by default despite label show. Consider this\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\n  else if (optionTickInterval === 'auto') {\n      var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\n      tickCategoryInterval = labelsResult.labelCategoryInterval;\n      ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\n        return labelItem.tickValue;\n      });\n    } else {\n      tickCategoryInterval = optionTickInterval;\n      ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n    } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(ticksCache, optionTickInterval, {\n    ticks: ticks,\n    tickCategoryInterval: tickCategoryInterval\n  });\n}\n\nfunction makeRealNumberLabels(axis) {\n  var ticks = axis.scale.getTicks();\n  var labelFormatter = makeLabelFormatter(axis);\n  return {\n    labels: zrUtil.map(ticks, function (tickValue, idx) {\n      return {\n        formattedLabel: labelFormatter(tickValue, idx),\n        rawLabel: axis.scale.getLabel(tickValue),\n        tickValue: tickValue\n      };\n    })\n  };\n} // Large category data calculation is performence sensitive, and ticks and label\n// probably be fetched by multiple times. So we cache the result.\n// axis is created each time during a ec process, so we do not need to clear cache.\n\n\nfunction getListCache(axis, prop) {\n  // Because key can be funciton, and cache size always be small, we use array cache.\n  return inner(axis)[prop] || (inner(axis)[prop] = []);\n}\n\nfunction listCacheGet(cache, key) {\n  for (var i = 0; i < cache.length; i++) {\n    if (cache[i].key === key) {\n      return cache[i].value;\n    }\n  }\n}\n\nfunction listCacheSet(cache, key, value) {\n  cache.push({\n    key: key,\n    value: value\n  });\n  return value;\n}\n\nfunction makeAutoCategoryInterval(axis) {\n  var result = inner(axis).autoInterval;\n  return result != null ? result : inner(axis).autoInterval = axis.calculateCategoryInterval();\n}\n/**\n * Calculate interval for category axis ticks and labels.\n * To get precise result, at least one of `getRotate` and `isHorizontal`\n * should be implemented in axis.\n */\n\n\nfunction calculateCategoryInterval(axis) {\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\n  var labelFormatter = makeLabelFormatter(axis);\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent(); // Providing this method is for optimization:\n  // avoid generating a long array by `getTicks`\n  // in large category data case.\n\n  var tickCount = ordinalScale.count();\n\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n    return 0;\n  }\n\n  var step = 1; // Simple optimization. Empirical value: tick count should less than 40.\n\n  if (tickCount > 40) {\n    step = Math.max(1, Math.floor(tickCount / 40));\n  }\n\n  var tickValue = ordinalExtent[0];\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\n  var maxW = 0;\n  var maxH = 0; // Caution: Performance sensitive for large category data.\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    var width = 0;\n    var height = 0; // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n\n    var rect = textContain.getBoundingRect(labelFormatter(tickValue), params.font, 'center', 'top'); // Magic number\n\n    width = rect.width * 1.3;\n    height = rect.height * 1.3; // Min size, void long loop.\n\n    maxW = Math.max(maxW, width, 7);\n    maxH = Math.max(maxH, height, 7);\n  }\n\n  var dw = maxW / unitW;\n  var dh = maxH / unitH; // 0/0 is NaN, 1/0 is Infinity.\n\n  isNaN(dw) && (dw = Infinity);\n  isNaN(dh) && (dh = Infinity);\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n  var cache = inner(axis.model);\n  var axisExtent = axis.getExtent();\n  var lastAutoInterval = cache.lastAutoInterval;\n  var lastTickCount = cache.lastTickCount; // Use cache to keep interval stable while moving zoom window,\n  // otherwise the calculated interval might jitter when the zoom\n  // window size is close to the interval-changing size.\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n  // The jitter will cause that sometimes the displayed labels are\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1 // Always choose the bigger one, otherwise the critical\n  // point is not the same when zooming in or zooming out.\n  && lastAutoInterval > interval // If the axis change is caused by chart resize, the cache should not\n  // be used. Otherwise some hiden labels might not be shown again.\n  && cache.axisExtend0 === axisExtent[0] && cache.axisExtend1 === axisExtent[1]) {\n    interval = lastAutoInterval;\n  } // Only update cache if cache not used, otherwise the\n  // changing of interval is too insensitive.\n  else {\n      cache.lastTickCount = tickCount;\n      cache.lastAutoInterval = interval;\n      cache.axisExtend0 = axisExtent[0];\n      cache.axisExtend1 = axisExtent[1];\n    }\n\n  return interval;\n}\n\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\n  var labelModel = axis.getLabelModel();\n  return {\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n    labelRotate: labelModel.get('rotate') || 0,\n    font: labelModel.getFont()\n  };\n}\n\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n  var labelFormatter = makeLabelFormatter(axis);\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  var labelModel = axis.getLabelModel();\n  var result = []; // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n\n  var step = Math.max((categoryInterval || 0) + 1, 1);\n  var startTick = ordinalExtent[0];\n  var tickCount = ordinalScale.count(); // Calculate start tick based on zero if possible to keep label consistent\n  // while zooming and moving while interval > 0. Otherwise the selection\n  // of displayable ticks and symbols probably keep changing.\n  // 3 is empirical value.\n\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n    startTick = Math.round(Math.ceil(startTick / step) * step);\n  } // (1) Only add min max label here but leave overlap checking\n  // to render stage, which also ensure the returned list\n  // suitable for splitLine and splitArea rendering.\n  // (2) Scales except category always contain min max label so\n  // do not need to perform this process.\n\n\n  var showAllLabel = shouldShowAllLabels(axis);\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\n    addItem(ordinalExtent[0]);\n  } // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n\n\n  var tickValue = startTick;\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    addItem(tickValue);\n  }\n\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n    addItem(ordinalExtent[1]);\n  }\n\n  function addItem(tVal) {\n    result.push(onlyTick ? tVal : {\n      formattedLabel: labelFormatter(tVal),\n      rawLabel: ordinalScale.getLabel(tVal),\n      tickValue: tVal\n    });\n  }\n\n  return result;\n} // When interval is function, the result `false` means ignore the tick.\n// It is time consuming for large category data.\n\n\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n  var ordinalScale = axis.scale;\n  var labelFormatter = makeLabelFormatter(axis);\n  var result = [];\n  zrUtil.each(ordinalScale.getTicks(), function (tickValue) {\n    var rawLabel = ordinalScale.getLabel(tickValue);\n\n    if (categoryInterval(tickValue, rawLabel)) {\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tickValue),\n        rawLabel: rawLabel,\n        tickValue: tickValue\n      });\n    }\n  });\n  return result;\n}\n\nexports.createAxisLabels = createAxisLabels;\nexports.createAxisTicks = createAxisTicks;\nexports.calculateCategoryInterval = calculateCategoryInterval;","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ver = exports.clear = exports.bind = void 0;\n\nvar _sensorPool = require(\"./sensorPool\");\n\n/**\n * Created by hustcc on 18/6/9.[]\n * Contract: i@hust.cc\n */\n\n/**\n * bind an element with resize callback function\n * @param {*} element\n * @param {*} cb\n */\nvar bind = function bind(element, cb) {\n  var sensor = (0, _sensorPool.getSensor)(element); // listen with callback\n\n  sensor.bind(cb); // return unbind function\n\n  return function () {\n    sensor.unbind(cb);\n  };\n};\n/**\n * clear all the listener and sensor of an element\n * @param element\n */\n\n\nexports.bind = bind;\n\nvar clear = function clear(element) {\n  var sensor = (0, _sensorPool.getSensor)(element);\n  (0, _sensorPool.removeSensor)(sensor);\n};\n\nexports.clear = clear;\nvar ver = \"1.0.1\";\nexports.ver = ver;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.removeSensor = exports.getSensor = void 0;\n\nvar _id = _interopRequireDefault(require(\"./id\"));\n\nvar _sensors = require(\"./sensors\");\n\nvar _constant = require(\"./constant\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\n\n/**\n * all the sensor objects.\n * sensor pool\n */\nvar Sensors = {};\n/**\n * get one sensor\n * @param element\n * @returns {*}\n */\n\nvar getSensor = function getSensor(element) {\n  var sensorId = element.getAttribute(_constant.SizeSensorId); // 1. if the sensor exists, then use it\n\n  if (sensorId && Sensors[sensorId]) {\n    return Sensors[sensorId];\n  } // 2. not exist, then create one\n\n\n  var newId = (0, _id[\"default\"])();\n  element.setAttribute(_constant.SizeSensorId, newId);\n  var sensor = (0, _sensors.createSensor)(element); // add sensor into pool\n\n  Sensors[newId] = sensor;\n  return sensor;\n};\n/**\n *  sensor\n * @param sensor\n */\n\n\nexports.getSensor = getSensor;\n\nvar removeSensor = function removeSensor(sensor) {\n  var sensorId = sensor.element.getAttribute(_constant.SizeSensorId); // remove attribute\n\n  sensor.element.removeAttribute(_constant.SizeSensorId); // remove event, dom of the sensor used\n\n  sensor.destroy(); // exist, then remove from pool\n\n  if (sensorId && Sensors[sensorId]) {\n    delete Sensors[sensorId];\n  }\n};\n\nexports.removeSensor = removeSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\nvar id = 1;\n/**\n * generate unique id in application\n * @return {string}\n */\n\nvar _default = function _default() {\n  return \"\".concat(id++);\n};\n\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _object = require(\"./object\");\n\nvar _resizeObserver = require(\"./resizeObserver\");\n\n/**\n * Created by hustcc on 18/7/5.\n * Contract: i@hust.cc\n */\n\n/**\n * sensor strategies\n */\n// export const createSensor = createObjectSensor;\nvar createSensor = typeof ResizeObserver !== 'undefined' ? _resizeObserver.createSensor : _object.createSensor;\nexports.createSensor = createSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _debounce = _interopRequireDefault(require(\"../debounce\"));\n\nvar _constant = require(\"../constant\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\nvar createSensor = function createSensor(element) {\n  var sensor = undefined; // callback\n\n  var listeners = [];\n  /**\n   * create object DOM of sensor\n   * @returns {HTMLObjectElement}\n   */\n\n  var newSensor = function newSensor() {\n    // adjust style\n    if (getComputedStyle(element).position === 'static') {\n      element.style.position = 'relative';\n    }\n\n    var obj = document.createElement('object');\n\n    obj.onload = function () {\n      obj.contentDocument.defaultView.addEventListener('resize', resizeListener); //  resize\n\n      resizeListener();\n    };\n\n    obj.style.display = 'block';\n    obj.style.position = 'absolute';\n    obj.style.top = '0';\n    obj.style.left = '0';\n    obj.style.height = '100%';\n    obj.style.width = '100%';\n    obj.style.overflow = 'hidden';\n    obj.style.pointerEvents = 'none';\n    obj.style.zIndex = '-1';\n    obj.style.opacity = '0';\n    obj.setAttribute('class', _constant.SensorClassName);\n    obj.setAttribute('tabindex', _constant.SensorTabIndex);\n    obj.type = 'text/html'; // append into dom\n\n    element.appendChild(obj); // for ie, should set data attribute delay, or will be white screen\n\n    obj.data = 'about:blank';\n    return obj;\n  };\n  /**\n   * trigger listeners\n   */\n\n\n  var resizeListener = (0, _debounce[\"default\"])(function () {\n    // trigger all listener\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n  /**\n   * listen with one callback function\n   * @param cb\n   */\n\n  var bind = function bind(cb) {\n    // if not exist sensor, then create one\n    if (!sensor) {\n      sensor = newSensor();\n    }\n\n    if (listeners.indexOf(cb) === -1) {\n      listeners.push(cb);\n    }\n  };\n  /**\n   * destroy all\n   */\n\n\n  var destroy = function destroy() {\n    if (sensor && sensor.parentNode) {\n      if (sensor.contentDocument) {\n        // remote event\n        sensor.contentDocument.defaultView.removeEventListener('resize', resizeListener);\n      } // remove dom\n\n\n      sensor.parentNode.removeChild(sensor); // initial variable\n\n      sensor = undefined;\n      listeners = [];\n    }\n  };\n  /**\n   * cancel listener bind\n   * @param cb\n   */\n\n\n  var unbind = function unbind(cb) {\n    var idx = listeners.indexOf(cb);\n\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    } // no listener, and sensor is exist\n    // then destroy the sensor\n\n\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n};\n\nexports.createSensor = createSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _debounce = _interopRequireDefault(require(\"../debounce\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * Created by hustcc on 18/7/5.\n * Contract: i@hust.cc\n */\nvar createSensor = function createSensor(element) {\n  var sensor = undefined; // callback\n\n  var listeners = [];\n  /**\n   * trigger listeners\n   */\n\n  var resizeListener = (0, _debounce[\"default\"])(function () {\n    // trigger all\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n  /**\n   * create ResizeObserver sensor\n   * @returns\n   */\n\n  var newSensor = function newSensor() {\n    var s = new ResizeObserver(resizeListener); // listen element\n\n    s.observe(element); // trigger once\n\n    resizeListener();\n    return s;\n  };\n  /**\n   * listen with callback\n   * @param cb\n   */\n\n\n  var bind = function bind(cb) {\n    if (!sensor) {\n      sensor = newSensor();\n    }\n\n    if (listeners.indexOf(cb) === -1) {\n      listeners.push(cb);\n    }\n  };\n  /**\n   * destroy\n   */\n\n\n  var destroy = function destroy() {\n    sensor.disconnect();\n    listeners = [];\n    sensor = undefined;\n  };\n  /**\n   * cancel bind\n   * @param cb\n   */\n\n\n  var unbind = function unbind(cb) {\n    var idx = listeners.indexOf(cb);\n\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    } // no listener, and sensor is exist\n    // then destroy the sensor\n\n\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n};\n\nexports.createSensor = createSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable import/prefer-default-export */\n\nvar pick = exports.pick = function pick(obj, keys) {\n  var r = {};\n  keys.forEach(function (key) {\n    r[key] = obj[key];\n  });\n  return r;\n};"],"sourceRoot":""}