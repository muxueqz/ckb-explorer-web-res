{"version":3,"sources":["../node_modules/echarts/lib/chart/helper/createListSimply.js","../node_modules/echarts/lib/visual/LegendVisualProvider.js","../node_modules/echarts/lib/processor/dataFilter.js","../node_modules/echarts/lib/component/axisPointer.js","../node_modules/echarts/lib/visual/dataColor.js","../node_modules/echarts/lib/component/axisPointer/viewHelper.js","../node_modules/echarts/lib/component/legend.js","../node_modules/echarts/lib/component/helper/selectableMixin.js","../node_modules/echarts/lib/component/tooltip.js","../node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","../node_modules/echarts/lib/chart/pie.js","../node_modules/echarts/lib/action/createDataSelectAction.js","../node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","../node_modules/echarts/lib/component/helper/listComponent.js","../node_modules/echarts/lib/component/legendScroll.js","../node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","../node_modules/echarts/lib/component/axisPointer/globalListener.js","../node_modules/echarts/lib/component/legend/LegendModel.js","../node_modules/echarts/lib/component/legend/LegendView.js","../node_modules/echarts/lib/chart/pie/PieSeries.js","../node_modules/echarts/lib/chart/pie/PieView.js","../node_modules/echarts/lib/chart/pie/pieLayout.js","../node_modules/echarts/lib/chart/pie/labelLayout.js","../node_modules/echarts/lib/component/axisPointer/axisTrigger.js","../node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","../node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","../node_modules/echarts/lib/component/tooltip/TooltipModel.js","../node_modules/echarts/lib/component/tooltip/TooltipView.js","../node_modules/echarts/lib/component/tooltip/TooltipContent.js","../node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","../node_modules/echarts/lib/component/legend/legendAction.js","../node_modules/echarts/lib/component/legend/legendFilter.js","../node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","../node_modules/echarts/lib/component/legend/ScrollableLegendView.js","../node_modules/echarts/lib/component/legend/scrollableLegendAction.js"],"names":["createDimensions","require","List","_util","extend","isArray","module","exports","seriesModel","opt","nameList","coordDimensions","source","getSource","dimensionsInfo","list","initData","_default","getDataWithEncodedVisual","getRawData","this","getAllNames","rawData","mapArray","getName","containName","name","indexOfName","getItemVisual","dataIndex","key","seriesType","reset","ecModel","legendModels","findComponents","mainType","length","data","getData","filterSelf","idx","i","isSelected","echarts","zrUtil","axisPointerModelHelper","axisTrigger","registerPreprocessor","option","axisPointer","link","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","api","getComponent","coordSysAxesInfo","collect","registerAction","type","event","update","createHashMap","getTargetSeries","paletteScope","seiresModelMap","eachSeriesByType","__paletteScope","set","uid","dataAll","idxMap","each","rawIdx","getRawIndex","itemModel","filteredIdx","singleDataColor","singleDataBorderColor","getItemModel","color","get","getColorFromPalette","count","setItemVisual","borderColor","graphic","textContain","formatUtil","matrix","axisHelper","AxisBuilder","buildLabelElOption","elOption","axisModel","axisPointerModel","labelPos","text","getValueLabel","axis","precision","formatter","labelModel","getModel","paddings","normalizeCssArray","font","getFont","textRect","getBoundingRect","position","width","height","align","verticalAlign","viewWidth","getWidth","viewHeight","getHeight","Math","min","max","confineInContainer","bgColor","label","shape","x","y","r","slice","style","textFont","textFill","getTextColor","textPosition","textPadding","fill","stroke","lineWidth","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","z2","value","seriesDataIndices","scale","parse","getLabel","params","getAxisRawValue","axisDimension","dim","axisIndex","index","seriesData","idxItem","series","getSeriesByIndex","seriesIndex","dataIndexInside","dataParams","getDataParams","push","isString","replace","isFunction","getTransformedPosition","layoutInfo","transform","create","rotate","rotation","translate","applyTransform","dataToCoord","labelOffset","labelDirection","labelMargin","buildElStyle","axisPointerType","styleModel","getLineStyle","getAreaStyle","buildCartesianSingleLabelElOption","textLayout","innerTextLayout","textAlign","textVerticalAlign","makeLineShape","p1","p2","xDimIndex","x1","y1","x2","y2","makeRectShape","xy","wh","makeSectorShape","cx","cy","r0","startAngle","endAngle","clockwise","legendFilter","Component","SERIES_FILTER","registerSubTypeDefaulter","updateSelectedMap","targetList","_targetList","_selectTargetMap","reduce","targetMap","target","select","id","selected","unSelect","toggleSelected","clazzUtil","eventTool","throttleUtil","inner","makeInner","clone","bind","BaseAxisPointer","updateProps","animationModel","moveAnimation","el","props","propsEqual","lastProps","newProps","isObject","equals","item","lastProp","stopAnimation","attr","updateLabelShowHide","labelEl","getHandleTransProps","trans","updateMandatoryProps","group","silent","z","zlevel","traverse","prototype","_group","_lastGraphicKey","_handle","_dragging","_lastValue","_lastStatus","_payloadInfo","animationThreshold","render","forceRender","status","_axisModel","_axisPointerModel","_api","handle","hide","show","makeElOption","graphicKey","clear","_moveAnimation","determineAnimation","doUpdateProps","curry","updatePointerEl","updateLabelEl","Group","createPointerEl","createLabelEl","getZr","add","_renderHandle","remove","dispose","animation","isCategoryAxis","useSnap","getBandWidth","seriesDataCount","getAxisInfo","axisExtent","getExtent","abs","pointerOption","pointer","pointerEl","Rect","setStyle","updateHandleTransform","isInit","zr","handleModel","createIcon","cursor","draggable","onmousemove","e","stop","onmousedown","_onHandleDragMove","drift","ondragend","_onHandleDragEnd","getItemStyle","handleSize","createOrUpdate","_moveHandleToValue","getHandleTransform","dx","dy","_doDispatchAxisPointer","payloadInfo","dispatchAction","cursorPoint","tooltipOption","axesInfo","axisDim","componentIndex","doClear","buildLabel","constructor","enableClassExtend","createDataSelectAction","dataColor","pieLayout","dataFilter","method","registerVisual","registerLayout","actionInfos","actionInfo","payload","eachComponent","subType","query","seriesId","viewHelper","cartesianAxisHelper","AxisView","CartesianAxisPointer","grid","otherExtent","getCartesian","getOtherAxis","getGlobalExtent","pixelValue","toGlobalCoord","elStyle","pointerShapeBuilder","layout","model","labelInside","PI","delta","dimIndex","currPosition","cursorOtherValue","line","subPixelOptimize","getAxisDimIndex","shadow","bandWidth","span","registerAxisPointerClass","_layout","getLayoutRect","layoutBox","box","positionElement","componentModel","boxLayoutParams","getBoxLayoutParams","padding","viewportSize","rect","makeBackground","modelUtil","finder","point","queryDataIndex","getItemGraphicEl","coordSys","coordinateSystem","getTooltipPosition","dataToPoint","getValues","map","dimensions","mapDimension","env","onLeave","record","handler","doEnter","currTrigger","register","node","records","initialized","useHandler","eventType","cb","on","dis","pendings","showTip","hideTip","pendingList","makeDispatchAction","actuallyPayload","showLen","hideLen","dispatchTooltipFinally","initGlobalListeners","unregister","Model","isNameSpecified","langSelector","legend","selector","defaultSelectorOption","all","title","inverse","LegendModel","extendComponentModel","dependencies","layoutMode","ignoreSize","init","parentModel","mergeDefaultAndTheme","_updateSelector","mergeOption","superCall","merge","optionUpdated","_updateData","legendData","_data","hasSelected","potentialData","availableNames","eachRawSeries","isPotential","seriesName","legendVisualProvider","names","isSeriesFiltered","concat","_availableNames","dataItem","hasOwnProperty","allSelect","inverseSelect","indexOf","getOrient","defaultOption","orient","left","top","backgroundColor","borderRadius","borderWidth","itemGap","itemWidth","itemHeight","inactiveColor","inactiveBorderColor","itemStyle","textStyle","selectedMode","selectorLabel","fontSize","fontFamily","emphasis","selectorPosition","selectorItemGap","selectorButtonGap","tooltip","__DEV__","createSymbol","layoutUtil","extendComponentView","newlineDisabled","_contentGroup","_backgroundEl","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","legendModel","isFirstRender","resetInner","itemAlign","renderInner","positionInfo","maxSize","mainRect","layoutInner","layoutRect","defaults","removeAll","contentGroup","legendDrawnMap","selectMode","excludeSeriesId","getSeriesByName","getVisual","legendSymbolType","symbolType","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","provider","newline","_createSelector","selectorGroup","selectorItem","labelText","Text","onclick","emphasisLabelModel","setLabelStyle","hoverStyle","defaultText","isRectText","setHoverStyle","createSelectorButton","symbolKeepAspect","legendModelItemStyle","itemGroup","textStyleModel","itemIcon","tooltipModel","legendGlobalTooltipModel","legendSymbol","setSymbolStyle","size","legendSymbolCenter","textX","content","setTextStyle","hitRect","invisible","formatterParams","componentType","legendIndex","$vars","eachChild","child","__legendDataIndex","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","symbol","dataName","storage","getDisplayList","useHoverLayer","createListSimply","getPercentWithPrecision","dataSelectableMixin","retrieveRawAttr","makeSeriesEncodeForNameBased","LegendVisualProvider","PieSeries","extendSeriesModel","superApply","arguments","_createSelectableList","_defaultLabelLine","newOption","getInitialData","encodeDefaulter","valueDim","len","valueList","percent","hostModel","defaultEmphasis","labelLineNormalOpt","labelLine","labelLineEmphasisOpt","legendHoverLink","hoverAnimation","center","radius","minAngle","minShowLabelAngle","selectedOffset","hoverOffset","avoidLabelOverlap","percentPrecision","stillShowZeroSum","right","bottom","alignTo","margin","bleedMargin","distanceToLabelLine","length2","smooth","lineStyle","animationType","animationTypeUpdate","animationEasing","mixin","ChartView","updateDataSelected","hasAnimation","from","toggleItemSelected","getItemLayout","midAngle","offset","cos","sin","animate","when","start","PiePiece","call","sector","Sector","polyline","Polyline","updateData","piePieceProto","firstCreate","childAt","sectorShape","getShallow","setShape","initProps","visualColor","useStyle","lineJoin","cursorStyle","withAnimation","_updateLabel","highDownOnUpdate","fromState","toState","isAnimationEnabled","ignore","hoverIgnore","animateTo","normalIgnore","labelLayout","isNaN","targetLineShape","points","linePoints","targetTextStyle","origin","labelHoverModel","labelLineModel","labelLineHoverModel","labelFetcher","labelDataIndex","autoColor","useInsideStyle","inside","opacity","inherits","sectorGroup","_sectorGroup","oldData","onSectorClick","diff","piePiece","setItemGraphicEl","newIdx","oldIdx","off","execute","s","removeClipPath","setClipPath","_createClipPath","clipPath","containPoint","itemLayout","sqrt","_number","parsePercent","linearMap","PI2","RADIAN","viewRect","getViewRect","validDataCount","sum","getSum","unitRadian","roseType","extent","getDataExtent","restAngle","valueSumLargerThanMinAngle","currentAngle","dir","angle","setItemLayout","NaN","adjustSingleSide","viewLeft","viewTop","farthestX","shiftDown","end","j","shiftUp","changeX","isDownList","lastDeltaX","Number","MAX_VALUE","l","labelAlignTo","deltaY","len2","deltaX","sort","a","b","lastY","upList","downList","isPositionCenter","labelLayoutList","hasLabelRotate","minShowLabelRadian","labelPosition","labelDistance","labelLineLen","labelLineLen2","textY","labelRotate","getFormattedLabel","isLabelInside","x3","leftList","rightList","leftmostX","rightmostX","targetTextWidth","isAlignToEdge","realTextWidth","truncateText","dist","avoidOverlap","modelHelper","findPointFromSeries","processOnAxis","axisInfo","newValue","updaters","dontSnap","outputFinder","isBlank","containData","involveSeries","snapToValue","payloadBatch","minDist","minDiff","seriesModels","seriesNestestValue","dataIndices","dataDim","getAxisTooltipData","result","nestestValue","indicesOfNearest","isFinite","buildPayloadsBySeries","snap","showPointer","showTooltip","showValueMap","dataByCoordSys","triggerTooltip","coordSysModel","coordSysKey","makeKey","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","dataByAxis","axisType","axisId","valueLabelOpt","makeMapperParam","axisName","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","coordSysMap","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","val","pointToData","linkTriggers","tarAxisInfo","tarKey","linkGroup","srcAxisInfo","srcKey","srcValItem","mapper","outputAxesInfo","valItem","useHandle","updateModelActually","sampleItem","escapeConnect","dispatchTooltipActually","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","batch","dispatchHighDownActually","triggerOn","animationDurationUpdate","shadowStyle","icon","throttle","globalListener","AxisPointerView","globalAxisPointerModel","globalTooltipModel","offsetX","offsetY","_model","showContent","trigger","alwaysShowContent","displayMode","renderMode","confine","showDelay","hideDelay","transitionDuration","enterable","extraCssText","animationEasingUpdate","crossStyle","TooltipContent","TooltipRichContent","numberUtil","axisPointerViewHelper","getTooltipRenderMode","proxyRect","tooltipContent","_renderMode","getDom","appendToBody","_newLine","_tooltipContent","_tooltipModel","_ecModel","_lastDataByCoordSys","_alwaysShowContent","setEnterable","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","self","clearTimeout","_refreshUpdateTimeout","setTimeout","isDisposed","manuallyShowTip","_ticket","_manuallyAxisShowTip","pointInfo","findHover","manuallyHideTip","hideLater","buildTooltipModel","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","markers","itemCoordSys","axisValue","seriesDefaultHTML","valueLabel","axisValueLabel","html","seriesTooltip","formatTooltip","newMarkers","firstLine","join","encodeHTML","reverse","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","undefined","dataModel","dataType","tooltipTrigger","defaultHtml","asyncTicket","tooltipOpt","subTooltipModel","formatTpl","callback","cbTicket","setContent","contentSize","getSize","vAlign","viewSize","pos","domWidth","domHeight","rectWidth","rectHeight","calcTooltipPosition","gapH","gapV","getOuterSize","refixTooltipPosition","isCenterAlign","confineTooltipPosition","moveTo","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","newIdxItem","modelCascade","resultModel","pop","isInstance","zrColor","eventUtil","domUtil","toCamelCase","vendors","assembleCssText","cssText","duration","transitionText","vendorPrefix","assembleTransition","canvasSupported","toHex","borderName","camelCase","round","assembleFont","makeStyleCoord","out","zrX","zrY","zrPainter","painter","zrViewportRoot","getViewportRoot","transformLocalCoord","document","body","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","container","wxa","createElement","domBelongToZr","_zr","_appendToBody","_styleCoord","appendChild","_container","_show","_hideTimeout","onmouseenter","_enterable","_inContent","window","normalizeEvent","dispatch","onmouseleave","_hideDelay","stl","currentStyle","defaultView","getComputedStyle","domStyle","styleCoord","display","innerHTML","pointerEvents","clientWidth","clientHeight","time","isShow","parentNode","removeChild","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","markerRich","startId","endId","substr","textWidth","textHeight","textBorderRadius","textBackgroundColor","textOffset","rich","textLineHeight","bounding","legendSelectActionHandler","methodName","selectedMap","isToggleSelect","isItemSelected","filterSeries","mergeLayoutParam","getLayoutParams","ScrollableLegendModel","setScrollDataIndex","scrollDataIndex","pageButtonItemGap","pageButtonGap","pageButtonPosition","pageFormatter","pageIcons","horizontal","vertical","pageIconColor","pageIconInactiveColor","pageIconSize","pageTextStyle","extraOpt","inputPositionParams","mergeAndNormalizeLayoutParams","raw","LegendView","WH","XY","ScrollableLegendView","_currentIndex","_containerGroup","_controllerGroup","_showController","__rectSize","me","controllerGroup","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","_pageGo","processMaxSize","_layoutContentAndController","containerGroup","controllerRect","showController","containerPos","controllerPos","retrieve2","clipShape","pageInfo","_getPageInfo","pageIndex","contentPosition","_updatePageInfoView","to","legendId","canJump","childOfName","pageText","current","total","pageCount","containerRectSize","targetItemIndex","_findTargetItemIndex","children","targetItem","itemCount","pCount","pagePrevDataIndex","pageNextDataIndex","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","intersect","itemRect","itemInfo","winStart","targetDataIndex","legendDataIdx","defaultIndex"],"mappings":"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","file":"static/js/2.5974b02f.chunk.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar createDimensions = require(\"../../data/helper/createDimensions\");\n\nvar List = require(\"../../data/List\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar extend = _util.extend;\nvar isArray = _util.isArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n *\n * @param {module:echarts/model/Series} seriesModel\n * @param {Object|Array.<string|Object>} opt opt or coordDimensions\n *        The options in opt, see `echarts/data/helper/createDimensions`\n * @param {Array.<string>} [nameList]\n * @return {module:echarts/data/List}\n */\nfunction _default(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({}, opt);\n  var source = seriesModel.getSource();\n  var dimensionsInfo = createDimensions(source, opt);\n  var list = new List(dimensionsInfo, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n * @param {Function} getDataWithEncodedVisual Function to get data after filtered. It stores all the encoding info\n * @param {Function} getRawData Function to get raw data before filtered.\n */\nfunction LegendVisualProvider(getDataWithEncodedVisual, getRawData) {\n  this.getAllNames = function () {\n    var rawData = getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  this.containName = function (name) {\n    var rawData = getRawData();\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  this.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = getDataWithEncodedVisual();\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  this.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = getDataWithEncodedVisual();\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n}\n\nvar _default = LegendVisualProvider;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Pick color from palette for each data item.\n// Applicable for charts that require applying color palette\n// in data level (like pie, funnel, chord).\nfunction _default(seriesType) {\n  return {\n    getTargetSeries: function (ecModel) {\n      // Pie and funnel may use diferrent scope\n      var paletteScope = {};\n      var seiresModelMap = createHashMap();\n      ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n        seriesModel.__paletteScope = paletteScope;\n        seiresModelMap.set(seriesModel.uid, seriesModel);\n      });\n      return seiresModelMap;\n    },\n    reset: function (seriesModel, ecModel) {\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      dataAll.each(function (rawIdx) {\n        var filteredIdx = idxMap[rawIdx]; // If series.itemStyle.normal.color is a function. itemVisual may be encoded\n\n        var singleDataColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'color', true);\n        var singleDataBorderColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'borderColor', true);\n        var itemModel;\n\n        if (!singleDataColor || !singleDataBorderColor) {\n          // FIXME Performance\n          itemModel = dataAll.getItemModel(rawIdx);\n        }\n\n        if (!singleDataColor) {\n          var color = itemModel.get('itemStyle.color') || seriesModel.getColorFromPalette(dataAll.getName(rawIdx) || rawIdx + '', seriesModel.__paletteScope, dataAll.count()); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'color', color);\n          }\n        }\n\n        if (!singleDataBorderColor) {\n          var borderColor = itemModel.get('itemStyle.borderColor'); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'borderColor', borderColor);\n          }\n        }\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      textPadding: paddings,\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./legend/LegendModel\");\n\nrequire(\"./legend/legendAction\");\n\nrequire(\"./legend/LegendView\");\n\nvar legendFilter = require(\"./legend/legendFilter\");\n\nvar Component = require(\"../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Do not contain scrollable legend, for sake of file size.\n// Series Filter\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\nComponent.registerSubTypeDefaulter('legend', function () {\n  // Default 'plain' when no type specified.\n  return 'plain';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Data selectable mixin for chart series.\n * To eanble data select, option of series must have `selectedMode`.\n * And each data item will use `selected` to toggle itself selected status\n */\nvar _default = {\n  /**\n   * @param {Array.<Object>} targetList [{name, value, selected}, ...]\n   *        If targetList is an array, it should like [{name: ..., value: ...}, ...].\n   *        If targetList is a \"List\", it must have coordDim: 'value' dimension and name.\n   */\n  updateSelectedMap: function (targetList) {\n    this._targetList = zrUtil.isArray(targetList) ? targetList.slice() : [];\n    this._selectTargetMap = zrUtil.reduce(targetList || [], function (targetMap, target) {\n      targetMap.set(target.name, target);\n      return targetMap;\n    }, zrUtil.createHashMap());\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  // PENGING If selectedMode is null ?\n  select: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      this._selectTargetMap.each(function (target) {\n        target.selected = false;\n      });\n    }\n\n    target && (target.selected = true);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  unSelect: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name); // var selectedMode = this.get('selectedMode');\n    // selectedMode !== 'single' && target && (target.selected = false);\n\n    target && (target.selected = false);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  toggleSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n\n    if (target != null) {\n      this[target.selected ? 'unSelect' : 'select'](name, id);\n      return target.selected;\n    }\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  isSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    return target && target.selected;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function (moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function () {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./pie/PieSeries\");\n\nrequire(\"./pie/PieView\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar pieLayout = require(\"./pie/pieLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\ncreateDataSelectAction('pie', [{\n  type: 'pieToggleSelect',\n  event: 'pieselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'pieSelect',\n  event: 'pieselected',\n  method: 'select'\n}, {\n  type: 'pieUnSelect',\n  event: 'pieunselected',\n  method: 'unSelect'\n}]);\necharts.registerVisual(dataColor('pie'));\necharts.registerLayout(zrUtil.curry(pieLayout, 'pie'));\necharts.registerProcessor(dataFilter('pie'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, actionInfos) {\n  zrUtil.each(actionInfos, function (actionInfo) {\n    actionInfo.update = 'updateView';\n    /**\n     * @payload\n     * @property {string} seriesName\n     * @property {string} name\n     */\n\n    echarts.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        if (seriesModel[actionInfo.method]) {\n          seriesModel[actionInfo.method](payload.name, payload.dataIndex);\n        }\n\n        var data = seriesModel.getData(); // Create selected map\n\n        data.each(function (idx) {\n          var name = data.getName(idx);\n          selected[name] = seriesModel.isSelected(name) || false;\n        });\n      });\n      return {\n        name: payload.name,\n        selected: selected,\n        seriesId: payload.seriesId\n      };\n    });\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./legend\");\n\nrequire(\"./legend/ScrollableLegendModel\");\n\nrequire(\"./legend/ScrollableLegendView\");\n\nrequire(\"./legend/scrollableLegendAction\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return data.mapDimension(dim);\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _model = require(\"../../util/model\");\n\nvar isNameSpecified = _model.isNameSpecified;\n\nvar lang = require(\"../../lang\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar langSelector = lang.legend.selector;\nvar defaultSelectorOption = {\n  all: {\n    type: 'all',\n    title: zrUtil.clone(langSelector.all)\n  },\n  inverse: {\n    type: 'inverse',\n    title: zrUtil.clone(langSelector.inverse)\n  }\n};\nvar LegendModel = echarts.extendComponentModel({\n  type: 'legend.plain',\n  dependencies: ['series'],\n  layoutMode: {\n    type: 'box',\n    // legend.width/height are maxWidth/maxHeight actually,\n    // whereas realy width/height is calculated by its content.\n    // (Setting {left: 10, right: 10} does not make sense).\n    // So consider the case:\n    // `setOption({legend: {left: 10});`\n    // then `setOption({legend: {right: 10});`\n    // The previous `left` should be cleared by setting `ignoreSize`.\n    ignoreSize: true\n  },\n  init: function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  },\n  mergeOption: function (option) {\n    LegendModel.superCall(this, 'mergeOption', option);\n\n    this._updateSelector(option);\n  },\n  _updateSelector: function (option) {\n    var selector = option.selector;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, defaultSelectorOption[item.type]);\n      });\n    }\n  },\n  optionUpdated: function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name = legendData[i].get('name');\n\n        if (this.isSelected(name)) {\n          // Force to unselect others\n          this.select(name);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  },\n  _updateData: function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Model>}\n   */\n  getData: function () {\n    return this._data;\n  },\n\n  /**\n   * @param {string} name\n   */\n  select: function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  },\n\n  /**\n   * @param {string} name\n   */\n  unSelect: function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  },\n\n  /**\n   * @param {string} name\n   */\n  toggleSelected: function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  },\n  allSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  },\n  inverseSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  },\n\n  /**\n   * @param {string} name\n   */\n  isSelected: function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  },\n  getOrient: function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  },\n  defaultOption: {\n    // 一级层叠\n    zlevel: 0,\n    // 二级层叠\n    z: 4,\n    show: true,\n    // 布局方式，默认为水平布局，可选为：\n    // 'horizontal' | 'vertical'\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    // 水平对齐\n    // 'auto' | 'left' | 'right'\n    // 默认为 'auto', 根据 x 的位置判断是左对齐还是右对齐\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    // 图例边框颜色\n    borderColor: '#ccc',\n    borderRadius: 0,\n    // 图例边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 图例内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // 各个item之间的间隔，单位px，默认为10，\n    // 横向布局时为水平间隔，纵向布局时为纵向间隔\n    itemGap: 10,\n    // the width of legend symbol\n    itemWidth: 25,\n    // the height of legend symbol\n    itemHeight: 14,\n    // the color of unselected legend symbol\n    inactiveColor: '#ccc',\n    // the borderColor of unselected legend symbol\n    inactiveBorderColor: '#ccc',\n    itemStyle: {\n      // the default borderWidth of legend symbol\n      borderWidth: 0\n    },\n    textStyle: {\n      // 图例文字颜色\n      color: '#333'\n    },\n    // formatter: '',\n    // 选择模式，默认开启图例开关\n    selectedMode: true,\n    // 配置默认选中状态，可配合LEGEND.SELECTED事件做动态数据载入\n    // selected: null,\n    // 图例内容（详见legend.data，数组中每一项代表一个item\n    // data: [],\n    // Usage:\n    // selector: [{type: 'all or inverse', title: xxx}]\n    // or\n    // selector: true\n    // or\n    // selector: ['all', 'inverse']\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: ' sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    // Value can be 'start' or 'end'\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    // Tooltip 相关配置\n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = LegendModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _listComponent = require(\"../helper/listComponent\");\n\nvar makeBackground = _listComponent.makeBackground;\n\nvar layoutUtil = require(\"../../util/layout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar _default = echarts.extendComponentView({\n  type: 'legend.plain',\n  newlineDisabled: false,\n\n  /**\n   * @override\n   */\n  init: function () {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this.group.add(this._contentGroup = new Group());\n    /**\n     * @private\n     * @type {module:zrender/Element}\n     */\n\n    this._backgroundEl;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._selectorGroup = new Group());\n    /**\n     * If first rendering, `contentGroup.position` is [0, 0], which\n     * does not make sense and may cause unexepcted animation if adopted.\n     * @private\n     * @type {boolean}\n     */\n\n    this._isFirstRender = true;\n  },\n\n  /**\n   * @protected\n   */\n  getContentGroup: function () {\n    return this._contentGroup;\n  },\n\n  /**\n   * @protected\n   */\n  getSelectorGroup: function () {\n    return this._selectorGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.attr('position', [layoutRect.x - mainRect.x, layoutRect.y - mainRect.y]); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  },\n\n  /**\n   * @protected\n   */\n  resetInner: function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  },\n\n  /**\n   * @protected\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (itemModel, dataIndex) {\n      var name = itemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        contentGroup.add(new Group({\n          newline: true\n        }));\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var color = data.getVisual('color');\n        var borderColor = data.getVisual('borderColor'); // If color is a callback function\n\n        if (typeof color === 'function') {\n          // Use the first data\n          color = color(seriesModel.getDataParams(0));\n        } // If borderColor is a callback function\n\n\n        if (typeof borderColor === 'function') {\n          // Use the first data\n          borderColor = borderColor(seriesModel.getDataParams(0));\n        } // Using rect symbol defaultly\n\n\n        var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\n        var symbolType = data.getVisual('symbol');\n\n        var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var color = provider.getItemVisual(idx, 'color');\n            var borderColor = provider.getItemVisual(idx, 'borderColor');\n            var legendSymbolType = 'roundRect';\n\n            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, borderColor, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  },\n  _createSelector: function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function (selectorItem) {\n      createSelectorButton(selectorItem);\n    });\n\n    function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel('emphasis.selectorLabel');\n      graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, emphasisLabelModel, {\n        defaultText: selectorItem.title,\n        isRectText: false\n      });\n      graphic.setHoverStyle(labelText);\n    }\n  },\n  _createItem: function (name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode) {\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var inactiveColor = legendModel.get('inactiveColor');\n    var inactiveBorderColor = legendModel.get('inactiveBorderColor');\n    var symbolKeepAspect = legendModel.get('symbolKeepAspect');\n    var legendModelItemStyle = legendModel.getModel('itemStyle');\n    var isSelected = legendModel.isSelected(name);\n    var itemGroup = new Group();\n    var textStyleModel = itemModel.getModel('textStyle');\n    var itemIcon = itemModel.get('icon');\n    var tooltipModel = itemModel.getModel('tooltip');\n    var legendGlobalTooltipModel = tooltipModel.parentModel; // Use user given icon first\n\n    legendSymbolType = itemIcon || legendSymbolType;\n    var legendSymbol = createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n    symbolKeepAspect == null ? true : symbolKeepAspect);\n    itemGroup.add(setSymbolStyle(legendSymbol, legendSymbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected)); // Compose symbols\n    // PENDING\n\n    if (!itemIcon && symbolType // At least show one symbol, can't be all none\n    && (symbolType !== legendSymbolType || symbolType === 'none')) {\n      var size = itemHeight * 0.8;\n\n      if (symbolType === 'none') {\n        symbolType = 'circle';\n      }\n\n      var legendSymbolCenter = createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n      symbolKeepAspect == null ? true : symbolKeepAspect); // Put symbol in the center\n\n      itemGroup.add(setSymbolStyle(legendSymbolCenter, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    itemGroup.add(new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        textAlign: textAlign,\n        textVerticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true,\n      tooltip: tooltipModel.get('show') ? zrUtil.extend({\n        content: name,\n        // Defaul formatter\n        formatter: legendGlobalTooltipModel.get('formatter', true) || function () {\n          return name;\n        },\n        formatterParams: {\n          componentType: 'legend',\n          legendIndex: legendModel.componentIndex,\n          name: name,\n          $vars: ['name']\n        }\n      }, tooltipModel.option) : null\n    });\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    graphic.setHoverStyle(itemGroup);\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  },\n\n  /**\n   * @protected\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.attr('position', selectorPos);\n      contentGroup.attr('position', contentPos);\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.attr('position', contentPos);\n      return this.group.getBoundingRect();\n    }\n  },\n\n  /**\n   * @protected\n   */\n  remove: function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  }\n});\n\nfunction setSymbolStyle(symbol, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected) {\n  var itemStyle;\n\n  if (symbolType !== 'line' && symbolType.indexOf('empty') < 0) {\n    itemStyle = legendModelItemStyle.getItemStyle();\n    symbol.style.stroke = borderColor;\n\n    if (!isSelected) {\n      itemStyle.stroke = inactiveBorderColor;\n    }\n  } else {\n    itemStyle = legendModelItemStyle.getItemStyle(['borderWidth', 'borderColor']);\n  }\n\n  return symbol.setStyle(itemStyle);\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _number = require(\"../../util/number\");\n\nvar getPercentWithPrecision = _number.getPercentWithPrecision;\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawAttr = _dataProvider.retrieveRawAttr;\n\nvar _sourceHelper = require(\"../../data/helper/sourceHelper\");\n\nvar makeSeriesEncodeForNameBased = _sourceHelper.makeSeriesEncodeForNameBased;\n\nvar LegendVisualProvider = require(\"../../visual/LegendVisualProvider\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PieSeries = echarts.extendSeriesModel({\n  type: 'series.pie',\n  // Overwrite\n  init: function (option) {\n    PieSeries.superApply(this, 'init', arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n    this.updateSelectedMap(this._createSelectableList());\n\n    this._defaultLabelLine(option);\n  },\n  // Overwrite\n  mergeOption: function (newOption) {\n    PieSeries.superCall(this, 'mergeOption', newOption);\n    this.updateSelectedMap(this._createSelectableList());\n  },\n  getInitialData: function (option, ecModel) {\n    return createListSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  },\n  _createSelectableList: function () {\n    var data = this.getRawData();\n    var valueDim = data.mapDimension('value');\n    var targetList = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      targetList.push({\n        name: data.getName(i),\n        value: data.get(valueDim, i),\n        selected: retrieveRawAttr(data, i, 'selected')\n      });\n    }\n\n    return targetList;\n  },\n  // Overwrite\n  getDataParams: function (dataIndex) {\n    var data = this.getData();\n    var params = PieSeries.superCall(this, 'getDataParams', dataIndex); // FIXME toFixed?\n\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  },\n  _defaultLabelLine: function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // 选中时扇区偏移量\n    selectedOffset: 10,\n    // 高亮扇区偏移量\n    hoverOffset: 10,\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // If rotate around circle\n      rotate: false,\n      show: true,\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      margin: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5 // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n      // 默认使用全局文本样式，详见TEXTSTYLE\n      // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // 引导线两段中的第一段长度\n      length: 15,\n      // 引导线两段中的第二段长度\n      length2: 15,\n      smooth: false,\n      lineStyle: {\n        // color: 各异,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1\n    },\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasing: 'cubicOut'\n  }\n});\nzrUtil.mixin(PieSeries, dataSelectableMixin);\nvar _default = PieSeries;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar ChartView = require(\"../../view/Chart\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Series} seriesModel\n * @param {boolean} hasAnimation\n * @inner\n */\nfunction updateDataSelected(uid, seriesModel, hasAnimation, api) {\n  var data = seriesModel.getData();\n  var dataIndex = this.dataIndex;\n  var name = data.getName(dataIndex);\n  var selectedOffset = seriesModel.get('selectedOffset');\n  api.dispatchAction({\n    type: 'pieToggleSelect',\n    from: uid,\n    name: name,\n    seriesId: seriesModel.id\n  });\n  data.each(function (idx) {\n    toggleItemSelected(data.getItemGraphicEl(idx), data.getItemLayout(idx), seriesModel.isSelected(data.getName(idx)), selectedOffset, hasAnimation);\n  });\n}\n/**\n * @param {module:zrender/graphic/Sector} el\n * @param {Object} layout\n * @param {boolean} isSelected\n * @param {number} selectedOffset\n * @param {boolean} hasAnimation\n * @inner\n */\n\n\nfunction toggleItemSelected(el, layout, isSelected, selectedOffset, hasAnimation) {\n  var midAngle = (layout.startAngle + layout.endAngle) / 2;\n  var dx = Math.cos(midAngle);\n  var dy = Math.sin(midAngle);\n  var offset = isSelected ? selectedOffset : 0;\n  var position = [dx * offset, dy * offset];\n  hasAnimation // animateTo will stop revious animation like update transition\n  ? el.animate().when(200, {\n    position: position\n  }).start('bounceOut') : el.attr('position', position);\n}\n/**\n * Piece of pie including Sector, Label, LabelLine\n * @constructor\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction PiePiece(data, idx) {\n  graphic.Group.call(this);\n  var sector = new graphic.Sector({\n    z2: 2\n  });\n  var polyline = new graphic.Polyline();\n  var text = new graphic.Text();\n  this.add(sector);\n  this.add(polyline);\n  this.add(text);\n  this.updateData(data, idx, true);\n}\n\nvar piePieceProto = PiePiece.prototype;\n\npiePieceProto.updateData = function (data, idx, firstCreate) {\n  var sector = this.childAt(0);\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var sectorShape = zrUtil.extend({}, layout);\n  sectorShape.label = null;\n  var animationTypeUpdate = seriesModel.getShallow('animationTypeUpdate');\n\n  if (firstCreate) {\n    sector.setShape(sectorShape);\n    var animationType = seriesModel.getShallow('animationType');\n\n    if (animationType === 'scale') {\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, idx);\n    } // Expansion\n    else {\n        sector.shape.endAngle = layout.startAngle;\n        graphic.updateProps(sector, {\n          shape: {\n            endAngle: layout.endAngle\n          }\n        }, seriesModel, idx);\n      }\n  } else {\n    if (animationTypeUpdate === 'expansion') {\n      // Sectors are set to be target shape and an overlaying clipPath is used for animation\n      sector.setShape(sectorShape);\n    } else {\n      // Transition animation from the old shape\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n  } // Update common style\n\n\n  var visualColor = data.getItemVisual(idx, 'color');\n  sector.useStyle(zrUtil.defaults({\n    lineJoin: 'bevel',\n    fill: visualColor\n  }, itemModel.getModel('itemStyle').getItemStyle()));\n  sector.hoverStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && sector.attr('cursor', cursorStyle); // Toggle selected\n\n  toggleItemSelected(this, data.getItemLayout(idx), seriesModel.isSelected(data.getName(idx)), seriesModel.get('selectedOffset'), seriesModel.get('animation')); // Label and text animation should be applied only for transition type animation when update\n\n  var withAnimation = !firstCreate && animationTypeUpdate === 'transition';\n\n  this._updateLabel(data, idx, withAnimation);\n\n  this.highDownOnUpdate = !seriesModel.get('silent') ? function (fromState, toState) {\n    var hasAnimation = seriesModel.isAnimationEnabled() && itemModel.get('hoverAnimation');\n\n    if (toState === 'emphasis') {\n      labelLine.ignore = labelLine.hoverIgnore;\n      labelText.ignore = labelText.hoverIgnore; // Sector may has animation of updating data. Force to move to the last frame\n      // Or it may stopped on the wrong shape\n\n      if (hasAnimation) {\n        sector.stopAnimation(true);\n        sector.animateTo({\n          shape: {\n            r: layout.r + seriesModel.get('hoverOffset')\n          }\n        }, 300, 'elasticOut');\n      }\n    } else {\n      labelLine.ignore = labelLine.normalIgnore;\n      labelText.ignore = labelText.normalIgnore;\n\n      if (hasAnimation) {\n        sector.stopAnimation(true);\n        sector.animateTo({\n          shape: {\n            r: layout.r\n          }\n        }, 300, 'elasticOut');\n      }\n    }\n  } : null;\n  graphic.setHoverStyle(this);\n};\n\npiePieceProto._updateLabel = function (data, idx, withAnimation) {\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var labelLayout = layout.label;\n  var visualColor = data.getItemVisual(idx, 'color');\n\n  if (!labelLayout || isNaN(labelLayout.x) || isNaN(labelLayout.y)) {\n    labelText.ignore = labelText.normalIgnore = labelText.hoverIgnore = labelLine.ignore = labelLine.normalIgnore = labelLine.hoverIgnore = true;\n    return;\n  }\n\n  var targetLineShape = {\n    points: labelLayout.linePoints || [[labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y]]\n  };\n  var targetTextStyle = {\n    x: labelLayout.x,\n    y: labelLayout.y\n  };\n\n  if (withAnimation) {\n    graphic.updateProps(labelLine, {\n      shape: targetLineShape\n    }, seriesModel, idx);\n    graphic.updateProps(labelText, {\n      style: targetTextStyle\n    }, seriesModel, idx);\n  } else {\n    labelLine.attr({\n      shape: targetLineShape\n    });\n    labelText.attr({\n      style: targetTextStyle\n    });\n  }\n\n  labelText.attr({\n    rotation: labelLayout.rotation,\n    origin: [labelLayout.x, labelLayout.y],\n    z2: 10\n  });\n  var labelModel = itemModel.getModel('label');\n  var labelHoverModel = itemModel.getModel('emphasis.label');\n  var labelLineModel = itemModel.getModel('labelLine');\n  var labelLineHoverModel = itemModel.getModel('emphasis.labelLine');\n  var visualColor = data.getItemVisual(idx, 'color');\n  graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, labelHoverModel, {\n    labelFetcher: data.hostModel,\n    labelDataIndex: idx,\n    defaultText: labelLayout.text,\n    autoColor: visualColor,\n    useInsideStyle: !!labelLayout.inside\n  }, {\n    textAlign: labelLayout.textAlign,\n    textVerticalAlign: labelLayout.verticalAlign,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelText.ignore = labelText.normalIgnore = !labelModel.get('show');\n  labelText.hoverIgnore = !labelHoverModel.get('show');\n  labelLine.ignore = labelLine.normalIgnore = !labelLineModel.get('show');\n  labelLine.hoverIgnore = !labelLineHoverModel.get('show'); // Default use item visual color\n\n  labelLine.setStyle({\n    stroke: visualColor,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelLine.setStyle(labelLineModel.getModel('lineStyle').getLineStyle());\n  labelLine.hoverStyle = labelLineHoverModel.getModel('lineStyle').getLineStyle();\n  var smooth = labelLineModel.get('smooth');\n\n  if (smooth && smooth === true) {\n    smooth = 0.4;\n  }\n\n  labelLine.setShape({\n    smooth: smooth\n  });\n};\n\nzrUtil.inherits(PiePiece, graphic.Group); // Pie view\n\nvar PieView = ChartView.extend({\n  type: 'pie',\n  init: function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  },\n  render: function (seriesModel, ecModel, api, payload) {\n    if (payload && payload.from === this.uid) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var hasAnimation = ecModel.get('animation');\n    var isFirstRender = !oldData;\n    var animationType = seriesModel.get('animationType');\n    var animationTypeUpdate = seriesModel.get('animationTypeUpdate');\n    var onSectorClick = zrUtil.curry(updateDataSelected, this.uid, seriesModel, hasAnimation, api);\n    var selectedMode = seriesModel.get('selectedMode');\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx); // Default expansion animation\n\n      if (isFirstRender && animationType !== 'scale') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      selectedMode && piePiece.on('click', onSectorClick);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n\n      if (!isFirstRender && animationTypeUpdate !== 'transition') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      piePiece.updateData(data, newIdx);\n      piePiece.off('click');\n      selectedMode && piePiece.on('click', onSectorClick);\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      group.remove(piePiece);\n    }).execute();\n\n    if (hasAnimation && data.count() > 0 && (isFirstRender ? animationType !== 'scale' : animationTypeUpdate !== 'transition')) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      var r = Math.max(api.getWidth(), api.getHeight()) / 2;\n      var removeClipPath = zrUtil.bind(group.removeClipPath, group);\n      group.setClipPath(this._createClipPath(shape.cx, shape.cy, r, shape.startAngle, shape.clockwise, removeClipPath, seriesModel, isFirstRender));\n    } else {\n      // clipPath is used in first-time animation, so remove it when otherwise. See: #8994\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  },\n  dispose: function () {},\n  _createClipPath: function (cx, cy, r, startAngle, clockwise, cb, seriesModel, isFirstRender) {\n    var clipPath = new graphic.Sector({\n      shape: {\n        cx: cx,\n        cy: cy,\n        r0: 0,\n        r: r,\n        startAngle: startAngle,\n        endAngle: startAngle,\n        clockwise: clockwise\n      }\n    });\n    var initOrUpdate = isFirstRender ? graphic.initProps : graphic.updateProps;\n    initOrUpdate(clipPath, {\n      shape: {\n        endAngle: startAngle + (clockwise ? 1 : -1) * Math.PI * 2\n      }\n    }, seriesModel, cb);\n    return clipPath;\n  },\n\n  /**\n   * @implement\n   */\n  containPoint: function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  }\n});\nvar _default = PieView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar linearMap = _number.linearMap;\n\nvar layout = require(\"../../util/layout\");\n\nvar labelLayout = require(\"./labelLayout\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction _default(seriesType, ecModel, api, payload) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = parsePercent(viewRect.width, api.getWidth());\n    var height = parsePercent(viewRect.height, api.getHeight());\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width) + viewRect.x;\n    var cy = parsePercent(center[1], height) + viewRect.y;\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r,\n          viewRect: viewRect\n        });\n        return;\n      } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r,\n        viewRect: viewRect\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            layout.angle = angle;\n            layout.startAngle = startAngle + dir * idx * angle;\n            layout.endAngle = startAngle + dir * (idx + 1) * angle;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            var angle = layout.angle === minAngle ? minAngle : value * unitRadian;\n            layout.startAngle = currentAngle;\n            layout.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n\n    labelLayout(seriesModel, r, viewRect.width, viewRect.height, viewRect.x, viewRect.y);\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  list.sort(function (a, b) {\n    return a.y - b.y;\n  });\n\n  function shiftDown(start, end, delta, dir) {\n    for (var j = start; j < end; j++) {\n      if (list[j].y + delta > viewTop + viewHeight) {\n        break;\n      }\n\n      list[j].y += delta;\n\n      if (j > start && j + 1 < end && list[j + 1].y > list[j].y + list[j].height) {\n        shiftUp(j, delta / 2);\n        return;\n      }\n    }\n\n    shiftUp(end - 1, delta / 2);\n  }\n\n  function shiftUp(end, delta) {\n    for (var j = end; j >= 0; j--) {\n      if (list[j].y - delta < viewTop) {\n        break;\n      }\n\n      list[j].y -= delta;\n\n      if (j > 0 && list[j].y > list[j - 1].y + list[j - 1].height) {\n        break;\n      }\n    }\n  }\n\n  function changeX(list, isDownList, cx, cy, r, dir) {\n    var lastDeltaX = dir > 0 ? isDownList // right-side\n    ? Number.MAX_VALUE // down\n    : 0 // up\n    : isDownList // left-side\n    ? Number.MAX_VALUE // down\n    : 0; // up\n\n    for (var i = 0, l = list.length; i < l; i++) {\n      if (list[i].labelAlignTo !== 'none') {\n        continue;\n      }\n\n      var deltaY = Math.abs(list[i].y - cy);\n      var length = list[i].len;\n      var length2 = list[i].len2;\n      var deltaX = deltaY < r + length ? Math.sqrt((r + length + length2) * (r + length + length2) - deltaY * deltaY) : Math.abs(list[i].x - cx);\n\n      if (isDownList && deltaX >= lastDeltaX) {\n        // right-down, left-down\n        deltaX = lastDeltaX - 10;\n      }\n\n      if (!isDownList && deltaX <= lastDeltaX) {\n        // right-up, left-up\n        deltaX = lastDeltaX + 10;\n      }\n\n      list[i].x = cx + deltaX * dir;\n      lastDeltaX = deltaX;\n    }\n  }\n\n  var lastY = 0;\n  var delta;\n  var len = list.length;\n  var upList = [];\n  var downList = [];\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].x = farthestX;\n    }\n\n    delta = list[i].y - lastY;\n\n    if (delta < 0) {\n      shiftDown(i, len, -delta, dir);\n    }\n\n    lastY = list[i].y + list[i].height;\n  }\n\n  if (viewHeight - lastY < 0) {\n    shiftUp(len - 1, lastY - viewHeight);\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].y >= cy) {\n      downList.push(list[i]);\n    } else {\n      upList.push(list[i]);\n    }\n  }\n\n  changeX(upList, false, cx, cy, r, dir);\n  changeX(downList, true, cx, cy, r, dir);\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (labelLayoutList[i].x < cx) {\n      leftmostX = Math.min(leftmostX, labelLayoutList[i].x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, labelLayoutList[i].x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n\n    if (isPositionCenter(layout)) {\n      continue;\n    }\n\n    var linePoints = layout.linePoints;\n\n    if (linePoints) {\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var realTextWidth = layout.textRect.width;\n      var targetTextWidth;\n\n      if (isAlignToEdge) {\n        if (layout.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.labelMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.labelMargin - linePoints[2][0] - layout.labelDistance;\n        }\n      } else {\n        if (layout.x < cx) {\n          targetTextWidth = layout.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.x - layout.bleedMargin;\n        }\n      }\n\n      if (targetTextWidth < layout.textRect.width) {\n        layout.text = textContain.truncateText(layout.text, targetTextWidth, layout.font);\n\n        if (layout.labelAlignTo === 'edge') {\n          realTextWidth = textContain.getWidth(layout.text, layout.font);\n        }\n      }\n\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (isAlignToEdge) {\n        if (layout.x < cx) {\n          linePoints[2][0] = viewLeft + layout.labelMargin + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.labelMargin - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (layout.x < cx) {\n          linePoints[2][0] = layout.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = layout.x - layout.labelDistance;\n        }\n\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = layout.y;\n    }\n  }\n}\n\nfunction isPositionCenter(layout) {\n  // Not change x for center label\n  return layout.position === 'center';\n}\n\nfunction _default(seriesModel, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  data.each(function (idx) {\n    var layout = data.getItemLayout(idx);\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get('emphasis.label.position');\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var labelMargin = parsePercent(labelModel.get('margin'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var font = labelModel.getFont();\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n\n    if (layout.angle < minShowLabelRadian) {\n      return;\n    }\n\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = layout.cx;\n    cy = layout.cy;\n    var text = seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx);\n    var textRect = textContain.getBoundingRect(text, font, textAlign, 'top');\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = layout.cx;\n      textY = layout.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dx : layout.r * dx) + cx;\n      var y1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dy : layout.r * dy) + cy;\n      textX = x1 + dx * 3;\n      textY = y1 + dy * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + dx * (labelLineLen + r - layout.r);\n        var y2 = y1 + dy * (labelLineLen + r - layout.r);\n        var x3 = x2 + (dx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = dx < 0 ? viewLeft + labelMargin : viewLeft + viewWidth - labelMargin;\n        } else {\n          textX = x3 + (dx < 0 ? -labelDistance : labelDistance);\n        }\n\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? dx > 0 ? 'right' : 'left' : dx > 0 ? 'left' : 'right';\n    }\n\n    var labelRotate;\n    var rotate = labelModel.get('rotate');\n\n    if (typeof rotate === 'number') {\n      labelRotate = rotate * (Math.PI / 180);\n    } else {\n      labelRotate = rotate ? dx < 0 ? -midAngle + Math.PI : -midAngle : 0;\n    }\n\n    hasLabelRotate = !!labelRotate;\n    layout.label = {\n      x: textX,\n      y: textY,\n      position: labelPosition,\n      height: textRect.height,\n      len: labelLineLen,\n      len2: labelLineLen2,\n      linePoints: linePoints,\n      textAlign: textAlign,\n      verticalAlign: 'middle',\n      rotation: labelRotate,\n      inside: isLabelInside,\n      labelDistance: labelDistance,\n      labelAlignTo: labelAlignTo,\n      labelMargin: labelMargin,\n      bleedMargin: bleedMargin,\n      textRect: textRect,\n      text: text,\n      font: font\n    }; // Not layout the inside label\n\n    if (!isLabelInside) {\n      labelLayoutList.push(layout.label);\n    }\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By defualt use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimension(dim, true);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // 'line' 'shadow' 'cross' 'none'.\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n\n      /* eslint-disable */\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n\n      /* eslint-enable */\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip主体内容\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    renderMode: 'auto',\n    // 'auto' | 'html' | 'richText'\n    // 'auto': use html by default, and use non-html if `document` is not defined\n    // 'html': use html for tooltip\n    // 'richText': use canvas, svg, and etc. for tooltip\n    // 位置 {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    // 是否约束 content 在 viewRect 中。默认 false 是为了兼容以前版本。\n    confine: false,\n    // 内容格式器：{string}（Template） ¦ {Function}\n    // formatter: null\n    showDelay: 0,\n    // 隐藏延迟，单位ms\n    hideDelay: 100,\n    // 动画变换时间，单位s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 提示背景颜色，默认为透明度为0.7的黑色\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // 提示边框颜色\n    borderColor: '#333',\n    // 提示边框圆角，单位px，默认为4\n    borderRadius: 4,\n    // 提示边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 提示内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // 坐标轴指示器，坐标轴触发有效\n    axisPointer: {\n      // 默认为直线\n      // 可选为：'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type 为 line 的时候有效，指定 tooltip line 所在的轴，可选\n      // 可选 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // 默认 'auto'，会选择类型为 category 的轴，对于双数值轴，笛卡尔坐标系会默认选择 x 轴\n      // 极坐标系会默认选择 angle 轴\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api, {\n        appendToBody: tooltipModel.get('appendToBody', true)\n      });\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update();\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easyer to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) shold be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData(dataType);\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on cooridinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar domUtil = require(\"zrender/lib/core/dom\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      domUtil.transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @param {HTMLElement} container\n * @param {ExtensionAPI} api\n * @param {Object} [opt]\n * @param {boolean} [opt.appendToBody]\n *        `false`: the DOM element will be inside the container. Default value.\n *        `true`: the DOM element will be appended to HTML body, which avoid\n *                some overflow clip but intrude outside of the container.\n * @constructor\n */\n\n\nfunction TooltipContent(container, api, opt) {\n  if (env.wxa) {\n    return null;\n  }\n\n  var el = document.createElement('div');\n  el.domBelongToZr = true;\n  this.el = el;\n  var zr = this._zr = api.getZr();\n  var appendToBody = this._appendToBody = opt && opt.appendToBody;\n  this._styleCoord = [0, 0];\n  makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n  if (appendToBody) {\n    document.body.appendChild(el);\n  } else {\n    container.appendChild(el);\n  }\n\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout; // FIXME\n  // Is it needed to trigger zr event manually if\n  // the browser do not support `pointer-events: none`.\n\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // `pointer-events: none` is set to tooltip content div\n      // if `enterable` is set as `false`, and `el.onmousemove`\n      // can not be triggered. But in browser that do not\n      // support `pointer-events`, we need to do this:\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      var zrViewportRoot = zr.painter.getViewportRoot();\n      eventUtil.normalizeEvent(zrViewportRoot, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // Hide the tooltip\n    // PENDING\n    // this.hide();\n\n  },\n  show: function (tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    var styleCoord = this._styleCoord;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // Because of the reason described in:\n    // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    // we should set initial value to `left` and `top`.\n    + ';left:' + styleCoord[0] + 'px;top:' + styleCoord[1] + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none'; // If mouse occsionally move over the tooltip, a mouseout event will be\n    // triggered by canvas, and cuase some unexpectable result like dragging\n    // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n    // it. Although it is not suppored by IE8~IE10, fortunately it is a rare\n    // scenario.\n\n    el.style.pointerEvents = this._enterable ? 'auto' : 'none';\n    this._show = true;\n  },\n  setContent: function (content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n    var style = this.el.style;\n    style.left = styleCoord[0] + 'px';\n    style.top = styleCoord[1] + 'px';\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  dispose: function () {\n    this.el.parentNode.removeChild(this.el);\n  },\n  getOuterSize: function () {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var stl = document.defaultView.getComputedStyle(this.el);\n\n      if (stl) {\n        width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n        height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n      }\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Group from 'zrender/src/container/Group';\n\n/**\n * @alias module:echarts/component/tooltip/TooltipRichContent\n * @constructor\n */\nfunction TooltipRichContent(api) {\n  this._zr = api.getZr();\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n}\n\nTooltipRichContent.prototype = {\n  constructor: TooltipRichContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {// noop\n  },\n  show: function (tooltipModel) {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.attr('show', true);\n    this._show = true;\n  },\n\n  /**\n   * Set tooltip content\n   *\n   * @param {string} content rich text string of content\n   * @param {Object} markerRich rich text style\n   * @param {Object} tooltipModel tooltip model\n   */\n  setContent: function (content, markerRich, tooltipModel) {\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var markers = {};\n    var text = content;\n    var prefix = '{marker';\n    var suffix = '|}';\n    var startId = text.indexOf(prefix);\n\n    while (startId >= 0) {\n      var endId = text.indexOf(suffix);\n      var name = text.substr(startId + prefix.length, endId - startId - prefix.length);\n\n      if (name.indexOf('sub') > -1) {\n        markers['marker' + name] = {\n          textWidth: 4,\n          textHeight: 4,\n          textBorderRadius: 2,\n          textBackgroundColor: markerRich[name],\n          // TODO: textOffset is not implemented for rich text\n          textOffset: [3, 0]\n        };\n      } else {\n        markers['marker' + name] = {\n          textWidth: 10,\n          textHeight: 10,\n          textBorderRadius: 5,\n          textBackgroundColor: markerRich[name]\n        };\n      }\n\n      text = text.substr(endId + 1);\n      startId = text.indexOf('{marker');\n    }\n\n    this.el = new Text({\n      style: {\n        rich: markers,\n        text: content,\n        textLineHeight: 20,\n        textBackgroundColor: tooltipModel.get('backgroundColor'),\n        textBorderRadius: tooltipModel.get('borderRadius'),\n        textFill: tooltipModel.get('textStyle.color'),\n        textPadding: tooltipModel.get('padding')\n      },\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var bounding = this.el.getBoundingRect();\n    return [bounding.width, bounding.height];\n  },\n  moveTo: function (x, y) {\n    if (this.el) {\n      this.el.attr('position', [x, y]);\n    }\n  },\n  hide: function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  getOuterSize: function () {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  }\n};\nvar _default = TooltipRichContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    zrUtil.each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n/**\n * @event legendToggleSelect\n * @type {Object}\n * @property {string} type 'legendToggleSelect'\n * @property {string} [from]\n * @property {string} name Series name or data item name\n */\n\n\necharts.registerAction('legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));\necharts.registerAction('legendAllSelect', 'legendselectall', zrUtil.curry(legendSelectActionHandler, 'allSelect'));\necharts.registerAction('legendInverseSelect', 'legendinverseselect', zrUtil.curry(legendSelectActionHandler, 'inverseSelect'));\n/**\n * @event legendSelect\n * @type {Object}\n * @property {string} type 'legendSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));\n/**\n * @event legendUnSelect\n * @type {Object}\n * @property {string} type 'legendUnSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar LegendModel = require(\"./LegendModel\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar mergeLayoutParam = _layout.mergeLayoutParam;\nvar getLayoutParams = _layout.getLayoutParams;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ScrollableLegendModel = LegendModel.extend({\n  type: 'legend.scroll',\n\n  /**\n   * @param {number} scrollDataIndex\n   */\n  setScrollDataIndex: function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  },\n  defaultOption: {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    // 'start' or 'end'\n    pageFormatter: '{current}/{total}',\n    // If null/undefined, do not show page.\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: '#2f4554',\n    pageIconInactiveColor: '#aaa',\n    pageIconSize: 15,\n    // Can be [10, 3], which represents [width, height]\n    pageTextStyle: {\n      color: '#333'\n    },\n    animationDurationUpdate: 800\n  },\n\n  /**\n   * @override\n   */\n  init: function (option, parentModel, ecModel, extraOpt) {\n    var inputPositionParams = getLayoutParams(option);\n    ScrollableLegendModel.superCall(this, 'init', option, parentModel, ecModel, extraOpt);\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function (option, extraOpt) {\n    ScrollableLegendModel.superCall(this, 'mergeOption', option, extraOpt);\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  }\n}); // Do not `ignoreSize` to enable setting {left: 10, right: 10}.\n\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\n\nvar _default = ScrollableLegendModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar LegendView = require(\"./LegendView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Separate legend and scrollable legend to reduce package size.\n */\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\nvar ScrollableLegendView = LegendView.extend({\n  type: 'legend.scroll',\n  newlineDisabled: true,\n  init: function () {\n    ScrollableLegendView.superCall(this, 'init');\n    /**\n     * @private\n     * @type {number} For `scroll`.\n     */\n\n    this._currentIndex = 0;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._containerGroup = new Group());\n\n    this._containerGroup.add(this.getContentGroup());\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n\n    this.group.add(this._controllerGroup = new Group());\n    /**\n     *\n     * @private\n     */\n\n    this._showController;\n  },\n\n  /**\n   * @override\n   */\n  resetInner: function () {\n    ScrollableLegendView.superCall(this, 'resetInner');\n\n    this._controllerGroup.removeAll();\n\n    this._containerGroup.removeClipPath();\n\n    this._containerGroup.__rectSize = null;\n  },\n\n  /**\n   * @override\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var me = this; // Render content items.\n\n    ScrollableLegendView.superCall(this, 'renderInner', itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    var controllerGroup = this._controllerGroup; // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n\n    var pageIconSize = legendModel.get('pageIconSize', true);\n\n    if (!zrUtil.isArray(pageIconSize)) {\n      pageIconSize = [pageIconSize, pageIconSize];\n    }\n\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        textFill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        textVerticalAlign: 'middle',\n        textAlign: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(me._pageGo, me, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSize[0] / 2,\n        y: -pageIconSize[1] / 2,\n        width: pageIconSize[0],\n        height: pageIconSize[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  },\n\n  /**\n   * @override\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx);\n\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.attr('position', selectorPos);\n    }\n\n    return mainRect;\n  },\n  _layoutContentAndController: function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup; // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box( // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh];\n    var contentPos = [-contentRect.x, -contentRect.y]; // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup.position[orientIdx];\n    } // Layout container group based on 0.\n\n\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true)); // Place containerGroup and controllerGroup and contentGroup.\n\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true); // controller is on the right / bottom.\n\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      } // controller is on the left / top.\n      else {\n          containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n        }\n    } // Always align controller to content as 'middle'.\n\n\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.attr('position', contentPos);\n    containerGroup.attr('position', containerPos);\n    controllerGroup.attr('position', controllerPos); // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n\n    var mainRect = {\n      x: 0,\n      y: 0\n    }; // Consider content may be overflow (should be clipped).\n\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]); // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      })); // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    } // Content translate animation.\n\n\n    var pageInfo = this._getPageInfo(legendModel);\n\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      position: pageInfo.contentPosition\n    }, // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : false);\n\n    this._updatePageInfoView(legendModel, pageInfo);\n\n    return mainRect;\n  },\n  _pageGo: function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  },\n  _updatePageInfoView: function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var canJump = pageInfo[name + 'DataIndex'] != null;\n      var icon = controllerGroup.childOfName(name);\n\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current).replace('{total}', total) : pageFormatter({\n      current: current,\n      total: total\n    }));\n  },\n\n  /**\n   * @param {module:echarts/model/Model} legendModel\n   * @return {Object} {\n   *  contentPosition: Array.<number>, null when data item not found.\n   *  pageIndex: number, null when data item not found.\n   *  pageCount: number, always be a number, can be 0.\n   *  pagePrevDataIndex: number, null when no previous page.\n   *  pageNextDataIndex: number, null when no next page.\n   * }\n   */\n  _getPageInfo: function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: contentGroup.position.slice(),\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n\n    if (!targetItem) {\n      return result;\n    }\n\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s; // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize || // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n\n          ++result.pageCount;\n        }\n      }\n\n      winEndItemInfo = currItemInfo;\n    }\n\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)) && // e.g., when page size is smaller than item size.\n      winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n\n      winStartItemInfo = currItemInfo;\n    }\n\n    return result;\n\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el.position[orientIdx];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  },\n  _findTargetItemIndex: function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex; // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defualtIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  }\n});\nvar _default = ScrollableLegendView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @event legendScroll\n * @type {Object}\n * @property {string} type 'legendScroll'\n * @property {string} scrollDataIndex\n */\necharts.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n  var scrollDataIndex = payload.scrollDataIndex;\n  scrollDataIndex != null && ecModel.eachComponent({\n    mainType: 'legend',\n    subType: 'scroll',\n    query: payload\n  }, function (legendModel) {\n    legendModel.setScrollDataIndex(scrollDataIndex);\n  });\n});"],"sourceRoot":""}